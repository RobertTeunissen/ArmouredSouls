
> armoured-souls-backend@0.1.0 test
> jest

FAIL tests/cycleStepDuration.property.test.ts (7.502 s)
  ● Property 15: Cycle Step Duration Recording › Property 15.1: Each cycle step has a step completion event with duration

    Property failed after 3 tests
    { seed: -378807736, path: "2:0:1:2:1:0:0:5:2", endOnFailure: true }
    Counterexample: [1,1,[6789]]
    Shrunk 8 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      80 |
      81 |           // Property: Number of step events equals number of steps
    > 82 |           expect(stepEvents).toHaveLength(numberOfSteps);
         |                              ^
      83 |
      84 |           // Property: Each event has a duration field
      85 |           for (const event of stepEvents) {

      at tests/cycleStepDuration.property.test.ts:82:30
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:43:5)

  ● Property 15: Cycle Step Duration Recording › Property 15.2: Sum of step durations approximately equals total cycle duration (within 5% tolerance)

    Property failed after 1 tests
    { seed: 1677212814, path: "0:0:2:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,[100,100,100],0]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/cycleStepDuration.property.test.ts:120:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:107:5)

  ● Property 15: Cycle Step Duration Recording › Property 15.3: Step durations are recorded in sequence order

    Property failed after 1 tests
    { seed: 2141014443, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,[50,50,50,50,50]]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/cycleStepDuration.property.test.ts:189:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:177:5)

  ● Property 15: Cycle Step Duration Recording › Property 15.5: Step completion events include step name and number

    Property failed after 1 tests
    { seed: -117807609, path: "0:0:0:2:3:1:1:4:4:1:3:0:2:2:1:5:3:0:7:0:0:6:0:10:11:0:0:1:1:1:6:1:1:0:6:3:3:3:0:2:3:2:3:2:3:3", endOnFailure: true }
    Counterexample: [1,[{"name":"EPg4 ","duration":893},{"name":"! 7!,","duration":100},{"name":" O@AU","duration":100}]]
    Shrunk 45 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: "EPg4 "
    Received: " O@AU"

      310 |           for (let i = 0; i < steps.length; i++) {
      311 |             const payload = stepEvents[i].payload as any;
    > 312 |             expect(payload.stepName).toBe(steps[i].name as string);
          |                                      ^
      313 |             expect(payload.stepNumber).toBe(i + 1);
      314 |             expect(payload.duration).toBe(steps[i].duration as number);
      315 |           }

      at tests/cycleStepDuration.property.test.ts:312:38
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:273:5)

  ● Property 15: Cycle Step Duration Recording › Property 15.6: Multiple cycles can be logged independently with correct durations

    Property failed after 1 tests
    { seed: -805788778, path: "0:0:0:0:0:0:0:1:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [[{"cycleNumber":1,"stepDurations":[100,100,100]},{"cycleNumber":1,"stepDurations":[100,100,100]}]]
    Shrunk 14 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 0
    Received array:  []

      378 |
      379 |             // Property: Correct number of steps per cycle
    > 380 |             expect(stepEvents).toHaveLength(cycle.stepDurations.length);
          |                                ^
      381 |
      382 |             // Property: Durations match for each cycle
      383 |             for (let i = 0; i < cycle.stepDurations.length; i++) {

      at tests/cycleStepDuration.property.test.ts:380:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:326:5)

FAIL tests/statsUpdatedBeforeStreamingRevenue.property.test.ts (9.244 s)
  ● Console

    console.log
      [Streaming] TestRobot1_1771959088178_0.5167997119010074 earned ₡8,097 from Battle #1

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088187_0.41950919981635515 earned ₡8,070 from Battle #1

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088178_0.5167997119010074 (User 127) vs TestRobot2_1771959088187_0.41950919981635515 (User 128) | Winner: TestRobot2_1771959088187_0.41950919981635515 | Rewards: ₡72,000 / ₡12,000 | Prestige: +30 | Fame: +19

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959088369_0.2016538907600265 earned ₡4,072 from Battle #4

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088373_0.03407488214008969 earned ₡8,040 from Battle #4

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088369_0.2016538907600265 (User 127) vs TestRobot2_1771959088373_0.03407488214008969 (User 128) | Winner: TestRobot1_1771959088369_0.2016538907600265 | Rewards: ₡72,000 / ₡12,000 | Prestige: +30 | Fame: +15

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959088502_0.6259457445274895 earned ₡4,003 from Battle #7

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088505_0.46181036988343893 earned ₡8,064 from Battle #7

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088502_0.6259457445274895 (User 127) vs TestRobot2_1771959088505_0.46181036988343893 (User 128) | Winner: TestRobot2_1771959088505_0.46181036988343893 | Rewards: ₡72,000 / ₡12,000 | Prestige: +30 | Fame: +15

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959088633_0.4074142788793661 earned ₡4,003 from Battle #11

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088635_0.4585928030630463 earned ₡8,046 from Battle #11

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088633_0.4074142788793661 (User 127) vs TestRobot2_1771959088635_0.4585928030630463 (User 128) | Winner: TestRobot2_1771959088635_0.4585928030630463 | Rewards: ₡72,000 / ₡12,000 | Prestige: +30 | Fame: +19 | Kill: TestRobot2_1771959088635_0.4585928030630463

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959088757_0.2672157957565282 earned ₡4,003 from Battle #14

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088760_0.41305174845575054 earned ₡8,007 from Battle #14

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088757_0.2672157957565282 (User 127) vs TestRobot2_1771959088760_0.41305174845575054 (User 128) | Winner: Draw | Rewards: ₡12,000 / ₡12,000 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959088866_0.5210877917833879 earned ₡1,000 from Battle #18

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088869_0.5358821709407416 earned ₡8,007 from Battle #18

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088866_0.5210877917833879 (User 127) vs TestRobot2_1771959088869_0.5358821709407416 (User 128) | Winner: Draw | Rewards: ₡12,000 / ₡12,000 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959088964_0.8915904815231152 earned ₡1,000 from Battle #20

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088967_0.7768862470901233 earned ₡1,004 from Battle #20

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088964_0.8915904815231152 (User 127) vs TestRobot2_1771959088967_0.7768862470901233 (User 128) | Winner: TestRobot2_1771959088967_0.7768862470901233 | Rewards: ₡72,000 / ₡12,000 | Prestige: +30 | Fame: +15

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089057_0.09284558301824986 earned ₡1,000 from Battle #24

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089060_0.9344947790000335 earned ₡1,001 from Battle #24

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089057_0.09284558301824986 (User 127) vs TestRobot2_1771959089060_0.9344947790000335 (User 128) | Winner: TestRobot2_1771959089060_0.9344947790000335 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089193_0.3833361827865771 earned ₡3,601 from Battle #29

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089195_0.3942222209550158 earned ₡1,001 from Battle #29

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089193_0.3833361827865771 (User 127) vs TestRobot2_1771959089195_0.3942222209550158 (User 128) | Winner: TestRobot2_1771959089195_0.3942222209550158 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089296_0.6565725229517491 earned ₡5,253 from Battle #34

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089299_0.12695668488702494 earned ₡1,001 from Battle #34

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089296_0.6565725229517491 (User 127) vs TestRobot2_1771959089299_0.12695668488702494 (User 128) | Winner: TestRobot2_1771959089299_0.12695668488702494 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089401_0.8435985884483325 earned ₡28,375 from Battle #40

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089405_0.876890826461882 earned ₡1,000 from Battle #40

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089401_0.8435985884483325 (User 127) vs TestRobot2_1771959089405_0.876890826461882 (User 128) | Winner: TestRobot1_1771959089401_0.8435985884483325 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089516_0.19523818324434195 earned ₡4,646 from Battle #43

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089519_0.3474883895014119 earned ₡1,001 from Battle #43

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089516_0.19523818324434195 (User 127) vs TestRobot2_1771959089519_0.3474883895014119 (User 128) | Winner: TestRobot2_1771959089519_0.3474883895014119 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089617_0.39398885978028975 earned ₡3,200 from Battle #47

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089619_0.683055552086805 earned ₡1,000 from Battle #47

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959089723_0.34804784081425677 earned ₡3,162 from Battle #52

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089726_0.6034523225408767 earned ₡1,001 from Battle #52

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089723_0.34804784081425677 (User 127) vs TestRobot2_1771959089726_0.6034523225408767 (User 128) | Winner: TestRobot2_1771959089726_0.6034523225408767 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089823_0.18665655022653338 earned ₡3,181 from Battle #57

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089826_0.5751261761917376 earned ₡1,001 from Battle #57

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089823_0.18665655022653338 (User 127) vs TestRobot2_1771959089826_0.5751261761917376 (User 128) | Winner: TestRobot2_1771959089826_0.5751261761917376 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089923_0.8114137657496631 earned ₡3,190 from Battle #60

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089925_0.6973215477338884 earned ₡1,001 from Battle #60

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959090007_0.17918062715296856 earned ₡3,188 from Battle #64

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090010_0.5399905277763749 earned ₡1,000 from Battle #64

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090007_0.17918062715296856 (User 127) vs TestRobot2_1771959090010_0.5399905277763749 (User 128) | Winner: TestRobot1_1771959090007_0.17918062715296856 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090130_0.6260170332786607 earned ₡1,010 from Battle #70

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090134_0.8216909078303452 earned ₡1,000 from Battle #70

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090130_0.6260170332786607 (User 127) vs TestRobot2_1771959090134_0.8216909078303452 (User 128) | Winner: TestRobot1_1771959090130_0.6260170332786607 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090256_0.05944361875364834 earned ₡2,101 from Battle #74

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090259_0.9379400461987364 earned ₡1,000 from Battle #74

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090256_0.05944361875364834 (User 127) vs TestRobot2_1771959090259_0.9379400461987364 (User 128) | Winner: TestRobot1_1771959090256_0.05944361875364834 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: TestRobot1_1771959090256_0.05944361875364834

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090368_0.3762630246242761 earned ₡2,645 from Battle #78

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090371_0.6852748077173807 earned ₡1,000 from Battle #78

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090368_0.3762630246242761 (User 127) vs TestRobot2_1771959090371_0.6852748077173807 (User 128) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090473_0.19747492496447094 earned ₡2,918 from Battle #81

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090477_0.35115717694400217 earned ₡1,000 from Battle #81

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090473_0.19747492496447094 (User 127) vs TestRobot2_1771959090477_0.35115717694400217 (User 128) | Winner: TestRobot1_1771959090473_0.19747492496447094 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090593_0.6324493263817923 earned ₡3,054 from Battle #86

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090596_0.20728102099811818 earned ₡1,001 from Battle #86

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090593_0.6324493263817923 (User 127) vs TestRobot2_1771959090596_0.20728102099811818 (User 128) | Winner: TestRobot2_1771959090596_0.20728102099811818 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771959090596_0.20728102099811818

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090689_0.390308021637109 earned ₡3,123 from Battle #91

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090692_0.664543334686274 earned ₡1,000 from Battle #91

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090689_0.390308021637109 (User 127) vs TestRobot2_1771959090692_0.664543334686274 (User 128) | Winner: TestRobot1_1771959090689_0.390308021637109 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090795_0.4297377139932992 earned ₡3,157 from Battle #94

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090798_0.3390169109946065 earned ₡1,000 from Battle #94

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090795_0.4297377139932992 (User 127) vs TestRobot2_1771959090798_0.3390169109946065 (User 128) | Winner: TestRobot1_1771959090795_0.4297377139932992 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090905_0.47082493124639524 earned ₡3,174 from Battle #98

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090908_0.6650664327071314 earned ₡1,000 from Battle #98

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959090985_0.7598114580667933 earned ₡3,170 from Battle #101

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090987_0.7813164552192436 earned ₡1,001 from Battle #101

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959091065_0.7613009408443856 earned ₡3,167 from Battle #105

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091068_0.980894884327933 earned ₡1,001 from Battle #105

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959091144_0.32062283920961043 earned ₡3,165 from Battle #108

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091147_0.989568742210992 earned ₡1,000 from Battle #108

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959091220_0.8086388001924267 earned ₡3,145 from Battle #111

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091223_0.4016586128472933 earned ₡1,001 from Battle #111

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091220_0.8086388001924267 (User 127) vs TestRobot2_1771959091223_0.4016586128472933 (User 128) | Winner: TestRobot2_1771959091223_0.4016586128472933 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771959091223_0.4016586128472933

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091325_0.28360996820695783 earned ₡3,154 from Battle #115

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091327_0.2099799639523311 earned ₡1,001 from Battle #115

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091325_0.28360996820695783 (User 127) vs TestRobot2_1771959091327_0.2099799639523311 (User 128) | Winner: TestRobot2_1771959091327_0.2099799639523311 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091426_0.7076734082531427 earned ₡3,161 from Battle #120

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091428_0.998754419698585 earned ₡1,000 from Battle #120

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091426_0.7076734082531427 (User 127) vs TestRobot2_1771959091428_0.998754419698585 (User 128) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091531_0.16679926499027076 earned ₡3,155 from Battle #124

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091534_0.08254293149082959 earned ₡1,001 from Battle #124

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091531_0.16679926499027076 (User 127) vs TestRobot2_1771959091534_0.08254293149082959 (User 128) | Winner: TestRobot2_1771959091534_0.08254293149082959 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091622_0.4183570913718119 earned ₡3,160 from Battle #128

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091626_0.015714981147556206 earned ₡1,000 from Battle #128

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959091703_0.8188817526287987 earned ₡3,141 from Battle #132

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091705_0.561953761216558 earned ₡1,001 from Battle #132

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959091787_0.6597823328385574 earned ₡3,139 from Battle #134

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091789_0.9831628955754674 earned ₡1,001 from Battle #134

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091787_0.6597823328385574 (User 127) vs TestRobot2_1771959091789_0.9831628955754674 (User 128) | Winner: TestRobot2_1771959091789_0.9831628955754674 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091885_0.5686543881656505 earned ₡3,140 from Battle #138

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091888_0.36081416657628784 earned ₡1,000 from Battle #138

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091885_0.5686543881656505 (User 127) vs TestRobot2_1771959091888_0.36081416657628784 (User 128) | Winner: TestRobot1_1771959091885_0.5686543881656505 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092003_0.46864106202580935 earned ₡3,141 from Battle #143

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092005_0.007443043635734781 earned ₡1,000 from Battle #143

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092003_0.46864106202580935 (User 127) vs TestRobot2_1771959092005_0.007443043635734781 (User 128) | Winner: TestRobot1_1771959092003_0.46864106202580935 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092202_0.07927708506176334 earned ₡3,141 from Battle #146

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092205_0.22370635253982707 earned ₡1,000 from Battle #146

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092202_0.07927708506176334 (User 127) vs TestRobot2_1771959092205_0.22370635253982707 (User 128) | Winner: TestRobot1_1771959092202_0.07927708506176334 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092356_0.9240147522309348 earned ₡2,006 from Battle #151

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092363_0.3847230508987115 earned ₡1,000 from Battle #151

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: diamond | TestRobot1_1771959092356_0.9240147522309348 (User 127) vs TestRobot2_1771959092363_0.3847230508987115 (User 128) | Winner: TestRobot1_1771959092356_0.9240147522309348 | Rewards: ₡139,000 / ₡24,000 | Prestige: +50 | Fame: +25

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092468_0.27486653024770147 earned ₡1,008 from Battle #153

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092473_0.02963696612792588 earned ₡1,000 from Battle #153

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: diamond | TestRobot1_1771959092468_0.27486653024770147 (User 127) vs TestRobot2_1771959092473_0.02963696612792588 (User 128) | Winner: TestRobot1_1771959092468_0.27486653024770147 | Rewards: ₡139,000 / ₡24,000 | Prestige: +50 | Fame: +38

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092567_0.634344791784527 earned ₡1,001 from Battle #157

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092576_0.1182293473295114 earned ₡1,000 from Battle #157

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092567_0.634344791784527 (User 127) vs TestRobot2_1771959092576_0.1182293473295114 (User 128) | Winner: TestRobot1_1771959092567_0.634344791784527 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092692_0.7843740668093353 earned ₡2,999 from Battle #160

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092695_0.5643905672736752 earned ₡1,000 from Battle #160

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092692_0.7843740668093353 (User 127) vs TestRobot2_1771959092695_0.5643905672736752 (User 128) | Winner: TestRobot1_1771959092692_0.7843740668093353 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092795_0.900259888477542 earned ₡1,002 from Battle #164

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092798_0.8093394706906692 earned ₡1,000 from Battle #164

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Streaming] TestRobot1_1771959092894_0.44279262649819096 earned ₡1,001 from Battle #167

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092897_0.9142966387099666 earned ₡1,000 from Battle #167

      at processBattle (src/services/battleOrchestrator.ts:667:15)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5: Stats updated before streaming revenue calculation

    Property failed after 1 tests
    { seed: 1159683976, path: "0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0,0,0,0,"bronze"]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).not.toBeNull()

    Received: null

      267 |           });
      268 |
    > 269 |           expect(battleCompleteEvent).not.toBeNull();
          |                                           ^
      270 |           const payload = battleCompleteEvent!.payload as any;
      271 |
      272 |           // Get updated robot stats from database

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:269:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:189:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.1: Battle count increments by exactly 1 per battle

    Property failed after 5 tests
    { seed: 991538798, path: "4:2:8:0:0:0:4:0", endOnFailure: true }
    Counterexample: [0,10691]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at processBattle (src/services/battleOrchestrator.ts:761:3)
      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:408:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:385:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.2: Winner fame increases after battle

    Property failed after 1 tests
    { seed: -1025564951, path: "0:0:0", endOnFailure: true }
    Counterexample: [0,"bronze"]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    TypeError: Cannot read properties of null (reading 'payload')

      485 |           });
      486 |
    > 487 |           const payload = battleCompleteEvent!.payload as any;
          |                                                ^
      488 |
      489 |           // Get updated robot stats
      490 |           const updatedRobot1 = await prisma.robot.findUnique({

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:487:48
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:438:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.3: Stats are always updated before streaming revenue calculation

    Property failed after 1 tests
    { seed: -234408839, path: "0:0:0", endOnFailure: true }
    Counterexample: [0,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at processBattle (src/services/battleOrchestrator.ts:761:3)
      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:549:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:526:5)

FAIL tests/cyclePerformanceMonitoring.test.ts
  ● Cycle Performance Monitoring Service › detectStepDegradation › should detect performance degradation when recent average exceeds 150% of baseline

    expect(received).not.toBeNull()

    Received: null

      54 |       const alert = await service.detectStepDegradation(stepName, 10, 100);
      55 |
    > 56 |       expect(alert).not.toBeNull();
         |                         ^
      57 |       expect(alert!.stepName).toBe(stepName);
      58 |       expect(alert!.currentAverageDuration).toBe(2000);
      59 |       expect(alert!.baselineAverageDuration).toBe(1000);

      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:56:25)

  ● Cycle Performance Monitoring Service › detectStepDegradation › should not detect degradation when recent average is within threshold

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:69:9)

  ● Cycle Performance Monitoring Service › detectStepDegradation › should return null when there is no baseline data

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:93:9)

  ● Cycle Performance Monitoring Service › detectStepDegradation › should classify degradation severity correctly

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:107:9)

  ● Cycle Performance Monitoring Service › detectAllStepDegradations › should detect degradation across multiple steps

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 0

      151 |       const alerts = await service.detectAllStepDegradations(10, 100);
      152 |
    > 153 |       expect(alerts.length).toBe(2); // Only step1 and step3 should be flagged
          |                             ^
      154 |       // Both have 100% degradation, so order may vary - just check both are present
      155 |       const stepNames = alerts.map(a => a.stepName);
      156 |       expect(stepNames).toContain('step1');

      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:153:29)

  ● Cycle Performance Monitoring Service › getCyclePerformanceMetrics › should calculate performance metrics for a cycle range

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:168:9)

  ● Cycle Performance Monitoring Service › getCyclePerformanceMetrics › should identify slowest steps

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:190:9)

  ● Cycle Performance Monitoring Service › getCycleExecutionTrend › should detect improving trend when recent cycles are faster

    No cycle data available

      356 |
      357 |     if (!latestCycle) {
    > 358 |       throw new Error('No cycle data available');
          |             ^
      359 |     }
      360 |
      361 |     const currentCycle = latestCycle.cycleNumber;

      at CyclePerformanceMonitoringService.getCycleExecutionTrend (src/services/cyclePerformanceMonitoringService.ts:358:13)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:250:21)

  ● Cycle Performance Monitoring Service › getCycleExecutionTrend › should detect degrading trend when recent cycles are slower

    Not enough cycle data for trend analysis

      380 |
      381 |     if (cycleEvents.length < 2) {
    > 382 |       throw new Error('Not enough cycle data for trend analysis');
          |             ^
      383 |     }
      384 |
      385 |     const durations = cycleEvents.map((e) => (e.payload as any).totalDuration as number);

      at CyclePerformanceMonitoringService.getCycleExecutionTrend (src/services/cyclePerformanceMonitoringService.ts:382:13)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:271:21)

FAIL tests/eventQueryability.property.test.ts (12.045 s)
  ● Property 5: Event Queryability › cycle range filtering returns only events within range

    Property failed after 1 tests
    { seed: 885584397, path: "0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [[1,1,1,1,1],1,1]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at tests/eventQueryability.property.test.ts:53:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:34:5)

  ● Property 5: Event Queryability › user filtering returns only events for that user

    Property failed after 2 tests
    { seed: -1979773952, path: "1:0:1:0:14:0:1:1:7:7:11:1:1:1:0:0:0:0:0:0:0:0:0:0:0:1:0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,[{"userId":1,"amount":0},{"userId":1,"amount":0},{"userId":1,"amount":0},{"userId":1,"amount":0},{"userId":1,"amount":0}]]
    Shrunk 33 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 1

      117 |           // Verify count matches
      118 |           const expectedCount = events.filter(e => e.userId === targetUserId).length;
    > 119 |           expect(result.events.length).toBe(expectedCount);
          |                                        ^
      120 |         }
      121 |       ),
      122 |       { numRuns: 30 }

      at tests/eventQueryability.property.test.ts:119:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:82:5)

  ● Property 5: Event Queryability › event type filtering returns only matching types

    Property failed after 1 tests
    { seed: 57542265, path: "0:0:1:0", endOnFailure: true }
    Counterexample: [["cycle_start"],5]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at tests/eventQueryability.property.test.ts:146:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:132:5)

  ● Property 5: Event Queryability › pagination returns correct subset

    Property failed after 1 tests
    { seed: -629045070, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [10,1,0]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 21

      208 |
      209 |           // Verify total count
    > 210 |           expect(result.total).toBe(totalEvents);
          |                                ^
      211 |         }
      212 |       ),
      213 |       { numRuns: 30 }

      at tests/eventQueryability.property.test.ts:210:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:180:5)

  ● Property 5: Event Queryability › sorting maintains order

    Property failed after 22 tests
    { seed: -265726314, path: "21", endOnFailure: true }
    Counterexample: [[16,16,13,7,16],"asc"]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at tests/eventQueryability.property.test.ts:236:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:223:5)

  ● Property 5: Event Queryability › combined filters are applied correctly

    Property failed after 3 tests
    { seed: -1498040472, path: "2:0:0:2:0:0:0:1:0:1:1:0:3:0:0:5:2:0:0:0:0:0:0:4:0:0:0:4:4", endOnFailure: true }
    Counterexample: [1,1,6,[{"cycle":1,"userId":1},{"cycle":4,"userId":5},{"cycle":1,"userId":2},{"cycle":1,"userId":1},{"cycle":1,"userId":1},{__proto__:null,"cycle":1,"userId":1},{"cycle":1,"userId":1},{__proto__:null,"cycle":1,"userId":1},{__proto__:null,"cycle":3,"userId":4},{"cycle":1,"userId":4}]]
    Shrunk 28 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 6
    Received: 1

      315 |               e.cycle <= rangeEnd
      316 |           ).length;
    > 317 |           expect(result.events.length).toBe(expectedCount);
          |                                        ^
      318 |         }
      319 |       ),
      320 |       { numRuns: 25 }

      at tests/eventQueryability.property.test.ts:317:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:268:5)

  ● Property 5: Event Queryability › empty result set handled correctly

    Property failed after 4 tests
    { seed: -1486533427, path: "3", endOnFailure: true }
    Counterexample: [1,106]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"cycleNumber": 106, "eventTimestamp": 2026-02-24T18:51:32.276Z, "eventType": "cycle_step_complete", "id": 6236n, "metadata": null, "payload": {"duration": 84, "stepName": "step_y", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 3, "userId": null}]

      345 |
      346 |           // Verify empty result
    > 347 |           expect(result.events).toHaveLength(0);
          |                                 ^
      348 |           expect(result.total).toBe(0);
      349 |           expect(result.hasMore).toBe(false);
      350 |         }

      at tests/eventQueryability.property.test.ts:347:33
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:330:5)

  ● Property 5: Event Queryability › count matches filtered results

    Property failed after 3 tests
    { seed: 1104883702, path: "2:9:9:4:1:18:0:14:16:7:3:3:0:6", endOnFailure: true }
    Counterexample: [[{__proto__:null,"cycle":6,"userId":5},{__proto__:null,"cycle":3,"userId":9},{"cycle":1,"userId":2},{"cycle":11,"userId":7},{"cycle":12,"userId":9},{"cycle":3,"userId":5},{__proto__:null,"cycle":9,"userId":7},{"cycle":1,"userId":1},{"cycle":20,"userId":2},{"cycle":10,"userId":4}],10]
    Shrunk 13 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCreditChange (src/services/eventLogger.ts:401:5)
      at tests/eventQueryability.property.test.ts:378:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:362:5)

FAIL tests/creditChangeAuditTrail.property.test.ts
  ● Property 3: Credit Change Audit Trail › sum of credit changes equals balance delta

    Property failed after 1 tests
    { seed: 1930274476, path: "0:6:1:0:0:1:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,1,0,[6]]
    Shrunk 10 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 6
    Received: 206

      76 |           const expectedDelta = currentBalance - startingBalance;
      77 |
    > 78 |           expect(sumOfChanges).toBe(expectedDelta);
         |                                ^
      79 |         }
      80 |       ),
      81 |       { numRuns: 30 }

      at tests/creditChangeAuditTrail.property.test.ts:78:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:33:5)

  ● Property 3: Credit Change Audit Trail › credit changes are recorded in order

    Property failed after 10 tests
    { seed: -1324785489, path: "9:0:1:0:1:0:0:0:0", endOnFailure: true }
    Counterexample: [1,1,0,[0,0]]
    Shrunk 8 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCreditChange (src/services/eventLogger.ts:401:5)
      at tests/creditChangeAuditTrail.property.test.ts:111:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:92:5)

  ● Property 3: Credit Change Audit Trail › multiple users tracked independently

    Property failed after 1 tests
    { seed: -948193635, path: "0:1:1:1:1:1:0:3:2:2:0:1:3:1:2:4:5:2:1:4:11:1:9", endOnFailure: true }
    Counterexample: [1,[{"userId":38,"startingBalance":0,"changes":[-462]},{__proto__:null,"userId":93,"startingBalance":6,"changes":[-106]}]]
    Shrunk 22 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: -462
    Received: 0

      263 |             }, 0);
      264 |
    > 265 |             expect(sumOfChanges).toBe(expectedDelta);
          |                                  ^
      266 |           }
      267 |         }
      268 |       ),

      at tests/creditChangeAuditTrail.property.test.ts:265:34
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:206:5)

  ● Property 3: Credit Change Audit Trail › credit changes across multiple cycles

    Property failed after 1 tests
    { seed: 74428971, path: "0:0:0:1:1:0:1:1:1:1:1:1:0:0:0:1:1:0:0:0:5:3:4:1:4:1:0:1:4:3:6:3:2", endOnFailure: true }
    Counterexample: [1,[{"cycleNumber":1,"startingBalance":0,"changes":[0,0]},{__proto__:null,"cycleNumber":1,"startingBalance":12994,"changes":[557,0]}]]
    Shrunk 32 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 557
    Received: 0

      337 |             }, 0);
      338 |
    > 339 |             expect(sumOfChanges).toBe(expectedDelta);
          |                                  ^
      340 |           }
      341 |         }
      342 |       ),

      at tests/creditChangeAuditTrail.property.test.ts:339:34
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:280:5)

  ● Property 3: Credit Change Audit Trail › credit source is preserved

    Property failed after 10 tests
    { seed: 229699560, path: "9:4:2:8:6:1:0:2:8:6:12:2:0:13:2:2:2:2:2:7:2:2:7", endOnFailure: true }
    Counterexample: [302,3,50186,[{__proto__:null,"amount":0,"source":"facility_purchase"},{"amount":1004,"source":"battle"},{__proto__:null,"amount":4183,"source":"battle"}]]
    Shrunk 22 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 1

      399 |           });
      400 |
    > 401 |           expect(events.length).toBe(changes.length);
          |                                 ^
      402 |
      403 |           for (let i = 0; i < events.length; i++) {
      404 |             const payload = events[i].payload as any;

      at tests/creditChangeAuditTrail.property.test.ts:401:33
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:353:5)

PASS tests/streamingStudioPrestigeValidation.test.ts
  ● Console

    console.log
      [Facility] User 180 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 183 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 183 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 185 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 185 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 185 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 190 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 190 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 190 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 199 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 199 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 199 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 199 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 203 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 203 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 203 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 203 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 205 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 205 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 205 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 205 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 209 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 209 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 209 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 209 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 209 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 212 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 212 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 212 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 212 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 212 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 216 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 216 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 216 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 216 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 216 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 216 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 218 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 218 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 218 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 218 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 218 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 218 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 218 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 222 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 222 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 222 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 222 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 222 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 222 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 222 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 222 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 233 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 233 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 233 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 233 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 233 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 233 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 233 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:247:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.log
      [Facility] User 233 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 236 | Upgraded: Streaming Studio | Level: 10 | Cost: ₡1,000,000 | Balance: ₡5,500,000 → ₡4,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 239 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 239 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 239 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

FAIL tests/tagTeamLeagueInstance.property.test.ts
  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › no instance ever exceeds maximum capacity of 50 teams

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › new instance is created when 51st team would be added

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance assignment distributes teams correctly

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance capacity is enforced across all league tiers

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › assignTagTeamLeagueInstance never returns a full instance

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance numbers are sequential and start at 1

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › capacity enforcement works with concurrent team creation

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

FAIL tests/tagTeamLeagueRebalancing.test.ts
  ● Console

    console.log
      [TagTeamRebalancing] silver_1: Too few teams (5 < 10), skipping demotions

      at determineDemotions (src/services/tagTeamLeagueRebalancingService.ts:158:13)

    console.log
      [TagTeamRebalancing] silver_1: Too few teams (0 < 10), skipping demotions

      at determineDemotions (src/services/tagTeamLeagueRebalancingService.ts:158:13)

    console.log
      [TagTeamRebalancing] silver_1: 2 teams eligible for demotion (bottom 10% of 20)

      at determineDemotions (src/services/tagTeamLeagueRebalancingService.ts:175:11)

    console.log
      [TagTeamRebalancing] silver_1: 1 teams eligible for demotion (bottom 10% of 18)

      at determineDemotions (src/services/tagTeamLeagueRebalancingService.ts:175:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 308 (bronze → silver, instance silver_1, LP: 100 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 311 (silver → gold, instance gold_1, LP: 100 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Demoted: Team 315 (silver → bronze, instance bronze_1, LP: 100 retained)

      at demoteTeam (src/services/tagTeamLeagueRebalancingService.ts:267:11)

    console.log
      [TagTeamRebalancing] Demoted: Team 318 (gold → silver, instance silver_1, LP: 100 retained)

      at demoteTeam (src/services/tagTeamLeagueRebalancingService.ts:267:11)

    console.log
      [TagTeamRebalancing] bronze_1: 1 teams eligible for promotion (top 10% of 10 AND ≥25 league points, 7 met points threshold)

      at determinePromotions (src/services/tagTeamLeagueRebalancingService.ts:115:11)

    console.log
      [TagTeamRebalancing] bronze_1: 1 teams eligible for promotion (top 10% of 11 AND ≥25 league points, 8 met points threshold)

      at determinePromotions (src/services/tagTeamLeagueRebalancingService.ts:115:11)

    console.log
      [TagTeamRebalancing] bronze_1: 2 teams eligible for promotion (top 10% of 20 AND ≥25 league points, 20 met points threshold)

      at determinePromotions (src/services/tagTeamLeagueRebalancingService.ts:115:11)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when fewer than 10 teams

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:131:28

      128 
      129 it('should return empty array when fewer than 10 teams', async () => {
      130   // Clean up any existing teams in bronze_1 from previous tests
    → 131   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      129 |     it('should return empty array when fewer than 10 teams', async () => {
      130 |       // Clean up any existing teams in bronze_1 from previous tests
    > 131 |       await prisma.tagTeam.deleteMany({
          |       ^
      132 |         where: { tagTeamLeagueId: 'bronze_1' },
      133 |       });
      134 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:131:7)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when no teams have 5+ cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:146:28

      143 
      144 it('should return empty array when no teams have 5+ cycles', async () => {
      145   // Clean up any existing teams in bronze_1 from previous tests
    → 146   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      144 |     it('should return empty array when no teams have 5+ cycles', async () => {
      145 |       // Clean up any existing teams in bronze_1 from previous tests
    > 146 |       await prisma.tagTeam.deleteMany({
          |       ^
      147 |         where: { tagTeamLeagueId: 'bronze_1' },
      148 |       });
      149 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:146:7)

  ● Tag Team League Rebalancing › determinePromotions › should promote top 10% of eligible teams with ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:161:28

      158 
      159 it('should promote top 10% of eligible teams with ≥25 league points', async () => {
      160   // Clean up any existing teams in bronze_1 from previous tests
    → 161   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      159 |     it('should promote top 10% of eligible teams with ≥25 league points', async () => {
      160 |       // Clean up any existing teams in bronze_1 from previous tests
    > 161 |       await prisma.tagTeam.deleteMany({
          |       ^
      162 |         where: { tagTeamLeagueId: 'bronze_1' },
      163 |       });
      164 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:161:7)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when no teams have ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:185:28

      182 
      183 it('should return empty array when no teams have ≥25 league points', async () => {
      184   // Clean up any existing teams in bronze_1 from previous tests
    → 185   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      183 |     it('should return empty array when no teams have ≥25 league points', async () => {
      184 |       // Clean up any existing teams in bronze_1 from previous tests
    > 185 |       await prisma.tagTeam.deleteMany({
          |       ^
      186 |         where: { tagTeamLeagueId: 'bronze_1' },
      187 |       });
      188 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:185:7)

  ● Tag Team League Rebalancing › determinePromotions › should exclude teams in excludeTeamIds set

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:200:28

      197 
      198 it('should exclude teams in excludeTeamIds set', async () => {
      199   // Clean up any existing teams in bronze_1 from previous tests
    → 200   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      198 |     it('should exclude teams in excludeTeamIds set', async () => {
      199 |       // Clean up any existing teams in bronze_1 from previous tests
    > 200 |       await prisma.tagTeam.deleteMany({
          |       ^
      201 |         where: { tagTeamLeagueId: 'bronze_1' },
      202 |       });
      203 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:200:7)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should handle empty league system

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28

      381 describe('rebalanceTagTeamLeagues', () => {
      382   beforeEach(async () => {
      383     // Clean up ALL teams before these tests since they count total teams
    → 384     await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      382 |     beforeEach(async () => {
      383 |       // Clean up ALL teams before these tests since they count total teams
    > 384 |       await prisma.tagTeam.deleteMany({});
          |       ^
      385 |     });
      386 |
      387 |     it('should handle empty league system', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should promote and demote teams across multiple tiers

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28

      381 describe('rebalanceTagTeamLeagues', () => {
      382   beforeEach(async () => {
      383     // Clean up ALL teams before these tests since they count total teams
    → 384     await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      382 |     beforeEach(async () => {
      383 |       // Clean up ALL teams before these tests since they count total teams
    > 384 |       await prisma.tagTeam.deleteMany({});
          |       ^
      385 |     });
      386 |
      387 |     it('should handle empty league system', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip tiers with insufficient teams

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28

      381 describe('rebalanceTagTeamLeagues', () => {
      382   beforeEach(async () => {
      383     // Clean up ALL teams before these tests since they count total teams
    → 384     await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      382 |     beforeEach(async () => {
      383 |       // Clean up ALL teams before these tests since they count total teams
    > 384 |       await prisma.tagTeam.deleteMany({});
          |       ^
      385 |     });
      386 |
      387 |     it('should handle empty league system', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip teams without 5+ cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28

      381 describe('rebalanceTagTeamLeagues', () => {
      382   beforeEach(async () => {
      383     // Clean up ALL teams before these tests since they count total teams
    → 384     await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      382 |     beforeEach(async () => {
      383 |       // Clean up ALL teams before these tests since they count total teams
    > 384 |       await prisma.tagTeam.deleteMany({});
          |       ^
      385 |     });
      386 |
      387 |     it('should handle empty league system', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)

FAIL tests/facilityAdvisorStreamingStudioROI.property.test.ts
  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21: Facility Advisor provides Streaming Studio ROI metrics

    Property failed after 1 tests
    { seed: 1697631905, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,1,0,0,5]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeDefined()

    Received: undefined

      292 |               // The service filters out recommendations with ROI <= 0 and priority === 'low'
      293 |               if (expectedROI > 0 || netBenefitPerCycle > expectedUpgradeCost / 30) {
    > 294 |                 expect(studioRec).toBeDefined();
          |                                   ^
      295 |               }
      296 |
      297 |               if (studioRec) {

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:294:35
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:196:5)

  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.2: Revenue increase per battle is calculated correctly

    Property failed after 1 tests
    { seed: 1167914915, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,100,1000,10]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeCloseTo(expected, precision)

    Expected: 2.93
    Received: 0.2

    Expected precision:    5
    Expected difference: < 0.000005
    Received difference:   2.73

      492 |             // Property: ROI should be calculated correctly
      493 |             const expectedROI = (expectedNetBenefitPerCycle * 30 - studioRec.upgradeCost) / studioRec.upgradeCost;
    > 494 |             expect(studioRec.projectedROI).toBeCloseTo(expectedROI, 5);
          |                                            ^
      495 |           }
      496 |         }
      497 |       ),

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:494:44
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:423:5)

  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.4: Operating cost increase reduces net benefit

    Property failed after 1 tests
    { seed: 664097257, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,100,1000,5]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toContain(expected) // indexOf

    Expected substring: "operating cost"
    Received string:    "Increases streaming revenue by 10% per battle (no battle history to estimate ROI)"

      596 |
      597 |             // Property: Reason should mention operating cost
    > 598 |             expect(studioRec.reason).toContain('operating cost');
          |                                      ^
      599 |             expect(studioRec.reason).toContain(`₡${operatingCostIncrease}`);
      600 |
      601 |             // Property: Operating cost should reduce the net benefit

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:598:38
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:549:5)

FAIL tests/facilityRecommendation.property.test.ts (14.73 s)
  ● Property 22: Investment Recommendation Ranking › Property 22.2: Only facilities with positive projected ROI are recommended

    Property failed after 1 tests
    { seed: -616409103, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [5,500000,2000]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      177 |           // Property: All recommendations should have positive ROI
      178 |           for (const recommendation of result.recommendations) {
    > 179 |             expect(recommendation.projectedROI).toBeGreaterThan(0);
          |                                                 ^
      180 |           }
      181 |         }
      182 |       ),

      at tests/facilityRecommendation.property.test.ts:179:49
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:129:5)

  ● Property 22: Investment Recommendation Ranking › Property 22.4: High activity users get more discount facility recommendations

    Property failed after 1 tests
    { seed: -97970124, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [50000,30000,20]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      307 |           // Discount facilities should have positive ROI
      308 |           for (const facility of discountFacilities) {
    > 309 |             expect(facility.projectedROI).toBeGreaterThan(0);
          |                                           ^
      310 |           }
      311 |         }
      312 |       ),

      at tests/facilityRecommendation.property.test.ts:309:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:235:5)

  ● Property 22: Investment Recommendation Ranking › Property 22.5: Recommendations include upgrade cost and payoff cycles

    Property failed after 1 tests
    { seed: -213407907, path: "0:0:0", endOnFailure: true }
    Counterexample: [10,2000000]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeTruthy()

    Received: ""

      371 |             
      372 |             // Should have a reason
    > 373 |             expect(recommendation.reason).toBeTruthy();
          |                                           ^
      374 |             expect(recommendation.reason.length).toBeGreaterThan(0);
      375 |             
      376 |             // Should have a priority

      at tests/facilityRecommendation.property.test.ts:373:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:318:5)

FAIL tests/tagTeamLeagueRebalancing.property.test.ts
  ● Console

    console.log
      [TagTeamRebalancing] Promoted: Team 376 (silver → gold, instance gold_1, LP: 62 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 377 (bronze → silver, instance silver_1, LP: 62 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 379 (bronze → silver, instance silver_1, LP: 1 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 383 (bronze → silver, instance silver_1, LP: 1 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Demoted: Team 385 (silver → bronze, instance bronze_1, LP: 105 retained)

      at demoteTeam (src/services/tagTeamLeagueRebalancingService.ts:267:11)

    console.log
      [TagTeamRebalancing] Demoted: Team 389 (silver → bronze, instance bronze_1, LP: 1 retained)

      at demoteTeam (src/services/tagTeamLeagueRebalancingService.ts:267:11)

    console.log
      [TagTeamRebalancing] Demoted: Team 390 (silver → bronze, instance bronze_1, LP: 1 retained)

      at demoteTeam (src/services/tagTeamLeagueRebalancingService.ts:267:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 395 (bronze → silver, instance silver_1, LP: 1 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 409 (bronze → silver, instance silver_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 422 (bronze → silver, instance silver_1, LP: 1 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 434 (bronze → silver, instance silver_2, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 437 (silver → gold, instance gold_1, LP: 11 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 438 (bronze → silver, instance silver_1, LP: 11 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 439 (bronze → silver, instance silver_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 442 (bronze → silver, instance silver_1, LP: 6 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 452 (bronze → silver, instance silver_1, LP: 3 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 463 (bronze → silver, instance silver_1, LP: 2 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 476 (bronze → silver, instance silver_1, LP: 1 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 489 (bronze → silver, instance silver_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 506 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 520 (bronze → silver, instance silver_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 533 (silver → gold, instance gold_2, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 544 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 552 (bronze → silver, instance silver_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 554 (gold → platinum, instance platinum_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 555 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 558 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 571 (gold → platinum, instance platinum_2, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 579 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 580 (diamond → champion, instance champion_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 581 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 587 (diamond → champion, instance champion_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 598 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 610 (silver → gold, instance gold_2, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 622 (diamond → champion, instance champion_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 633 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 634 (diamond → champion, instance champion_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 637 (diamond → champion, instance champion_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 640 (platinum → diamond, instance diamond_1, LP: 0 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › promotion resets league points and cycles to 0

    Property failed after 1 tests
    { seed: -723246990, path: "0:0:0:0", endOnFailure: true }
    Counterexample: ["bronze",1,1]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      155 |
      156 |             // Property: League points must be reset to 0
    > 157 |             expect(updatedTeam!.tagTeamLeaguePoints).toBe(0);
          |                                                      ^
      158 |
      159 |             // Property: Cycles counter must be reset to 0
      160 |             expect(updatedTeam!.cyclesInTagTeamLeague).toBe(0);

      at tests/tagTeamLeagueRebalancing.property.test.ts:157:54
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:132:7)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › demotion resets league points and cycles to 0

    Property failed after 1 tests
    { seed: -642308562, path: "0:0:0", endOnFailure: true }
    Counterexample: ["silver",1,1]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      196 |
      197 |             // Property: League points must be reset to 0
    > 198 |             expect(updatedTeam!.tagTeamLeaguePoints).toBe(0);
          |                                                      ^
      199 |
      200 |             // Property: Cycles counter must be reset to 0
      201 |             expect(updatedTeam!.cyclesInTagTeamLeague).toBe(0);

      at tests/tagTeamLeagueRebalancing.property.test.ts:198:54
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:173:7)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › tier change resets work across all valid tier transitions

    Property failed after 1 tests
    { seed: 1245050397, path: "0:1", endOnFailure: true }
    Counterexample: [{"action":"promote","tier":"bronze"},1,0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      247 |
      248 |             // Property: Both league points and cycles must be 0 after any tier change
    > 249 |             expect(updatedTeam!.tagTeamLeaguePoints).toBe(0);
          |                                                      ^
      250 |             expect(updatedTeam!.cyclesInTagTeamLeague).toBe(0);
      251 |
      252 |             // Property: Team should have moved to a different tier

      at tests/tagTeamLeagueRebalancing.property.test.ts:249:54
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:214:7)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › reset applies regardless of initial values magnitude

    Property failed after 1 tests
    { seed: -278674824, path: "0:0:1:0:0:0", endOnFailure: true }
    Counterexample: ["bronze",1,0]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      278 |
      279 |             // Property: Reset should work regardless of how large the initial values were
    > 280 |             expect(updatedTeam!.tagTeamLeaguePoints).toBe(0);
          |                                                      ^
      281 |             expect(updatedTeam!.cyclesInTagTeamLeague).toBe(0);
      282 |           }
      283 |         ),

      at tests/tagTeamLeagueRebalancing.property.test.ts:280:54
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:261:7)

FAIL tests/tagTeamLeagueInstanceService.test.ts
  ● Console

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

  ● TagTeamLeagueInstanceService › getInstancesForTier › should return empty array when no teams exist

    expect(received).toEqual(expected) // deep equality

    - Expected  -  1
    + Received  + 10

    - Array []
    + Array [
    +   Object {
    +     "currentTeams": 15,
    +     "instanceNumber": 1,
    +     "isFull": false,
    +     "leagueId": "bronze_1",
    +     "maxTeams": 50,
    +     "tier": "bronze",
    +   },
    + ]

      130 |     it('should return empty array when no teams exist', async () => {
      131 |       const instances = await getInstancesForTier('bronze');
    > 132 |       expect(instances).toEqual([]);
          |                         ^
      133 |     });
      134 |
      135 |     it('should return instances with correct team counts', async () => {

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:132:25)

  ● TagTeamLeagueInstanceService › getInstancesForTier › should return instances with correct team counts

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 16

      171 |       expect(instances).toHaveLength(2);
      172 |       expect(instances[0].leagueId).toBe('bronze_1');
    > 173 |       expect(instances[0].currentTeams).toBe(2);
          |                                         ^
      174 |       expect(instances[1].leagueId).toBe('bronze_2');
      175 |       expect(instances[1].currentTeams).toBe(1);
      176 |     });

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:173:41)

  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should not rebalance when instances are balanced

    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 12

      335 |       });
      336 |
    > 337 |       expect(instance1Teams).toBe(10);
          |                              ^
      338 |       expect(instance2Teams).toBe(10);
      339 |     });
      340 |

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:337:30)

  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should rebalance when deviation exceeds threshold

    expect(received).toBe(expected) // Object.is equality

    Expected: 43
    Received: 46

      382 |
      383 |       // Teams remain in original instances
    > 384 |       expect(instance1Teams).toBe(43);
          |                              ^
      385 |       expect(instance2Teams).toBe(2);
      386 |       expect(instance1Teams + instance2Teams).toBe(45);
      387 |     });

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:384:30)

  ● TagTeamLeagueInstanceService › getTeamsInInstance › should return teams sorted by league points

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 18
    Received array:  [{"activeRobot": {"elo": 1000, "id": 1915, "name": "Robot 2_1771959099631"}, "activeRobotId": 1915, "createdAt": 2026-02-24T18:51:39.655Z, "cyclesInTagTeamLeague": 0, "id": 638, "reserveRobot": {"elo": 1000, "id": 1916, "name": "Robot 3_1771959099632"}, "reserveRobotId": 1916, "stableId": 259, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 25, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.655Z}, {"activeRobot": {"elo": 1000, "id": 1919, "name": "Robot 4_1771959099632"}, "activeRobotId": 1919, "createdAt": 2026-02-24T18:51:39.658Z, "cyclesInTagTeamLeague": 0, "id": 639, "reserveRobot": {"elo": 1000, "id": 1918, "name": "Robot 5_1771959099632"}, "reserveRobotId": 1918, "stableId": 259, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 15, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.658Z}, {"activeRobot": {"elo": 1000, "id": 1914, "name": "Robot 0_1771959099631"}, "activeRobotId": 1914, "createdAt": 2026-02-24T18:51:39.639Z, "cyclesInTagTeamLeague": 0, "id": 635, "reserveRobot": {"elo": 1000, "id": 1917, "name": "Robot 1_1771959099631"}, "reserveRobotId": 1917, "stableId": 259, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 10, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.639Z}, {"activeRobot": {"elo": 1231, "id": 110, "name": "Two-Robot Alpha C000"}, "activeRobotId": 110, "createdAt": 2026-02-23T16:21:14.485Z, "cyclesInTagTeamLeague": 1, "id": 1, "reserveRobot": {"elo": 1156, "id": 111, "name": "Two-Robot Beta C000"}, "reserveRobotId": 111, "stableId": 117, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:32.397Z}, {"activeRobot": {"elo": 1200, "id": 1177, "name": "PBT_Elig1_1771959097372_0.37096954700756235"}, "activeRobotId": 1177, "createdAt": 2026-02-24T18:51:37.380Z, "cyclesInTagTeamLeague": 0, "id": 306, "reserveRobot": {"elo": 1200, "id": 1178, "name": "PBT_Elig2_1771959097376_0.4393392447671658"}, "reserveRobotId": 1178, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.380Z}, {"activeRobot": {"elo": 1200, "id": 1180, "name": "PBT_Elig1_1771959097381_0.05462207061092028"}, "activeRobotId": 1180, "createdAt": 2026-02-24T18:51:37.388Z, "cyclesInTagTeamLeague": 0, "id": 307, "reserveRobot": {"elo": 1200, "id": 1181, "name": "PBT_Elig2_1771959097385_0.5160533160070607"}, "reserveRobotId": 1181, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.388Z}, {"activeRobot": {"elo": 1200, "id": 1183, "name": "PBT_Elig1_1771959097392_0.9074418999552992"}, "activeRobotId": 1183, "createdAt": 2026-02-24T18:51:37.398Z, "cyclesInTagTeamLeague": 0, "id": 309, "reserveRobot": {"elo": 1200, "id": 1184, "name": "PBT_Elig2_1771959097394_0.500207891861727"}, "reserveRobotId": 1184, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.398Z}, {"activeRobot": {"elo": 1200, "id": 1227, "name": "PBT_Elig1_1771959097710_0.06859227972071769"}, "activeRobotId": 1227, "createdAt": 2026-02-24T18:51:37.716Z, "cyclesInTagTeamLeague": 0, "id": 326, "reserveRobot": {"elo": 1200, "id": 1228, "name": "PBT_Elig2_1771959097713_0.13093335459044697"}, "reserveRobotId": 1228, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.716Z}, {"activeRobot": {"elo": 1200, "id": 1230, "name": "PBT_Elig1_1771959097717_0.9991866125514247"}, "activeRobotId": 1230, "createdAt": 2026-02-24T18:51:37.722Z, "cyclesInTagTeamLeague": 0, "id": 328, "reserveRobot": {"elo": 1200, "id": 1231, "name": "PBT_Elig2_1771959097719_0.9071157232224021"}, "reserveRobotId": 1231, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.722Z}, {"activeRobot": {"elo": 1200, "id": 1233, "name": "PBT_Elig1_1771959097725_0.7754415056866972"}, "activeRobotId": 1233, "createdAt": 2026-02-24T18:51:37.730Z, "cyclesInTagTeamLeague": 0, "id": 330, "reserveRobot": {"elo": 1200, "id": 1235, "name": "PBT_Elig2_1771959097728_0.27657823658622105"}, "reserveRobotId": 1235, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.730Z}, …]

      428 |       const teams = await getTeamsInInstance('bronze_1');
      429 |
    > 430 |       expect(teams).toHaveLength(3);
          |                     ^
      431 |       expect(teams[0].tagTeamLeaguePoints).toBe(25);
      432 |       expect(teams[1].tagTeamLeaguePoints).toBe(15);
      433 |       expect(teams[2].tagTeamLeaguePoints).toBe(10);

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:430:21)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should return empty array when no teams exist

    expect(received).toEqual(expected) // deep equality

    - Expected  -   1
    + Received  + 380

    - Array []
    + Array [
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1177,
    +       "name": "PBT_Elig1_1771959097372_0.37096954700756235",
    +     },
    +     "activeRobotId": 1177,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.380Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 306,
    +     "rank": 1,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1178,
    +       "name": "PBT_Elig2_1771959097376_0.4393392447671658",
    +     },
    +     "reserveRobotId": 1178,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.380Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1180,
    +       "name": "PBT_Elig1_1771959097381_0.05462207061092028",
    +     },
    +     "activeRobotId": 1180,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.388Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 307,
    +     "rank": 2,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1181,
    +       "name": "PBT_Elig2_1771959097385_0.5160533160070607",
    +     },
    +     "reserveRobotId": 1181,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.388Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1183,
    +       "name": "PBT_Elig1_1771959097392_0.9074418999552992",
    +     },
    +     "activeRobotId": 1183,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.398Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 309,
    +     "rank": 3,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1184,
    +       "name": "PBT_Elig2_1771959097394_0.500207891861727",
    +     },
    +     "reserveRobotId": 1184,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.398Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1227,
    +       "name": "PBT_Elig1_1771959097710_0.06859227972071769",
    +     },
    +     "activeRobotId": 1227,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.716Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 326,
    +     "rank": 4,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1228,
    +       "name": "PBT_Elig2_1771959097713_0.13093335459044697",
    +     },
    +     "reserveRobotId": 1228,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.716Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1230,
    +       "name": "PBT_Elig1_1771959097717_0.9991866125514247",
    +     },
    +     "activeRobotId": 1230,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.722Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 328,
    +     "rank": 5,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1231,
    +       "name": "PBT_Elig2_1771959097719_0.9071157232224021",
    +     },
    +     "reserveRobotId": 1231,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.722Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1233,
    +       "name": "PBT_Elig1_1771959097725_0.7754415056866972",
    +     },
    +     "activeRobotId": 1233,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.730Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 330,
    +     "rank": 6,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1235,
    +       "name": "PBT_Elig2_1771959097728_0.27657823658622105",
    +     },
    +     "reserveRobotId": 1235,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.730Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1246,
    +       "name": "PBT_Elig1_1771959097783_0.0178882502269907",
    +     },
    +     "activeRobotId": 1246,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.789Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 335,
    +     "rank": 7,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1248,
    +       "name": "PBT_Elig2_1771959097786_0.5102029744394901",
    +     },
    +     "reserveRobotId": 1248,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.789Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1250,
    +       "name": "PBT_Elig1_1771959097792_0.7999893775061311",
    +     },
    +     "activeRobotId": 1250,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.798Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 337,
    +     "rank": 8,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1252,
    +       "name": "PBT_Elig2_1771959097795_0.16324572619291722",
    +     },
    +     "reserveRobotId": 1252,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.798Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1261,
    +       "name": "PBT_Elig1_1771959097861_0.5170042968174191",
    +     },
    +     "activeRobotId": 1261,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.865Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 341,
    +     "rank": 9,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1262,
    +       "name": "PBT_Elig2_1771959097863_0.4244293874202",
    +     },
    +     "reserveRobotId": 1262,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.865Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1276,
    +       "name": "PBT_Elig1_1771959097930_0.06716608712438321",
    +     },
    +     "activeRobotId": 1276,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.936Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 347,
    +     "rank": 10,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1277,
    +       "name": "PBT_Elig2_1771959097933_0.6076863883204697",
    +     },
    +     "reserveRobotId": 1277,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.936Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1303,
    +       "name": "PBT_Elig1_1771959098104_0.20858477854646285",
    +     },
    +     "activeRobotId": 1303,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:38.110Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 358,
    +     "rank": 11,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1304,
    +       "name": "PBT_Elig2_1771959098106_0.0924211021367577",
    +     },
    +     "reserveRobotId": 1304,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:38.110Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1320,
    +       "name": "PBT_Elig1_1771959098210_0.2048846589139287",
    +     },
    +     "activeRobotId": 1320,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:38.219Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 365,
    +     "rank": 12,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1321,
    +       "name": "PBT_Elig2_1771959098215_0.12778055827505597",
    +     },
    +     "reserveRobotId": 1321,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:38.219Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1711,
    +       "name": "PBT_Elig1_1771959099076_0.735504276361138",
    +     },
    +     "activeRobotId": 1711,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:39.082Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 522,
    +     "rank": 13,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1714,
    +       "name": "PBT_Elig2_1771959099079_0.3439915354733035",
    +     },
    +     "reserveRobotId": 1714,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:39.082Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1231,
    +       "id": 110,
    +       "name": "Two-Robot Alpha C000",
    +     },
    +     "activeRobotId": 110,
    +     "combinedELO": 2387,
    +     "createdAt": 2026-02-23T16:21:14.485Z,
    +     "cyclesInTagTeamLeague": 1,
    +     "id": 1,
    +     "rank": 14,
    +     "reserveRobot": Object {
    +       "elo": 1156,
    +       "id": 111,
    +       "name": "Two-Robot Beta C000",
    +     },
    +     "reserveRobotId": 111,
    +     "stableId": 117,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:32.397Z,
    +   },
    + ]

      463 |     it('should return empty array when no teams exist', async () => {
      464 |       const standings = await getStandingsForInstance('bronze_1');
    > 465 |       expect(standings).toEqual([]);
          |                         ^
      466 |     });
      467 |
      468 |     it('should sort teams by league points descending', async () => {

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:465:25)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should sort teams by league points descending

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 18
    Received array:  [{"activeRobot": {"elo": 1000, "id": 1933, "name": "Robot 2_1771959099763"}, "activeRobotId": 1933, "combinedELO": 2000, "createdAt": 2026-02-24T18:51:39.773Z, "cyclesInTagTeamLeague": 0, "id": 644, "rank": 1, "reserveRobot": {"elo": 1000, "id": 1932, "name": "Robot 3_1771959099763"}, "reserveRobotId": 1932, "stableId": 262, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 25, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.773Z}, {"activeRobot": {"elo": 1000, "id": 1937, "name": "Robot 4_1771959099763"}, "activeRobotId": 1937, "combinedELO": 2000, "createdAt": 2026-02-24T18:51:39.776Z, "cyclesInTagTeamLeague": 0, "id": 645, "rank": 2, "reserveRobot": {"elo": 1000, "id": 1936, "name": "Robot 5_1771959099764"}, "reserveRobotId": 1936, "stableId": 262, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 15, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.776Z}, {"activeRobot": {"elo": 1000, "id": 1934, "name": "Robot 0_1771959099763"}, "activeRobotId": 1934, "combinedELO": 2000, "createdAt": 2026-02-24T18:51:39.771Z, "cyclesInTagTeamLeague": 0, "id": 643, "rank": 3, "reserveRobot": {"elo": 1000, "id": 1935, "name": "Robot 1_1771959099763"}, "reserveRobotId": 1935, "stableId": 262, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 10, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.771Z}, {"activeRobot": {"elo": 1200, "id": 1177, "name": "PBT_Elig1_1771959097372_0.37096954700756235"}, "activeRobotId": 1177, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.380Z, "cyclesInTagTeamLeague": 0, "id": 306, "rank": 4, "reserveRobot": {"elo": 1200, "id": 1178, "name": "PBT_Elig2_1771959097376_0.4393392447671658"}, "reserveRobotId": 1178, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.380Z}, {"activeRobot": {"elo": 1200, "id": 1180, "name": "PBT_Elig1_1771959097381_0.05462207061092028"}, "activeRobotId": 1180, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.388Z, "cyclesInTagTeamLeague": 0, "id": 307, "rank": 5, "reserveRobot": {"elo": 1200, "id": 1181, "name": "PBT_Elig2_1771959097385_0.5160533160070607"}, "reserveRobotId": 1181, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.388Z}, {"activeRobot": {"elo": 1200, "id": 1183, "name": "PBT_Elig1_1771959097392_0.9074418999552992"}, "activeRobotId": 1183, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.398Z, "cyclesInTagTeamLeague": 0, "id": 309, "rank": 6, "reserveRobot": {"elo": 1200, "id": 1184, "name": "PBT_Elig2_1771959097394_0.500207891861727"}, "reserveRobotId": 1184, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.398Z}, {"activeRobot": {"elo": 1200, "id": 1227, "name": "PBT_Elig1_1771959097710_0.06859227972071769"}, "activeRobotId": 1227, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.716Z, "cyclesInTagTeamLeague": 0, "id": 326, "rank": 7, "reserveRobot": {"elo": 1200, "id": 1228, "name": "PBT_Elig2_1771959097713_0.13093335459044697"}, "reserveRobotId": 1228, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.716Z}, {"activeRobot": {"elo": 1200, "id": 1230, "name": "PBT_Elig1_1771959097717_0.9991866125514247"}, "activeRobotId": 1230, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.722Z, "cyclesInTagTeamLeague": 0, "id": 328, "rank": 8, "reserveRobot": {"elo": 1200, "id": 1231, "name": "PBT_Elig2_1771959097719_0.9071157232224021"}, "reserveRobotId": 1231, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.722Z}, {"activeRobot": {"elo": 1200, "id": 1233, "name": "PBT_Elig1_1771959097725_0.7754415056866972"}, "activeRobotId": 1233, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.730Z, "cyclesInTagTeamLeague": 0, "id": 330, "rank": 9, "reserveRobot": {"elo": 1200, "id": 1235, "name": "PBT_Elig2_1771959097728_0.27657823658622105"}, "reserveRobotId": 1235, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.730Z}, {"activeRobot": {"elo": 1200, "id": 1246, "name": "PBT_Elig1_1771959097783_0.0178882502269907"}, "activeRobotId": 1246, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.789Z, "cyclesInTagTeamLeague": 0, "id": 335, "rank": 10, "reserveRobot": {"elo": 1200, "id": 1248, "name": "PBT_Elig2_1771959097786_0.5102029744394901"}, "reserveRobotId": 1248, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.789Z}, …]

      505 |       const standings = await getStandingsForInstance('bronze_1');
      506 |
    > 507 |       expect(standings).toHaveLength(3);
          |                         ^
      508 |       expect(standings[0].tagTeamLeaguePoints).toBe(25);
      509 |       expect(standings[0].rank).toBe(1);
      510 |       expect(standings[1].tagTeamLeaguePoints).toBe(15);

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:507:25)

  ● TagTeamLeagueInstanceService › getStandingsForTier › should return empty array when no teams exist

    expect(received).toEqual(expected) // deep equality

    - Expected  -   1
    + Received  + 452

    - Array []
    + Array [
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1177,
    +       "name": "PBT_Elig1_1771959097372_0.37096954700756235",
    +     },
    +     "activeRobotId": 1177,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.380Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 306,
    +     "rank": 1,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1178,
    +       "name": "PBT_Elig2_1771959097376_0.4393392447671658",
    +     },
    +     "reserveRobotId": 1178,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.380Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1180,
    +       "name": "PBT_Elig1_1771959097381_0.05462207061092028",
    +     },
    +     "activeRobotId": 1180,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.388Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 307,
    +     "rank": 2,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1181,
    +       "name": "PBT_Elig2_1771959097385_0.5160533160070607",
    +     },
    +     "reserveRobotId": 1181,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.388Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1183,
    +       "name": "PBT_Elig1_1771959097392_0.9074418999552992",
    +     },
    +     "activeRobotId": 1183,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.398Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 309,
    +     "rank": 3,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1184,
    +       "name": "PBT_Elig2_1771959097394_0.500207891861727",
    +     },
    +     "reserveRobotId": 1184,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.398Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1227,
    +       "name": "PBT_Elig1_1771959097710_0.06859227972071769",
    +     },
    +     "activeRobotId": 1227,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.716Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 326,
    +     "rank": 4,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1228,
    +       "name": "PBT_Elig2_1771959097713_0.13093335459044697",
    +     },
    +     "reserveRobotId": 1228,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.716Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1230,
    +       "name": "PBT_Elig1_1771959097717_0.9991866125514247",
    +     },
    +     "activeRobotId": 1230,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.722Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 328,
    +     "rank": 5,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1231,
    +       "name": "PBT_Elig2_1771959097719_0.9071157232224021",
    +     },
    +     "reserveRobotId": 1231,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.722Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1233,
    +       "name": "PBT_Elig1_1771959097725_0.7754415056866972",
    +     },
    +     "activeRobotId": 1233,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.730Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 330,
    +     "rank": 6,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1235,
    +       "name": "PBT_Elig2_1771959097728_0.27657823658622105",
    +     },
    +     "reserveRobotId": 1235,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.730Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1246,
    +       "name": "PBT_Elig1_1771959097783_0.0178882502269907",
    +     },
    +     "activeRobotId": 1246,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.789Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 335,
    +     "rank": 7,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1248,
    +       "name": "PBT_Elig2_1771959097786_0.5102029744394901",
    +     },
    +     "reserveRobotId": 1248,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.789Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1250,
    +       "name": "PBT_Elig1_1771959097792_0.7999893775061311",
    +     },
    +     "activeRobotId": 1250,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.798Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 337,
    +     "rank": 8,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1252,
    +       "name": "PBT_Elig2_1771959097795_0.16324572619291722",
    +     },
    +     "reserveRobotId": 1252,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.798Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1261,
    +       "name": "PBT_Elig1_1771959097861_0.5170042968174191",
    +     },
    +     "activeRobotId": 1261,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.865Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 341,
    +     "rank": 9,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1262,
    +       "name": "PBT_Elig2_1771959097863_0.4244293874202",
    +     },
    +     "reserveRobotId": 1262,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.865Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1276,
    +       "name": "PBT_Elig1_1771959097930_0.06716608712438321",
    +     },
    +     "activeRobotId": 1276,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.936Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 347,
    +     "rank": 10,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1277,
    +       "name": "PBT_Elig2_1771959097933_0.6076863883204697",
    +     },
    +     "reserveRobotId": 1277,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.936Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1303,
    +       "name": "PBT_Elig1_1771959098104_0.20858477854646285",
    +     },
    +     "activeRobotId": 1303,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:38.110Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 358,
    +     "rank": 11,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1304,
    +       "name": "PBT_Elig2_1771959098106_0.0924211021367577",
    +     },
    +     "reserveRobotId": 1304,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:38.110Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1320,
    +       "name": "PBT_Elig1_1771959098210_0.2048846589139287",
    +     },
    +     "activeRobotId": 1320,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:38.219Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 365,
    +     "rank": 12,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1321,
    +       "name": "PBT_Elig2_1771959098215_0.12778055827505597",
    +     },
    +     "reserveRobotId": 1321,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:38.219Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1711,
    +       "name": "PBT_Elig1_1771959099076_0.735504276361138",
    +     },
    +     "activeRobotId": 1711,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:39.082Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 522,
    +     "rank": 13,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1714,
    +       "name": "PBT_Elig2_1771959099079_0.3439915354733035",
    +     },
    +     "reserveRobotId": 1714,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:39.082Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1955,
    +       "name": "PBT_Elig1_1771959099865_0.5313864820958458",
    +     },
    +     "activeRobotId": 1955,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:39.874Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 649,
    +     "rank": 14,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1956,
    +       "name": "PBT_Elig2_1771959099870_0.7602703808627449",
    +     },
    +     "reserveRobotId": 1956,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:39.874Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1231,
    +       "id": 110,
    +       "name": "Two-Robot Alpha C000",
    +     },
    +     "activeRobotId": 110,
    +     "combinedELO": 2387,
    +     "createdAt": 2026-02-23T16:21:14.485Z,
    +     "cyclesInTagTeamLeague": 1,
    +     "id": 1,
    +     "rank": 15,
    +     "reserveRobot": Object {
    +       "elo": 1156,
    +       "id": 111,
    +       "name": "Two-Robot Beta C000",
    +     },
    +     "reserveRobotId": 111,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 117,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:32.397Z,
    +   },
    + ]

      617 |     it('should return empty array when no teams exist', async () => {
      618 |       const standings = await getStandingsForTier('bronze');
    > 619 |       expect(standings).toEqual([]);
          |                         ^
      620 |     });
      621 |
      622 |     it('should include teams from all instances in the tier', async () => {

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:619:25)

FAIL tests/roiCalculatorService.test.ts
  ● ROICalculatorService › calculateFacilityROI › should calculate breakeven cycle when facility becomes profitable

    expect(received).not.toBeNull()

    Received: null

      338 |       );
      339 |
    > 340 |       expect(roi).not.toBeNull();
          |                       ^
      341 |       expect(roi!.totalInvestment).toBe(900000); // 150k + 300k + 450k
      342 |       expect(roi!.totalReturns).toBe(1500000); // (12000 + 3000) * 100 cycles
      343 |       expect(roi!.totalOperatingCosts).toBe(800000); // 8000 * 100 cycles

      at Object.<anonymous> (tests/roiCalculatorService.test.ts:340:23)

FAIL tests/cycleSummaryStreamingRevenue.property.test.ts (16.959 s)
  ● Console

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:28.181Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959088158_0.6667726294306545 earned ₡11,410 from Battle #2

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088165_0.25772155856656453 earned ₡19,880 from Battle #2

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959088158_0.6667726294306545 (User 125) vs TestRobot2_1771959088165_0.25772155856656453 (User 126) | Winner: TestRobot2_1771959088165_0.25772155856656453 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:28.401Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959088232_0.7487734791650126 earned ₡4,415 from Battle #6

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088232_0.3299037659881705 earned ₡63,378 from Battle #6

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959088232_0.7487734791650126 (User 129) vs TestRobot2_1771959088232_0.3299037659881705 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959088369_0.2016538907600265 earned ₡4,076 from Battle #8

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088373_0.03407488214008969 earned ₡8,072 from Battle #8

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 4: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959088387_0.9991427885906433 earned ₡12,083 from Battle #10

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088390_0.6070632194393958 earned ₡24,454 from Battle #10

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 5: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:28.776Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959088676_0.7112821420433235 earned ₡2,008 from Battle #15

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088676_0.24175371370159304 earned ₡63,378 from Battle #15

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959088676_0.7112821420433235 (User 129) vs TestRobot2_1771959088676_0.24175371370159304 (User 130) | Winner: TestRobot1_1771959088676_0.7112821420433235 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959088757_0.2672157957565282 earned ₡1,002 from Battle #17

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088760_0.41305174845575054 earned ₡8,046 from Battle #17

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 9: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959088764_0.02449818096457701 earned ₡4,784 from Battle #19

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088768_0.6630455735574229 earned ₡19,919 from Battle #19

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959088764_0.02449818096457701 (User 125) vs TestRobot2_1771959088768_0.6630455735574229 (User 126) | Winner: TestRobot2_1771959088768_0.6630455735574229 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.069Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959088969_0.8518456156518532 earned ₡2,002 from Battle #25

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959088969_0.191367699711796 earned ₡63,378 from Battle #25

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959088969_0.8518456156518532 (User 129) vs TestRobot2_1771959088969_0.191367699711796 (User 130) | Winner: TestRobot1_1771959088969_0.8518456156518532 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771959088969_0.8518456156518532

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 14: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:38
      
        394 }
        395 
        396 // Create battle record
      → 397 const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot1_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:18)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot1_id_fkey (index)' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959089058_0.773322311268482 earned ₡9,029 from Battle #31

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089061_0.41628725767689945 earned ₡2,008 from Battle #31

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 15: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.307Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959089263_0.32549178072377527 earned ₡2,002 from Battle #35

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089263_0.3079294182513522 earned ₡10,580 from Battle #35

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 17: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.error
      [BattleOrchestrator] Failed to process match 18: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:38
      
        394 }
        395 
        396 // Create battle record
      → 397 const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot1_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:18)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot1_id_fkey (index)' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959089297_0.20454685025492392 earned ₡7,039 from Battle #39

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089301_0.21184111582576137 earned ₡10,491 from Battle #39

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 19: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 3 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.525Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959089392_0.6768496914125293 earned ₡2,002 from Battle #44

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089392_0.016375824940095263 earned ₡3,004 from Battle #44

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 20: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.error
      [BattleOrchestrator] Failed to process match 22: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:38
      
        394 }
        395 
        396 // Create battle record
      → 397 const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot1_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:18)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot1_id_fkey (index)' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959089516_0.5572625339852322 earned ₡7,011 from Battle #49

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089518_0.8443032063002232 earned ₡10,491 from Battle #49

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 23: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 3 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.754Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 4 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959089590_0.8297606504751763 earned ₡2,004 from Battle #54

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089590_0.8493592327408439 earned ₡3,009 from Battle #54

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089590_0.8297606504751763 (User 129) vs TestRobot2_1771959089590_0.8493592327408439 (User 130) | Winner: TestRobot1_1771959089590_0.8297606504751763 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959089617_0.39398885978028975 earned ₡3,208 from Battle #58

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089619_0.683055552086805 earned ₡1,002 from Battle #58

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089617_0.39398885978028975 (User 127) vs TestRobot2_1771959089619_0.683055552086805 (User 128) | Winner: TestRobot1_1771959089617_0.39398885978028975 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 26: Error: Robots not found for match 26
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959089744_0.7023655971240422 earned ₡7,029 from Battle #61

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089747_0.7075038985291175 earned ₡10,493 from Battle #61

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089744_0.7023655971240422 (User 125) vs TestRobot2_1771959089747_0.7075038985291175 (User 126) | Winner: TestRobot2_1771959089747_0.7075038985291175 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 3 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 15 prestige, 6 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.039Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 4 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.error
      [BattleOrchestrator] Failed to process match 28: Error: BattleParticipant not found for battle 66, robot 379
          at updateRobotStats (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:490:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:645:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959089923_0.8114137657496631 earned ₡3,194 from Battle #67

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959089925_0.6973215477338884 earned ₡1,002 from Battle #67

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089923_0.8114137657496631 (User 127) vs TestRobot2_1771959089925_0.6973215477338884 (User 128) | Winner: TestRobot1_1771959089923_0.8114137657496631 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 31: Error: Robots not found for match 31
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959090029_0.8893467522572291 earned ₡7,029 from Battle #71

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090032_0.3862669792177661 earned ₡10,485 from Battle #71

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090029_0.8893467522572291 (User 125) vs TestRobot2_1771959090032_0.3862669792177661 (User 126) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 2 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.326Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959090101_0.6091168114535447 earned ₡8,372 from Battle #77

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959090101_0.20135777539124844 earned ₡12,694 from Battle #77

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959090101_0.6091168114535447 (User 129) vs Robot2_1771959090101_0.20135777539124844 (User 130) | Winner: Robot1_1771959090101_0.6091168114535447 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771959090101_0.6091168114535447

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 35: Error: Robots not found for match 35
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959090314_0.9449381453672401 earned ₡7,037 from Battle #80

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090317_0.06618755068477145 earned ₡10,489 from Battle #80

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090314_0.9449381453672401 (User 125) vs TestRobot2_1771959090317_0.06618755068477145 (User 126) | Winner: TestRobot1_1771959090314_0.9449381453672401 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 4 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.564Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959090402_0.8752122533007536 earned ₡8,305 from Battle #85

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959090402_0.24542271800197102 earned ₡12,703 from Battle #85

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959090402_0.8752122533007536 (User 129) vs Robot2_1771959090402_0.24542271800197102 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 39: Error: Robots not found for match 39
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959090554_0.019787419695507236 earned ₡7,046 from Battle #89

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090557_0.26122402809798806 earned ₡7,018 from Battle #89

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090554_0.019787419695507236 (User 125) vs TestRobot2_1771959090557_0.26122402809798806 (User 126) | Winner: TestRobot1_1771959090554_0.019787419695507236 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771959090554_0.019787419695507236

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.763Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959090601_0.16787726645158696 earned ₡7,279 from Battle #93

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959090601_0.7907403055962087 earned ₡12,703 from Battle #93

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959090601_0.16787726645158696 (User 129) vs Robot2_1771959090601_0.7907403055962087 (User 130) | Winner: Robot1_1771959090601_0.16787726645158696 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771959090601_0.16787726645158696

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 43: Error: Robots not found for match 43
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959090754_0.39380853420236794 earned ₡7,046 from Battle #96

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090757_0.7901209940422265 earned ₡8,755 from Battle #96

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090754_0.39380853420236794 (User 125) vs TestRobot2_1771959090757_0.7901209940422265 (User 126) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.978Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959090792_0.7997155394920633 earned ₡7,273 from Battle #100

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959090792_0.3654985486153701 earned ₡10,156 from Battle #100

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 46: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'ScheduledMatch', cause: 'Record to update not found.' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959090905_0.47082493124639524 earned ₡3,180 from Battle #104

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090908_0.6650664327071314 earned ₡1,004 from Battle #104

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090905_0.47082493124639524 (User 127) vs TestRobot2_1771959090908_0.6650664327071314 (User 128) | Winner: TestRobot1_1771959090905_0.47082493124639524 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959090969_0.5712404578312599 earned ₡7,046 from Battle #107

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959090972_0.6445072450207093 earned ₡9,627 from Battle #107

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090969_0.5712404578312599 (User 125) vs TestRobot2_1771959090972_0.6445072450207093 (User 126) | Winner: TestRobot1_1771959090969_0.5712404578312599 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 4 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:31.251Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 5 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959091000_0.38184527749761 earned ₡7,271 from Battle #112

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959091000_0.20678247159875507 earned ₡7,266 from Battle #112

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959091000_0.38184527749761 (User 129) vs Robot2_1771959091000_0.20678247159875507 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091065_0.7613009408443856 earned ₡3,170 from Battle #116

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091068_0.980894884327933 earned ₡1,002 from Battle #116

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091065_0.7613009408443856 (User 127) vs TestRobot2_1771959091068_0.980894884327933 (User 128) | Winner: TestRobot2_1771959091068_0.980894884327933 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091144_0.32062283920961043 earned ₡3,168 from Battle #119

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091147_0.989568742210992 earned ₡1,002 from Battle #119

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091144_0.32062283920961043 (User 127) vs TestRobot2_1771959091147_0.989568742210992 (User 128) | Winner: TestRobot1_1771959091144_0.32062283920961043 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 53: Error: Robots not found for match 53
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959091241_0.7903922601678393 earned ₡7,036 from Battle #123

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091244_0.9693867930326825 earned ₡10,057 from Battle #123

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091241_0.7903922601678393 (User 125) vs TestRobot2_1771959091244_0.9693867930326825 (User 126) | Winner: TestRobot2_1771959091244_0.9693867930326825 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 4 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 15 prestige, 7 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:31.620Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959091351_0.5573979910051633 earned ₡2,423 from Battle #127

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959091351_0.856914575145122 earned ₡2,423 from Battle #127

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959091351_0.5573979910051633 (User 129) vs Robot2_1771959091351_0.856914575145122 (User 130) | Winner: Robot2_1771959091351_0.856914575145122 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091610_0.6088105572888529 earned ₡7,036 from Battle #131

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091613_0.20632867617319472 earned ₡10,274 from Battle #131

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091610_0.6088105572888529 (User 125) vs TestRobot2_1771959091613_0.20632867617319472 (User 126) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:31.821Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 5 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959091622_0.4183570913718119 earned ₡3,164 from Battle #137

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091626_0.015714981147556206 earned ₡1,002 from Battle #137

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091622_0.4183570913718119 (User 127) vs TestRobot2_1771959091626_0.015714981147556206 (User 128) | Winner: TestRobot1_1771959091622_0.4183570913718119 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959091703_0.8188817526287987 earned ₡3,144 from Battle #140

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091705_0.561953761216558 earned ₡1,002 from Battle #140

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 61: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Battle] League: bronze | RealRobot_1771959091708_0.34960148351619 (User 129) vs Bye Robot (User 130) | Winner: RealRobot_1771959091708_0.34960148351619 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771959091708_0.34960148351619

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 63: Error: Robots not found for match 63
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959091811_0.5369918654641845 earned ₡7,039 from Battle #144

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959091814_0.356029894289305 earned ₡10,380 from Battle #144

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091811_0.5369918654641845 (User 125) vs TestRobot2_1771959091814_0.356029894289305 (User 126) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 3 successful, 2 failed, 1 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:32.273Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.error
      [BattleOrchestrator] Failed to process match 67: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'ScheduledMatch', cause: 'Record to update not found.' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.error
      [BattleOrchestrator] Failed to process match 68: Error: Robots not found for match 68
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959092252_0.4218440174184882 earned ₡7,042 from Battle #149

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092255_0.6576430521547971 earned ₡10,436 from Battle #149

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092252_0.4218440174184882 (User 125) vs TestRobot2_1771959092255_0.6576430521547971 (User 126) | Winner: TestRobot1_1771959092252_0.4218440174184882 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771959092252_0.4218440174184882

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:32.489Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.error
      [BattleOrchestrator] Failed to process match 133: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959092468_0.27486653024770147 earned ₡1,022 from Battle #155

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092473_0.02963696612792588 earned ₡1,002 from Battle #155

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: diamond | TestRobot1_1771959092468_0.27486653024770147 (User 127) vs TestRobot2_1771959092473_0.02963696612792588 (User 128) | Winner: TestRobot1_1771959092468_0.27486653024770147 | Rewards: ₡139,000 / ₡24,000 | Prestige: +50 | Fame: +38 | Kill: TestRobot1_1771959092468_0.27486653024770147

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092477_0.7665048425584345 earned ₡7,039 from Battle #158

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092480_0.8096283879145358 earned ₡10,464 from Battle #158

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092477_0.7665048425584345 (User 125) vs TestRobot2_1771959092480_0.8096283879145358 (User 126) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 50 prestige, 38 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:32.750Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.error
      [BattleOrchestrator] Failed to process match 137: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:686:34
      
        683   },
        684 });
        685 
      → 686 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:686:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959092692_0.7843740668093353 earned ₡3,000 from Battle #163

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092695_0.5643905672736752 earned ₡1,002 from Battle #163

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092692_0.7843740668093353 (User 127) vs TestRobot2_1771959092695_0.5643905672736752 (User 128) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959092741_0.7089750945408015 earned ₡7,043 from Battle #166

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959092744_0.21093794775441665 earned ₡10,489 from Battle #166

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092741_0.7089750945408015 (User 125) vs TestRobot2_1771959092744_0.21093794775441665 (User 126) | Winner: TestRobot2_1771959092744_0.21093794775441665 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:33.019Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959092828_0.5518216887125477 earned ₡10,404 from Battle #170

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959092828_0.05985120275162836 earned ₡10,128 from Battle #170

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959092828_0.5518216887125477 (User 129) vs Robot2_1771959092828_0.05985120275162836 (User 130) | Winner: Robot1_1771959092828_0.5518216887125477 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771959092828_0.5518216887125477

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959093009_0.8558089120900858 earned ₡7,039 from Battle #172

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959093011_0.0386818215817919 earned ₡10,479 from Battle #172

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959093009_0.8558089120900858 (User 125) vs TestRobot2_1771959093011_0.0386818215817919 (User 126) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:33.234Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959093096_0.6359186297450872 earned ₡3,957 from Battle #174

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959093096_0.4032917217628468 earned ₡10,132 from Battle #174

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959093096_0.6359186297450872 (User 129) vs Robot2_1771959093096_0.4032917217628468 (User 130) | Winner: Robot2_1771959093096_0.4032917217628468 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot2_1771959093096_0.4032917217628468

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959093224_0.25658330056816137 earned ₡7,039 from Battle #176

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959093227_0.2774136230366918 earned ₡10,483 from Battle #176

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959093224_0.25658330056816137 (User 125) vs TestRobot2_1771959093227_0.2774136230366918 (User 126) | Winner: TestRobot1_1771959093224_0.25658330056816137 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 4 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:33.427Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 64 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] WimpBot 79 earned ₡1,000 from Battle #178

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 81 earned ₡1,001 from Battle #178

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 79 (User 86) vs WimpBot 81 (User 88) | Winner: WimpBot 81 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 19 earned ₡1,001 from Battle #180

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 21 earned ₡1,000 from Battle #180

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 19 (User 26) vs WimpBot 21 (User 28) | Winner: WimpBot 19 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 23 earned ₡1,002 from Battle #182

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 25 earned ₡1,002 from Battle #182

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 23 (User 30) vs WimpBot 25 (User 32) | Winner: WimpBot 23 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: WimpBot 23

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 27 earned ₡1,002 from Battle #184

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 29 earned ₡1,003 from Battle #184

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 27 (User 34) vs WimpBot 29 (User 36) | Winner: WimpBot 29 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 31 earned ₡1,002 from Battle #186

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 33 earned ₡1,002 from Battle #186

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 31 (User 38) vs WimpBot 33 (User 40) | Winner: WimpBot 31 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 35 earned ₡1,002 from Battle #188

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 37 earned ₡1,002 from Battle #188

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 35 (User 42) vs WimpBot 37 (User 44) | Winner: WimpBot 37 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 39 earned ₡1,002 from Battle #190

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 41 earned ₡1,002 from Battle #190

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 39 (User 46) vs WimpBot 41 (User 48) | Winner: WimpBot 39 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 43 earned ₡1,002 from Battle #192

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 45 earned ₡1,002 from Battle #192

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 43 (User 50) vs WimpBot 45 (User 52) | Winner: WimpBot 45 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 47 earned ₡1,002 from Battle #194

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 49 earned ₡1,002 from Battle #194

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 47 (User 54) vs WimpBot 49 (User 56) | Winner: WimpBot 49 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 51 earned ₡1,002 from Battle #196

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 53 earned ₡1,002 from Battle #196

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 51 (User 58) vs WimpBot 53 (User 60) | Winner: WimpBot 53 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 55 earned ₡1,002 from Battle #198

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 57 earned ₡1,002 from Battle #198

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 55 (User 62) vs WimpBot 57 (User 64) | Winner: WimpBot 55 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: WimpBot 55

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 59 earned ₡1,002 from Battle #200

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 61 earned ₡1,002 from Battle #200

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 59 (User 66) vs WimpBot 61 (User 68) | Winner: WimpBot 61 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 63 earned ₡1,002 from Battle #202

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 65 earned ₡1,002 from Battle #202

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 63 (User 70) vs WimpBot 65 (User 72) | Winner: WimpBot 65 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 67 earned ₡1,002 from Battle #204

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 69 earned ₡1,002 from Battle #204

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 67 (User 74) vs WimpBot 69 (User 76) | Winner: WimpBot 69 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 71 earned ₡1,002 from Battle #206

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 73 earned ₡1,002 from Battle #206

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 71 (User 78) vs WimpBot 73 (User 80) | Winner: WimpBot 71 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 75 earned ₡1,002 from Battle #208

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 77 earned ₡1,002 from Battle #208

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 75 (User 82) vs WimpBot 77 (User 84) | Winner: WimpBot 75 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 87 earned ₡1,002 from Battle #210

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 89 earned ₡1,001 from Battle #210

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 87 (User 94) vs WimpBot 89 (User 96) | Winner: WimpBot 87 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 91 earned ₡1,002 from Battle #212

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 93 earned ₡1,002 from Battle #212

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 91 (User 98) vs WimpBot 93 (User 100) | Winner: WimpBot 93 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 95 earned ₡1,002 from Battle #214

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 97 earned ₡1,002 from Battle #214

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 95 (User 102) vs WimpBot 97 (User 104) | Winner: WimpBot 97 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 99 earned ₡1,002 from Battle #217

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Tank Fortress C000 earned ₡1,003 from Battle #217

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 99 (User 106) vs Tank Fortress C000 (User 108) | Winner: Tank Fortress C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +4 | Kill: Tank Fortress C000

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] Glass Cannon B C000 earned ₡1,002 from Battle #220

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Speed Demon A C000 earned ₡1,003 from Battle #220

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Glass Cannon B C000 (User 110) vs Speed Demon A C000 (User 112) | Winner: Speed Demon A C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +4

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] Speed Demon C C000 earned ₡1,003 from Battle #223

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Facility Investor C000 earned ₡1,002 from Battle #223

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Speed Demon C C000 (User 114) vs Facility Investor C000 (User 116) | Winner: Speed Demon C C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] Two-Robot Beta C000 earned ₡1,002 from Battle #226

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Ranged Sniper C000 earned ₡1,003 from Battle #226

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Two-Robot Beta C000 (User 117) vs Ranged Sniper C000 (User 119) | Winner: Ranged Sniper C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Ranged Sniper C000

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] Prestige Rusher C000 earned ₡1,002 from Battle #229

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Henk earned ₡1,002 from Battle #229

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Prestige Rusher C000 (User 121) vs Henk (User 3) | Winner: Prestige Rusher C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Prestige Rusher C000

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] PBT_Limit_1771959092177_0_0.2125634982154947 earned ₡1,002 from Battle #232

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 5 earned ₡1,000 from Battle #232

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092177_0_0.2125634982154947 (User 122) vs WimpBot 5 (User 12) | Winner: PBT_Limit_1771959092177_0_0.2125634982154947 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] PBT_Limit_1771959092182_1_0.08921469003647553 earned ₡1,002 from Battle #235

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 7 earned ₡1,000 from Battle #235

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092182_1_0.08921469003647553 (User 122) vs WimpBot 7 (User 14) | Winner: PBT_Limit_1771959092182_1_0.08921469003647553 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] PBT_Limit_1771959092187_2_0.9858417724561371 earned ₡1,002 from Battle #238

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 9 earned ₡1,003 from Battle #238

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092187_2_0.9858417724561371 (User 122) vs WimpBot 9 (User 16) | Winner: WimpBot 9 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] PBT_Limit_1771959092192_3_0.391232246124365 earned ₡1,002 from Battle #241

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 11 earned ₡1,002 from Battle #241

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092192_3_0.391232246124365 (User 122) vs WimpBot 11 (User 18) | Winner: WimpBot 11 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] PBT_Limit_1771959092200_4_0.6231080329810477 earned ₡1,002 from Battle #244

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 13 earned ₡1,002 from Battle #244

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092200_4_0.6231080329810477 (User 122) vs WimpBot 13 (User 20) | Winner: PBT_Limit_1771959092200_4_0.6231080329810477 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] PBT_Limit_1771959092205_5_0.6990815742550932 earned ₡1,002 from Battle #247

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 15 earned ₡1,002 from Battle #247

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 100: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] PBT_Limit_1771959092210_6_0.5066055863934573 earned ₡1,002 from Battle #250

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 17 earned ₡1,002 from Battle #250

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 101: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] PBT_Limit_1771959092226_9_0.26892166110590976 earned ₡1,004 from Battle #253

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 3 earned ₡1,002 from Battle #253

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 102: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] PBT_Limit_1771959092215_7_0.6065972633915144 earned ₡1,003 from Battle #256

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] PBT_Limit_1771959092220_8_0.7275474819936254 earned ₡1,003 from Battle #256

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092215_7_0.6065972633915144 (User 122) vs PBT_Limit_1771959092220_8_0.7275474819936254 (User 122) | Winner: PBT_Limit_1771959092215_7_0.6065972633915144 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] AI Tactician C000 earned ₡1,001 from Battle #259

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 16 earned ₡1,000 from Battle #259

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 130: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 6 earned ₡1,003 from Battle #262

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 10 earned ₡1,002 from Battle #262

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 132: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 30 earned ₡1,003 from Battle #265

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 36 earned ₡1,002 from Battle #265

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 104: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 34 earned ₡1,002 from Battle #268

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 38 earned ₡1,002 from Battle #268

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 105: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 32 earned ₡1,002 from Battle #271

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 72 earned ₡1,002 from Battle #271

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 32 (User 39) vs WimpBot 72 (User 79) | Winner: WimpBot 72 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 62 earned ₡1,002 from Battle #274

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 66 earned ₡1,002 from Battle #274

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 107: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 68 earned ₡1,002 from Battle #277

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 56 earned ₡1,002 from Battle #277

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 108: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 50 earned ₡1,002 from Battle #280

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 58 earned ₡1,002 from Battle #280

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 109: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 74 earned ₡1,002 from Battle #282

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 84 earned ₡1,003 from Battle #282

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 110: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 82 earned ₡1,002 from Battle #285

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 86 earned ₡1,002 from Battle #285

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 82 (User 89) vs WimpBot 86 (User 93) | Winner: WimpBot 86 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 88 earned ₡1,002 from Battle #288

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 90 earned ₡1,001 from Battle #288

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 112: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] Glass Cannon C C000 earned ₡1,000 from Battle #291

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Speed Demon B C000 earned ₡1,001 from Battle #291

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 113: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 100 earned ₡1,000 from Battle #294

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 20 earned ₡1,001 from Battle #294

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 114: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 12 earned ₡1,001 from Battle #297

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 18 earned ₡1,001 from Battle #297

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 12 (User 19) vs WimpBot 18 (User 25) | Winner: WimpBot 18 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] Glass Cannon A C000 earned ₡1,001 from Battle #300

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 1 earned ₡1,000 from Battle #300

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 129: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 4 earned ₡1,003 from Battle #303

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 2 earned ₡1,003 from Battle #303

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 4 (User 11) vs WimpBot 2 (User 9) | Winner: WimpBot 2 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 22 earned ₡1,002 from Battle #306

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 24 earned ₡1,003 from Battle #306

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 22 (User 29) vs WimpBot 24 (User 31) | Winner: WimpBot 24 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 28 earned ₡1,001 from Battle #309

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 8 earned ₡1,001 from Battle #309

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 28 (User 35) vs WimpBot 8 (User 15) | Winner: WimpBot 28 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 14 earned ₡1,001 from Battle #312

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 70 earned ₡1,000 from Battle #312

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 14 (User 21) vs WimpBot 70 (User 77) | Winner: WimpBot 14 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: WimpBot 14

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 80 earned ₡1,000 from Battle #315

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 60 earned ₡1,001 from Battle #315

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 80 (User 87) vs WimpBot 60 (User 67) | Winner: WimpBot 60 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 40 earned ₡1,000 from Battle #318

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 42 earned ₡1,002 from Battle #318

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 40 (User 47) vs WimpBot 42 (User 49) | Winner: WimpBot 42 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 48 earned ₡1,000 from Battle #321

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 26 earned ₡1,002 from Battle #321

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 48 (User 55) vs WimpBot 26 (User 33) | Winner: WimpBot 26 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 46 earned ₡1,002 from Battle #324

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 64 earned ₡1,001 from Battle #324

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 46 (User 53) vs WimpBot 64 (User 71) | Winner: WimpBot 46 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 44 earned ₡1,001 from Battle #327

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 76 earned ₡1,001 from Battle #327

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 123: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 54 earned ₡1,001 from Battle #330

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 94 earned ₡1,001 from Battle #330

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 124: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 52 earned ₡1,001 from Battle #332

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 78 earned ₡1,001 from Battle #332

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 125: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 92 earned ₡1,001 from Battle #335

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 96 earned ₡1,001 from Battle #335

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.error
      [BattleOrchestrator] Failed to process match 126: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] WimpBot 98 earned ₡1,000 from Battle #338

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Two-Robot Alpha C000 earned ₡1,002 from Battle #338

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 98 (User 105) vs Two-Robot Alpha C000 (User 117) | Winner: Two-Robot Alpha C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Two-Robot Alpha C000

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] Melee Specialist C000 earned ₡1,001 from Battle #341

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Balanced Brawler C000 earned ₡1,000 from Battle #341

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Melee Specialist C000 (User 118) vs Balanced Brawler C000 (User 115) | Winner: Melee Specialist C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Melee Specialist C000

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] Robot1_1771959093297_0.5986110949662341 earned ₡2,002 from Battle #344

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959093297_0.47000568275593724 earned ₡10,128 from Battle #344

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959093297_0.5986110949662341 (User 129) vs Robot2_1771959093297_0.47000568275593724 (User 130) | Winner: Robot1_1771959093297_0.5986110949662341 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959093419_0.1373323364758816 earned ₡1,005 from Battle #346

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959093421_0.610626907335439 earned ₡10,485 from Battle #346

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959093419_0.1373323364758816 (User 125) vs TestRobot2_1771959093421_0.610626907335439 (User 126) | Winner: TestRobot1_1771959093419_0.1373323364758816 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 45 successful, 19 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 225 prestige, 103 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:39.086Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 4 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] PBT_Limit_1771959092205_5_0.6990815742550932 earned ₡1,007 from Battle #350

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 15 earned ₡1,005 from Battle #350

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092205_5_0.6990815742550932 (User 122) vs WimpBot 15 (User 22) | Winner: PBT_Limit_1771959092205_5_0.6990815742550932 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: PBT_Limit_1771959092205_5_0.6990815742550932

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] WimpBot 30 earned ₡1,006 from Battle #353

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] WimpBot 36 earned ₡1,005 from Battle #353

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | WimpBot 30 (User 37) vs WimpBot 36 (User 43) | Winner: WimpBot 30 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.error
      [BattleOrchestrator] Failed to process match 149: Error: Robots not found for match 149
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959099077_0.22522651150412065 earned ₡4,022 from Battle #354

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959099080_0.22707735142263652 earned ₡10,485 from Battle #354

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959099077_0.22522651150412065 (User 125) vs TestRobot2_1771959099080_0.22707735142263652 (User 126) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 3 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:39.521Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959099320_0.462737289838948 earned ₡2,004 from Battle #357

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959099320_0.17469100085078448 earned ₡6,758 from Battle #357

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959099320_0.462737289838948 (User 129) vs Robot2_1771959099320_0.17469100085078448 (User 130) | Winner: Robot2_1771959099320_0.17469100085078448 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959099509_0.8674472120336989 earned ₡6,033 from Battle #359

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959099512_0.739319512779492 earned ₡10,489 from Battle #359

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959099509_0.8674472120336989 (User 125) vs TestRobot2_1771959099512_0.739319512779492 (User 126) | Winner: TestRobot1_1771959099509_0.8674472120336989 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771959099509_0.8674472120336989

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 4 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:39.793Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.error
      [BattleOrchestrator] Failed to process match 153: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:38
      
        394 }
        395 
        396 // Create battle record
      → 397 const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot1_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:18)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:177:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot1_id_fkey (index)' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:251:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

    console.log
      [Streaming] TestRobot1_1771959099779_0.9530100775740288 earned ₡7,039 from Battle #362

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959099783_0.4294245882369623 earned ₡1,498 from Battle #362

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959099779_0.9530100775740288 (User 125) vs TestRobot2_1771959099783_0.4294245882369623 (User 126) | Winner: TestRobot2_1771959099783_0.4294245882369623 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 1 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:39.979Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959099839_0.9120211081924755 earned ₡2,003 from Battle #365

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959099839_0.8384089102062334 earned ₡5,914 from Battle #365

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959099839_0.9120211081924755 (User 129) vs Robot2_1771959099839_0.8384089102062334 (User 130) | Winner: Robot1_1771959099839_0.9120211081924755 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959099967_0.08031662456609445 earned ₡7,036 from Battle #367

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959099971_0.6806958857118255 earned ₡5,993 from Battle #367

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959099967_0.08031662456609445 (User 125) vs TestRobot2_1771959099971_0.6806958857118255 (User 126) | Winner: TestRobot2_1771959099971_0.6806958857118255 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 4 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:40.346Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959100055_0.7145437820984759 earned ₡2,002 from Battle #370

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959100055_0.9680015172763039 earned ₡5,491 from Battle #370

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959100055_0.7145437820984759 (User 129) vs Robot2_1771959100055_0.9680015172763039 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771959100334_0.5373704067835985 earned ₡7,040 from Battle #371

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959100337_0.4416442009125561 earned ₡8,990 from Battle #371

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959100334_0.5373704067835985 (User 125) vs TestRobot2_1771959100337_0.4416442009125561 (User 126) | Winner: TestRobot2_1771959100337_0.4416442009125561 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:50.608Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] Robot1_1771959100463_0.15217184442854725 earned ₡2,001 from Battle #374

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Robot2_1771959100463_0.673564301306628 earned ₡5,285 from Battle #374

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | Robot1_1771959100463_0.15217184442854725 (User 129) vs Robot2_1771959100463_0.673564301306628 (User 130) | Winner: Robot2_1771959100463_0.673564301306628 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should include totalStreamingRevenue property in battle execution summary

    Property failed after 5 tests
    { seed: 1534356569, path: "4", endOnFailure: true }
    Counterexample: [{"robot1Battles":4,"robot1Fame":1,"robot2Battles":496,"robot2Fame":3,"studioLevel1":6,"studioLevel2":6}]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:275:30

      272   },
      273 });
      274 await prisma.scheduledMatch.deleteMany({ where: { id: match.id } });
    → 275 await prisma.robot.deleteMany(
    Foreign key constraint violated: `battles_robot1_id_fkey (index)`

      273 |           });
      274 |           await prisma.scheduledMatch.deleteMany({ where: { id: match.id } });
    > 275 |           await prisma.robot.deleteMany({ where: { id: robot1.id } });
          |           ^
      276 |           await prisma.robot.deleteMany({ where: { id: robot2.id } });
      277 |         }
      278 |       ),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:275:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

PASS tests/integration/tagTeamLeagueRebalancing.test.ts
  ● Console

    console.log
      [Test] Step 1: Creating teams with varying league points...

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:113:13)

    console.log
      [Test] Created 20 teams

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:139:13)

    console.log
      [Test] Step 2: Running league rebalancing...

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:149:13)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:374:11)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:375:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:376:11)

    console.log
      [TagTeamRebalancing] Total teams in system: 21

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:389:11)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] bronze: 21 total teams across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] Processing bronze_1...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:312:13)

    console.log
      [TagTeamRebalancing] bronze_1: 2 teams eligible for promotion (top 10% of 20 AND ≥25 league points, 15 met points threshold)

      at determinePromotions (src/services/tagTeamLeagueRebalancingService.ts:115:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 677 (bronze → silver, instance silver_1, LP: 95 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 676 (bronze → silver, instance silver_1, LP: 90 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] bronze: Promoted 2, Demoted 0 across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] silver: 2 total teams across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] Processing silver_1...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:312:13)

    console.log
      [TagTeamRebalancing] silver_1: Skipping (0 eligible, need 10)

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:329:15)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:408:11)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:409:11)

    console.log
        Total promoted: 2

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:410:11)

    console.log
        Total demoted: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:411:11)

    console.log
        Errors: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:412:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:413:11)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:416:11)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [Test] Rebalancing complete: 2 promoted, 0 demoted

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:152:13)

    console.log
      [Test] Step 3: Verifying promotions...

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:158:13)

    console.log
      [Test] Step 4: Verifying demotions...

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:187:13)

    console.log
      [Test] Step 5: Verifying teams that stayed in Bronze...

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:193:13)

    console.log
      [Test] ✓ League rebalancing verified successfully

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:211:13)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:374:11)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:375:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:376:11)

    console.log
      [TagTeamRebalancing] Total teams in system: 3

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:389:11)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] bronze: 3 total teams across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] Processing bronze_1...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:312:13)

    console.log
      [TagTeamRebalancing] bronze_1: Skipping (0 eligible, need 10)

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:329:15)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:408:11)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:409:11)

    console.log
        Total promoted: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:410:11)

    console.log
        Total demoted: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:411:11)

    console.log
        Errors: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:412:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:413:11)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:416:11)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [Test] ✓ Teams with < 5 cycles correctly excluded from rebalancing

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:282:13)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:374:11)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:375:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:376:11)

    console.log
      [TagTeamRebalancing] Total teams in system: 13

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:389:11)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] bronze: 3 total teams across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] Processing bronze_1...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:312:13)

    console.log
      [TagTeamRebalancing] bronze_1: Skipping (0 eligible, need 10)

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:329:15)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] silver: 10 total teams across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] Processing silver_1...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:312:13)

    console.log
      [TagTeamRebalancing] silver_1: 1 teams eligible for promotion (top 10% of 10 AND ≥25 league points, 7 met points threshold)

      at determinePromotions (src/services/tagTeamLeagueRebalancingService.ts:115:11)

    console.log
      [TagTeamRebalancing] silver_1: 1 teams eligible for demotion (bottom 10% of 10)

      at determineDemotions (src/services/tagTeamLeagueRebalancingService.ts:175:11)

    console.log
      [TagTeamRebalancing] Promoted: Team 696 (silver → gold, instance gold_1, LP: 90 retained)

      at promoteTeam (src/services/tagTeamLeagueRebalancingService.ts:233:11)

    console.log
      [TagTeamRebalancing] Demoted: Team 682 (silver → bronze, instance bronze_1, LP: 0 retained)

      at demoteTeam (src/services/tagTeamLeagueRebalancingService.ts:267:11)

    console.log
      [TagTeamRebalancing] silver: Promoted 1, Demoted 1 across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] gold: 1 total teams across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] Processing gold_1...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:312:13)

    console.log
      [TagTeamRebalancing] gold_1: Skipping (0 eligible, need 10)

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:329:15)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:408:11)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:409:11)

    console.log
        Total promoted: 1

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:410:11)

    console.log
        Total demoted: 1

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:411:11)

    console.log
        Errors: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:412:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:413:11)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:416:11)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [Test] ✓ Demoted 1 teams from silver to bronze

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:380:13)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:374:11)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:375:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:376:11)

    console.log
      [TagTeamRebalancing] Total teams in system: 9

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:389:11)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] bronze: 4 total teams across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] Processing bronze_1...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:312:13)

    console.log
      [TagTeamRebalancing] bronze_1: Skipping (0 eligible, need 10)

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:329:15)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] gold: 5 total teams across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] Processing gold_1...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:312:13)

    console.log
      [TagTeamRebalancing] gold_1: Skipping (5 eligible, need 10)

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:329:15)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 1 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:282:11)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:308:11)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at rebalanceTier (src/services/tagTeamLeagueRebalancingService.ts:362:11)

    console.log
      
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:408:11)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:409:11)

    console.log
        Total promoted: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:410:11)

    console.log
        Total demoted: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:411:11)

    console.log
        Errors: 0

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:412:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:413:11)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at rebalanceTagTeamLeagues (src/services/tagTeamLeagueRebalancingService.ts:416:11)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at rebalanceTagTeamInstances (src/services/tagTeamLeagueInstanceService.ts:252:13)

    console.log
      [Test] ✓ Rebalancing with < 10 teams handled correctly

      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:481:13)

PASS tests/dataIntegrityService.test.ts
FAIL tests/integration/tagTeamMultiMatchCycle.test.ts
  ● Console

    console.log
      [Test] Step 1: Creating test users and robots...

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:105:13)

    console.log
      [Test] Step 2: Creating tag teams...

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:156:13)

    console.log
      [TagTeam] Created team 690 for stable 291 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 693 for stable 293 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [Test] Step 2: Scheduling 1v1 match...

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:174:13)

    console.log
      [Test] Step 3: Executing 1v1 match...

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:189:13)

    console.log
      [Test] Step 4: Scheduling tag team match...

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:213:13)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:438:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (4 total, 3 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] Scheduled 1 tag team matches

      at scheduleMatches (src/services/tagTeamMatchmakingService.ts:421:11)

    console.log
      [TagTeamMatchmaking] bronze_1: Created 1 matches

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:468:19)

    console.log
      [TagTeamMatchmaking] silver_1: 2 eligible teams (8 total, 2 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.error
      [TagTeamMatchmaking] Error in silver tier: Error: Team 683 not found
          at calculateCombinedELO (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamService.ts:321:11)
          at pairTeams (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamMatchmakingService.ts:329:25)
          at runTagTeamMatchmaking (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamMatchmakingService.ts:461:25)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:215:31)

      470 |       }
      471 |     } catch (error) {
    > 472 |       console.error(`[TagTeamMatchmaking] Error in ${tier} tier:`, error);
          |               ^
      473 |     }
      474 |   }
      475 |

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:472:15)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:215:31)

    console.log
      [TagTeamMatchmaking] Complete: 1 total matches created

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:476:11)

    console.log
      [Test] Step 5: Executing tag team battles...

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:219:13)

    console.log
      [TagTeamBattles] Found 2 scheduled tag team matches

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1215:11)

    console.error
      [TagTeamBattles] Error executing match 1: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamBattleOrchestrator.ts:891:38
      
        888   result: TagTeamBattleResult
        889 ): Promise<Battle> {
        890   // Create battle record with tag team fields
      → 891   const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot2_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createTagTeamBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamBattleOrchestrator.ts:891:18)
          at executeTagTeamBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamBattleOrchestrator.ts:266:18)
          at executeScheduledTagTeamBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamBattleOrchestrator.ts:1253:22)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:221:26) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot2_id_fkey (index)' }
      }

      1287 |
      1288 |     } catch (error) {
    > 1289 |       console.error(`[TagTeamBattles] Error executing match ${match.id}:`, error);
           |               ^
      1290 |       
      1291 |       // Mark match as cancelled on error
      1292 |       await prisma.tagTeamMatch.update({

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1289:15)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:221:26)

    console.log
      [TagTeamBattle] Completed: Team 690 vs Team 693 (Winner: Team 690)

      at executeTagTeamBattle (src/services/tagTeamBattleOrchestrator.ts:278:11)

    console.log
      [TagTeamBattles] Updated results for match 2: Team 690 ELO +16, Team 693 ELO -16

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:1836:11)

    console.log
      [TagTeamBattles] Fame awarded - Team 690: MultiMatch_Robot_0_0_1771959100494 +1, MultiMatch_Robot_0_1_1771959100509 +1

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:1844:13)

    console.log
      [Streaming] Team 690 earned ₡1,001 (Battles from MultiMatch_Robot_0_0_1771959100494, Fame from MultiMatch_Robot_0_0_1771959100494)

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:1873:11)

    console.log
      [Streaming] Team 693 earned ₡1,000 (Battles from MultiMatch_Robot_1_0_1771959100518, Fame from MultiMatch_Robot_1_0_1771959100518)

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:1877:11)

    console.log
      [TagTeamBattles] Created 4 audit log events for tag team battle 378 (one per robot, rewards split 50/50 per team)

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:2106:13)

    console.log
      [TagTeamBattles] Execution complete: 1 battles, 1 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1299:11)

    console.log
      [Test] Step 6: Verifying cumulative damage...

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:225:13)

    console.log
      [Test] Robot 1: HP 100 → 80 (1v1) → 15 (tag team)

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:242:13)

    console.log
      [Test] Robot 2: HP 100 → 85 (1v1) → 14 (tag team)

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:245:13)

    console.log
      [Test] ✓ Cumulative damage verified successfully

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:248:13)

    console.log
      [TagTeam] Created team 711 for stable 308 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 713 for stable 309 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:438:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (6 total, 2 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] Scheduled 1 tag team matches

      at scheduleMatches (src/services/tagTeamMatchmakingService.ts:421:11)

    console.log
      [TagTeamMatchmaking] bronze_1: Created 1 matches

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:468:19)

    console.log
      [TagTeamMatchmaking] Complete: 1 total matches created

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:476:11)

    console.log
      [TagTeamBattles] Found 1 scheduled tag team matches

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1215:11)

    console.log
      [TagTeamBattle] Completed: Team 1 vs Team 713 (Winner: Team 1)

      at executeTagTeamBattle (src/services/tagTeamBattleOrchestrator.ts:278:11)

    console.log
      [TagTeamBattles] Updated results for match 3: Team 1 ELO +3, Team 713 ELO -3

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:1836:11)

    console.log
      [TagTeamBattles] Fame awarded - Team 1: Two-Robot Alpha C000 +3, Two-Robot Beta C000 +2

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:1844:13)

    console.log
      [Streaming] Team 1 earned ₡1,006 (Battles from Two-Robot Beta C000, Fame from Two-Robot Alpha C000)

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:1873:11)

    console.log
      [Streaming] Team 713 earned ₡1,000 (Battles from Unready_Robot_2_1771959101135, Fame from Unready_Robot_2_1771959101135)

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:1877:11)

    console.log
      [TagTeamBattles] Created 4 audit log events for tag team battle 382 (one per robot, rewards split 50/50 per team)

      at updateTagTeamBattleResults (src/services/tagTeamBattleOrchestrator.ts:2106:13)

    console.log
      [TagTeamBattles] Execution complete: 1 battles, 1 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1299:11)

    console.log
      [Test] ✓ No matches were created or executed (team was unready during matchmaking)

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:328:15)

    console.log
      [TagTeam] Created team 720 for stable 311 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 721 for stable 312 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:438:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 3 eligible teams (6 total, 3 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] Bye-match created for team 720

      at pairTeams (src/services/tagTeamMatchmakingService.ts:378:13)

    console.log
      [TagTeamMatchmaking] Scheduled 2 tag team matches

      at scheduleMatches (src/services/tagTeamMatchmakingService.ts:421:11)

    console.log
      [TagTeamMatchmaking] bronze_1: Created 2 matches

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:468:19)

    console.log
      [TagTeamMatchmaking] Complete: 2 total matches created

      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:476:11)

    console.log
      [Test] Created 1 tag team matches

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:440:13)

    console.log
      [Test] ✓ Match processing order verified

      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:441:13)

  ● Tag Team Multi-Match Cycle Integration Test › should handle robot in both 1v1 and tag team match with cumulative damage

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:80:26

      77     robot1Id: { in: testRobotIds },
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_reserve_robot_id_fkey (index)`

      78 |         },
      79 |       });
    > 80 |       await prisma.robot.deleteMany({
         |       ^
      81 |         where: { id: { in: testRobotIds } },
      82 |       });
      83 |     }

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:80:7)

  ● Tag Team Multi-Match Cycle Integration Test › should exclude unready robots from tag team match after 1v1 damage

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:346:24

      343 await prisma.tagTeam.deleteMany({
      344   where: { id: { in: [team1.team!.id, team2.team!.id] } },
      345 });
    → 346 await prisma.robot.deleteMany(
    Foreign key constraint violated: `battles_robot2_id_fkey (index)`

      344 |       where: { id: { in: [team1.team!.id, team2.team!.id] } },
      345 |     });
    > 346 |     await prisma.robot.deleteMany({
          |     ^
      347 |       where: { id: { in: robots.map(r => r.id) } },
      348 |     });
      349 |     await prisma.weaponInventory.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:346:5)

  ● Tag Team Multi-Match Cycle Integration Test › should exclude unready robots from tag team match after 1v1 damage

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:80:26

      77     robot1Id: { in: testRobotIds },
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_reserve_robot_id_fkey (index)`

      78 |         },
      79 |       });
    > 80 |       await prisma.robot.deleteMany({
         |       ^
      81 |         where: { id: { in: testRobotIds } },
      82 |       });
      83 |     }

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:80:7)

  ● Tag Team Multi-Match Cycle Integration Test › should process matches in correct order: 1v1 first, then tag team

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:80:26

      77     robot1Id: { in: testRobotIds },
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_reserve_robot_id_fkey (index)`

      78 |         },
      79 |       });
    > 80 |       await prisma.robot.deleteMany({
         |       ^
      81 |         where: { id: { in: testRobotIds } },
      82 |       });
      83 |     }

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:80:7)

FAIL tests/queryService.test.ts
  ● QueryService › queryEvents › should query events by robot ID

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logAttributeUpgrade (src/services/eventLogger.ts:488:5)
      at Object.<anonymous> (tests/queryService.test.ts:94:7)

  ● QueryService › queryEvents › should query events by event type

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at Object.<anonymous> (tests/queryService.test.ts:109:7)

  ● QueryService › queryEvents › should support pagination with limit and offset

    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 26

      151 |       const page1 = await queryService.queryEvents({ limit: 5, offset: 0 });
      152 |       expect(page1.events).toHaveLength(5);
    > 153 |       expect(page1.total).toBe(10);
          |                           ^
      154 |       expect(page1.hasMore).toBe(true);
      155 |
      156 |       // Get second page (5 events)

      at Object.<anonymous> (tests/queryService.test.ts:153:27)

  ● QueryService › queryEvents › should support sorting by timestamp

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 15
    Received array:  [{"cycleNumber": 71, "eventTimestamp": 2026-02-24T18:51:41.698Z, "eventType": "cycle_step_complete", "id": 15087n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 3, "eventTimestamp": 2026-02-24T18:51:41.696Z, "eventType": "cycle_start", "id": 15086n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.696Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 4, "userId": null}, {"cycleNumber": 70, "eventTimestamp": 2026-02-24T18:51:41.695Z, "eventType": "cycle_step_complete", "id": 15085n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 69, "eventTimestamp": 2026-02-24T18:51:41.693Z, "eventType": "cycle_step_complete", "id": 15084n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.690Z, "eventType": "facility_upgrade", "id": 15083n, "metadata": null, "payload": {"action": "upgrade", "balanceAfter": 9700000, "balanceBefore": 9900000, "cost": 200000, "facilityType": "streaming_studio", "newLevel": 2, "oldLevel": 1}, "robotId": null, "sequenceNumber": 627, "userId": 310}, {"cycleNumber": 68, "eventTimestamp": 2026-02-24T18:51:41.689Z, "eventType": "cycle_step_complete", "id": 15082n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 67, "eventTimestamp": 2026-02-24T18:51:41.686Z, "eventType": "cycle_step_complete", "id": 15081n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 2, "eventTimestamp": 2026-02-24T18:51:41.683Z, "eventType": "cycle_start", "id": 15080n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.683Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 4, "userId": null}, {"cycleNumber": 66, "eventTimestamp": 2026-02-24T18:51:41.682Z, "eventType": "cycle_step_complete", "id": 15079n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 65, "eventTimestamp": 2026-02-24T18:51:41.679Z, "eventType": "cycle_step_complete", "id": 15078n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, …]

      179 |       });
      180 |
    > 181 |       expect(result.events).toHaveLength(3);
          |                             ^
      182 |       expect(result.events[0].cycleNumber).toBe(3);
      183 |       expect(result.events[2].cycleNumber).toBe(1);
      184 |     });

      at Object.<anonymous> (tests/queryService.test.ts:181:29)

  ● QueryService › getEventsByCycle › should get all events for a specific cycle

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 4
    Received array:  [{"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.725Z, "eventType": "cycle_start", "id": 15101n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.725Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 4, "userId": null}, {"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.727Z, "eventType": "cycle_step_complete", "id": 15103n, "metadata": null, "payload": {"duration": 100, "stepName": "step_1", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 5, "userId": null}, {"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.729Z, "eventType": "cycle_complete", "id": 15104n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.729Z", "totalDuration": 100}, "robotId": null, "sequenceNumber": 6, "userId": null}, {"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.730Z, "eventType": "facility_purchase", "id": 15105n, "metadata": null, "payload": {"action": "purchase", "balanceAfter": 9900000, "balanceBefore": 10000000, "cost": 100000, "facilityType": "streaming_studio", "newLevel": 1, "oldLevel": 0}, "robotId": null, "sequenceNumber": 629, "userId": 310}]

      221 |       const events = await queryService.getEventsByCycle(1);
      222 |
    > 223 |       expect(events).toHaveLength(3);
          |                      ^
      224 |       expect(events.every(e => e.cycleNumber === 1)).toBe(true);
      225 |     });
      226 |   });

      at Object.<anonymous> (tests/queryService.test.ts:223:22)

  ● QueryService › getPaginatedEvents › should paginate events correctly

    expect(received).toHaveLength(expected)

    Expected length: 10
    Received length: 9
    Received array:  [{"cycleNumber": 6, "eventTimestamp": 2026-02-24T18:51:41.896Z, "eventType": "cycle_step_complete", "id": 15201n, "metadata": null, "payload": {"duration": 100, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 3, "userId": null}, {"cycleNumber": 7, "eventTimestamp": 2026-02-24T18:51:41.898Z, "eventType": "cycle_step_complete", "id": 15202n, "metadata": null, "payload": {"duration": 100, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 2, "userId": null}, {"cycleNumber": 8, "eventTimestamp": 2026-02-24T18:51:41.900Z, "eventType": "cycle_step_complete", "id": 15203n, "metadata": null, "payload": {"duration": 100, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 2, "userId": null}, {"cycleNumber": 20, "eventTimestamp": 2026-02-24T18:51:41.880Z, "eventType": "cycle_start", "id": 15185n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.878Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 21, "eventTimestamp": 2026-02-24T18:51:41.883Z, "eventType": "cycle_start", "id": 15187n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.881Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 22, "eventTimestamp": 2026-02-24T18:51:41.886Z, "eventType": "cycle_start", "id": 15190n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.885Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 23, "eventTimestamp": 2026-02-24T18:51:41.888Z, "eventType": "cycle_start", "id": 15194n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.887Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 24, "eventTimestamp": 2026-02-24T18:51:41.892Z, "eventType": "cycle_start", "id": 15197n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.890Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 25, "eventTimestamp": 2026-02-24T18:51:41.895Z, "eventType": "cycle_start", "id": 15200n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.893Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}]

      310 |       // Get page 2
      311 |       const page2 = await queryService.getPaginatedEvents({}, 2, 10);
    > 312 |       expect(page2.events).toHaveLength(10);
          |                            ^
      313 |       expect(page2.hasMore).toBe(true);
      314 |
      315 |       // Get page 3

      at Object.<anonymous> (tests/queryService.test.ts:312:28)

  ● QueryService › getEventStatistics › should calculate event statistics

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 8

      338 |       const stats = await queryService.getEventStatistics([1, 2]);
      339 |
    > 340 |       expect(stats.totalEvents).toBe(5);
          |                                 ^
      341 |       expect(stats.eventsByType['cycle_start']).toBe(2);
      342 |       expect(stats.eventsByType['credit_change']).toBe(2);
      343 |       expect(stats.eventsByType['attribute_upgrade']).toBe(1);

      at Object.<anonymous> (tests/queryService.test.ts:340:33)

  ● QueryService › getRecentEvents › should get most recent events

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 23

      362 |
      363 |       expect(recent).toHaveLength(3);
    > 364 |       expect(recent[0].cycleNumber).toBe(5); // Most recent first
          |                                     ^
      365 |       expect(recent[2].cycleNumber).toBe(3);
      366 |     });
      367 |   });

      at Object.<anonymous> (tests/queryService.test.ts:364:37)

FAIL tests/trainingAcademyCaps.test.ts
  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should allow upgrading combatPower to level 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 400

      83 |           });
      84 |
    > 85 |         expect(response.status).toBe(200);
         |                                 ^
      86 |       }
      87 |
      88 |       // Verify the robot is at level 10

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:85:33)

  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should block upgrading combatPower from level 10 to level 11 without academy

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      106 |         .send({ attribute: 'combatPower' });
      107 |
    > 108 |       expect(response.status).toBe(400);
          |                               ^
      109 |       expect(response.body.error).toContain('Attribute cap of 10 reached');
      110 |       expect(response.body.error).toContain('Combat Training Academy');
      111 |     });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:108:31)

  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should allow upgrading combatPower to level 15 with academy level 1

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      137 |         .send({ attribute: 'combatPower' });
      138 |
    > 139 |       expect(response.status).toBe(200);
          |                               ^
      140 |
      141 |       // Verify the robot is at level 15
      142 |       const robot = await prisma.robot.findUnique({

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:139:31)

  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should block upgrading combatPower from level 15 to level 16

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      159 |         .send({ attribute: 'combatPower' });
      160 |
    > 161 |       expect(response.status).toBe(400);
          |                               ^
      162 |       expect(response.body.error).toContain('Attribute cap of 15 reached');
      163 |       expect(response.body.error).toContain('Combat Training Academy');
      164 |     });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:161:31)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Combat Training Academy for Combat Systems attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      189 |           .send({ attribute });
      190 |
    > 191 |         expect(response.status).toBe(400);
          |                                 ^
      192 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      193 |         expect(response.body.error).toContain('Combat Training Academy');
      194 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:191:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Defense Training Academy for Defensive Systems attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      217 |           .send({ attribute });
      218 |
    > 219 |         expect(response.status).toBe(400);
          |                                 ^
      220 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      221 |         expect(response.body.error).toContain('Defense Training Academy');
      222 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:219:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Mobility Training Academy for Chassis & Mobility attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      245 |           .send({ attribute });
      246 |
    > 247 |         expect(response.status).toBe(400);
          |                                 ^
      248 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      249 |         expect(response.body.error).toContain('Mobility Training Academy');
      250 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:247:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce AI Training Academy for AI Processing + Team attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      275 |           .send({ attribute });
      276 |
    > 277 |         expect(response.status).toBe(400);
          |                                 ^
      278 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      279 |         expect(response.body.error).toContain('AI Training Academy');
      280 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:277:33)

  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should allow upgrading combatPower to level 50 with academy level 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      307 |         .send({ attribute: 'combatPower' });
      308 |
    > 309 |       expect(response.status).toBe(200);
          |                               ^
      310 |
      311 |       // Verify the robot is at level 50
      312 |       const robot = await prisma.robot.findUnique({

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:309:31)

  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should block upgrading combatPower from level 50 to level 51

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      329 |         .send({ attribute: 'combatPower' });
      330 |
    > 331 |       expect(response.status).toBe(400);
          |                               ^
      332 |       expect(response.body.error).toContain('maximum level');
      333 |     });
      334 |   });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:331:31)

FAIL tests/integration/tagTeamAutoRepair.test.ts
  ● Console

    console.log
      [Test] Step 1: Creating test users and robots...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:94:13)

    console.log
      [Test] Step 2: Creating tag teams...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:155:13)

    console.log
      [TagTeam] Created team 730 for stable 325 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 731 for stable 327 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [Test] Step 3: Damaging robots below 75% HP...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:172:13)

    console.log
      [Test] Step 3: Recording initial currency...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:194:13)

    console.log
      [Test] User 1 currency before: ₡100000

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:203:13)

    console.log
      [Test] User 2 currency before: ₡100000

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:204:13)

    console.log
      [Test] Step 4: Scheduling tag team match...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:214:13)

    console.log
      [Test] Step 5: Executing tag team battle (should auto-repair)...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:228:13)

    console.log
      [TagTeamBattles] Found 2 scheduled tag team matches

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1215:11)

    console.log
      [TagTeamBattles] Skipping match 6: Team 730 ready: false, Team 731 ready: false

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1236:19)

    console.error
      [TagTeamBattles] Error executing match 4: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamBattleOrchestrator.ts:891:38
      
        888   result: TagTeamBattleResult
        889 ): Promise<Battle> {
        890   // Create battle record with tag team fields
      → 891   const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot2_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createTagTeamBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamBattleOrchestrator.ts:891:18)
          at executeTagTeamBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamBattleOrchestrator.ts:266:18)
          at executeScheduledTagTeamBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamBattleOrchestrator.ts:1253:22)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamAutoRepair.test.ts:230:26) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot2_id_fkey (index)' }
      }

      1287 |
      1288 |     } catch (error) {
    > 1289 |       console.error(`[TagTeamBattles] Error executing match ${match.id}:`, error);
           |               ^
      1290 |       
      1291 |       // Mark match as cancelled on error
      1292 |       await prisma.tagTeamMatch.update({

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1289:15)
      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:230:26)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 1 skipped due to unready robots

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1299:11)

    console.log
      [Test] Step 1: Creating new tag teams...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:258:13)

    console.log
      [TagTeam] Created team 737 for stable 339 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 739 for stable 341 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [Test] Damaging robots below 75% HP...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:326:13)

    console.log
      [Test] Step 2: Scheduling match with insufficient funds...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:334:13)

    console.log
      [Test] User 1 currency before: ₡10

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:350:13)

    console.log
      [Test] Step 3: Executing battle (should allow negative currency)...

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:352:13)

    console.log
      [TagTeamBattles] Found 1 scheduled tag team matches

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1215:11)

    console.log
      [TagTeamBattles] Skipping match 7: Team 737 ready: true, Team 739 ready: false

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1236:19)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 1 skipped due to unready robots

      at executeScheduledTagTeamBattles (src/services/tagTeamBattleOrchestrator.ts:1299:11)

  ● Tag Team Auto-Repair Integration Test › should auto-repair damaged robots before battle and deduct costs

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

      229 |     
      230 |     const battleResult = await executeScheduledTagTeamBattles();
    > 231 |     expect(battleResult.totalBattles).toBe(1);
          |                                       ^
      232 |     expect(battleResult.skippedDueToUnreadyRobots).toBe(0);
      233 |
      234 |     console.log('[Test] Step 6: Verifying repairs and currency deduction...');

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:231:39)

  ● Tag Team Auto-Repair Integration Test › should allow users to go into negative currency for repairs

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

      353 |     
      354 |     const battleResult = await executeScheduledTagTeamBattles();
    > 355 |     expect(battleResult.totalBattles).toBe(1);
          |                                       ^
      356 |     expect(battleResult.skippedDueToUnreadyRobots).toBe(0);
      357 |
      358 |     console.log('[Test] Step 4: Verifying user went into negative currency...');

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:355:39)

FAIL tests/battleEventLogging.test.ts
  ● Console

    console.log
      [Streaming] TestBot1_1771959102071 earned ₡1,000 from Battle #393

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestBot2_1771959102071 earned ₡1,001 from Battle #393

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestBot1_1771959102071 (User 338) vs TestBot2_1771959102071 (User 340) | Winner: TestBot2_1771959102071 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestBot1_1771959102071 earned ₡1,002 from Battle #395

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestBot2_1771959102071 earned ₡1,003 from Battle #395

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestBot1_1771959102071 (User 338) vs TestBot2_1771959102071 (User 340) | Winner: TestBot2_1771959102071 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)



  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:112:24

      109 await prisma.battleParticipant.deleteMany({});
      110 await prisma.battle.deleteMany({});
      111 await prisma.scheduledMatch.deleteMany({});
    → 112 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      110 |     await prisma.battle.deleteMany({});
      111 |     await prisma.scheduledMatch.deleteMany({});
    > 112 |     await prisma.robot.deleteMany({});
          |     ^
      113 |     await prisma.user.deleteMany({});
      114 |
      115 |     await prisma.$disconnect();

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:112:5)

FAIL tests/tagTeams.test.ts
  ● Console

    console.log
      [TagTeam] Created team 744 for stable 342 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] User 342 | Created team | Active: 2252 (Test Robot 1) | Reserve: 2253 (Test Robot 2)

      at src/routes/tagTeams.ts:73:13

    console.log
      [TagTeam] Created team 748 for stable 342 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] User 342 | Created team | Active: 2252 (Test Robot 1) | Reserve: 2253 (Test Robot 2)

      at src/routes/tagTeams.ts:73:13

    console.log
      [TagTeam] Disbanded team 752

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] User 342 | Disbanded team | Team ID: 752

      at src/routes/tagTeams.ts:195:13

    console.error
      [TagTeam] Team 999999 not found

      248 |
      249 |     if (!team) {
    > 250 |       console.error(`[TagTeam] Team ${teamId} not found`);
          |               ^
      251 |       return false;
      252 |     }
      253 |

      at disbandTeam (src/services/tagTeamService.ts:250:15)
      at src/routes/tagTeams.ts:188:21

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject duplicate team creation

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 201

      198 |         });
      199 |
    > 200 |       expect(response.status).toBe(400);
          |                               ^
      201 |       // System now validates that robots aren't already in teams
      202 |       expect(response.body.details).toBeDefined();
      203 |     });

      at Object.<anonymous> (tests/tagTeams.test.ts:200:31)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should list all teams for the user

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      213 |       expect(response.body.teams).toBeDefined();
      214 |       expect(Array.isArray(response.body.teams)).toBe(true);
    > 215 |       expect(response.body.teams.length).toBeGreaterThan(0);
          |                                          ^
      216 |       expect(response.body.total).toBe(response.body.teams.length);
      217 |     });
      218 |

      at Object.<anonymous> (tests/tagTeams.test.ts:215:42)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should include robot details and readiness status

    TypeError: Cannot read properties of undefined (reading 'activeRobot')

      224 |       expect(response.status).toBe(200);
      225 |       const team = response.body.teams[0];
    > 226 |       expect(team.activeRobot).toBeDefined();
          |                   ^
      227 |       expect(team.reserveRobot).toBeDefined();
      228 |       expect(team.readiness).toBeDefined();
      229 |       expect(team.readiness.isReady).toBeDefined();

      at Object.<anonymous> (tests/tagTeams.test.ts:226:19)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

FAIL tests/eventLogger.test.ts
  ● EventLogger Service › Cycle Event Helpers › should log cycle complete event and clear cache

    expect(received).not.toBeNull()

    Received: null

      222 |       });
      223 |
    > 224 |       expect(event).not.toBeNull();
          |                         ^
      225 |       expect(event!.payload).toHaveProperty('totalDuration', 5000);
      226 |       expect(event!.payload).toHaveProperty('timestamp');
      227 |     });

      at Object.<anonymous> (tests/eventLogger.test.ts:224:25)

  ● EventLogger Service › Sequence Number Management › should maintain separate sequence numbers per cycle

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 127

      484 |
      485 |       // Both cycles should start at sequence 1
    > 486 |       expect(cycle1Events[0].sequenceNumber).toBe(1);
          |                                              ^
      487 |       expect(cycle1Events[1].sequenceNumber).toBe(2);
      488 |       expect(cycle2Events[0].sequenceNumber).toBe(1);
      489 |       expect(cycle2Events[1].sequenceNumber).toBe(2);

      at Object.<anonymous> (tests/eventLogger.test.ts:486:46)

FAIL tests/tagTeamService.test.ts
  ● Console

    console.error
      [TagTeam] Team 999999 not found

      248 |
      249 |     if (!team) {
    > 250 |       console.error(`[TagTeam] Team ${teamId} not found`);
          |               ^
      251 |       return false;
      252 |     }
      253 |

      at disbandTeam (src/services/tagTeamService.ts:250:15)
      at Object.<anonymous> (tests/tagTeamService.test.ts:506:22)

  ● TagTeamService › validateTeam › should reject robots from different stables

    expect(received).toContain(expected) // indexOf

    Expected value: "Robots must be from the same stable"
    Received array: ["Active robot not found", "Reserve robot not found"]

      257 |       const result = await validateTeam(testRobot1Id, otherRobotId);
      258 |       expect(result.isValid).toBe(false);
    > 259 |       expect(result.errors).toContain('Robots must be from the same stable');
          |                             ^
      260 |     });
      261 |
      262 |     it('should reject team with unready robot (low HP)', async () => {

      at Object.<anonymous> (tests/tagTeamService.test.ts:259:29)

  ● TagTeamService › validateTeam › should reject team with unready robot (low HP)

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:265:54

      262 it('should reject team with unready robot (low HP)', async () => {
      263   // Create a robot with low HP for this test
      264   const weapon = await prisma.weapon.findFirst();
    → 265   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      263 |       // Create a robot with low HP for this test
      264 |       const weapon = await prisma.weapon.findFirst();
    > 265 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      266 |         data: { userId: testUserId, weaponId: weapon!.id },
      267 |       });
      268 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamService.test.ts:265:25)

  ● TagTeamService › validateTeam › should reject duplicate teams

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      294 |       // Create a team first
      295 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 296 |       expect(createResult.success).toBe(true);
          |                                    ^
      297 |
      298 |       // Try to create the same team again
      299 |       const result = await validateTeam(testRobot1Id, testRobot2Id);

      at Object.<anonymous> (tests/tagTeamService.test.ts:296:36)

  ● TagTeamService › validateTeam › should reject duplicate teams in reverse order

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      307 |       // Create a team
      308 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 309 |       expect(createResult.success).toBe(true);
          |                                    ^
      310 |
      311 |       // Try to create the same team with reversed positions
      312 |       const result = await validateTeam(testRobot2Id, testRobot1Id);

      at Object.<anonymous> (tests/tagTeamService.test.ts:309:36)

  ● TagTeamService › validateTeam › should enforce roster limit (max teams = roster size / 2)

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      321 |       // Create 2 teams
      322 |       const team1 = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 323 |       expect(team1.success).toBe(true);
          |                             ^
      324 |       
      325 |       const team2 = await createTeam(testUserId, testRobot3Id, testRobot4Id);
      326 |       expect(team2.success).toBe(true);

      at Object.<anonymous> (tests/tagTeamService.test.ts:323:29)

  ● TagTeamService › createTeam › should create a valid team

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      337 |       const result = await createTeam(testUserId, testRobot1Id, testRobot2Id);
      338 |
    > 339 |       expect(result.success).toBe(true);
          |                              ^
      340 |       expect(result.team).toBeDefined();
      341 |       expect(result.team!.stableId).toBe(testUserId);
      342 |       expect(result.team!.activeRobotId).toBe(testRobot1Id);

      at Object.<anonymous> (tests/tagTeamService.test.ts:339:30)

  ● TagTeamService › createTeam › should place new teams in Bronze league with initial values

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      352 |       const result = await createTeam(testUserId, testRobot1Id, testRobot2Id);
      353 |
    > 354 |       expect(result.success).toBe(true);
          |                              ^
      355 |       expect(result.team).toBeDefined();
      356 |       
      357 |       // Verify initial placement in Bronze league (bronze_1 instance)

      at Object.<anonymous> (tests/tagTeamService.test.ts:354:30)

  ● TagTeamService › createTeam › should reject team creation if user does not own robots

    expect(received).toContain(expected) // indexOf

    Expected value: "You do not own these robots"
    Received array: ["Active robot not found", "Reserve robot not found"]

      383 |
      384 |       expect(result.success).toBe(false);
    > 385 |       expect(result.errors).toContain('You do not own these robots');
          |                             ^
      386 |     });
      387 |   });
      388 |

      at Object.<anonymous> (tests/tagTeamService.test.ts:385:29)

  ● TagTeamService › getTeamById › should retrieve a team by ID

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      390 |     it('should retrieve a team by ID', async () => {
      391 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 392 |       expect(createResult.success).toBe(true);
          |                                    ^
      393 |       const teamId = createResult.team!.id;
      394 |
      395 |       const team = await getTeamById(teamId);

      at Object.<anonymous> (tests/tagTeamService.test.ts:392:36)

  ● TagTeamService › getTeamById › should include robot details in response

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      403 |     it('should include robot details in response', async () => {
      404 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 405 |       expect(createResult.success).toBe(true);
          |                                    ^
      406 |       const teamId = createResult.team!.id;
      407 |
      408 |       const team = await getTeamById(teamId);

      at Object.<anonymous> (tests/tagTeamService.test.ts:405:36)

  ● TagTeamService › getTeamsByStable › should retrieve all teams for a stable

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      432 |     it('should retrieve all teams for a stable', async () => {
      433 |       const team1 = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 434 |       expect(team1.success).toBe(true);
          |                             ^
      435 |       
      436 |       const team2 = await createTeam(testUserId, testRobot3Id, testRobot4Id);
      437 |       expect(team2.success).toBe(true);

      at Object.<anonymous> (tests/tagTeamService.test.ts:434:29)

  ● TagTeamService › getTeamsByStable › should include robot details for all teams

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      447 |     it('should include robot details for all teams', async () => {
      448 |       const team1 = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 449 |       expect(team1.success).toBe(true);
          |                             ^
      450 |       
      451 |       const team2 = await createTeam(testUserId, testRobot3Id, testRobot4Id);
      452 |       expect(team2.success).toBe(true);

      at Object.<anonymous> (tests/tagTeamService.test.ts:449:29)

  ● TagTeamService › disbandTeam › should disband a team

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      479 |     it('should disband a team', async () => {
      480 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 481 |       expect(createResult.success).toBe(true);
          |                                    ^
      482 |       const teamId = createResult.team!.id;
      483 |
      484 |       const result = await disbandTeam(teamId, testUserId);

      at Object.<anonymous> (tests/tagTeamService.test.ts:481:36)

  ● TagTeamService › disbandTeam › should reject disbanding team from wrong stable

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      492 |     it('should reject disbanding team from wrong stable', async () => {
      493 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 494 |       expect(createResult.success).toBe(true);
          |                                    ^
      495 |       const teamId = createResult.team!.id;
      496 |
      497 |       const result = await disbandTeam(teamId, otherUserId);

      at Object.<anonymous> (tests/tagTeamService.test.ts:494:36)

  ● TagTeamService › disbandTeam › should make robots available for new teams after disbanding

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      511 |       // Create a team with robot1 and robot2
      512 |       const createResult1 = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 513 |       expect(createResult1.success).toBe(true);
          |                                     ^
      514 |       const teamId = createResult1.team!.id;
      515 |
      516 |       // Verify we cannot create another team with the same robots

      at Object.<anonymous> (tests/tagTeamService.test.ts:513:37)

FAIL tests/leagueRebalancingService.test.ts
  ● League Rebalancing Service › determinePromotions › should return top 10% of robots with ≥5 cycles AND ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should return top 10% of robots with ≥5 cycles AND ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determinePromotions › should skip robots with <5 cycles in current league

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should skip robots with <5 cycles in current league

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determinePromotions › should return empty array for champion tier

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should return empty array for champion tier

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determinePromotions › should return empty array when no robots have ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should return empty array when no robots have ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determinePromotions › should return empty array when too few robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should return empty array when too few robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `battles_robot1_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determineDemotions › should return bottom 10% of robots with ≥5 cycles in current league

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determineDemotions › should return bottom 10% of robots with ≥5 cycles in current league

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determineDemotions › should return empty array for bronze tier

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determineDemotions › should return empty array for bronze tier

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › promoteRobot › should move robot to next tier and reset league points and cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › promoteRobot › should move robot to next tier and reset league points and cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › promoteRobot › should throw error when trying to promote from champion

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › promoteRobot › should throw error when trying to promote from champion

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › demoteRobot › should move robot to previous tier and reset league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › demoteRobot › should move robot to previous tier and reset league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › demoteRobot › should throw error when trying to demote from bronze

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › demoteRobot › should throw error when trying to demote from bronze

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › rebalanceLeagues › should process all tiers and return summary

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › rebalanceLeagues › should not promote or demote robots multiple times in same cycle

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

FAIL tests/financialReportStreamingRevenue.property.test.ts
  ● Property 17: Financial Report Includes Streaming Revenue › Property 17: Financial report includes streaming revenue line item

    Property failed after 1 tests
    { seed: 207559121, path: "0:0:0:0:38:28:21:0:0:0", endOnFailure: true }
    Counterexample: [{"numBattles":1,"robotBattles":0,"robotFame":0,"studioLevel":0,"streamingRevenuePerBattle":[1000]}]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at tests/financialReportStreamingRevenue.property.test.ts:182:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:127:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.2: Only counts streaming revenue from user's robots

    Property failed after 4 tests
    { seed: -318641219, path: "3:0:0:8:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"userBattles":1,"opponentBattles":1,"userStreamingRevenue":[1000],"opponentStreamingRevenue":[1000]}]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:298:29
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:282:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.3: Streaming revenue contributes to total revenue

    Property failed after 1 tests
    { seed: -992717984, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [{"numBattles":1,"streamingRevenuePerBattle":1000,"battleWinnings":0}]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:417:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:408:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.4: Aggregates streaming revenue across multiple robots

    Property failed after 1 tests
    { seed: 575388905, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"numRobots":2,"battlesPerRobot":[1,1],"revenuePerBattle":[1000,1000]}]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:496:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:473:5)

FAIL tests/terminalLogStreamingRevenue.property.test.ts (19.053 s)
  ● Console

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:28.255Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 1: Error: Robot 172 not found
          at calculateStreamingRevenue (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/streamingRevenueService.ts:90:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:657:25)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:280:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:199:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:280:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

    console.log
      [Streaming] TestRobot1_1771959088178_0.5167997119010074 earned ₡8,125 from Battle #5

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959088187_0.41950919981635515 earned ₡8,078 from Battle #5

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088178_0.5167997119010074 (User 127) vs TestRobot2_1771959088187_0.41950919981635515 (User 128) | Winner: TestRobot1_1771959088178_0.5167997119010074 | Rewards: ₡72,000 / ₡12,000 | Prestige: +30 | Fame: +15

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959088232_0.7487734791650126 earned ₡4,420 from Battle #9

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959088232_0.3299037659881705 earned ₡63,389 from Battle #9

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959088232_0.7487734791650126 (User 129) vs TestRobot2_1771959088232_0.3299037659881705 (User 130) | Winner: TestRobot1_1771959088232_0.7487734791650126 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 35 prestige, 18 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:28.689Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959088387_0.9991427885906433 earned ₡12,087 from Battle #12

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959088390_0.6070632194393958 earned ₡24,454 from Battle #12

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 5: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:280:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:199:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:280:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

    console.log
      [Streaming] TestRobot1_1771959088633_0.4074142788793661 earned ₡4,020 from Battle #13

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959088635_0.4585928030630463 earned ₡8,054 from Battle #13

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088633_0.4074142788793661 (User 127) vs TestRobot2_1771959088635_0.4585928030630463 (User 128) | Winner: TestRobot1_1771959088633_0.4074142788793661 | Rewards: ₡72,000 / ₡12,000 | Prestige: +30 | Fame: +15

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959088676_0.7112821420433235 earned ₡2,010 from Battle #16

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959088676_0.24175371370159304 earned ₡63,389 from Battle #16

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959088676_0.7112821420433235 (User 129) vs TestRobot2_1771959088676_0.24175371370159304 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 30 prestige, 15 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:28.978Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959088764_0.02449818096457701 earned ₡4,784 from Battle #21

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959088768_0.6630455735574229 earned ₡19,923 from Battle #21

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 10: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:280:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:199:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'ScheduledMatch', cause: 'Record to update not found.' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:280:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

    console.log
      [Streaming] TestRobot1_1771959088964_0.8915904815231152 earned ₡1,002 from Battle #23

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959088967_0.7768862470901233 earned ₡1,008 from Battle #23

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: platinum | TestRobot1_1771959088964_0.8915904815231152 (User 127) vs TestRobot2_1771959088967_0.7768862470901233 (User 128) | Winner: TestRobot2_1771959088967_0.7768862470901233 | Rewards: ₡72,000 / ₡12,000 | Prestige: +30 | Fame: +15

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959088969_0.8518456156518532 earned ₡2,004 from Battle #27

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959088969_0.191367699711796 earned ₡63,396 from Battle #27

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959088969_0.8518456156518532 (User 129) vs TestRobot2_1771959088969_0.191367699711796 (User 130) | Winner: TestRobot2_1771959088969_0.191367699711796 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 35 prestige, 17 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.272Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 15: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:38
      
        394 }
        395 
        396 // Create battle record
      → 397 const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot1_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:18)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:280:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:199:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot1_id_fkey (index)' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:280:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

    console.error
      [BattleOrchestrator] Failed to process match 16: Error: Robots not found for match 16
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:280:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:199:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:280:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

    console.log
      [Streaming] TestRobot1_1771959089263_0.32549178072377527 earned ₡2,002 from Battle #33

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089263_0.3079294182513522 earned ₡10,580 from Battle #33

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089263_0.32549178072377527 (User 129) vs TestRobot2_1771959089263_0.3079294182513522 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.402Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959089297_0.20454685025492392 earned ₡7,039 from Battle #38

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089301_0.21184111582576137 earned ₡10,491 from Battle #38

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089297_0.20454685025492392 (User 125) vs TestRobot2_1771959089301_0.21184111582576137 (User 126) | Winner: TestRobot1_1771959089297_0.20454685025492392 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959089392_0.6768496914125293 earned ₡2,002 from Battle #42

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089392_0.016375824940095263 earned ₡3,002 from Battle #42

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089392_0.6768496914125293 (User 129) vs TestRobot2_1771959089392_0.016375824940095263 (User 130) | Winner: TestRobot1_1771959089392_0.6768496914125293 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 4 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.596Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 22: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:38
      
        394 }
        395 
        396 // Create battle record
      → 397 const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot1_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:18)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:280:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:199:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot1_id_fkey (index)' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:280:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

    console.log
      [Streaming] TestRobot1_1771959089516_0.5572625339852322 earned ₡7,011 from Battle #48

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089518_0.8443032063002232 earned ₡10,485 from Battle #48

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 23: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:280:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:199:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:280:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

    console.log
      [Streaming] TestRobot1_1771959089590_0.8297606504751763 earned ₡2,001 from Battle #51

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089590_0.8493592327408439 earned ₡3,004 from Battle #51

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089590_0.8297606504751763 (User 129) vs TestRobot2_1771959089590_0.8493592327408439 (User 130) | Winner: TestRobot2_1771959089590_0.8493592327408439 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.803Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 4 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959089617_0.39398885978028975 earned ₡3,204 from Battle #55

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089619_0.683055552086805 earned ₡1,002 from Battle #55

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089617_0.39398885978028975 (User 127) vs TestRobot2_1771959089619_0.683055552086805 (User 128) | Winner: TestRobot1_1771959089617_0.39398885978028975 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 26: Error: Robots not found for match 26
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:280:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:199:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:280:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

    console.log
      [Streaming] TestRobot1_1771959089744_0.7023655971240422 earned ₡7,022 from Battle #59

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089747_0.7075038985291175 earned ₡10,489 from Battle #59

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089744_0.7023655971240422 (User 125) vs TestRobot2_1771959089747_0.7075038985291175 (User 126) | Winner: TestRobot2_1771959089747_0.7075038985291175 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959089798_0.5887936188320261 earned ₡2,001 from Battle #63

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089798_0.8178362857903737 earned ₡3,004 from Battle #63

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089798_0.5887936188320261 (User 129) vs TestRobot2_1771959089798_0.8178362857903737 (User 130) | Winner: TestRobot2_1771959089798_0.8178362857903737 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 3 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 15 prestige, 7 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.111Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959089923_0.8114137657496631 earned ₡3,194 from Battle #69

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959089925_0.6973215477338884 earned ₡1,003 from Battle #69

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089923_0.8114137657496631 (User 127) vs TestRobot2_1771959089925_0.6973215477338884 (User 128) | Winner: TestRobot2_1771959089925_0.6973215477338884 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959090029_0.8893467522572291 earned ₡7,032 from Battle #72

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959090032_0.3862669792177661 earned ₡10,485 from Battle #72

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 32: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:431:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:364:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:431:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)

    console.log
      [Streaming] Robot1_1771959090101_0.6091168114535447 earned ₡8,370 from Battle #75

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959090101_0.20135777539124844 earned ₡12,691 from Battle #75

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959090101_0.6091168114535447 (User 129) vs Robot2_1771959090101_0.20135777539124844 (User 130) | Winner: Robot1_1771959090101_0.6091168114535447 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.412Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959090314_0.9449381453672401 earned ₡7,037 from Battle #79

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959090317_0.06618755068477145 earned ₡10,489 from Battle #79

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090314_0.9449381453672401 (User 125) vs TestRobot2_1771959090317_0.06618755068477145 (User 126) | Winner: TestRobot2_1771959090317_0.06618755068477145 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 37: Error: Robots not found for match 37
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:431:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:364:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:431:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)

    console.log
      [Streaming] Robot1_1771959090402_0.8752122533007536 earned ₡8,298 from Battle #83

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959090402_0.24542271800197102 earned ₡12,691 from Battle #83

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959090402_0.8752122533007536 (User 129) vs Robot2_1771959090402_0.24542271800197102 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.609Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959090554_0.019787419695507236 earned ₡7,036 from Battle #87

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959090557_0.26122402809798806 earned ₡7,014 from Battle #87

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090554_0.019787419695507236 (User 125) vs TestRobot2_1771959090557_0.26122402809798806 (User 126) | Winner: TestRobot2_1771959090557_0.26122402809798806 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 41: Error: Robots not found for match 41
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:431:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:364:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:431:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)

    console.log
      [Streaming] Robot1_1771959090601_0.16787726645158696 earned ₡7,270 from Battle #90

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959090601_0.7907403055962087 earned ₡12,691 from Battle #90

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959090601_0.16787726645158696 (User 129) vs Robot2_1771959090601_0.7907403055962087 (User 130) | Winner: Robot1_1771959090601_0.16787726645158696 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.803Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959090754_0.39380853420236794 earned ₡7,039 from Battle #95

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959090757_0.7901209940422265 earned ₡8,748 from Battle #95

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090754_0.39380853420236794 (User 125) vs TestRobot2_1771959090757_0.7901209940422265 (User 126) | Winner: TestRobot1_1771959090754_0.39380853420236794 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771959090754_0.39380853420236794

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 45: Error: Robots not found for match 45
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:431:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:364:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:431:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)

    console.log
      [Streaming] Robot1_1771959090792_0.7997155394920633 earned ₡7,266 from Battle #97

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959090792_0.3654985486153701 earned ₡10,144 from Battle #97

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959090792_0.7997155394920633 (User 129) vs Robot2_1771959090792_0.3654985486153701 (User 130) | Winner: Robot2_1771959090792_0.3654985486153701 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Robot2_1771959090792_0.3654985486153701

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:31.009Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 4 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959090905_0.47082493124639524 earned ₡3,177 from Battle #102

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959090908_0.6650664327071314 earned ₡1,002 from Battle #102

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090905_0.47082493124639524 (User 127) vs TestRobot2_1771959090908_0.6650664327071314 (User 128) | Winner: TestRobot2_1771959090908_0.6650664327071314 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959090969_0.5712404578312599 earned ₡7,036 from Battle #106

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959090972_0.6445072450207093 earned ₡9,620 from Battle #106

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090969_0.5712404578312599 (User 125) vs TestRobot2_1771959090972_0.6445072450207093 (User 126) | Winner: TestRobot2_1771959090972_0.6445072450207093 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771959090972_0.6445072450207093

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959090985_0.7598114580667933 earned ₡3,174 from Battle #109

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959090987_0.7813164552192436 earned ₡1,002 from Battle #109

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090985_0.7598114580667933 (User 127) vs TestRobot2_1771959090987_0.7813164552192436 (User 128) | Winner: TestRobot2_1771959090987_0.7813164552192436 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959091000_0.38184527749761 earned ₡7,271 from Battle #113

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959091000_0.20678247159875507 earned ₡7,266 from Battle #113

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959091000_0.38184527749761 (User 129) vs Robot2_1771959091000_0.20678247159875507 (User 130) | Winner: Robot1_1771959091000_0.38184527749761 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 4 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 20 prestige, 9 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:31.362Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 5 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959091065_0.7613009408443856 earned ₡3,171 from Battle #118

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959091068_0.980894884327933 earned ₡1,003 from Battle #118

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091065_0.7613009408443856 (User 127) vs TestRobot2_1771959091068_0.980894884327933 (User 128) | Winner: TestRobot1_1771959091065_0.7613009408443856 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959091144_0.32062283920961043 earned ₡3,169 from Battle #122

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959091147_0.989568742210992 earned ₡1,002 from Battle #122

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091144_0.32062283920961043 (User 127) vs TestRobot2_1771959091147_0.989568742210992 (User 128) | Winner: TestRobot2_1771959091147_0.989568742210992 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959091241_0.7903922601678393 earned ₡7,036 from Battle #125

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959091244_0.9693867930326825 earned ₡10,061 from Battle #125

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 54: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:431:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:364:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:431:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)

    console.error
      [BattleOrchestrator] Failed to process match 55: Error: Robots not found for match 55
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:431:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:364:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:431:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)

    console.log
      [Streaming] Robot1_1771959091351_0.5573979910051633 earned ₡2,423 from Battle #126

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959091351_0.856914575145122 earned ₡2,422 from Battle #126

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959091351_0.5573979910051633 (User 129) vs Robot2_1771959091351_0.856914575145122 (User 130) | Winner: Robot1_1771959091351_0.5573979910051633 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 3 successful, 2 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 15 prestige, 6 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:31.720Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 4 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959091610_0.6088105572888529 earned ₡7,040 from Battle #133

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959091613_0.20632867617319472 earned ₡10,274 from Battle #133

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 59: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:563:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:503:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'ScheduledMatch', cause: 'Record to update not found.' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:563:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:503:5)

    console.log
      [Streaming] TestRobot1_1771959091622_0.4183570913718119 earned ₡3,164 from Battle #136

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959091626_0.015714981147556206 earned ₡1,002 from Battle #136

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091622_0.4183570913718119 (User 127) vs TestRobot2_1771959091626_0.015714981147556206 (User 128) | Winner: TestRobot2_1771959091626_0.015714981147556206 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959091703_0.8188817526287987 earned ₡3,144 from Battle #139

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959091705_0.561953761216558 earned ₡1,002 from Battle #139

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091703_0.8188817526287987 (User 127) vs TestRobot2_1771959091705_0.561953761216558 (User 128) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771959091708_0.34960148351619 (User 129) vs Bye Robot (User 130) | Winner: RealRobot_1771959091708_0.34960148351619 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771959091708_0.34960148351619

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 3 successful, 1 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:32.094Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959091811_0.5369918654641845 earned ₡7,039 from Battle #145

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959091814_0.356029894289305 earned ₡10,380 from Battle #145

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 64: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:563:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:503:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'ScheduledMatch', cause: 'Record to update not found.' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:563:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:503:5)

    console.error
      [BattleOrchestrator] Failed to process match 66: Error: Robots not found for match 66
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:563:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:503:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:563:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:503:5)

    console.log
      [Battle] League: bronze | RealRobot_1771959092069_0.6358136192439309 (User 129) vs Bye Robot (User 130) | Winner: RealRobot_1771959092069_0.6358136192439309 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771959092069_0.6358136192439309

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:32.355Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959092252_0.4218440174184882 earned ₡7,042 from Battle #150

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959092255_0.6576430521547971 earned ₡10,436 from Battle #150

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092252_0.4218440174184882 (User 125) vs TestRobot2_1771959092255_0.6576430521547971 (User 126) | Winner: TestRobot1_1771959092252_0.4218440174184882 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771959092347_0.0038615675208357736 (User 129) vs Bye Robot (User 130) | Winner: RealRobot_1771959092347_0.0038615675208357736 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771959092347_0.0038615675208357736

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:32.534Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959092468_0.27486653024770147 earned ₡1,022 from Battle #156

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959092473_0.02963696612792588 earned ₡1,002 from Battle #156

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: diamond | TestRobot1_1771959092468_0.27486653024770147 (User 127) vs TestRobot2_1771959092473_0.02963696612792588 (User 128) | Winner: TestRobot1_1771959092468_0.27486653024770147 | Rewards: ₡139,000 / ₡24,000 | Prestige: +50 | Fame: +25 | Kill: TestRobot1_1771959092468_0.27486653024770147

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959092477_0.7665048425584345 earned ₡7,039 from Battle #159

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959092480_0.8096283879145358 earned ₡10,464 from Battle #159

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092477_0.7665048425584345 (User 125) vs TestRobot2_1771959092480_0.8096283879145358 (User 126) | Winner: TestRobot1_1771959092477_0.7665048425584345 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771959092529_0.5908445937490038 (User 129) vs Bye Robot (User 130) | Winner: RealRobot_1771959092529_0.5908445937490038 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771959092529_0.5908445937490038

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 3 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 55 prestige, 27 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:32.840Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959092741_0.7089750945408015 earned ₡7,036 from Battle #165

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959092744_0.21093794775441665 earned ₡10,478 from Battle #165

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959092741_0.7089750945408015 (User 125) vs TestRobot2_1771959092744_0.21093794775441665 (User 126) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 141: Error: Robot 684 not found
          at calculateStreamingRevenue (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/streamingRevenueService.ts:90:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:656:25)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] Robot1_1771959092828_0.5518216887125477 earned ₡10,402 from Battle #169

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959092828_0.05985120275162836 earned ₡10,128 from Battle #169

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959092828_0.5518216887125477 (User 129) vs Robot2_1771959092828_0.05985120275162836 (User 130) | Winner: Robot2_1771959092828_0.05985120275162836 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:33.106Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959093009_0.8558089120900858 earned ₡7,039 from Battle #171

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959093011_0.0386818215817919 earned ₡10,479 from Battle #171

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959093009_0.8558089120900858 (User 125) vs TestRobot2_1771959093011_0.0386818215817919 (User 126) | Winner: TestRobot1_1771959093009_0.8558089120900858 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959093096_0.6359186297450872 earned ₡3,953 from Battle #173

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959093096_0.4032917217628468 earned ₡10,129 from Battle #173

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959093096_0.6359186297450872 (User 129) vs Robot2_1771959093096_0.4032917217628468 (User 130) | Winner: Robot2_1771959093096_0.4032917217628468 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:33.308Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 65 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 83 earned ₡1,000 from Battle #175

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 85 earned ₡1,001 from Battle #175

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 83 (User 90) vs WimpBot 85 (User 92) | Winner: WimpBot 85 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 23 earned ₡1,000 from Battle #177

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 25 earned ₡1,001 from Battle #177

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 23 (User 30) vs WimpBot 25 (User 32) | Winner: WimpBot 25 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 27 earned ₡1,000 from Battle #179

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 29 earned ₡1,001 from Battle #179

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 27 (User 34) vs WimpBot 29 (User 36) | Winner: WimpBot 29 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 31 earned ₡1,001 from Battle #181

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 33 earned ₡1,000 from Battle #181

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 31 (User 38) vs WimpBot 33 (User 40) | Winner: WimpBot 31 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 35 earned ₡1,001 from Battle #183

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 37 earned ₡1,000 from Battle #183

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 35 (User 42) vs WimpBot 37 (User 44) | Winner: WimpBot 35 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 39 earned ₡1,001 from Battle #185

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 41 earned ₡1,000 from Battle #185

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 39 (User 46) vs WimpBot 41 (User 48) | Winner: WimpBot 39 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 43 earned ₡1,000 from Battle #187

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 45 earned ₡1,001 from Battle #187

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 43 (User 50) vs WimpBot 45 (User 52) | Winner: WimpBot 45 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 47 earned ₡1,001 from Battle #189

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 49 earned ₡1,000 from Battle #189

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 47 (User 54) vs WimpBot 49 (User 56) | Winner: WimpBot 47 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 51 earned ₡1,001 from Battle #191

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 53 earned ₡1,000 from Battle #191

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 51 (User 58) vs WimpBot 53 (User 60) | Winner: WimpBot 51 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 55 earned ₡1,000 from Battle #193

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 57 earned ₡1,001 from Battle #193

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 55 (User 62) vs WimpBot 57 (User 64) | Winner: WimpBot 57 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 59 earned ₡1,000 from Battle #195

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 61 earned ₡1,001 from Battle #195

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 59 (User 66) vs WimpBot 61 (User 68) | Winner: WimpBot 61 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 63 earned ₡1,001 from Battle #197

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 65 earned ₡1,000 from Battle #197

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 63 (User 70) vs WimpBot 65 (User 72) | Winner: WimpBot 63 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 67 earned ₡1,001 from Battle #199

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 69 earned ₡1,000 from Battle #199

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 67 (User 74) vs WimpBot 69 (User 76) | Winner: WimpBot 67 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 71 earned ₡1,001 from Battle #201

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 73 earned ₡1,000 from Battle #201

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 71 (User 78) vs WimpBot 73 (User 80) | Winner: WimpBot 71 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 75 earned ₡1,000 from Battle #203

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 77 earned ₡1,001 from Battle #203

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 75 (User 82) vs WimpBot 77 (User 84) | Winner: WimpBot 77 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 79 earned ₡1,002 from Battle #205

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 81 earned ₡1,002 from Battle #205

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 79 (User 86) vs WimpBot 81 (User 88) | Winner: WimpBot 79 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 19 earned ₡1,002 from Battle #207

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 21 earned ₡1,002 from Battle #207

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 19 (User 26) vs WimpBot 21 (User 28) | Winner: WimpBot 21 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 87 earned ₡1,000 from Battle #209

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 89 earned ₡1,001 from Battle #209

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 87 (User 94) vs WimpBot 89 (User 96) | Winner: WimpBot 89 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 91 earned ₡1,000 from Battle #211

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 93 earned ₡1,001 from Battle #211

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 91 (User 98) vs WimpBot 93 (User 100) | Winner: WimpBot 93 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 95 earned ₡1,000 from Battle #213

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 97 earned ₡1,001 from Battle #213

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 95 (User 102) vs WimpBot 97 (User 104) | Winner: WimpBot 97 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 99 earned ₡1,000 from Battle #216

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Tank Fortress C000 earned ₡1,001 from Battle #216

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 99 (User 106) vs Tank Fortress C000 (User 108) | Winner: Tank Fortress C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +4 | Kill: Tank Fortress C000

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Glass Cannon B C000 earned ₡1,000 from Battle #218

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Speed Demon A C000 earned ₡1,001 from Battle #218

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Glass Cannon B C000 (User 110) vs Speed Demon A C000 (User 112) | Winner: Speed Demon A C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Speed Demon C C000 earned ₡1,001 from Battle #221

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Facility Investor C000 earned ₡1,000 from Battle #221

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Speed Demon C C000 (User 114) vs Facility Investor C000 (User 116) | Winner: Speed Demon C C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Two-Robot Beta C000 earned ₡1,000 from Battle #224

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Ranged Sniper C000 earned ₡1,001 from Battle #224

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Two-Robot Beta C000 (User 117) vs Ranged Sniper C000 (User 119) | Winner: Ranged Sniper C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Ranged Sniper C000

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Prestige Rusher C000 earned ₡1,001 from Battle #227

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Henk earned ₡1,000 from Battle #227

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Prestige Rusher C000 (User 121) vs Henk (User 3) | Winner: Prestige Rusher C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Prestige Rusher C000

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] PBT_Limit_1771959092177_0_0.2125634982154947 earned ₡1,001 from Battle #230

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 5 earned ₡1,000 from Battle #230

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092177_0_0.2125634982154947 (User 122) vs WimpBot 5 (User 12) | Winner: PBT_Limit_1771959092177_0_0.2125634982154947 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] PBT_Limit_1771959092182_1_0.08921469003647553 earned ₡1,001 from Battle #233

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 7 earned ₡1,000 from Battle #233

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092182_1_0.08921469003647553 (User 122) vs WimpBot 7 (User 14) | Winner: PBT_Limit_1771959092182_1_0.08921469003647553 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] PBT_Limit_1771959092187_2_0.9858417724561371 earned ₡1,000 from Battle #236

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 9 earned ₡1,001 from Battle #236

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092187_2_0.9858417724561371 (User 122) vs WimpBot 9 (User 16) | Winner: WimpBot 9 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] PBT_Limit_1771959092192_3_0.391232246124365 earned ₡1,001 from Battle #239

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 11 earned ₡1,000 from Battle #239

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092192_3_0.391232246124365 (User 122) vs WimpBot 11 (User 18) | Winner: PBT_Limit_1771959092192_3_0.391232246124365 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] PBT_Limit_1771959092200_4_0.6231080329810477 earned ₡1,001 from Battle #242

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 13 earned ₡1,000 from Battle #242

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 99: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] PBT_Limit_1771959092205_5_0.6990815742550932 earned ₡1,001 from Battle #245

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 15 earned ₡1,000 from Battle #245

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 100: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] PBT_Limit_1771959092210_6_0.5066055863934573 earned ₡1,001 from Battle #248

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 17 earned ₡1,000 from Battle #248

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 101: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] PBT_Limit_1771959092226_9_0.26892166110590976 earned ₡1,002 from Battle #251

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 3 earned ₡1,002 from Battle #251

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 102: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] PBT_Limit_1771959092215_7_0.6065972633915144 earned ₡1,002 from Battle #254

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] PBT_Limit_1771959092220_8_0.7275474819936254 earned ₡1,002 from Battle #254

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 103: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 4 earned ₡1,001 from Battle #257

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 2 earned ₡1,000 from Battle #257

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 4 (User 11) vs WimpBot 2 (User 9) | Winner: WimpBot 4 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 6 earned ₡1,001 from Battle #260

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 10 earned ₡1,000 from Battle #260

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 6 (User 13) vs WimpBot 10 (User 17) | Winner: WimpBot 6 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 30 earned ₡1,001 from Battle #263

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 36 earned ₡1,000 from Battle #263

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 104: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 34 earned ₡1,001 from Battle #266

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 38 earned ₡1,000 from Battle #266

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 105: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 32 earned ₡1,000 from Battle #269

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 72 earned ₡1,001 from Battle #269

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 106: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 62 earned ₡1,000 from Battle #272

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 66 earned ₡1,001 from Battle #272

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 62 (User 69) vs WimpBot 66 (User 73) | Winner: WimpBot 66 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 68 earned ₡1,000 from Battle #275

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 56 earned ₡1,001 from Battle #275

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 68 (User 75) vs WimpBot 56 (User 63) | Winner: WimpBot 56 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 50 earned ₡1,000 from Battle #278

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 58 earned ₡1,001 from Battle #278

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 109: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 74 earned ₡1,000 from Battle #281

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 84 earned ₡1,001 from Battle #281

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 110: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 82 earned ₡1,001 from Battle #284

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 86 earned ₡1,000 from Battle #284

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 82 (User 89) vs WimpBot 86 (User 93) | Winner: WimpBot 82 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 88 earned ₡1,001 from Battle #287

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 90 earned ₡1,000 from Battle #287

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 88 (User 95) vs WimpBot 90 (User 97) | Winner: WimpBot 88 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Glass Cannon C C000 earned ₡1,000 from Battle #290

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Speed Demon B C000 earned ₡1,001 from Battle #290

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Glass Cannon C C000 (User 111) vs Speed Demon B C000 (User 113) | Winner: Speed Demon B C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Speed Demon B C000

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 100 earned ₡1,000 from Battle #293

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 20 earned ₡1,001 from Battle #293

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 114: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 12 earned ₡1,001 from Battle #296

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 18 earned ₡1,000 from Battle #296

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 12 (User 19) vs WimpBot 18 (User 25) | Winner: WimpBot 12 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 22 earned ₡1,000 from Battle #299

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 24 earned ₡1,001 from Battle #299

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 22 (User 29) vs WimpBot 24 (User 31) | Winner: WimpBot 24 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Glass Cannon A C000 earned ₡1,003 from Battle #302

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 1 earned ₡1,002 from Battle #302

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Glass Cannon A C000 (User 109) vs WimpBot 1 (User 8) | Winner: Glass Cannon A C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Glass Cannon A C000

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] AI Tactician C000 earned ₡1,004 from Battle #305

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 16 earned ₡1,002 from Battle #305

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | AI Tactician C000 (User 120) vs WimpBot 16 (User 23) | Winner: AI Tactician C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: AI Tactician C000

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 28 earned ₡1,000 from Battle #308

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 8 earned ₡1,001 from Battle #308

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 28 (User 35) vs WimpBot 8 (User 15) | Winner: WimpBot 8 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 14 earned ₡1,001 from Battle #311

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 70 earned ₡1,000 from Battle #311

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 14 (User 21) vs WimpBot 70 (User 77) | Winner: WimpBot 14 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 80 earned ₡1,000 from Battle #314

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 60 earned ₡1,001 from Battle #314

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 80 (User 87) vs WimpBot 60 (User 67) | Winner: WimpBot 60 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 40 earned ₡1,000 from Battle #317

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 42 earned ₡1,001 from Battle #317

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 40 (User 47) vs WimpBot 42 (User 49) | Winner: WimpBot 42 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 48 earned ₡1,000 from Battle #319

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 26 earned ₡1,001 from Battle #319

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 121: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 46 earned ₡1,000 from Battle #322

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 64 earned ₡1,001 from Battle #322

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 46 (User 53) vs WimpBot 64 (User 71) | Winner: WimpBot 64 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 44 earned ₡1,000 from Battle #325

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 76 earned ₡1,001 from Battle #325

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 123: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 54 earned ₡1,001 from Battle #328

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 94 earned ₡1,000 from Battle #328

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 54 (User 61) vs WimpBot 94 (User 101) | Winner: WimpBot 54 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 52 earned ₡1,000 from Battle #331

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 78 earned ₡1,001 from Battle #331

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 125: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 92 earned ₡1,000 from Battle #334

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 96 earned ₡1,001 from Battle #334

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 126: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 98 earned ₡1,000 from Battle #337

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Two-Robot Alpha C000 earned ₡1,001 from Battle #337

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 98 (User 105) vs Two-Robot Alpha C000 (User 117) | Winner: Two-Robot Alpha C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Two-Robot Alpha C000

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Melee Specialist C000 earned ₡1,001 from Battle #340

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Balanced Brawler C000 earned ₡1,000 from Battle #340

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Melee Specialist C000 (User 118) vs Balanced Brawler C000 (User 115) | Winner: Melee Specialist C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Melee Specialist C000

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 146: Error: Robots not found for match 146
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] Robot1_1771959093297_0.5986110949662341 earned ₡2,002 from Battle #343

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959093297_0.47000568275593724 earned ₡10,128 from Battle #343

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959093297_0.5986110949662341 (User 129) vs Robot2_1771959093297_0.47000568275593724 (User 130) | Winner: Robot2_1771959093297_0.47000568275593724 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 49 successful, 16 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 245 prestige, 109 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:38.984Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 4 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] PBT_Limit_1771959092205_5_0.6990815742550932 earned ₡1,005 from Battle #347

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 15 earned ₡1,004 from Battle #347

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 100: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] WimpBot 30 earned ₡1,005 from Battle #349

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] WimpBot 36 earned ₡1,004 from Battle #349

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | WimpBot 30 (User 37) vs WimpBot 36 (User 43) | Winner: WimpBot 30 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 148: Error: Robots not found for match 148
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] Robot1_1771959098974_0.14809271481766662 earned ₡2,002 from Battle #352

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959098974_0.5245675120857642 earned ₡3,380 from Battle #352

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959098974_0.14809271481766662 (User 129) vs Robot2_1771959098974_0.5245675120857642 (User 130) | Winner: Robot1_1771959098974_0.14809271481766662 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 2 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 4 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:39.330Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959099077_0.22522651150412065 earned ₡4,022 from Battle #355

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959099080_0.22707735142263652 earned ₡10,485 from Battle #355

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 150: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] Robot1_1771959099320_0.462737289838948 earned ₡2,001 from Battle #356

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959099320_0.17469100085078448 earned ₡6,756 from Battle #356

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959099320_0.462737289838948 (User 129) vs Robot2_1771959099320_0.17469100085078448 (User 130) | Winner: Robot2_1771959099320_0.17469100085078448 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:39.608Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959099509_0.8674472120336989 earned ₡6,031 from Battle #358

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959099512_0.739319512779492 earned ₡10,489 from Battle #358

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 152: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] Robot1_1771959099592_0.6661525334683998 earned ₡2,001 from Battle #360

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959099592_0.9191778233511325 earned ₡5,071 from Battle #360

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 153: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 2 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:39.850Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959099779_0.9530100775740288 earned ₡7,039 from Battle #363

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959099783_0.4294245882369623 earned ₡1,498 from Battle #363

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 154: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      Foreign key constraint violated: `scheduled_matches_battle_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'ScheduledMatch',
          field_name: 'scheduled_matches_battle_id_fkey (index)'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] Robot1_1771959099839_0.9120211081924755 earned ₡2,002 from Battle #364

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959099839_0.8384089102062334 earned ₡5,914 from Battle #364

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 155: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 2 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:40.074Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959099839_0.9120211081924755 earned ₡2,005 from Battle #366

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959099839_0.8384089102062334 earned ₡5,918 from Battle #366

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 155: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.error
      [BattleOrchestrator] Failed to process match 156: Error: Robot 1986 not found
          at calculateStreamingRevenue (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/streamingRevenueService.ts:90:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:656:25)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] Robot1_1771959100055_0.7145437820984759 earned ₡2,002 from Battle #369

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959100055_0.9680015172763039 earned ₡5,491 from Battle #369

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959100055_0.7145437820984759 (User 129) vs Robot2_1771959100055_0.9680015172763039 (User 130) | Winner: Robot1_1771959100055_0.7145437820984759 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:40.472Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771959100334_0.5373704067835985 earned ₡7,040 from Battle #372

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771959100337_0.4416442009125561 earned ₡8,990 from Battle #372

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771959100334_0.5373704067835985 (User 125) vs TestRobot2_1771959100337_0.4416442009125561 (User 126) | Winner: TestRobot1_1771959100334_0.5373704067835985 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959100463_0.15217184442854725 earned ₡2,001 from Battle #373

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959100463_0.673564301306628 earned ₡5,283 from Battle #373

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959100463_0.15217184442854725 (User 129) vs Robot2_1771959100463_0.673564301306628 (User 130) | Winner: Robot2_1771959100463_0.673564301306628 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:40.696Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959100685_0.8821067923554404 earned ₡2,001 from Battle #375

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959100685_0.4420452433238605 earned ₡5,179 from Battle #375

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 161: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:40.834Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959100823_0.8239432847918166 earned ₡2,003 from Battle #377

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959100823_0.010002515073823104 earned ₡5,231 from Battle #377

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959100823_0.8239432847918166 (User 129) vs Robot2_1771959100823_0.010002515073823104 (User 130) | Winner: Robot1_1771959100823_0.8239432847918166 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.012Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959100990_0.6153031465433353 earned ₡2,002 from Battle #379

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959100990_0.2923190145004336 earned ₡5,258 from Battle #379

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 163: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.169Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959101159_0.8187964105059004 earned ₡2,002 from Battle #380

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959101159_0.11927972900705563 earned ₡5,272 from Battle #380

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 164: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.273Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959101159_0.8187964105059004 earned ₡2,008 from Battle #383

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959101159_0.11927972900705563 earned ₡5,277 from Battle #383

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959101159_0.8187964105059004 (User 129) vs Robot2_1771959101159_0.11927972900705563 (User 130) | Winner: Robot1_1771959101159_0.8187964105059004 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Robot1_1771959101159_0.8187964105059004

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959101261_0.9994545573422632 earned ₡2,003 from Battle #385

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959101261_0.2679994690912504 earned ₡5,266 from Battle #385

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959101261_0.9994545573422632 (User 129) vs Robot2_1771959101261_0.2679994690912504 (User 130) | Winner: Robot2_1771959101261_0.2679994690912504 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.531Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959101517_0.5980613745812695 earned ₡2,001 from Battle #386

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959101517_0.9883624267024224 earned ₡5,263 from Battle #386

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959101517_0.5980613745812695 (User 129) vs Robot2_1771959101517_0.9883624267024224 (User 130) | Winner: Robot2_1771959101517_0.9883624267024224 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot2_1771959101517_0.9883624267024224

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.658Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959101647_0.48753914895526307 earned ₡2,001 from Battle #387

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959101647_0.09838933675764105 earned ₡3,119 from Battle #387

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959101647_0.48753914895526307 (User 129) vs Robot2_1771959101647_0.09838933675764105 (User 130) | Winner: Robot2_1771959101647_0.09838933675764105 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.779Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959101768_0.6749309509294225 earned ₡2,001 from Battle #388

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959101768_0.2521107858428584 earned ₡4,193 from Battle #388

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959101768_0.6749309509294225 (User 129) vs Robot2_1771959101768_0.2521107858428584 (User 130) | Winner: Robot2_1771959101768_0.2521107858428584 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.919Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959101909_0.9308348148318287 earned ₡2,001 from Battle #389

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959101909_0.5884370505041243 earned ₡4,730 from Battle #389

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959101909_0.9308348148318287 (User 129) vs Robot2_1771959101909_0.5884370505041243 (User 130) | Winner: Robot2_1771959101909_0.5884370505041243 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.034Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959102020_0.4331520451619506 earned ₡2,001 from Battle #392

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959102020_0.9337770745482403 earned ₡4,725 from Battle #392

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959102020_0.4331520451619506 (User 129) vs Robot2_1771959102020_0.9337770745482403 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.161Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestBot1_1771959102071 earned ₡1,002 from Battle #394

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestBot2_1771959102071 earned ₡1,002 from Battle #394

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 212: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      Foreign key constraint violated: `scheduled_matches_battle_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'ScheduledMatch',
          field_name: 'scheduled_matches_battle_id_fkey (index)'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [Streaming] Robot1_1771959102152_0.3155461082283546 earned ₡2,001 from Battle #396

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959102152_0.9585990498492273 earned ₡4,461 from Battle #396

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771959102152_0.3155461082283546 (User 129) vs Robot2_1771959102152_0.9585990498492273 (User 130) | Winner: Robot2_1771959102152_0.9585990498492273 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.389Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771959102377_0.24182396045857912 earned ₡2,001 from Battle #397

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771959102377_0.3826906808549627 earned ₡4,595 from Battle #397

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 214: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.478Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 215: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.createMany()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:427:34
      
        424 });
        425 
        426 // Create BattleParticipant records
      → 427 await prisma.battleParticipant.createMany(
      Foreign key constraint violated: `battle_participants_battle_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:427:3)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          field_name: 'battle_participants_battle_id_fkey (index)'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.530Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 216: Error: BattleParticipant not found for battle 400, robot 2309
          at updateRobotStats (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:490:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:645:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5)

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.584Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 217: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.createMany()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:427:34
      
        424 });
        425 
        426 // Create BattleParticipant records
      → 427 await prisma.battleParticipant.createMany(
      Foreign key constraint violated: `battle_participants_battle_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:427:3)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          field_name: 'battle_participants_battle_id_fkey (index)'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.652Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 218: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.createMany()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:427:34
      
        424 });
        425 
        426 // Create BattleParticipant records
      → 427 await prisma.battleParticipant.createMany(
      Foreign key constraint violated: `battle_participants_battle_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:427:3)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          field_name: 'battle_participants_battle_id_fkey (index)'
        }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.720Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.error
      [BattleOrchestrator] Failed to process match 219: PrismaClientKnownRequestError: 
      Invalid `prisma.battle.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:38
      
        394 }
        395 
        396 // Create battle record
      → 397 const battle = await prisma.battle.create(
      Foreign key constraint violated: `battles_robot1_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:397:18)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:698:13
          at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
          at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
          at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:616:5) {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: { modelName: 'Battle', field_name: 'battles_robot1_id_fkey (index)' }
      }

      932 |       const errorMsg = error instanceof Error ? error.message : String(error);
      933 |       summary.errors.push(`Match ${match.id}: ${errorMsg}`);
    > 934 |       console.error(`[BattleOrchestrator] Failed to process match ${match.id}:`, error);
          |               ^
      935 |     }
      936 |   }
      937 |   

      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at tests/terminalLogStreamingRevenue.property.test.ts:698:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14: Terminal log contains streaming revenue for all battles

    Property failed after 1 tests
    { seed: 637105865, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0,0,0,0]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeDefined()

    Received: undefined

      297 |               log.includes(`Battle #${battle!.id}`)
      298 |             );
    > 299 |             expect(streamingLog1).toBeDefined();
          |                                   ^
      300 |
      301 |             // Property: Terminal log should contain robot name
      302 |             expect(streamingLog1).toContain(robotName1);

      at tests/terminalLogStreamingRevenue.property.test.ts:299:35
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.1: Streaming revenue logged immediately after battle completion

    Property failed after 1 tests
    { seed: 1251083632, path: "0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [100,500,100,500,1]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 2
    Received:    0

      448 |             );
      449 |
    > 450 |             expect(streamingLogs.length).toBeGreaterThanOrEqual(2);
          |                                          ^
      451 |
      452 |             // Property: Both robots should have streaming revenue logged
      453 |             const robot1Logged = streamingLogs.some(log => log.includes(robotName1));

      at tests/terminalLogStreamingRevenue.property.test.ts:450:42
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)

  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.2: No streaming revenue logged for bye matches

    Property failed after 1 tests
    { seed: -492843097, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:601:32

      598 // Cleanup
      599 await prisma.battle.deleteMany({ where: { id: battle!.id } });
      600 await prisma.scheduledMatch.deleteMany({ where: { id: match.id } });
    → 601 await prisma.robot.deleteMany(
    Foreign key constraint violated: `battles_robot1_id_fkey (index)`

      599 |             await prisma.battle.deleteMany({ where: { id: battle!.id } });
      600 |             await prisma.scheduledMatch.deleteMany({ where: { id: match.id } });
    > 601 |             await prisma.robot.deleteMany({ where: { id: robot.id } });
          |             ^
      602 |             await prisma.robot.deleteMany({ where: { id: byeRobot.id } });
      603 |           } finally {
      604 |             capture.restore();

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/terminalLogStreamingRevenue.property.test.ts:601:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:503:5)

  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.3: Terminal log format is consistent

    Property failed after 1 tests
    { seed: 1439727811, path: "0:0:0:1:1:0:0:3:0:3:2:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [[{"battles":0,"fame":0},{"battles":0,"fame":0}],0]
    Shrunk 25 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:20:29

      17 
      18 // Helper function to create a minimal test robot
      19 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 20   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      18 | // Helper function to create a minimal test robot
      19 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 20 |   return await prisma.robot.create({
         |          ^
      21 |     data: {
      22 |       userId,
      23 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/terminalLogStreamingRevenue.property.test.ts:20:10)
      at tests/terminalLogStreamingRevenue.property.test.ts:631:26
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

FAIL tests/cycleExecutionTiming.test.ts
  ● Cycle Execution Timing › Complete cycle timing flow › should log complete cycle with start, steps, and complete events

    expect(received).toHaveLength(expected)

    Expected length: 5
    Received length: 6
    Received array:  [{"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.878Z, "eventType": "cycle_start", "id": 15727n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:42.877Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.883Z, "eventType": "cycle_step_complete", "id": 15729n, "metadata": null, "payload": {"duration": 1000, "stepName": "execute_battles", "stepNumber": 1, "summary": {"battles": 5}}, "robotId": null, "sequenceNumber": 2, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.886Z, "eventType": "cycle_step_complete", "id": 15731n, "metadata": null, "payload": {"duration": 500, "stepName": "repair_robots", "stepNumber": 2, "summary": {"repaired": 10}}, "robotId": null, "sequenceNumber": 3, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.889Z, "eventType": "cycle_step_complete", "id": 15733n, "metadata": null, "payload": {"duration": 300, "stepName": "matchmaking", "stepNumber": 3, "summary": {"matches": 8}}, "robotId": null, "sequenceNumber": 4, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.892Z, "eventType": "cycle_complete", "id": 15736n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:42.892Z", "totalDuration": 1800}, "robotId": null, "sequenceNumber": 5, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.892Z, "eventType": "facility_upgrade", "id": 15735n, "metadata": null, "payload": {"action": "upgrade", "balanceAfter": 9700000, "balanceBefore": 9900000, "cost": 200000, "facilityType": "streaming_studio", "newLevel": 2, "oldLevel": 1}, "robotId": null, "sequenceNumber": 678, "userId": 364}]

      182 |       });
      183 |       
    > 184 |       expect(allEvents).toHaveLength(5);
          |                         ^
      185 |       expect(allEvents[0].eventType).toBe('cycle_start');
      186 |       expect(allEvents[1].eventType).toBe('cycle_step_complete');
      187 |       expect(allEvents[2].eventType).toBe('cycle_step_complete');

      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:184:25)

  ● Cycle Execution Timing › Step duration recording › should sum step durations approximately equal to total cycle duration

    expect(received).toBe(expected) // Object.is equality

    Expected: 2000
    Received: 2043

      273 |       
      274 |       const sumOfSteps = stepEvents.reduce((sum, e) => sum + ((e.payload as any).duration as number), 0);
    > 275 |       expect(sumOfSteps).toBe((completeEvent?.payload as any).totalDuration);
          |                          ^
      276 |     });
      277 |   });
      278 |

      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:275:26)

FAIL tests/tagTeamValidation.property.test.ts (19.268 s)
  ● Console

    console.log
      [TagTeam] Created team 2 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 3 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 4 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 5 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 6 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 7 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 8 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 9 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 10 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 11 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 12 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 13 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 14 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 15 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 16 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 17 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 18 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 19 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 20 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 21 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 22 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 23 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 24 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 25 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 26 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 27 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 28 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 29 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 30 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 31 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 32 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 33 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 34 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 35 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 36 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 37 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 38 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 39 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 40 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 41 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 42 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 43 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 44 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 45 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 46 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 47 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 48 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 49 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 50 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 51 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 52 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 53 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 54 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 55 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 56 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 57 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 58 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 59 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 60 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 61 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 62 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 63 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 64 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 65 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 66 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 67 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 68 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 69 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 69

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 70 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 71 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 71

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 72 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 73 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 73

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 74 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 75 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 75

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 76 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 77 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 77

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 78 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 79 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 79

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 80 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 81 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 81

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 82 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 83 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 83

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 84 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 85 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 85

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 86 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 87 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 87

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 88 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 89 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 89

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 90 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 91 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 91

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 92 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 93 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 93

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 94 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 95 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 95

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 96 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 97 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 97

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 98 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 99 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 99

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 100 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 101 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 101

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 102 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 103 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 103

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 104 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 105 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 105

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 106 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 107 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Disbanded team 107

      at disbandTeam (src/services/tagTeamService.ts:264:13)

    console.log
      [TagTeam] Created team 108 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 129 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 130 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 131 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 132 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 133 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 134 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 135 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 136 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 137 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 138 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 139 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 140 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 141 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 142 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 143 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 144 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 145 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 146 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 147 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeam] Created team 148 for stable 122 in instance bronze_1

      at createTeam (src/services/tagTeamService.ts:183:13)

    console.log
      [TagTeamMatchmaking] Current cycle: 15, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 4, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 99, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 97, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 48, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 88, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 77, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 43, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 0, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 0, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 19, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 28, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 33, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 35, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 36, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 18, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 19, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 98, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 99, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 93, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 94, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 61, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 62, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 27, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 28, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 97, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 98, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 38, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 39, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 16, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 17, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 5, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 31, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 32, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 5, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 24, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 25, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 1, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 2, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 60, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 61, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 70, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 71, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 90, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 91, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 17, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 18, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 2, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 3, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 20, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 21, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 7, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 7, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 26, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 27, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 37, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 38, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 79, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 80, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 1, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 2, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 63, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 64, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 39, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 40, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 91, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 92, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 97, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 98, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 10, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 11, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 4, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 5, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 7, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 32, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 33, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 0, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 1, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 46, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 47, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 16, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 17, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 98, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 99, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 50, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 51, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 8, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 9, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 1, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 2, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 96, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 97, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 3, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 4, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 16, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 17, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 97, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 98, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 94, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 95, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 28, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 29, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 85, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 86, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 35, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 36, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 98, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 99, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 45, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 46, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 1, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 3, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 5, should run: true

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 30, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 0, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 2, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 4, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 6, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 8, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 10, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 12, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 14, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 16, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 18, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 20, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 22, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 24, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 26, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 28, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 30, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 32, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 34, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 36, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 38, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] Current cycle: 40, should run: false

      at shouldRunTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:35:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (2 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (6 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (2 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (5 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (6 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (6 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (5 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (2 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (5 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (2 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (5 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (5 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (6 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (2 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (5 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (5 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (6 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (7 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (7 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 4 eligible teams (11 total, 4 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (18 total, 2 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (12 total, 2 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 7 eligible teams (18 total, 7 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (12 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 5 eligible teams (17 total, 5 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 11 eligible teams (24 total, 11 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (33 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (14 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (14 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (14 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (14 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (14 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (15 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (17 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (15 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 10 eligible teams (22 total, 10 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (3 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (2 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (2 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (2 total, 1 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (4 total, 3 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (4 total, 3 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (5 total, 3 ready, 3 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (4 total, 3 ready, 3 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (4 total, 3 ready, 2 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 3 eligible teams (4 total, 3 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (4 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (4 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (4 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (4 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (5 total, 2 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (6 total, 2 ready, 2 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (6 total, 2 ready, 2 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (6 total, 2 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 0 eligible teams (6 total, 0 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (4 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (5 total, 1 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 3 eligible teams (7 total, 3 ready, 0 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 4 eligible teams (7 total, 5 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 3 eligible teams (5 total, 4 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 3 eligible teams (5 total, 4 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 3 eligible teams (5 total, 4 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 3 eligible teams (5 total, 4 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 3 eligible teams (5 total, 4 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (5 total, 2 ready, 1 already scheduled)

      at getEligibleTeams (src/services/tagTeamMatchmakingService.ts:94:11)

    console.log
      [TagTeamMatchmaking] Bye-match created for team 735

      at pairTeams (src/services/tagTeamMatchmakingService.ts:378:13)

    console.log
      [TagTeamMatchmaking] Bye-match created for team 749

      at pairTeams (src/services/tagTeamMatchmakingService.ts:378:13)

    console.log
      [TagTeamMatchmaking] Bye-match created for team 765

      at pairTeams (src/services/tagTeamMatchmakingService.ts:378:13)

  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size

    Property failed after 9 tests
    { seed: 155383656, path: "8", endOnFailure: true }
    Counterexample: [10]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:675:30

      672 await prisma.tagTeam.deleteMany({
      673   where: { id: { in: createdTeams } },
      674 });
    → 675 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      673 |             where: { id: { in: createdTeams } },
      674 |           });
    > 675 |           await prisma.robot.deleteMany({
          |           ^
      676 |             where: { id: { in: robots } },
      677 |           });
      678 |           await prisma.weaponInventory.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/tagTeamValidation.property.test.ts:675:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:609:5)

  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:80:24

      77     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      78 |       },
      79 |     });
    > 80 |     await prisma.robot.deleteMany({
         |     ^
      81 |       where: {
      82 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      83 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:80:5)

  ● Tag Team Validation Property Tests › should remove team from database and free robots for new teams

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:80:24

      77     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      78 |       },
      79 |     });
    > 80 |     await prisma.robot.deleteMany({
         |     ^
      81 |       where: {
      82 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      83 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:80:5)

  ● Tag Team Validation Property Tests › should validate team readiness based on both robots meeting all requirements

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:80:24

      77     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      78 |       },
      79 |     });
    > 80 |     await prisma.robot.deleteMany({
         |     ^
      81 |       where: {
      82 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      83 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:80:5)

  ● Tag Team Validation Property Tests › should calculate combined ELO as sum of both robots ELOs

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:80:24

      77     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      78 |       },
      79 |     });
    > 80 |     await prisma.robot.deleteMany({
         |     ^
      81 |       where: {
      82 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      83 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:80:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking only on odd cycles

    Property failed after 12 tests
    { seed: -1932473505, path: "11", endOnFailure: true }
    Counterexample: [37]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      1075 |           // Property: Should run if and only if cycle is odd
      1076 |           const isOdd = cycleNumber % 2 === 1;
    > 1077 |           expect(shouldRun).toBe(isOdd);
           |                             ^
      1078 |
      1079 |           // Inverse property: Should not run if cycle is even
      1080 |           const isEven = cycleNumber % 2 === 0;

      at tests/tagTeamValidation.property.test.ts:1077:29
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1061:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking on known odd cycles

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      1155 |
      1156 |       const shouldRun = await shouldRunTagTeamMatchmaking();
    > 1157 |       expect(shouldRun).toBe(true);
           |                         ^
      1158 |     }
      1159 |   });
      1160 |

      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1157:25)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams with unready robots from eligible teams

    Property failed after 36 tests
    { seed: -900698832, path: "35:4:0:0:0:1:0:7", endOnFailure: true }
    Counterexample: [[{"robot1":{"hpPercent":0,"yieldThreshold":12,"hasWeapon":false},"robot2":{__proto__:null,"hpPercent":95,"yieldThreshold":34,"hasWeapon":true}}]]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toContain(expected) // indexOf

    Expected value: 520
    Received array: []

      1360 |           // Property: All eligible teams should be in the expected ready teams list
      1361 |           for (const eligibleId of eligibleTeamIds) {
    > 1362 |             expect(expectedReadyTeams).toContain(eligibleId);
           |                                        ^
      1363 |           }
      1364 |
      1365 |           // Property: All expected ready teams should be in the eligible teams list

      at tests/tagTeamValidation.property.test.ts:1362:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1250:5)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%

    Property failed after 21 tests
    { seed: 547361605, path: "20", endOnFailure: true }
    Counterexample: [62,17]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).not.toContain(expected) // indexOf

    Expected value: not 718
    Received array:     [718]

      1455 |
      1456 |           // Property: Team with low HP robot should not be eligible
    > 1457 |           expect(eligibleTeamIds).not.toContain(team.id);
           |                                       ^
      1458 |
      1459 |           // Clean up
      1460 |           await prisma.tagTeam.deleteMany({ where: { id: team.id } });

      at tests/tagTeamValidation.property.test.ts:1457:39
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1391:5)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1231:26

      1228 
      1229 afterEach(async () => {
      1230   // Clean up teams and robots after each test
    → 1231   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      1229 |   afterEach(async () => {
      1230 |     // Clean up teams and robots after each test
    > 1231 |     await prisma.tagTeam.deleteMany({
           |     ^
      1232 |       where: { stableId: testUserId },
      1233 |     });
      1234 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1231:5)

  ● Tag Team Matchmaking ELO Matching Property Tests › should prefer matching teams with smaller ELO differences

    Property failed after 5 tests
    { seed: -1504352133, path: "4:1:0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [[{"robot1ELO":800,"robot2ELO":800},{"robot1ELO":800,"robot2ELO":800}]]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1558:61

      1555 // Create teams with specific ELO values
      1556 for (const config of teamConfigs) {
      1557   // Create weapon inventory
    → 1558   const weapon1Inv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      1556 |           for (const config of teamConfigs) {
      1557 |             // Create weapon inventory
    > 1558 |             const weapon1Inv = await prisma.weaponInventory.create({
           |                                ^
      1559 |               data: { userId: testUserId, weaponId },
      1560 |             });
      1561 |             const weapon2Inv = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/tagTeamValidation.property.test.ts:1558:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1542:5)

  ● Tag Team Matchmaking Same-Stable Exclusion Property Tests › should strongly deprioritize same-stable matches

    Property failed after 1 tests
    { seed: 442812562, path: "0:0", endOnFailure: true }
    Counterexample: [{"stable1Teams":1,"stable2Teams":1}]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1751:61

      1748 
      1749 // Create teams for stable 1
      1750 for (let i = 0; i < stable1Teams; i++) {
    → 1751   const weapon1Inv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      1749 |           // Create teams for stable 1
      1750 |           for (let i = 0; i < stable1Teams; i++) {
    > 1751 |             const weapon1Inv = await prisma.weaponInventory.create({
           |                                ^
      1752 |               data: { userId: testUserId1, weaponId },
      1753 |             });
      1754 |             const weapon2Inv = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/tagTeamValidation.property.test.ts:1751:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1739:5)

  ● Tag Team Matchmaking Recent Opponent Deprioritization Property Tests › should deprioritize recent opponents when multiple options exist

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1977:24

      1974 await prisma.tagTeam.deleteMany({
      1975   where: { stableId: testUserId },
      1976 });
    → 1977 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      1975 |       where: { stableId: testUserId },
      1976 |     });
    > 1977 |     await prisma.robot.deleteMany({
           |     ^
      1978 |       where: { userId: testUserId },
      1979 |     });
      1980 |     await prisma.weaponInventory.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1977:5)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:55:24

      52     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      53   },
      54 });
    → 55 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      53 |       },
      54 |     });
    > 55 |     await prisma.robot.deleteMany({
         |     ^
      56 |       where: {
      57 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      58 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:55:5)

  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1214:26

      1211 
      1212 afterAll(async () => {
      1213   // Clean up test data
    → 1214   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      1212 |   afterAll(async () => {
      1213 |     // Clean up test data
    > 1214 |     await prisma.tagTeam.deleteMany({
           |     ^
      1215 |       where: { stableId: testUserId },
      1216 |     });
      1217 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1214:5)

  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1952:24

      1949 await prisma.tagTeam.deleteMany({
      1950   where: { stableId: testUserId },
      1951 });
    → 1952 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      1950 |       where: { stableId: testUserId },
      1951 |     });
    > 1952 |     await prisma.robot.deleteMany({
           |     ^
      1953 |       where: { userId: testUserId },
      1954 |     });
      1955 |     await prisma.weaponInventory.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1952:5)

FAIL tests/tagTeamDatabaseSchema.test.ts
  ● Tag Team Database Schema Verification › TagTeam Model › should have check constraint for different robots

    expect(received).toContain(expected) // indexOf

    Expected value: "tag_teams_different_robots_check"
    Received array: []

      76 |
      77 |       const checkConstraints = constraints.map(c => c.conname);
    > 78 |       expect(checkConstraints).toContain('tag_teams_different_robots_check');
         |                                ^
      79 |     });
      80 |   });
      81 |

      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:78:32)

FAIL tests/tagTeamStreamingRevenue.test.ts
  ● Tag Team Streaming Revenue Integration › should calculate and award streaming revenue for Tag Team battles

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      253 |     const team2Result = await createTeam(testUser2.id, robot2_1.id, robot2_2.id);
      254 |
    > 255 |     expect(team1Result.success).toBe(true);
          |                                 ^
      256 |     expect(team2Result.success).toBe(true);
      257 |
      258 |     const team1 = team1Result.team!;

      at Object.<anonymous> (tests/tagTeamStreamingRevenue.test.ts:255:33)

FAIL tests/finances.test.ts
  ● Console

    console.error
      ROI calculator error: Error: User not found
          at calculateFacilityROI (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/economyCalculations.ts:951:11)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/finances.ts:368:21

      370 |     res.json(roiData);
      371 |   } catch (error) {
    > 372 |     console.error('ROI calculator error:', error);
          |             ^
      373 |     if (error instanceof Error) {
      374 |       res.status(400).json({ error: error.message });
      375 |     } else {

      at src/routes/finances.ts:372:13

  ● Finances Routes › GET /api/finances/summary › should get financial summary with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      137 |         .set('Authorization', `Bearer ${authToken}`);
      138 |
    > 139 |       expect(response.status).toBe(200);
          |                               ^
      140 |       // Should return financial data
      141 |       expect(response.body).toBeDefined();
      142 |       expect(typeof response.body).toBe('object');

      at Object.<anonymous> (tests/finances.test.ts:139:31)

  ● Finances Routes › GET /api/finances/revenue-streams › should get revenue streams with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      177 |         .set('Authorization', `Bearer ${authToken}`);
      178 |
    > 179 |       expect(response.status).toBe(200);
          |                               ^
      180 |       // Should return some financial data
      181 |       expect(response.body).toBeDefined();
      182 |       expect(typeof response.body).toBe('object');

      at Object.<anonymous> (tests/finances.test.ts:179:31)

  ● Finances Routes › GET /api/finances/projections › should get financial projections with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      197 |         .set('Authorization', `Bearer ${authToken}`);
      198 |
    > 199 |       expect(response.status).toBe(200);
          |                               ^
      200 |       // Projections should have projections and metrics
      201 |       expect(response.body).toHaveProperty('projections');
      202 |       expect(response.body.projections).toHaveProperty('weekly');

      at Object.<anonymous> (tests/finances.test.ts:199:31)

FAIL tests/matchmakingService.test.ts
  ● Matchmaking Service › checkBattleReadiness › should mark robot as ready when HP >= 75% and weapon equipped

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:121:54

      118 
      119 describe('checkBattleReadiness', () => {
      120   it('should mark robot as ready when HP >= 75% and weapon equipped', async () => {
    → 121     const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      119 |   describe('checkBattleReadiness', () => {
      120 |     it('should mark robot as ready when HP >= 75% and weapon equipped', async () => {
    > 121 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      122 |         data: {
      123 |           userId: testUser.id,
      124 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:121:25)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP < 75%

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:158:54

      155 });
      156 
      157 it('should mark robot as not ready when HP < 75%', async () => {
    → 158   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      156 |
      157 |     it('should mark robot as not ready when HP < 75%', async () => {
    > 158 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      159 |         data: {
      160 |           userId: testUser.id,
      161 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:158:25)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP is at or below yield threshold

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:193:54

      190 });
      191 
      192 it('should mark robot as not ready when HP is at or below yield threshold', async () => {
    → 193   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      191 |
      192 |     it('should mark robot as not ready when HP is at or below yield threshold', async () => {
    > 193 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      194 |         data: {
      195 |           userId: testUser.id,
      196 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:193:25)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when weapon not equipped

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:228:40

      225 });
      226 
      227 it('should mark robot as not ready when weapon not equipped', async () => {
    → 228   const robot = await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      226 |
      227 |     it('should mark robot as not ready when weapon not equipped', async () => {
    > 228 |       const robot = await prisma.robot.create({
          |                     ^
      229 |         data: {
      230 |           userId: testUser.id,
      231 |           name: 'No Weapon Robot',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:228:21)

  ● Matchmaking Service › checkBattleReadiness › should check dual wield loadout correctly

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:254:55

      251 });
      252 
      253 it('should check dual wield loadout correctly', async () => {
    → 254   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      252 |
      253 |     it('should check dual wield loadout correctly', async () => {
    > 254 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      255 |         data: {
      256 |           userId: testUser.id,
      257 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:254:26)

  ● Matchmaking Service › runMatchmakingForTier › should create matches for available robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:293:56

      290 // Create 4 ready robots in bronze league
      291 const robots = [];
      292 for (let i = 0; i < 4; i++) {
    → 293   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      291 |       const robots = [];
      292 |       for (let i = 0; i < 4; i++) {
    > 293 |         const weaponInv = await prisma.weaponInventory.create({
          |                           ^
      294 |           data: {
      295 |             userId: testUser.id,
      296 |             weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:293:27)

  ● Matchmaking Service › runMatchmakingForTier › should create bye-match for odd number of robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:375:56

      372 // Create 3 ready robots (odd number)
      373 const robots = [];
      374 for (let i = 0; i < 3; i++) {
    → 375   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      373 |       const robots = [];
      374 |       for (let i = 0; i < 3; i++) {
    > 375 |         const weaponInv = await prisma.weaponInventory.create({
          |                           ^
      376 |           data: {
      377 |             userId: testUser.id,
      378 |             weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:375:27)

  ● Matchmaking Service › runMatchmakingForTier › should not create duplicate matches for already scheduled robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:432:56

      429 // Create 2 robots
      430 const robots = [];
      431 for (let i = 0; i < 2; i++) {
    → 432   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      430 |       const robots = [];
      431 |       for (let i = 0; i < 2; i++) {
    > 432 |         const weaponInv = await prisma.weaponInventory.create({
          |                           ^
      433 |           data: {
      434 |             userId: testUser.id,
      435 |             weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:432:27)

  ● Matchmaking Service › runMatchmakingForTier › should skip robots that are not battle-ready

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:480:55

      477 
      478 it('should skip robots that are not battle-ready', async () => {
      479   // Create 1 ready robot and 1 not-ready robot
    → 480   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      478 |     it('should skip robots that are not battle-ready', async () => {
      479 |       // Create 1 ready robot and 1 not-ready robot
    > 480 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      481 |         data: {
      482 |           userId: testUser.id,
      483 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:480:26)

  ● Matchmaking Service › runMatchmaking (all tiers) › should run matchmaking across all tiers

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:541:58

      538 
      539 for (const tier of tiers) {
      540   for (let i = 0; i < 2; i++) {
    → 541     const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      539 |       for (const tier of tiers) {
      540 |         for (let i = 0; i < 2; i++) {
    > 541 |           const weaponInv = await prisma.weaponInventory.create({
          |                             ^
      542 |             data: {
      543 |               userId: testUser.id,
      544 |               weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:541:29)

FAIL tests/twoRobotTagTeamGeneration.test.ts
  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)

    Practice Sword weapon not found. Run seed first.

      19 |
      20 |     if (!practiceSword) {
    > 21 |       throw new Error('Practice Sword weapon not found. Run seed first.');
         |             ^
      22 |     }
      23 |   });
      24 |

      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:21:13)

  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)

    Practice Sword weapon not found. Run seed first.

      19 |
      20 |     if (!practiceSword) {
    > 21 |       throw new Error('Practice Sword weapon not found. Run seed first.');
         |             ^
      22 |     }
      23 |   });
      24 |

      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:21:13)

  ● Two-Robot Specialist Tag Team Generation › should not create tag teams for single-robot archetypes

    Practice Sword weapon not found. Run seed first.

      19 |
      20 |     if (!practiceSword) {
    > 21 |       throw new Error('Practice Sword weapon not found. Run seed first.');
         |             ^
      22 |     }
      23 |   });
      24 |

      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:21:13)

  ● Two-Robot Specialist Tag Team Generation › should create tag teams with correct robot assignments

    Practice Sword weapon not found. Run seed first.

      19 |
      20 |     if (!practiceSword) {
    > 21 |       throw new Error('Practice Sword weapon not found. Run seed first.');
         |             ^
      22 |     }
      23 |   });
      24 |

      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:21:13)

FAIL tests/battleOrchestrator.test.ts
  ● Console

    console.log
      [Streaming] Test Fighter 1 earned ₡1,000 from Battle #404

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] Test Fighter 2 earned ₡1,001 from Battle #404

      at processBattle (src/services/battleOrchestrator.ts:667:15)

  ● Battle Orchestrator › processBattle › should execute a battle and create records

    PrismaClientKnownRequestError: 
    Invalid `prisma.scheduledMatch.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31

      800 // No need to update Battle table
      801 
      802 // Update scheduled match
    → 803 await prisma.scheduledMatch.update(
    Foreign key constraint violated: `scheduled_matches_battle_id_fkey (index)`

      801 |   
      802 |   // Update scheduled match
    > 803 |   await prisma.scheduledMatch.update({
          |   ^
      804 |     where: { id: scheduledMatch.id },
      805 |     data: {
      806 |       status: 'completed',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at processBattle (src/services/battleOrchestrator.ts:803:3)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:175:22)

  ● Battle Orchestrator › processBattle › should handle bye-robot battles correctly

    PrismaClientKnownRequestError: 
    Invalid `prisma.scheduledMatch.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:259:58

      256 });
      257 
      258 // Create scheduled bye-match
    → 259 const scheduledMatch = await prisma.scheduledMatch.create(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      257 |
      258 |       // Create scheduled bye-match
    > 259 |       const scheduledMatch = await prisma.scheduledMatch.create({
          |                              ^
      260 |         data: {
      261 |           robot1Id: playerRobot.id,
      262 |           robot2Id: byeRobot.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:259:30)

  ● Battle Orchestrator › processBattle › should increment kills when a robot destroys its opponent

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:290:55

      287 
      288 it('should increment kills when a robot destroys its opponent', async () => {
      289   // Create two test robots
    → 290   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      288 |     it('should increment kills when a robot destroys its opponent', async () => {
      289 |       // Create two test robots
    > 290 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      291 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      292 |       });
      293 |       const weaponInv2 = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:290:26)

  ● Battle Orchestrator › executeScheduledBattles › should execute multiple scheduled battles

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:383:56

      380 // Create robots and scheduled matches
      381 const robots = [];
      382 for (let i = 0; i < 4; i++) {
    → 383   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      381 |       const robots = [];
      382 |       for (let i = 0; i < 4; i++) {
    > 383 |         const weaponInv = await prisma.weaponInventory.create({
          |                           ^
      384 |           data: { userId: testUser.id, weaponId: practiceSword.id },
      385 |         });
      386 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:383:27)

  ● Battle Orchestrator › Streaming Revenue Integration › should calculate and award streaming revenue after battle

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:448:55

      445 describe('Streaming Revenue Integration', () => {
      446   it('should calculate and award streaming revenue after battle', async () => {
      447     // Create test robots with some fame and battles
    → 448     const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      446 |     it('should calculate and award streaming revenue after battle', async () => {
      447 |       // Create test robots with some fame and battles
    > 448 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      449 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      450 |       });
      451 |       const weaponInv2 = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:448:26)

  ● Battle Orchestrator › Streaming Revenue Integration › should not award streaming revenue for bye matches

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:525:54

      522 
      523 it('should not award streaming revenue for bye matches', async () => {
      524   // Create player robot
    → 525   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      523 |     it('should not award streaming revenue for bye matches', async () => {
      524 |       // Create player robot
    > 525 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      526 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      527 |       });
      528 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:525:25)

  ● Battle Orchestrator › Streaming Revenue Integration › should add streaming revenue to audit log

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:618:55

      615 
      616 it('should add streaming revenue to audit log', async () => {
      617   // Create test robots
    → 618   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      616 |     it('should add streaming revenue to audit log', async () => {
      617 |       // Create test robots
    > 618 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      619 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      620 |       });
      621 |       const weaponInv2 = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:618:26)

  ● Battle Orchestrator › Streaming Revenue Integration › should log streaming revenue to terminal

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:696:55

      693 
      694 it('should log streaming revenue to terminal', async () => {
      695   // Create test robots
    → 696   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      694 |     it('should log streaming revenue to terminal', async () => {
      695 |       // Create test robots
    > 696 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      697 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      698 |       });
      699 |       const weaponInv2 = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:696:26)

PASS tests/facilityTransactionLogging.test.ts
PASS tests/validation.test.ts
PASS tests/financialReportStreamingRevenue.test.ts
FAIL tests/integration/bronzeLeagueRebalancing.test.ts
  ● Bronze League Rebalancing - Integration Test › should correctly rebalance 331 robots from single bronze instance into multiple instances

    expect(received).toBe(expected) // Object.is equality

    Expected: 331
    Received: 332

      63 |     // Verify initial state - all robots in one instance
      64 |     const initialStats = await getLeagueInstanceStats('bronze');
    > 65 |     expect(initialStats.totalRobots).toBe(331);
         |                                      ^
      66 |     expect(initialStats.instances).toHaveLength(1);
      67 |     expect(initialStats.instances[0].leagueId).toBe('bronze_1');
      68 |     expect(initialStats.instances[0].currentRobots).toBe(331);

      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:65:38)

  ● Bronze League Rebalancing - Integration Test › should handle the scenario progressively over multiple cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.createMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/bronzeLeagueRebalancing.test.ts:161:24

      158     maxShield: 2,
      159   });
      160 }
    → 161 await prisma.robot.createMany(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      159 |       });
      160 |     }
    > 161 |     await prisma.robot.createMany({ data: newRobots });
          |     ^
      162 |
      163 |     // Verify all 350 robots are in bronze_1
      164 |     const beforeStats = await getLeagueInstanceStats('bronze');

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:161:5)

FAIL tests/streamingStudioPrestigeRequirements.property.test.ts
  ● Console

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:247:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 10 | Cost: ₡1,000,000 | Balance: ₡5,500,000 → ₡4,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.error
      Failed to log facility transaction event: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:233:7 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

      247 |       console.log(`[Facility] User ${userId} | ${action}: ${config.name} | Level: ${targetLevel} | Cost: ₡${upgradeCost.toLocaleString()} | Balance: ₡${user.currency.toLocaleString()} → ₡${result.user.currency.toLocaleString()}`);
      248 |     } catch (logError) {
    > 249 |       console.error('Failed to log facility transaction event:', logError);
          |               ^
      250 |       // Don't fail the request if logging fails
      251 |     }
      252 |

      at src/routes/facility.ts:249:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 310 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.error
      Facility upgrade error: PrismaClientKnownRequestError: 
      Invalid `tx.user.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:199:41
      
        196 // Perform upgrade in a transaction
        197 const result = await prisma.$transaction(async (tx) => {
        198   // Deduct currency
      → 199   const updatedUser = await tx.user.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:199:27
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:197:20 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'User', cause: 'Record to update not found.' }
      }

      257 |     });
      258 |   } catch (error) {
    > 259 |     console.error('Facility upgrade error:', error);
          |             ^
      260 |     res.status(500).json({ error: 'Internal server error' });
      261 |   }
      262 | });

      at src/routes/facility.ts:259:13

    console.log
      [Facility] User 364 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 364 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.error
      Facility upgrade error: PrismaClientKnownRequestError: 
      Invalid `tx.user.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:199:41
      
        196 // Perform upgrade in a transaction
        197 const result = await prisma.$transaction(async (tx) => {
        198   // Deduct currency
      → 199   const updatedUser = await tx.user.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:199:27
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:197:20 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'User', cause: 'Record to update not found.' }
      }

      257 |     });
      258 |   } catch (error) {
    > 259 |     console.error('Facility upgrade error:', error);
          |             ^
      260 |     res.status(500).json({ error: 'Internal server error' });
      261 |   }
      262 | });

      at src/routes/facility.ts:259:13

    console.log
      [Facility] User 387 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 387 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 387 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 387 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 387 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 387 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:247:15

    console.log
      [Facility] User 387 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:247:15

    console.error
      Facility upgrade error: PrismaClientKnownRequestError: 
      Invalid `tx.user.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:199:41
      
        196 // Perform upgrade in a transaction
        197 const result = await prisma.$transaction(async (tx) => {
        198   // Deduct currency
      → 199   const updatedUser = await tx.user.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:199:27
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/facility.ts:197:20 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'User', cause: 'Record to update not found.' }
      }

      257 |     });
      258 |   } catch (error) {
    > 259 |     console.error('Facility upgrade error:', error);
          |             ^
      260 |     res.status(500).json({ error: 'Internal server error' });
      261 |   }
      262 | });

      at src/routes/facility.ts:259:13

  ● Property 9: Streaming Studio Prestige Requirements › Property 9: Prestige requirements enforced for all levels

    Property failed after 19 tests
    { seed: -880653486, path: "18:0:0", endOnFailure: true }
    Counterexample: [1,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:110:29

      107 });
      108 
      109 // Reset user prestige and currency
    → 110 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      108 |
      109 |           // Reset user prestige and currency
    > 110 |           await prisma.user.update({
          |           ^
      111 |             where: { id: testUser.id },
      112 |             data: { prestige: userPrestige, currency: 10000000 },
      113 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:110:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:96:5)

  ● Property 9: Streaming Studio Prestige Requirements › Property 9.1: Levels 1-3 require no prestige

    Property failed after 5 tests
    { seed: -789842218, path: "4:0:0", endOnFailure: true }
    Counterexample: [1,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:196:29

      193 });
      194 
      195 // Set user prestige
    → 196 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      194 |
      195 |           // Set user prestige
    > 196 |           await prisma.user.update({
          |           ^
      197 |             where: { id: testUser.id },
      198 |             data: { prestige: userPrestige, currency: 10000000 },
      199 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:196:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:182:5)

  ● Property 9: Streaming Studio Prestige Requirements › Property 9.2: Levels 4-10 enforce progressive prestige requirements

    Property failed after 1 tests
    { seed: 182497721, path: "0:0", endOnFailure: true }
    Counterexample: [4]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:252:29

      249 const maxPrestigeNeeded = Math.max(
      250   ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      251 );
    → 252 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      250 |             ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      251 |           );
    > 252 |           await prisma.user.update({
          |           ^
      253 |             where: { id: testUser.id },
      254 |             data: { prestige: maxPrestigeNeeded, currency: 10000000 },
      255 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:252:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:231:5)

  ● Property 9: Streaming Studio Prestige Requirements › Property 9.4: Error messages contain required prestige information

    Property failed after 1 tests
    { seed: -1971714069, path: "0:0", endOnFailure: true }
    Counterexample: [4]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:346:29

      343 const maxPrestigeNeeded = Math.max(
      344   ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      345 );
    → 346 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      344 |             ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      345 |           );
    > 346 |           await prisma.user.update({
          |           ^
      347 |             where: { id: testUser.id },
      348 |             data: { prestige: maxPrestigeNeeded, currency: 10000000 },
      349 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:346:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:328:5)

  ● Property 9: Streaming Studio Prestige Requirements › Property 9.5: Prestige validation occurs regardless of currency

    Property failed after 1 tests
    { seed: -1773304865, path: "0:0:0", endOnFailure: true }
    Counterexample: [4,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:415:29

      412 const maxPrestigeNeeded = Math.max(
      413   ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      414 );
    → 415 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      413 |             ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      414 |           );
    > 415 |           await prisma.user.update({
          |           ^
      416 |             where: { id: testUser.id },
      417 |             data: { prestige: maxPrestigeNeeded, currency: 10000000 },
      418 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:415:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:396:5)

PASS tests/eventLogger.integration.test.ts
FAIL tests/prestigeGates.test.ts
  ● Prestige Gates › Facility Config Prestige Requirements › Training Facility has correct prestige requirements

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 0

    @@ -6,7 +6,6 @@
        0,
        0,
        5000,
        0,
        10000,
    -   0,
      ]

      24 |       const config = getFacilityConfig('training_facility');
      25 |       expect(config).toBeDefined();
    > 26 |       expect(config?.prestigeRequirements).toEqual([0, 0, 0, 1000, 0, 0, 5000, 0, 10000, 0]);
         |                                            ^
      27 |     });
      28 |
      29 |     test('Weapons Workshop has correct prestige requirements', () => {

      at Object.<anonymous> (tests/prestigeGates.test.ts:26:44)

  ● Prestige Gates › Facility Config Prestige Requirements › Income Generator has correct prestige requirements

    expect(received).toBeDefined()

    Received: undefined

      89 |     test('Income Generator has correct prestige requirements', () => {
      90 |       const config = getFacilityConfig('income_generator');
    > 91 |       expect(config).toBeDefined();
         |                      ^
      92 |       expect(config?.prestigeRequirements).toEqual([0, 0, 0, 3000, 0, 0, 7500, 0, 15000, 0]);
      93 |     });
      94 |

      at Object.<anonymous> (tests/prestigeGates.test.ts:91:22)

FAIL tests/tagTeamLeagueStandings.property.test.ts
  ● Tag Team League Standings Property Tests › should maintain independent 1v1 and tag team league standings

    TypeError: Cannot read properties of null (reading 'id')

      34 |     // Get a weapon for testing
      35 |     const weapon = await prisma.weapon.findFirst();
    > 36 |     weaponId = weapon!.id;
         |                        ^
      37 |   });
      38 |
      39 |   afterAll(async () => {

      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:36:24)

  ● Tag Team League Standings Property Tests › should not affect robot 1v1 standings when tag team league changes

    TypeError: Cannot read properties of null (reading 'id')

      34 |     // Get a weapon for testing
      35 |     const weapon = await prisma.weapon.findFirst();
    > 36 |     weaponId = weapon!.id;
         |                        ^
      37 |   });
      38 |
      39 |   afterAll(async () => {

      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:36:24)

  ● Tag Team League Standings Property Tests › should allow robots with different 1v1 leagues to be in the same tag team

    TypeError: Cannot read properties of null (reading 'id')

      34 |     // Get a weapon for testing
      35 |     const weapon = await prisma.weapon.findFirst();
    > 36 |     weaponId = weapon!.id;
         |                        ^
      37 |   });
      38 |
      39 |   afterAll(async () => {

      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:36:24)

FAIL tests/leagueInstanceService.test.ts
  ● Console

    console.log
      [LeagueInstance] platinum instances balanced, no action needed

      at rebalanceInstances (src/services/leagueInstanceService.ts:123:13)

    console.log
      [LeagueInstance] champion instances balanced, no action needed

      at rebalanceInstances (src/services/leagueInstanceService.ts:123:13)

  ● League Instance Service › getInstancesForTier › should return instances sorted by instance number

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:65:31

      62 
      63 // Clean up
      64 await prisma.robot.deleteMany({ where: { userId: user.id } });
    → 65 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      63 |       // Clean up
      64 |       await prisma.robot.deleteMany({ where: { userId: user.id } });
    > 65 |       await prisma.user.delete({ where: { id: user.id } });
         |       ^
      66 |     });
      67 |
      68 |     it('should exclude bye-robot from instance counts', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:65:7)

  ● League Instance Service › getLeagueInstanceStats › should detect when rebalancing is needed

    expect(received).toBe(expected) // Object.is equality

    Expected: 100
    Received: 433

      159 |       const stats = await getLeagueInstanceStats('bronze');
      160 |       
    > 161 |       expect(stats.totalRobots).toBe(100);
          |                                 ^
      162 |       expect(stats.averagePerInstance).toBe(50);
      163 |       expect(stats.needsRebalancing).toBe(true); // Deviation of 30 > threshold of 20
      164 |

      at Object.<anonymous> (tests/leagueInstanceService.test.ts:161:33)

  ● League Instance Service › getLeagueInstanceStats › should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.createMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:192:26

      189     maxShield: 2,
      190   });
      191 }
    → 192 await prisma.robot.createMany(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      190 |         });
      191 |       }
    > 192 |       await prisma.robot.createMany({ data: robots });
          |       ^
      193 |
      194 |       const stats = await getLeagueInstanceStats('bronze');
      195 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:192:7)

  ● League Instance Service › rebalanceInstances › should rebalance when imbalance exceeds threshold

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"currentRobots": 80, "instanceNumber": 1, "isFull": false, "leagueId": "champion_1", "maxRobots": 100, "tier": "champion"}, {"currentRobots": 20, "instanceNumber": 2, "isFull": false, "leagueId": "champion_2", "maxRobots": 100, "tier": "champion"}]

      356 |       
      357 |       // With 100 robots and MAX_ROBOTS_PER_INSTANCE=100, should have exactly 1 instance
    > 358 |       expect(instances).toHaveLength(1);
          |                         ^
      359 |       expect(instances[0].currentRobots).toBe(100);
      360 |       
      361 |       // Verify no instance exceeds the limit

      at Object.<anonymous> (tests/leagueInstanceService.test.ts:358:25)

FAIL tests/profileUpdate.test.ts
  ● Console

    console.log
      Profile update request: { userId: 384, body: { stableName: 'TestStable_1771959103389' } }

      at src/routes/user.ts:257:13

    console.log
      Update data: { stableName: 'TestStable_1771959103389' }

      at src/routes/user.ts:350:13

    console.log
      Profile update request: { userId: 384, body: { profileVisibility: 'private' } }

      at src/routes/user.ts:257:13

    console.log
      Update data: { profileVisibility: 'private' }

      at src/routes/user.ts:350:13

    console.log
      Profile update request: {
        userId: 384,
        body: { notificationsBattle: false, notificationsLeague: false }
      }

      at src/routes/user.ts:257:13

    console.log
      Update data: { notificationsBattle: false, notificationsLeague: false }

      at src/routes/user.ts:350:13

    console.log
      Profile update request: { userId: 384, body: { themePreference: 'light' } }

      at src/routes/user.ts:257:13

    console.log
      Update data: { themePreference: 'light' }

      at src/routes/user.ts:350:13

    console.log
      Profile update request: {
        userId: 384,
        body: {
          stableName: 'MultiUpdate_1771959103502',
          profileVisibility: 'public',
          themePreference: 'auto',
          notificationsBattle: true
        }
      }

      at src/routes/user.ts:257:13

    console.log
      Update data: {
        stableName: 'MultiUpdate_1771959103502',
        profileVisibility: 'public',
        notificationsBattle: true,
        themePreference: 'auto'
      }

      at src/routes/user.ts:350:13

    console.log
      Profile update request: {
        userId: 384,
        body: { currentPassword: 'TestPass123', newPassword: 'NewPass456' }
      }

      at src/routes/user.ts:257:13

    console.log
      Update data: {
        passwordHash: '$2b$10$5Ppa741wj6ksi.J6BjP3ZejN28kj3zMqSm5SMkecVrOnirzdijMSe'
      }

      at src/routes/user.ts:350:13

    console.error
      Profile update error: PrismaClientKnownRequestError: 
      Invalid `prisma.user.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:43
      
        356 }
        357 
        358 // Update user in database
      → 359 const updatedUser = await prisma.user.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:25 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'User', cause: 'Record to update not found.' }
      }

      383 |     res.json(response);
      384 |   } catch (error) {
    > 385 |     console.error('Profile update error:', error);
          |             ^
      386 |     
      387 |     // Provide more detailed error information
      388 |     if (error instanceof Error) {

      at src/routes/user.ts:385:13

    console.error
      Error details: {
        message: '\n' +
          'Invalid `prisma.user.update()` invocation in\n' +
          '/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:43\n' +
          '\n' +
          '  356 }\n' +
          '  357 \n' +
          '  358 // Update user in database\n' +
          '→ 359 const updatedUser = await prisma.user.update(\n' +
          'An operation failed because it depends on one or more records that were required but not found. Record to update not found.',
        stack: 'PrismaClientKnownRequestError: \n' +
          'Invalid `prisma.user.update()` invocation in\n' +
          '/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:43\n' +
          '\n' +
          '  356 }\n' +
          '  357 \n' +
          '  358 // Update user in database\n' +
          '→ 359 const updatedUser = await prisma.user.update(\n' +
          'An operation failed because it depends on one or more records that were required but not found. Record to update not found.\n' +
          '    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n' +
          '    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n' +
          '    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n' +
          '    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n' +
          '    at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:25',
        name: 'PrismaClientKnownRequestError'
      }

      387 |     // Provide more detailed error information
      388 |     if (error instanceof Error) {
    > 389 |       console.error('Error details:', {
          |               ^
      390 |         message: error.message,
      391 |         stack: error.stack,
      392 |         name: error.name

      at src/routes/user.ts:389:15

    console.log
      Profile update request: {
        userId: 384,
        body: { currentPassword: 'WrongPassword123', newPassword: 'NewPass456' }
      }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: { userId: 384, body: { newPassword: 'NewPass456' } }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: { userId: 384, body: { stableName: 'ab' } }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: {
        userId: 384,
        body: { stableName: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' }
      }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: { userId: 384, body: { stableName: 'Test@Name!' } }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: { userId: 384, body: { stableName: 'BadShitName' } }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: { userId: 384, body: { stableName: 'TakenStableName' } }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: {
        userId: 384,
        body: { currentPassword: 'TestPass123', newPassword: 'Short1' }
      }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: {
        userId: 384,
        body: { currentPassword: 'TestPass123', newPassword: 'nouppercase123' }
      }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: {
        userId: 384,
        body: { currentPassword: 'TestPass123', newPassword: 'NOLOWERCASE123' }
      }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: {
        userId: 384,
        body: { currentPassword: 'TestPass123', newPassword: 'NoNumberPass' }
      }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: { userId: 384, body: { profileVisibility: 'invalid' } }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: { userId: 384, body: { themePreference: 'invalid' } }

      at src/routes/user.ts:257:13

    console.log
      Profile update request: { userId: 384, body: { themePreference: 'dark' } }

      at src/routes/user.ts:257:13

    console.log
      Update data: { themePreference: 'dark' }

      at src/routes/user.ts:350:13

    console.error
      Profile update error: PrismaClientKnownRequestError: 
      Invalid `prisma.user.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:43
      
        356 }
        357 
        358 // Update user in database
      → 359 const updatedUser = await prisma.user.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:25 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'User', cause: 'Record to update not found.' }
      }

      383 |     res.json(response);
      384 |   } catch (error) {
    > 385 |     console.error('Profile update error:', error);
          |             ^
      386 |     
      387 |     // Provide more detailed error information
      388 |     if (error instanceof Error) {

      at src/routes/user.ts:385:13

    console.error
      Error details: {
        message: '\n' +
          'Invalid `prisma.user.update()` invocation in\n' +
          '/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:43\n' +
          '\n' +
          '  356 }\n' +
          '  357 \n' +
          '  358 // Update user in database\n' +
          '→ 359 const updatedUser = await prisma.user.update(\n' +
          'An operation failed because it depends on one or more records that were required but not found. Record to update not found.',
        stack: 'PrismaClientKnownRequestError: \n' +
          'Invalid `prisma.user.update()` invocation in\n' +
          '/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:43\n' +
          '\n' +
          '  356 }\n' +
          '  357 \n' +
          '  358 // Update user in database\n' +
          '→ 359 const updatedUser = await prisma.user.update(\n' +
          'An operation failed because it depends on one or more records that were required but not found. Record to update not found.\n' +
          '    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n' +
          '    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n' +
          '    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n' +
          '    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n' +
          '    at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/user.ts:359:25',
        name: 'PrismaClientKnownRequestError'
      }

      387 |     // Provide more detailed error information
      388 |     if (error instanceof Error) {
    > 389 |       console.error('Error details:', {
          |               ^
      390 |         message: error.message,
      391 |         stack: error.stack,
      392 |         name: error.name

      at src/routes/user.ts:389:15

    console.log
      Profile update request: {
        userId: 384,
        body: {
          stableName: 'ab',
          profileVisibility: 'invalid',
          themePreference: 'neon'
        }
      }

      at src/routes/user.ts:257:13

  ● Profile Update Endpoint › PUT /api/user/profile › should change password successfully with correct current password

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      178 |         });
      179 |
    > 180 |       expect(response.status).toBe(200);
          |                               ^
      181 |       
      182 |       // Verify new password works
      183 |       const updatedUser = await prisma.user.findUnique({

      at Object.<anonymous> (tests/profileUpdate.test.ts:180:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject password change with incorrect current password

    expect(received).toBe(expected) // Object.is equality

    Expected: 401
    Received: 404

      203 |         });
      204 |
    > 205 |       expect(response.status).toBe(401);
          |                               ^
      206 |       expect(response.body.error).toBe('Current password is incorrect');
      207 |     });
      208 |

      at Object.<anonymous> (tests/profileUpdate.test.ts:205:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (too short)

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      296 |         });
      297 |
    > 298 |       expect(response.status).toBe(400);
          |                               ^
      299 |       expect(response.body.error).toBe('Validation failed');
      300 |       expect(response.body.details.newPassword).toContain('at least 8 characters');
      301 |     });

      at Object.<anonymous> (tests/profileUpdate.test.ts:298:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no uppercase)

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      310 |         });
      311 |
    > 312 |       expect(response.status).toBe(400);
          |                               ^
      313 |       expect(response.body.error).toBe('Validation failed');
      314 |       expect(response.body.details.newPassword).toContain('uppercase letter');
      315 |     });

      at Object.<anonymous> (tests/profileUpdate.test.ts:312:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no lowercase)

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      324 |         });
      325 |
    > 326 |       expect(response.status).toBe(400);
          |                               ^
      327 |       expect(response.body.error).toBe('Validation failed');
      328 |       expect(response.body.details.newPassword).toContain('lowercase letter');
      329 |     });

      at Object.<anonymous> (tests/profileUpdate.test.ts:326:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no number)

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      338 |         });
      339 |
    > 340 |       expect(response.status).toBe(400);
          |                               ^
      341 |       expect(response.body.error).toBe('Validation failed');
      342 |       expect(response.body.details.newPassword).toContain('number');
      343 |     });

      at Object.<anonymous> (tests/profileUpdate.test.ts:340:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should preserve unchanged fields when updating partial data

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:388:25

      385 
      386 it('should preserve unchanged fields when updating partial data', async () => {
      387   // First, set some initial values
    → 388   await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      386 |     it('should preserve unchanged fields when updating partial data', async () => {
      387 |       // First, set some initial values
    > 388 |       await prisma.user.update({
          |       ^
      389 |         where: { id: testUser.id },
      390 |         data: {
      391 |           stableName: 'InitialName',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/profileUpdate.test.ts:388:7)

  ● Profile Update Endpoint › PUT /api/user/profile › should return all profile fields in response

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      419 |         .send({ themePreference: 'dark' });
      420 |
    > 421 |       expect(response.status).toBe(200);
          |                               ^
      422 |       
      423 |       // Verify core user fields are present
      424 |       expect(response.body).toHaveProperty('id');

      at Object.<anonymous> (tests/profileUpdate.test.ts:421:31)

PASS tests/auth.test.ts
  ● Console

    console.log
      Skipping test_user_001 test - seed data not present

      at Object.<anonymous> (tests/auth.test.ts:237:17)

PASS tests/records.test.ts
PASS tests/adminRobotStats.test.ts
PASS tests/cycleCsvStreamingRevenue.property.test.ts
  ● Console

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:43.859Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959103844_0.9348058380783989 earned ₡2,994 from Battle #405

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959103850_0.33980411274276234 earned ₡7,077 from Battle #405

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959103844_0.9348058380783989 (User 407) vs TestRobot2_1771959103850_0.33980411274276234 (User 408) | Winner: TestRobot2_1771959103850_0.33980411274276234 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:44.061Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959104048_0.26451372468888823 earned ₡9,026 from Battle #406

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959104052_0.048689273176713566 earned ₡1,498 from Battle #406

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959104048_0.26451372468888823 (User 407) vs TestRobot2_1771959104052_0.048689273176713566 (User 408) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:44.213Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959104199_0.7266614874156293 earned ₡3,339 from Battle #407

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959104202_0.7152297673774978 earned ₡8,553 from Battle #407

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959104199_0.7266614874156293 (User 407) vs TestRobot2_1771959104202_0.7152297673774978 (User 408) | Winner: TestRobot2_1771959104202_0.7152297673774978 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:44.377Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959104362_0.5097989772568383 earned ₡5,509 from Battle #409

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959104366_0.6848436309676135 earned ₡2,018 from Battle #409

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959104362_0.5097989772568383 (User 407) vs TestRobot2_1771959104366_0.6848436309676135 (User 408) | Winner: TestRobot1_1771959104362_0.5097989772568383 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:44.530Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959104518_0.14466030755354176 earned ₡12,084 from Battle #410

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959104521_0.7795420038368666 earned ₡4,010 from Battle #410

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959104518_0.14466030755354176 (User 407) vs TestRobot2_1771959104521_0.7795420038368666 (User 408) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:44.763Z

      at executeScheduledBattles (src/services/battleOrchestrator.ts:841:11)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at executeScheduledBattles (src/services/battleOrchestrator.ts:860:11)

    console.log
      [Streaming] TestRobot1_1771959104747_0.9760305869007837 earned ₡7,927 from Battle #411

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771959104751_0.8045678630146519 earned ₡6,727 from Battle #411

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771959104747_0.9760305869007837 (User 407) vs TestRobot2_1771959104751_0.8045678630146519 (User 408) | Winner: TestRobot2_1771959104751_0.8045678630146519 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at executeScheduledBattles (src/services/battleOrchestrator.ts:938:11)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at executeScheduledBattles (src/services/battleOrchestrator.ts:939:11)

PASS tests/facilityRecommendationService.test.ts
FAIL tests/matches.test.ts
  ● Matches Routes › GET /api/matches/upcoming › should get upcoming matches with auth

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/upcoming › should return 401 without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/upcoming › should return 403 with invalid token

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/history › should get match history with auth

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/history › should support pagination

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/history › should filter by robot ID

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/history › should return 401 without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/battles/:id/log › should return 401 without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/battles/:id/log › should return 403 with invalid token

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/battles/:id/log › should handle non-existent battle ID with auth

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

FAIL tests/tournamentStreamingRevenue.test.ts
  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |
      16 |   beforeAll(async () => {
    > 17 |     await prisma.$connect();
         |     ^
      18 |
      19 |     // Create cycle metadata
      20 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle

    PrismaClientInitializationError: 
    Invalid `prisma.tournamentMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34

      80 
      81 afterEach(async () => {
      82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    → 83   await prisma.tournamentMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      81 |   afterEach(async () => {
      82 |     // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    > 83 |     await prisma.tournamentMatch.deleteMany({});
         |     ^
      84 |     await prisma.battleParticipant.deleteMany({});
      85 |     await prisma.battle.deleteMany({});
      86 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:83:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should not award streaming revenue for bye matches

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |
      16 |   beforeAll(async () => {
    > 17 |     await prisma.$connect();
         |     ^
      18 |
      19 |     // Create cycle metadata
      20 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)

FAIL tests/robotNameUniqueness.test.ts
  ● Console

    console.log
      [Robot] | User 425 | Created: "TestBot_Unique" | Cost: ₡500,000 | Balance: ₡10,000,000 → ₡9,500,000

      at src/routes/robots.ts:244:15

    console.log
      [Robot] | User 425 | Created: "TestBot_Unique" | Cost: ₡500,000 | Balance: ₡9,500,000 → ₡9,000,000

      at src/routes/robots.ts:244:15

    console.log
      [Robot] | User 425 | Created: "TestBot_Unique" | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/robots.ts:244:15

    console.log
      [Robot] | User 431 | Created: "TestBot_Unique" | Cost: ₡500,000 | Balance: ₡10,000,000 → ₡9,500,000

      at src/routes/robots.ts:244:15

    console.error
      Robot creation error: PrismaClientKnownRequestError: 
      Invalid `tx.user.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/robots.ts:177:41
      
        174 // Create robot in a transaction
        175 const result = await prisma.$transaction(async (tx) => {
        176   // Deduct currency
      → 177   const updatedUser = await tx.user.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/robots.ts:177:27
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/robots.ts:175:20 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'User', cause: 'Record to update not found.' }
      }

      254 |     });
      255 |   } catch (error) {
    > 256 |     console.error('Robot creation error:', error);
          |             ^
      257 |     
      258 |     // Handle unique constraint violation (as a fallback safety check)
      259 |     if (error && typeof error === 'object' && 'code' in error && error.code === 'P2002') {

      at src/routes/robots.ts:256:13

    console.error
      First creation error: { error: 'Internal server error' }

      249 |
      250 |       if (response1.status !== 201) {
    > 251 |         console.error('First creation error:', response1.body);
          |                 ^
      252 |       }
      253 |       expect(response1.status).toBe(201);
      254 |       if (response1.body.robot?.id) {

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:251:17)

    console.error
      Response error: { error: 'User not found' }

      320 |
      321 |       if (response.status !== 201) {
    > 322 |         console.error('Response error:', response.body);
          |                 ^
      323 |       }
      324 |
      325 |       expect(response.status).toBe(201);

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:322:17)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should handle case-sensitive name validation correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      251 |         console.error('First creation error:', response1.body);
      252 |       }
    > 253 |       expect(response1.status).toBe(201);
          |                                ^
      254 |       if (response1.body.robot?.id) {
      255 |         testRobotIds.push(response1.body.robot.id);
      256 |       }

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:253:32)

  ● Robot Name Uniqueness › POST /api/robots - Name validation › should accept robot names at the 50 character boundary

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 404

      323 |       }
      324 |
    > 325 |       expect(response.status).toBe(201);
          |                               ^
      326 |       expect(response.body.robot.name).toBe(maxLengthName);
      327 |
      328 |       // Cleanup

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:325:31)

FAIL tests/incomeGeneratorNoStreaming.property.test.ts
  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.1: No Income Generator means no passive income

    Property failed after 16 tests
    { seed: 1646601153, path: "15:0", endOnFailure: true }
    Counterexample: [0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:155:29

      152 });
      153 
      154 // Update user prestige
    → 155 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      153 |
      154 |           // Update user prestige
    > 155 |           await prisma.user.update({
          |           ^
      156 |             where: { id: testUserId },
      157 |             data: { prestige },
      158 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/incomeGeneratorNoStreaming.property.test.ts:155:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:134:5)

  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.2: Passive income is independent of robot stats

    Property failed after 1 tests
    { seed: -2089214549, path: "0:0:0", endOnFailure: true }
    Counterexample: [1,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:199:29

      196 });
      197 
      198 // Update user prestige
    → 199 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      197 |
      198 |           // Update user prestige
    > 199 |           await prisma.user.update({
          |           ^
      200 |             where: { id: testUserId },
      201 |             data: { prestige },
      202 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/incomeGeneratorNoStreaming.property.test.ts:199:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:185:5)

  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.3: Merchandising scales with prestige only

    Property failed after 1 tests
    { seed: 1544752924, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [1,0,1]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.facility.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:252:33

      249 });
      250 
      251 // Create Income Generator facility
    → 252 await prisma.facility.create(
    Foreign key constraint violated: `facilities_user_id_fkey (index)`

      250 |
      251 |           // Create Income Generator facility
    > 252 |           await prisma.facility.create({
          |           ^
      253 |             data: {
      254 |               userId: testUserId,
      255 |               facilityType: 'merchandising_hub',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/incomeGeneratorNoStreaming.property.test.ts:252:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:235:5)

  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.4: All Income Generator levels provide only merchandising

    Property failed after 1 tests
    { seed: -1951852217, path: "0:0", endOnFailure: true }
    Counterexample: [0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:301:29

      298 fc.integer({ min: 0, max: 50000 }), // User prestige
      299 async (prestige) => {
      300   // Update user prestige
    → 301   await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      299 |         async (prestige) => {
      300 |           // Update user prestige
    > 301 |           await prisma.user.update({
          |           ^
      302 |             where: { id: testUserId },
      303 |             data: { prestige },
      304 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/incomeGeneratorNoStreaming.property.test.ts:301:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:296:5)

FAIL tests/leagues.test.ts
  ● Leagues Routes › GET /api/leagues/:tier/standings › should get bronze league standings

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should get silver league standings

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should return 400 for invalid tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should support pagination

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/instances › should get bronze league instances

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/instances › should return 400 for invalid tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

FAIL tests/stanceAndYieldAPI.test.ts
  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should update yield threshold to 25

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      206 |         .send({ yieldThreshold: 25 });
      207 |
    > 208 |       expect(response.status).toBe(200);
          |                               ^
      209 |       expect(response.body.yieldThreshold).toBe(25);
      210 |       expect(response.body.message).toContain('25');
      211 |     });

      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:208:31)

FAIL tests/weaponInventory.test.ts
  ● Console

    console.error
      Weapon inventory list error: PrismaClientInitializationError: 
      Invalid `prisma.weaponInventory.findMany()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/weaponInventory.ts:24:52
      
        21 try {
        22   const userId = req.user!.userId;
        23 
      → 24   const inventory = await prisma.weaponInventory.findMany(
      Too many database connections opened: FATAL: sorry, too many clients already
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/weaponInventory.ts:24:23 {
        clientVersion: '5.22.0',
        errorCode: undefined
      }

      44 |     res.json(inventory);
      45 |   } catch (error) {
    > 46 |     console.error('Weapon inventory list error:', error);
         |             ^
      47 |     res.status(500).json({ error: 'Internal server error' });
      48 |   }
      49 | });

      at src/routes/weaponInventory.ts:46:13

    console.error
      Weapon purchase error: PrismaClientInitializationError: 
      Invalid `prisma.weapon.findUnique()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/weaponInventory.ts:64:40
      
        61 const weaponIdNum = parseInt(weaponId);
        62 
        63 // Get weapon details
      → 64 const weapon = await prisma.weapon.findUnique(
      Too many database connections opened: FATAL: sorry, too many clients already
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/weaponInventory.ts:64:20 {
        clientVersion: '5.22.0',
        errorCode: undefined
      }

      174 |     });
      175 |   } catch (error) {
    > 176 |     console.error('Weapon purchase error:', error);
          |             ^
      177 |     res.status(500).json({ error: 'Internal server error' });
      178 |   }
      179 | });

      at src/routes/weaponInventory.ts:176:13

    console.error
      Storage status error: PrismaClientInitializationError: 
      Invalid `prisma.facility.findUnique()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/weaponInventory.ts:234:51
      
        231 const userId = req.user!.userId;
        232 
        233 // Get Storage Facility level
      → 234 const storageFacility = await prisma.facility.findUnique(
      Too many database connections opened: FATAL: sorry, too many clients already
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/weaponInventory.ts:234:29 {
        clientVersion: '5.22.0',
        errorCode: undefined
      }

      252 |     res.json(storageStatus);
      253 |   } catch (error) {
    > 254 |     console.error('Storage status error:', error);
          |             ^
      255 |     res.status(500).json({ error: 'Internal server error' });
      256 |   }
      257 | });

      at src/routes/weaponInventory.ts:254:13

  ● Weapon Inventory Routes › GET /api/weapon-inventory › should get user weapon inventory with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      59 |         .set('Authorization', `Bearer ${authToken}`);
      60 |
    > 61 |       expect(response.status).toBe(200);
         |                               ^
      62 |       expect(Array.isArray(response.body)).toBe(true);
      63 |       
      64 |       // Verify inventory item structure if any items exist

      at Object.<anonymous> (tests/weaponInventory.test.ts:61:31)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 404 with non-existent weapon ID

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      108 |         .send({ weaponId: 99999 });
      109 |
    > 110 |       expect(response.status).toBe(404);
          |                               ^
      111 |     });
      112 |
      113 |     it('should return 401 without authentication', async () => {

      at Object.<anonymous> (tests/weaponInventory.test.ts:110:31)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/storage-status › should get storage status with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      126 |         .set('Authorization', `Bearer ${authToken}`);
      127 |
    > 128 |       expect(response.status).toBe(200);
          |                               ^
      129 |       expect(response.body).toHaveProperty('currentWeapons');
      130 |       expect(response.body).toHaveProperty('maxCapacity');
      131 |       expect(response.body).toHaveProperty('isFull');

      at Object.<anonymous> (tests/weaponInventory.test.ts:128:31)

PASS tests/facilityAdvisorStreamingStudio.test.ts
FAIL tests/leaderboards.test.ts
  ● Leaderboards Routes › GET /api/leaderboards/fame › should get fame leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by league

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by minimum battles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/losses › should get losses leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/losses › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/prestige › should get prestige leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/prestige › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

PASS tests/repairCostMultiRobot.property.test.ts
/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162
    const error = new ErrorWithCause(errorMessage, { cause: out.errorInstance });
                  ^

Error: Property failed after 1 tests
{ seed: 971209618, path: "0", endOnFailure: true }
Counterexample: [1,1]
Shrunk 0 time(s)

Hint: Enable verbose mode in order to have the list of all failing values encountered during the run
    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11) {
  [cause]: PrismaClientKnownRequestError: 
  Invalid `prisma.user.create()` invocation in
  /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts:824:44
  
    821 fc.integer({ min: 1, max: 5 }), // number of destroyed robots
    822 async (numHealthy, numDestroyed) => {
    823   // Create test user for this iteration
  → 824   const user = await prisma.user.create(
  Too many database connections opened: FATAL: sorry, too many clients already
  Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate
      at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
      at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts:824:26
      at AsyncProperty.run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21) {
    code: 'P2037',
    clientVersion: '5.22.0',
    meta: {
      modelName: 'User',
      message: 'FATAL: sorry, too many clients already'
    }
  }
}

Node.js v24.13.0
FAIL tests/facility.test.ts
  ● Facility Routes › GET /api/facility › should get user facilities with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › GET /api/facility › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › GET /api/facility › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 400 without facility type

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 400 with invalid facility type

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should handle upgrade attempt when at max level

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

PASS tests/validation.property.test.ts
PASS tests/streamingStudioOperatingCost.property.test.ts
PASS tests/weapons.test.ts
PASS tests/combatMessageGenerator.test.ts
PASS tests/weaponValidation.test.ts
PASS tests/cycleSnapshotService.test.ts
  ● Console

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 9999

      at CycleSnapshotService.createSnapshot (src/services/cycleSnapshotService.ts:73:13)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 9999

      at CycleSnapshotService.aggregateStableMetrics (src/services/cycleSnapshotService.ts:159:15)

    console.log
      [CycleSnapshotService] Found 0 cycle_end_balance events for cycle 9999

      at CycleSnapshotService.aggregateStableMetrics (src/services/cycleSnapshotService.ts:345:15)

    console.log
      [CycleSnapshotService] Snapshot created for cycle 9999

      at CycleSnapshotService.createSnapshot (src/services/cycleSnapshotService.ts:130:13)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 10000

      at CycleSnapshotService.createSnapshot (src/services/cycleSnapshotService.ts:73:13)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 10001

      at CycleSnapshotService.createSnapshot (src/services/cycleSnapshotService.ts:73:13)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 10002

      at CycleSnapshotService.createSnapshot (src/services/cycleSnapshotService.ts:73:13)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 10002

      at CycleSnapshotService.aggregateStableMetrics (src/services/cycleSnapshotService.ts:159:15)

    console.log
      [CycleSnapshotService] Found 0 cycle_end_balance events for cycle 10002

      at CycleSnapshotService.aggregateStableMetrics (src/services/cycleSnapshotService.ts:345:15)

    console.log
      [CycleSnapshotService] Snapshot created for cycle 10002

      at CycleSnapshotService.createSnapshot (src/services/cycleSnapshotService.ts:130:13)

PASS tests/damageDampeners.test.ts
PASS tests/repairCostMultiRobot.test.ts
FAIL tests/economyCalculations.test.ts
  ● Economy Calculations › Facility Operating Costs › should calculate Training Facility operating costs correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 1500
    Received: 250

      29 |
      30 |     it('should calculate Training Facility operating costs correctly', () => {
    > 31 |       expect(calculateFacilityOperatingCost('training_facility', 1)).toBe(1500);
         |                                                                      ^
      32 |       expect(calculateFacilityOperatingCost('training_facility', 5)).toBe(4500); // 1500 + (4 * 750)
      33 |     });
      34 |

      at Object.<anonymous> (tests/economyCalculations.test.ts:31:70)

PASS tests/storageCalculations.test.ts
FAIL tests/integration/tagTeamByeHandling.test.ts
  ● Test suite failed to run

    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m245[0m:[93m27[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?

    [7m245[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);
    [7m   [0m [91m                          ~~~~~~~~~~[0m

      [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m24[0m:[93m7[0m
        [7m24[0m   let testRobotIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~~[0m
        'testRobotIds' is declared here.
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m245[0m:[93m43[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m245[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);
    [7m   [0m [91m                                          ~[0m
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m257[0m:[93m26[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testUsers'. Did you mean 'testUserIds'?

    [7m257[0m     const originalUser = testUsers.find(u => u.id === user!.id);
    [7m   [0m [91m                         ~~~~~~~~~[0m

      [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m23[0m:[93m7[0m
        [7m23[0m   let testUserIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~[0m
        'testUserIds' is declared here.
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m257[0m:[93m41[0m - [91merror[0m[90m TS7006: [0mParameter 'u' implicitly has an 'any' type.

    [7m257[0m     const originalUser = testUsers.find(u => u.id === user!.id);
    [7m   [0m [91m                                        ~[0m

FAIL tests/integration/repairCostConsistency.test.ts
  ● Test suite failed to run

    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m40[0m:[93m18[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'robot' does not exist in type 'WeaponInventoryWhereInput'.

    [7m40[0m         where: { robot: { id: { in: testRobotIds } } },
    [7m  [0m [91m                 ~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m148[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m148[0m           loadoutType: 'single',
    [7m   [0m [91m                       ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'mainWeaponId'.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m25[0m - [91merror[0m[90m TS2304: [0mCannot find name 'weaponInv'.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m                        ~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'currentLeague'.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m                         ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'leagueId'.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m          ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m21[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m                    ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'leaguePoints'.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m25[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'cyclesInCurrentLeague'.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m34[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m                                 ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'combatPower'.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'targetingSystems'.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'criticalSystems'.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'penetration'.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'weaponControl'.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'attackSpeed'.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'armorPlating'.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m25[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m                        ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'shieldCapacity'.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'evasionThrusters'.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'damageDampeners'.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'counterProtocols'.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'hullIntegrity'.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'servoMotors'.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'gyroStabilizers'.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'hydraulicSystems'.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'powerCore'.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m          ~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m22[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m                     ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'combatAlgorithms'.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'threatAnalysis'.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'adaptiveAI'.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m          ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m23[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m                      ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'logicCores'.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m          ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m23[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m                      ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'syncProtocols'.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'supportSystems'.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'formationTactics'.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m180[0m:[93m7[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m180[0m       testRobots.push(robot);
    [7m   [0m [91m      ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m180[0m:[93m23[0m - [91merror[0m[90m TS2448: [0mBlock-scoped variable 'robot' used before its declaration.

    [7m180[0m       testRobots.push(robot);
    [7m   [0m [91m                      ~~~~~[0m

      [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m11[0m
        [7m212[0m     const robot = testRobots[0];
        [7m   [0m [96m          ~~~~~[0m
        'robot' is declared here.
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m181[0m:[93m7[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobotIds'.

    [7m181[0m       testRobotIds.push(robot.id);
    [7m   [0m [91m      ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m181[0m:[93m25[0m - [91merror[0m[90m TS2448: [0mBlock-scoped variable 'robot' used before its declaration.

    [7m181[0m       testRobotIds.push(robot.id);
    [7m   [0m [91m                        ~~~~~[0m

      [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m11[0m
        [7m212[0m     const robot = testRobots[0];
        [7m   [0m [96m          ~~~~~[0m
        'robot' is declared here.
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m187[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m187[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m194[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m194[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m202[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m202[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m212[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m254[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m254[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m261[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m261[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m269[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m269[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m275[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m275[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m321[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m321[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m328[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m328[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m336[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m336[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m342[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m342[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m384[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m384[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m389[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m389[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m441[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m441[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m480[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m480[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m496[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m496[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m529[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m529[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m535[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m535[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m542[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m542[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m549[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m549[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m608[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m608[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m614[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m614[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m621[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m621[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m628[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m628[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m685[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m685[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m691[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m691[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m698[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m698[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m706[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m706[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m772[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m772[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m778[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m778[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m785[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m785[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m792[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m792[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m836[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m836[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m842[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m842[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m19[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m                  ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m32[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m                               ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m20[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m                   ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m21[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m                    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m21[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m                    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m178[0m:[93m9[0m - [91merror[0m[90m TS1109: [0mExpression expected.

    [7m178[0m         },
    [7m   [0m [91m        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m179[0m:[93m7[0m - [91merror[0m[90m TS1135: [0mArgument expression expected.

    [7m179[0m       });
    [7m   [0m [91m      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m182[0m:[93m5[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m182[0m     }
    [7m   [0m [91m    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m248[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m248[0m   });
    [7m   [0m [91m  ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m248[0m:[93m4[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m248[0m   });
    [7m   [0m [91m   ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m894[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m894[0m });
    [7m   [0m [91m~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m894[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m894[0m });
    [7m   [0m [91m ~[0m

FAIL tests/userGeneration.test.ts
  ● Test suite failed to run

    [96mtests/userGeneration.test.ts[0m:[93m148[0m:[93m56[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m148[0m       const result = await generateBattleReadyUsers(5, cycleNumber);
    [7m   [0m [91m                                                       ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m166[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m166[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m181[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m181[0m       await generateBattleReadyUsers(1, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m208[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m208[0m       await generateBattleReadyUsers(2, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m229[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m229[0m       await generateBattleReadyUsers(1, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m247[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m247[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m263[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m263[0m       await generateBattleReadyUsers(5, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m301[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m301[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m327[0m:[93m56[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m327[0m       const result = await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                                       ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m351[0m:[93m5[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m351[0m     });
    [7m   [0m [91m    ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m421[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m421[0m   });
    [7m   [0m [91m  ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m421[0m:[93m4[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m421[0m   });
    [7m   [0m [91m   ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m422[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m422[0m });
    [7m   [0m [91m~[0m
    [96mtests/userGeneration.test.ts[0m:[93m422[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m422[0m });
    [7m   [0m [91m ~[0m

FAIL tests/integration/tagTeamCompleteCycle.test.ts
  ● Test suite failed to run

    [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m300[0m:[93m25[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?

    [7m300[0m         robot1Id: { in: testRobots.map(r => r.id) },
    [7m   [0m [91m                        ~~~~~~~~~~[0m

      [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m25[0m:[93m7[0m
        [7m25[0m   let testRobotIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~~[0m
        'testRobotIds' is declared here.
    [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m300[0m:[93m40[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m300[0m         robot1Id: { in: testRobots.map(r => r.id) },
    [7m   [0m [91m                                       ~[0m

PASS tests/tagTeamBattleOrchestrator.property.test.ts
FAIL tests/stanceAndYield.test.ts
  ● Test suite failed to run

    [96mtests/stanceAndYield.test.ts[0m:[93m13[0m:[93m65[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'totalTagTeamBattles' are incompatible.
        Type 'number | undefined' is not assignable to type 'number'.
          Type 'undefined' is not assignable to type 'number'.

    [7m 13[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({
    [7m   [0m [91m                                                                ~[0m
    [7m 14[0m   id: 1,
    [7m   [0m [91m~~~~~~~~[0m
    [7m...[0m 
    [7m 71[0m   ...overrides,
    [7m   [0m [91m~~~~~~~~~~~~~~~[0m
    [7m 72[0m });
    [7m   [0m [91m~[0m

FAIL tests/tagTeamModelIntegration.test.ts
  ● Test suite failed to run

    [96mtests/tagTeamModelIntegration.test.ts[0m:[93m307[0m:[93m14[0m - [91merror[0m[90m TS18047: [0m'match.team2' is possibly 'null'.

    [7m307[0m       expect(match?.team2.activeRobot.id).toBe(testRobot3Id);
    [7m   [0m [91m             ~~~~~~~~~~~~[0m
    [96mtests/tagTeamModelIntegration.test.ts[0m:[93m308[0m:[93m14[0m - [91merror[0m[90m TS18047: [0m'match.team2' is possibly 'null'.

    [7m308[0m       expect(match?.team2.reserveRobot.id).toBe(testRobot4Id);
    [7m   [0m [91m             ~~~~~~~~~~~~[0m

FAIL tests/robotStatsView.test.ts
  ● Test suite failed to run

    [96mtests/robotStatsView.test.ts[0m:[93m79[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m79[0m           userId: testUserId,
    [7m  [0m [91m          ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/robotStatsView.test.ts[0m:[93m113[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m113[0m         userId: testUserId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/robotCalculations.test.ts
  ● Test suite failed to run

    [96mtests/robotCalculations.test.ts[0m:[93m12[0m:[93m65[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'totalTagTeamBattles' are incompatible.
        Type 'number | undefined' is not assignable to type 'number'.
          Type 'undefined' is not assignable to type 'number'.

    [7m 12[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({
    [7m   [0m [91m                                                                ~[0m
    [7m 13[0m   id: 1,
    [7m   [0m [91m~~~~~~~~[0m
    [7m...[0m 
    [7m 70[0m   ...overrides,
    [7m   [0m [91m~~~~~~~~~~~~~~~[0m
    [7m 71[0m });
    [7m   [0m [91m~[0m

FAIL tests/trendAnalysis.property.test.ts
  ● Test suite failed to run

    [96mtests/trendAnalysis.property.test.ts[0m:[93m12[0m:[93m38[0m - [91merror[0m[90m TS2307: [0mCannot find module '../src/services/trendAnalysisService' or its corresponding type declarations.

    [7m12[0m import { trendAnalysisService } from '../src/services/trendAnalysisService';
    [7m  [0m [91m                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                          ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m85[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m88[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                       ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m203[0m:[93m53[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m203[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);
    [7m   [0m [91m                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m260[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m260[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                          ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m85[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m88[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                       ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m329[0m:[93m53[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m329[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);
    [7m   [0m [91m                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m419[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m419[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber);
    [7m   [0m [91m                                                          ~[0m

FAIL tests/tagTeamBattleLogCompleteness.property.test.ts
  ● Test suite failed to run

    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m65[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m65[0m           { userId: testUserId1 },
    [7m  [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m66[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m66[0m           { userId: testUserId2 },
    [7m  [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m125[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m125[0m           { userId: testUserId1 },
    [7m   [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m125[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m125[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m126[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m126[0m           { userId: testUserId2 },
    [7m   [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m126[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m126[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m133[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m133[0m           { team1: { stableId: testUserId1 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m134[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m134[0m           { team1: { stableId: testUserId2 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m135[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m135[0m           { team2: { stableId: testUserId1 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m136[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m136[0m           { team2: { stableId: testUserId2 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m143[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m143[0m           { stableId: testUserId1 },
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m144[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m144[0m           { stableId: testUserId2 },
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m151[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m151[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m152[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m152[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m159[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m159[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m160[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m160[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m186[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m186[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m186[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m186[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m189[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m189[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m189[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m189[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m192[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m192[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m192[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m192[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m195[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m195[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m195[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m195[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m201[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m201[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m216[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m216[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m232[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m232[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m247[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m247[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m261[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m261[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m262[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m262[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m337[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m337[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m337[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m337[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m340[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m340[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m340[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m340[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m343[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m343[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m343[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m343[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m346[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m346[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m346[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m346[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m352[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m352[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m367[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m367[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m382[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m382[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m397[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m397[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m411[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m411[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m412[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m412[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m492[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m492[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m492[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m492[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m495[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m495[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m495[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m495[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m498[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m498[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m498[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m498[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m501[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m501[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m501[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m501[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m507[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m507[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m522[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m522[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m537[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m537[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m552[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m552[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m566[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m566[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m567[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m567[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m648[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m648[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m648[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m648[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m651[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m651[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m651[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m651[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m654[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m654[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m654[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m654[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m657[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m657[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m657[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m657[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m663[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m663[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m678[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m678[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m693[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m693[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m708[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m708[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m722[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m722[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m723[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m723[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m803[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m803[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m803[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m803[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m806[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m806[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m806[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m806[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m809[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m809[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m809[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m809[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m812[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m812[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m812[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m812[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m818[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m818[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m833[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m833[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m848[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m848[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m863[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m863[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m877[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m877[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m878[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m878[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m944[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m944[0m });
    [7m   [0m [91m~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m944[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m944[0m });
    [7m   [0m [91m ~[0m

FAIL tests/profileUpdate.property.test.ts
  ● Test suite failed to run

    [96mtests/profileUpdate.property.test.ts[0m:[93m491[0m:[93m43[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.
      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.

    [7m491[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);
    [7m   [0m [91m                                          ~~~~~~~~[0m
    [96mtests/profileUpdate.property.test.ts[0m:[93m518[0m:[93m43[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.
      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.

    [7m518[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);
    [7m   [0m [91m                                          ~~~~~~~~[0m

FAIL tests/profileApiResponse.property.test.ts
  ● Test suite failed to run

    [96mtests/profileApiResponse.property.test.ts[0m:[93m66[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'totalBattles' does not exist in type '(Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput)'.

    [7m66[0m                 totalBattles: userProfile.totalBattles,
    [7m  [0m [91m                ~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m3397[0m:[93m5[0m
        [7m3397[0m     data: XOR<UserCreateInput, UserUncheckedCreateInput>
        [7m    [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: UserSelect<DefaultArgs> | null | undefined; include?: UserInclude<DefaultArgs> | null | undefined; data: (Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput); }'

FAIL tests/migrateBattlesToEvents.test.ts
  ● Test suite failed to run

    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m8[0m:[93m57[0m - [91merror[0m[90m TS2307: [0mCannot find module '../src/scripts/migrateBattlesToEvents' or its corresponding type declarations.

    [7m8[0m import { migrateBattlesToEvents, verifyMigration } from '../src/scripts/migrateBattlesToEvents';
    [7m [0m [91m                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m111[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.

    [7m111[0m       robot1DamageDealt: battle.robot1DamageDealt,
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m
    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m112[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.

    [7m112[0m       robot2DamageDealt: battle.robot2DamageDealt,
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m

FAIL tests/multiMatchScheduling.property.test.ts
  ● Test suite failed to run

    [96mtests/multiMatchScheduling.property.test.ts[0m:[93m226[0m:[93m26[0m - [91merror[0m[90m TS2322: [0mType 'number | null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.
      Type 'null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.

    [7m226[0m                 where: { id: match.team2Id },
    [7m   [0m [91m                         ~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m22658[0m:[93m5[0m
        [7m22658[0m     id?: number
        [7m     [0m [96m    ~~[0m
        The expected type comes from property 'id' which is declared here on type 'TagTeamWhereUniqueInput'

FAIL tests/metricProgression.property.test.ts
  ● Test suite failed to run

    [96mtests/metricProgression.property.test.ts[0m:[93m131[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1FameAwarded' does not exist on type '{ robot2Id: number; robot1Id: number; id: number; createdAt: Date; winnerId: number | null; battleType: string; leagueType: string; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m131[0m               const fameAwarded = battle.robot1FameAwarded;
    [7m   [0m [91m                                         ~~~~~~~~~~~~~~~~~[0m
    [96mtests/metricProgression.property.test.ts[0m:[93m343[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m343[0m                 userId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m590[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m590[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m644[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m644[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m698[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m698[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m752[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m752[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m806[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m806[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/facilityROI.property.test.ts
  ● Test suite failed to run

    [96mtests/facilityROI.property.test.ts[0m:[93m53[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m53[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m  [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m54[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m54[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m  [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m59[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m59[0m               userId: testUserId,
    [7m  [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m73[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m73[0m               testUserId,
    [7m  [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m89[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m89[0m               testUserId,
    [7m  [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m99[0m:[93m56[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m99[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [
    [7m  [0m [91m                                                       ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m113[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m113[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m150[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m150[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m151[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m151[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m156[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m156[0m               userId: testUserId,
    [7m   [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m170[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m170[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m197[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m197[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m198[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m198[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m208[0m:[93m52[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m208[0m             await eventLogger.logOperatingCosts(i, testUserId, [
    [7m   [0m [91m                                                   ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m222[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m222[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m256[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m256[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m257[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m257[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m262[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m262[0m               userId: testUserId,
    [7m   [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m276[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m276[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m303[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m303[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m304[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m304[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m316[0m:[93m52[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m316[0m             await eventLogger.logOperatingCosts(i, testUserId, [
    [7m   [0m [91m                                                   ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m330[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m330[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m366[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m366[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m367[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m367[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m372[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m372[0m               { userId: testUserId, facilityType: 'income_generator', level: 1 },
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m373[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m373[0m               { userId: testUserId, facilityType: 'repair_bay', level: 1 },
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m380[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m380[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m389[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m389[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m407[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m407[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m428[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m428[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m429[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m429[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m439[0m:[93m56[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m439[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [
    [7m   [0m [91m                                                       ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m455[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m455[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m459[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m459[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m

FAIL tests/integration.test.ts
  ● Test suite failed to run

    [96mtests/integration.test.ts[0m:[93m159[0m:[93m22[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'InputJsonValue | FieldRef<"Battle", "Json"> | JsonNullValueFilter | undefined'.

    [7m159[0m         battleLog: { not: null },
    [7m   [0m [91m                     ~~~[0m
    [96mtests/integration.test.ts[0m:[93m268[0m:[93m13[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'number | IntFilter<"Battle"> | undefined'.

    [7m268[0m           { robot1Id: null },
    [7m   [0m [91m            ~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m21904[0m:[93m5[0m
        [7m21904[0m     robot1Id?: IntFilter<"Battle"> | number
        [7m     [0m [96m    ~~~~~~~~[0m
        The expected type comes from property 'robot1Id' which is declared here on type 'BattleWhereInput'
    [96mtests/integration.test.ts[0m:[93m269[0m:[93m13[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'number | IntFilter<"Battle"> | undefined'.

    [7m269[0m           { robot2Id: null },
    [7m   [0m [91m            ~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m21905[0m:[93m5[0m
        [7m21905[0m     robot2Id?: IntFilter<"Battle"> | number
        [7m     [0m [96m    ~~~~~~~~[0m
        The expected type comes from property 'robot2Id' which is declared here on type 'BattleWhereInput'

FAIL tests/matchListInclusion.property.test.ts
  ● Test suite failed to run

    [96mtests/matchListInclusion.property.test.ts[0m:[93m298[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m298[0m                 userId: testUserId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/matchListInclusion.property.test.ts[0m:[93m333[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m333[0m                 userId: testUserId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/eventLogger.property.test.ts
  ● Test suite failed to run

    [96mtests/eventLogger.property.test.ts[0m:[93m92[0m:[93m15[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to parameter of type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }[]'.
      Type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }'.
        Types of property 'userId' are incompatible.
          Type 'number | null' is not assignable to type 'number | undefined'.
            Type 'null' is not assignable to type 'number | undefined'.

    [7m 92[0m               events.map(e => ({
    [7m   [0m [91m              ~~~~~~~~~~~~~~~~~~[0m
    [7m 93[0m                 eventType: e.eventType,
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 96[0m                 robotId: e.robotId,
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m 97[0m               }))
    [7m   [0m [91m~~~~~~~~~~~~~~~~~[0m

FAIL tests/eloProgression.property.test.ts
  ● Test suite failed to run

    [96mtests/eloProgression.property.test.ts[0m:[93m161[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m161[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m351[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m351[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m529[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m529[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m684[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m684[0m                 userId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/byeTeamBattles.property.test.ts
  ● Test suite failed to run

    [96mtests/byeTeamBattles.property.test.ts[0m:[93m16[0m:[93m3[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'imageUrl' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'string | null'.
          Type 'undefined' is not assignable to type 'string | null'.

    [7m16[0m   return {
    [7m  [0m [91m  ~~~~~~[0m

FAIL tests/battleLogStreamingRevenue.property.test.ts
  ● Test suite failed to run

    [96mtests/battleLogStreamingRevenue.property.test.ts[0m:[93m111[0m:[93m7[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m111[0m       userId,
    [7m   [0m [91m      ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/cycleSnapshot.property.test.ts
  ● Test suite failed to run

    [96mtests/cycleSnapshot.property.test.ts[0m:[93m282[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m282[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m359[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m359[0m               robot1Metric.damageDealt += createdBattle.robot1DamageDealt;
    [7m   [0m [91m                                                        ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m360[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m360[0m               robot1Metric.damageReceived += createdBattle.robot2DamageDealt;
    [7m   [0m [91m                                                           ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m362[0m:[93m56[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m362[0m               robot1Metric.fameChange += createdBattle.robot1FameAwarded;
    [7m   [0m [91m                                                       ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m381[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m381[0m               robot2Metric.damageDealt += createdBattle.robot2DamageDealt;
    [7m   [0m [91m                                                        ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m382[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m382[0m               robot2Metric.damageReceived += createdBattle.robot1DamageDealt;
    [7m   [0m [91m                                                           ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m384[0m:[93m56[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m384[0m               robot2Metric.fameChange += createdBattle.robot2FameAwarded;
    [7m   [0m [91m                                                       ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m528[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m528[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m592[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m592[0m               actualUserIds.add(battle.userId);
    [7m   [0m [91m                                       ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m594[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m594[0m               if (!expectedStableMetrics.has(battle.userId)) {
    [7m   [0m [91m                                                    ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m595[0m:[93m50[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m595[0m                 expectedStableMetrics.set(battle.userId, {
    [7m   [0m [91m                                                 ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m602[0m:[93m64[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m602[0m               const metrics = expectedStableMetrics.get(battle.userId)!;
    [7m   [0m [91m                                                               ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m605[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m605[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;
    [7m   [0m [91m                                                    ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m605[0m:[93m84[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m605[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;
    [7m   [0m [91m                                                                                   ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m606[0m:[93m51[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m606[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);
    [7m   [0m [91m                                                  ~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m606[0m:[93m84[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m606[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);
    [7m   [0m [91m                                                                                   ~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m659[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m659[0m                 user: { connect: { id: user.id } },
    [7m   [0m [91m                ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/analyticsApi.test.ts
  ● Test suite failed to run

    [96mtests/analyticsApi.test.ts[0m:[93m228[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m228[0m           stableMetrics: snapshot.stableMetrics,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24461[0m:[93m5[0m
        [7m24461[0m     stableMetrics: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~~[0m
        The expected type comes from property 'stableMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m229[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m229[0m           robotMetrics: snapshot.robotMetrics,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24462[0m:[93m5[0m
        [7m24462[0m     robotMetrics: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~[0m
        The expected type comes from property 'robotMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m230[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m230[0m           stepDurations: snapshot.stepDurations,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24463[0m:[93m5[0m
        [7m24463[0m     stepDurations: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~~[0m
        The expected type comes from property 'stepDurations' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m1220[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m1220[0m           userId: testUserId,
    [7m    [0m [91m          ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m1724[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m1724[0m             userId: testUserId,
    [7m    [0m [91m            ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m2068[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m2068[0m         userId: testUserId,
    [7m    [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m2211[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m2211[0m             userId: testUserId,
    [7m    [0m [91m            ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

PASS tests/streamingStudioUpgradeCosts.property.test.ts
FAIL tests/integration/adminCycleGeneration.test.ts (35.469 s)
  ● Console

    console.log
      [Admin] Running 3 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 51 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 51 (1/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 51 (1/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:28.942Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 10: Error: Robot 241 not found
          at calculateStreamingRevenue (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/streamingRevenueService.ts:90:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:657:25)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] TestRobot1_1771959088866_0.5210877917833879 earned ₡1,002 from Battle #26

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959088869_0.5358821709407416 earned ₡1,005 from Battle #26

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 11: Error: BattleParticipant records not found for battle 26
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:709:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 2 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 51: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 51 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 51 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 17 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle51.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 52 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 52 (2/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 52 (2/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.195Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959089058_0.773322311268482 earned ₡9,029 from Battle #30

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959089061_0.41628725767689945 earned ₡2,008 from Battle #30

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089058_0.773322311268482 (User 125) vs TestRobot2_1771959089061_0.41628725767689945 (User 126) | Winner: TestRobot1_1771959089058_0.773322311268482 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 181 (TestRobot1_1771959088232_0.7487734791650126) | Cost: ₡18,860 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 228 (TestRobot1_1771959088676_0.7112821420433235) | Cost: ₡17,250 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 265 (TestRobot1_1771959088969_0.8518456156518532) | Cost: ₡32,775 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 183 (TestRobot2_1771959088232_0.3299037659881705) | Cost: ₡32,430 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 229 (TestRobot2_1771959088676_0.24175371370159304) | Cost: ₡14,030 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 266 (TestRobot2_1771959088969_0.191367699711796) | Cost: ₡13,800 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 52: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 52 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 52 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 21 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle52.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 53 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 53 (3/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 53 (3/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.363Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959089263_0.32549178072377527 earned ₡2,004 from Battle #36

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959089263_0.3079294182513522 earned ₡10,591 from Battle #36

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089263_0.32549178072377527 (User 129) vs TestRobot2_1771959089263_0.3079294182513522 (User 130) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 18: Error: Robots not found for match 18
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] TestRobot1_1771959089297_0.20454685025492392 earned ₡7,046 from Battle #41

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959089301_0.21184111582576137 earned ₡10,502 from Battle #41

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 19: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'ScheduledMatch', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 125 | Robot 308 (TestRobot1_1771959089297_0.20454685025492392) | Cost: ₡46,000 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 126 | Robot 310 (TestRobot2_1771959089301_0.21184111582576137) | Cost: ₡5,750 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 322 (TestRobot1_1771959089392_0.6768496914125293) | Cost: ₡31,395 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 301 (TestRobot1_1771959089263_0.32549178072377527) | Cost: ₡5,750 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 302 (TestRobot2_1771959089263_0.3079294182513522) | Cost: ₡5,750 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 323 (TestRobot2_1771959089392_0.016375824940095263) | Cost: ₡32,430 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 53: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 53 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 53 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 25 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle53.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 5 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.652Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959089516_0.5572625339852322 earned ₡7,011 from Battle #50

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959089518_0.8443032063002232 earned ₡10,497 from Battle #50

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 23: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:686:34
      
        683   },
        684 });
        685 
      → 686 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:686:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] TestRobot1_1771959089590_0.8297606504751763 earned ₡2,004 from Battle #53

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959089590_0.8493592327408439 earned ₡3,006 from Battle #53

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089590_0.8297606504751763 (User 129) vs TestRobot2_1771959089590_0.8493592327408439 (User 130) | Winner: TestRobot2_1771959089590_0.8493592327408439 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959089617_0.39398885978028975 earned ₡3,208 from Battle #56

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959089619_0.683055552086805 earned ₡1,002 from Battle #56

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089617_0.39398885978028975 (User 127) vs TestRobot2_1771959089619_0.683055552086805 (User 128) | Winner: TestRobot1_1771959089617_0.39398885978028975 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 348 (TestRobot1_1771959089590_0.8297606504751763) | Cost: ₡14,490 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 350 (TestRobot2_1771959089590_0.8493592327408439) | Cost: ₡33,120 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 24 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:29.957Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959089744_0.7023655971240422 earned ₡7,029 from Battle #62

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959089747_0.7075038985291175 earned ₡10,500 from Battle #62

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 27: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.error
      [BattleOrchestrator] Failed to process match 28: Error: BattleParticipant not found for battle 65, robot 380
          at updateRobotStats (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:490:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:646:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] TestRobot1_1771959089923_0.8114137657496631 earned ₡3,194 from Battle #68

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959089925_0.6973215477338884 earned ₡1,002 from Battle #68

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959089923_0.8114137657496631 (User 127) vs TestRobot2_1771959089925_0.6973215477338884 (User 128) | Winner: TestRobot2_1771959089925_0.6973215477338884 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 2 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 435 (PBT_Unready1_1771959090216_0.6620059776704463) | Cost: ₡2,816 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 2: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 2 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 20 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 3 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 3 (3/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 3 (3/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.244Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959090029_0.8893467522572291 earned ₡7,032 from Battle #73

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959090032_0.3862669792177661 earned ₡10,485 from Battle #73

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 32: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] Robot1_1771959090101_0.6091168114535447 earned ₡8,372 from Battle #76

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959090101_0.20135777539124844 earned ₡12,694 from Battle #76

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Robot1_1771959090101_0.6091168114535447 (User 129) vs Robot2_1771959090101_0.20135777539124844 (User 130) | Winner: Robot2_1771959090101_0.20135777539124844 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 454 (PBT_RT1_68euvi) | Cost: ₡704 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 455 (PBT_RT2_7gwm5g) | Cost: ₡768 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 423 (Robot1_1771959090101_0.6091168114535447) | Cost: ₡5,980 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 424 (Robot2_1771959090101_0.20135777539124844) | Cost: ₡46,000 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 354 (TestRobot1_1771959089617_0.39398885978028975) | Cost: ₡13,110 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 396 (TestRobot1_1771959089923_0.8114137657496631) | Cost: ₡32,085 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 3: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 3 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 3 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 24 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle3.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 4 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 4 (4/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 4 (4/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.479Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 36: Error: BattleParticipant not found for battle 82, robot 444
          at updateRobotStats (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:490:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:646:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] Robot1_1771959090402_0.8752122533007536 earned ₡8,298 from Battle #84

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959090402_0.24542271800197102 earned ₡12,694 from Battle #84

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Robot1_1771959090402_0.8752122533007536 (User 129) vs Robot2_1771959090402_0.24542271800197102 (User 130) | Winner: Robot2_1771959090402_0.24542271800197102 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 475 (PBT_RT1_ac2339) | Cost: ₡800 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 4: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 4 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 4 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 17 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle4.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 5 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 5 (5/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 5 (5/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.640Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959090554_0.019787419695507236 earned ₡7,046 from Battle #88

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959090557_0.26122402809798806 earned ₡7,018 from Battle #88

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090554_0.019787419695507236 (User 125) vs TestRobot2_1771959090557_0.26122402809798806 (User 126) | Winner: TestRobot2_1771959090557_0.26122402809798806 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 41: Error: Robots not found for match 41
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] Robot1_1771959090601_0.16787726645158696 earned ₡7,270 from Battle #92

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959090601_0.7907403055962087 earned ₡12,694 from Battle #92

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Robot1_1771959090601_0.16787726645158696 (User 129) vs Robot2_1771959090601_0.7907403055962087 (User 130) | Winner: Robot2_1771959090601_0.7907403055962087 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 5 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 497 (PBT_RT1_8wvk7o) | Cost: ₡512 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 498 (PBT_RT2_ne3oi6) | Cost: ₡704 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 473 (Robot1_1771959090601_0.16787726645158696) | Cost: ₡5,520 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 452 (Robot1_1771959090402_0.8752122533007536) | Cost: ₡11,960 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 453 (Robot2_1771959090402_0.24542271800197102) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 474 (Robot2_1771959090601_0.7907403055962087) | Cost: ₡46,000 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 356 (TestRobot2_1771959089619_0.683055552086805) | Cost: ₡31,395 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 398 (TestRobot2_1771959089925_0.6973215477338884) | Cost: ₡9,660 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 125 | Robot 487 (TestRobot1_1771959090754_0.39380853420236794) | Cost: ₡12,880 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 126 | Robot 490 (TestRobot2_1771959090757_0.7901209940422265) | Cost: ₡14,950 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 5: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:474:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 5 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 5 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 33 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle5.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 3 bulk cycles (includeTournaments: false, generateUsersPerCycle: false)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:30.970Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 2 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot1_1771959090792_0.7997155394920633 earned ₡7,273 from Battle #99

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959090792_0.3654985486153701 earned ₡10,156 from Battle #99

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 46: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31
      
        800 // No need to update Battle table
        801 
        802 // Update scheduled match
      → 803 await prisma.scheduledMatch.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'ScheduledMatch', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] TestRobot1_1771959090905_0.47082493124639524 earned ₡3,180 from Battle #103

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959090908_0.6650664327071314 earned ₡1,004 from Battle #103

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090905_0.47082493124639524 (User 127) vs TestRobot2_1771959090908_0.6650664327071314 (User 128) | Winner: TestRobot2_1771959090908_0.6650664327071314 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 125 | Robot 507 (TestRobot1_1771959090969_0.5712404578312599) | Cost: ₡46,000 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 126 | Robot 508 (TestRobot2_1771959090972_0.6445072450207093) | Cost: ₡8,970 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 21 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:31.173Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 4 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959090985_0.7598114580667933 earned ₡3,174 from Battle #110

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959090987_0.7813164552192436 earned ₡1,002 from Battle #110

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959090985_0.7598114580667933 (User 127) vs TestRobot2_1771959090987_0.7813164552192436 (User 128) | Winner: TestRobot1_1771959090985_0.7598114580667933 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot1_1771959091000_0.38184527749761 earned ₡7,271 from Battle #114

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959091000_0.20678247159875507 earned ₡7,266 from Battle #114

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Robot1_1771959091000_0.38184527749761 (User 129) vs Robot2_1771959091000_0.20678247159875507 (User 130) | Winner: Robot1_1771959091000_0.38184527749761 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959091065_0.7613009408443856 earned ₡3,171 from Battle #117

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959091068_0.980894884327933 earned ₡1,003 from Battle #117

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091065_0.7613009408443856 (User 127) vs TestRobot2_1771959091068_0.980894884327933 (User 128) | Winner: TestRobot2_1771959091068_0.980894884327933 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959091144_0.32062283920961043 earned ₡3,169 from Battle #121

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959091147_0.989568742210992 earned ₡1,002 from Battle #121

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091144_0.32062283920961043 (User 127) vs TestRobot2_1771959091147_0.989568742210992 (User 128) | Winner: TestRobot1_1771959091144_0.32062283920961043 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 4 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 20 prestige, 9 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 493 (Robot1_1771959090792_0.7997155394920633) | Cost: ₡10,350 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 513 (Robot1_1771959091000_0.38184527749761) | Cost: ₡8,510 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 494 (Robot2_1771959090792_0.3654985486153701) | Cost: ₡11,040 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 514 (Robot2_1771959091000_0.20678247159875507) | Cost: ₡32,430 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 501 (TestRobot1_1771959090905_0.47082493124639524) | Cost: ₡17,250 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 511 (TestRobot1_1771959090985_0.7598114580667933) | Cost: ₡15,410 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 520 (TestRobot1_1771959091065_0.7613009408443856) | Cost: ₡17,940 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 528 (TestRobot1_1771959091144_0.32062283920961043) | Cost: ₡31,740 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 512 (TestRobot2_1771959090987_0.7813164552192436) | Cost: ₡33,465 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 503 (TestRobot2_1771959090908_0.6650664327071314) | Cost: ₡31,740 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 521 (TestRobot2_1771959091068_0.980894884327933) | Cost: ₡31,395 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 529 (TestRobot2_1771959091147_0.989568742210992) | Cost: ₡18,170 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 2: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:444:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 2 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 36 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 3 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 3 (3/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 3 (3/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:31.632Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 3 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot1_1771959091351_0.5573979910051633 earned ₡2,423 from Battle #129

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959091351_0.856914575145122 earned ₡2,423 from Battle #129

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 56: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] TestRobot1_1771959091610_0.6088105572888529 earned ₡7,036 from Battle #130

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959091613_0.20632867617319472 earned ₡10,274 from Battle #130

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091610_0.6088105572888529 (User 125) vs TestRobot2_1771959091613_0.20632867617319472 (User 126) | Winner: TestRobot2_1771959091613_0.20632867617319472 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771959091622_0.4183570913718119 earned ₡3,164 from Battle #135

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771959091626_0.015714981147556206 earned ₡1,002 from Battle #135

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | TestRobot1_1771959091622_0.4183570913718119 (User 127) vs TestRobot2_1771959091626_0.015714981147556206 (User 128) | Winner: TestRobot1_1771959091622_0.4183570913718119 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 2 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 10 prestige, 6 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 594 (TestRobot1_1771959091703_0.8188817526287987) | Cost: ₡32,085 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 578 (TestRobot1_1771959091622_0.4183570913718119) | Cost: ₡12,190 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 595 (TestRobot2_1771959091705_0.561953761216558) | Cost: ₡15,180 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 580 (TestRobot2_1771959091626_0.015714981147556206) | Cost: ₡31,395 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 610 (TestRobot1_1771959091885_0.5686543881656505) | Cost: ₡11,040 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 127 | Robot 594 (TestRobot1_1771959091703_0.8188817526287987) | Cost: ₡15,180 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 612 (TestRobot2_1771959091888_0.36081416657628784) | Cost: ₡31,740 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 128 | Robot 595 (TestRobot2_1771959091705_0.561953761216558) | Cost: ₡17,480 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 171

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 172 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Instance exceeds 100 robots, rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [LeagueInstance] Rebalancing bronze instances...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total robots: 172

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Instances: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Average per instance: 172.0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Target instances: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Rebalancing] Error checking bronze instances: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueInstanceService.ts:163:22
      
        160 
        161 if (robot.leagueId !== targetLeagueId) {
        162   updates.push(
      → 163     prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at async Promise.all (index 62)
          at rebalanceInstances (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueInstanceService.ts:171:3)
          at rebalanceLeagues (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:378:9)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:584:36 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at rebalanceLeagues (src/services/leagueRebalancingService.ts:383:15)
      at src/routes/admin.ts:584:36

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 1 total teams across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:33.236Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 68 robots available (97 total, 68 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Created 34 scheduled matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_2: 58 robots available (83 total, 58 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Created 29 scheduled matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 63 matches across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 63 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] bronze_1: 1 eligible teams (1 total, 1 ready, 0 already scheduled)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Bye-match created for team 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Scheduled 1 tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] bronze_1: Created 1 matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 1 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 1 | Total: ₡2,500 | Facilities: training_facility(L10): ₡2500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 3 | Total: ₡1,550 | Facilities: combat_training_academy(L1): ₡800, training_facility(L3): ₡750

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 108 | Total: ₡1,600 | Facilities: combat_training_academy(L1): ₡800, defense_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 109 | Total: ₡800 | Facilities: combat_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 110 | Total: ₡800 | Facilities: combat_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 111 | Total: ₡800 | Facilities: combat_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 112 | Total: ₡1,600 | Facilities: combat_training_academy(L1): ₡800, mobility_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 113 | Total: ₡1,600 | Facilities: combat_training_academy(L1): ₡800, mobility_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 114 | Total: ₡1,600 | Facilities: combat_training_academy(L1): ₡800, mobility_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 116 | Total: ₡1,450 | Facilities: merchandising_hub(L1): ₡200, repair_bay(L1): ₡1000, training_facility(L1): ₡250

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 117 | Total: ₡500 | Facilities: roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 118 | Total: ₡800 | Facilities: combat_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 119 | Total: ₡800 | Facilities: combat_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 120 | Total: ₡1,000 | Facilities: ai_training_academy(L1): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 121 | Total: ₡2,400 | Facilities: combat_training_academy(L1): ₡800, defense_training_academy(L1): ₡800, mobility_training_academy(L1): ₡800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 2 | Total: ₡1,450 | Facilities: defense_training_academy(L2): ₡1200, training_facility(L1): ₡250

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 124 | Total: ₡1,000 | Facilities: roster_expansion(L0): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 131 | Total: ₡500 | Facilities: roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 122 | Total: ₡5,500 | Facilities: roster_expansion(L0): ₡5500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 139 | Total: ₡1,000 | Facilities: roster_expansion(L0): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 142 | Total: ₡500 | Facilities: roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 126 | Total: ₡1,100 | Facilities: streaming_studio(L6): ₡600, roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 130 | Total: ₡1,100 | Facilities: streaming_studio(L1): ₡100, roster_expansion(L0): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 141 | Total: ₡1,000 | Facilities: roster_expansion(L0): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 125 | Total: ₡500 | Facilities: roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 145 | Total: ₡1,000 | Facilities: roster_expansion(L0): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 147 | Total: ₡500 | Facilities: roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 149 | Total: ₡1,000 | Facilities: roster_expansion(L0): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 129 | Total: ₡1,100 | Facilities: streaming_studio(L1): ₡100, roster_expansion(L0): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡5,000, Operating costs: ₡37,050

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 3 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 1 | Stable: admin | Balance: ₡347,500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 2 | Stable: player1 | Balance: ₡1,748,550

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 3 | Stable: player2 | Balance: ₡998,450

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 4 | Stable: player4 | Balance: ₡3,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 5 | Stable: player3 | Balance: ₡3,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 6 | Stable: player5 | Balance: ₡3,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 8 | Stable: test_user_001 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 9 | Stable: test_user_002 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 10 | Stable: test_user_003 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 11 | Stable: test_user_004 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 12 | Stable: test_user_005 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 13 | Stable: test_user_006 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 14 | Stable: test_user_007 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 15 | Stable: test_user_008 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 16 | Stable: test_user_009 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 17 | Stable: test_user_010 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 18 | Stable: test_user_011 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 19 | Stable: test_user_012 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 20 | Stable: test_user_013 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 21 | Stable: test_user_014 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 22 | Stable: test_user_015 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 23 | Stable: test_user_016 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 24 | Stable: test_user_017 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 25 | Stable: test_user_018 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 26 | Stable: test_user_019 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 27 | Stable: test_user_020 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 28 | Stable: test_user_021 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 29 | Stable: test_user_022 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 30 | Stable: test_user_023 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 31 | Stable: test_user_024 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 32 | Stable: test_user_025 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 33 | Stable: test_user_026 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 34 | Stable: test_user_027 | Balance: ₡105,002

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 35 | Stable: test_user_028 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 36 | Stable: test_user_029 | Balance: ₡120,004

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 37 | Stable: test_user_030 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 38 | Stable: test_user_031 | Balance: ₡120,003

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39 | Stable: test_user_032 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 40 | Stable: test_user_033 | Balance: ₡105,002

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 41 | Stable: test_user_034 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 42 | Stable: test_user_035 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 43 | Stable: test_user_036 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 44 | Stable: test_user_037 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 45 | Stable: test_user_038 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 46 | Stable: test_user_039 | Balance: ₡120,003

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 47 | Stable: test_user_040 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 48 | Stable: test_user_041 | Balance: ₡105,002

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 49 | Stable: test_user_042 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 50 | Stable: test_user_043 | Balance: ₡105,002

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 51 | Stable: test_user_044 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 52 | Stable: test_user_045 | Balance: ₡120,003

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 53 | Stable: test_user_046 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 54 | Stable: test_user_047 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 55 | Stable: test_user_048 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 56 | Stable: test_user_049 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 57 | Stable: test_user_050 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 58 | Stable: test_user_051 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 59 | Stable: test_user_052 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 60 | Stable: test_user_053 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 61 | Stable: test_user_054 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 62 | Stable: test_user_055 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 63 | Stable: test_user_056 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 64 | Stable: test_user_057 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 65 | Stable: test_user_058 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 66 | Stable: test_user_059 | Balance: ₡105,002

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 67 | Stable: test_user_060 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 68 | Stable: test_user_061 | Balance: ₡120,003

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 69 | Stable: test_user_062 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 70 | Stable: test_user_063 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 71 | Stable: test_user_064 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 72 | Stable: test_user_065 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 73 | Stable: test_user_066 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 74 | Stable: test_user_067 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 75 | Stable: test_user_068 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 76 | Stable: test_user_069 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 77 | Stable: test_user_070 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 78 | Stable: test_user_071 | Balance: ₡120,003

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 79 | Stable: test_user_072 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 80 | Stable: test_user_073 | Balance: ₡105,002

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 81 | Stable: test_user_074 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 82 | Stable: test_user_075 | Balance: ₡111,500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 83 | Stable: test_user_076 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 84 | Stable: test_user_077 | Balance: ₡111,501

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 85 | Stable: test_user_078 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 86 | Stable: test_user_079 | Balance: ₡112,502

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 87 | Stable: test_user_080 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 88 | Stable: test_user_081 | Balance: ₡112,503

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 89 | Stable: test_user_082 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 3: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleEndBalance (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:618:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:877:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 3 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 3 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 272 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle3.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 2 bulk cycles (includeTournaments: false, generateUsersPerCycle: false)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:34.885Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 46 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] PBT_Limit_1771959092226_9_0.26892166110590976 earned ₡1,001 from Battle #215

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 3 earned ₡1,000 from Battle #215

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092226_9_0.26892166110590976 (User 122) vs WimpBot 3 (User 10) | Winner: PBT_Limit_1771959092226_9_0.26892166110590976 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] PBT_Limit_1771959092215_7_0.6065972633915144 earned ₡1,000 from Battle #219

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] PBT_Limit_1771959092220_8_0.7275474819936254 earned ₡1,001 from Battle #219

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092215_7_0.6065972633915144 (User 122) vs PBT_Limit_1771959092220_8_0.7275474819936254 (User 122) | Winner: PBT_Limit_1771959092220_8_0.7275474819936254 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 95 earned ₡1,002 from Battle #222

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 97 earned ₡1,004 from Battle #222

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 95 (User 102) vs WimpBot 97 (User 104) | Winner: WimpBot 97 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 99 earned ₡1,002 from Battle #225

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Tank Fortress C000 earned ₡1,005 from Battle #225

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 99 (User 106) vs Tank Fortress C000 (User 108) | Winner: Tank Fortress C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +4 | Kill: Tank Fortress C000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Glass Cannon B C000 earned ₡1,003 from Battle #228

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Speed Demon A C000 earned ₡1,004 from Battle #228

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Glass Cannon B C000 (User 110) vs Speed Demon A C000 (User 112) | Winner: Glass Cannon B C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Glass Cannon B C000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Speed Demon C C000 earned ₡1,005 from Battle #231

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Facility Investor C000 earned ₡1,002 from Battle #231

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Speed Demon C C000 (User 114) vs Facility Investor C000 (User 116) | Winner: Speed Demon C C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +4

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Two-Robot Beta C000 earned ₡1,002 from Battle #234

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Ranged Sniper C000 earned ₡1,004 from Battle #234

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Two-Robot Beta C000 (User 117) vs Ranged Sniper C000 (User 119) | Winner: Ranged Sniper C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Ranged Sniper C000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Prestige Rusher C000 earned ₡1,004 from Battle #237

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Henk earned ₡1,002 from Battle #237

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Prestige Rusher C000 (User 121) vs Henk (User 3) | Winner: Prestige Rusher C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +4 | Kill: Prestige Rusher C000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] PBT_Limit_1771959092177_0_0.2125634982154947 earned ₡1,004 from Battle #240

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 5 earned ₡1,002 from Battle #240

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092177_0_0.2125634982154947 (User 122) vs WimpBot 5 (User 12) | Winner: PBT_Limit_1771959092177_0_0.2125634982154947 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] PBT_Limit_1771959092182_1_0.08921469003647553 earned ₡1,004 from Battle #243

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 7 earned ₡1,002 from Battle #243

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092182_1_0.08921469003647553 (User 122) vs WimpBot 7 (User 14) | Winner: PBT_Limit_1771959092182_1_0.08921469003647553 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: PBT_Limit_1771959092182_1_0.08921469003647553

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] PBT_Limit_1771959092187_2_0.9858417724561371 earned ₡1,003 from Battle #246

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 9 earned ₡1,004 from Battle #246

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 97: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] PBT_Limit_1771959092192_3_0.391232246124365 earned ₡1,003 from Battle #249

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 11 earned ₡1,003 from Battle #249

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 98: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] PBT_Limit_1771959092200_4_0.6231080329810477 earned ₡1,004 from Battle #252

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 13 earned ₡1,002 from Battle #252

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 99: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] PBT_Limit_1771959092205_5_0.6990815742550932 earned ₡1,004 from Battle #255

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 15 earned ₡1,003 from Battle #255

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 100: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] PBT_Limit_1771959092210_6_0.5066055863934573 earned ₡1,004 from Battle #258

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 17 earned ₡1,002 from Battle #258

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | PBT_Limit_1771959092210_6_0.5066055863934573 (User 122) vs WimpBot 17 (User 24) | Winner: PBT_Limit_1771959092210_6_0.5066055863934573 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 6 earned ₡1,001 from Battle #261

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 10 earned ₡1,000 from Battle #261

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 6 (User 13) vs WimpBot 10 (User 17) | Winner: WimpBot 6 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] AI Tactician C000 earned ₡1,003 from Battle #264

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 16 earned ₡1,002 from Battle #264

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | AI Tactician C000 (User 120) vs WimpBot 16 (User 23) | Winner: AI Tactician C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: AI Tactician C000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 4 earned ₡1,002 from Battle #267

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 2 earned ₡1,002 from Battle #267

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 131: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] WimpBot 30 earned ₡1,004 from Battle #270

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 36 earned ₡1,003 from Battle #270

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 104: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] WimpBot 34 earned ₡1,003 from Battle #273

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 38 earned ₡1,004 from Battle #273

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 34 (User 41) vs WimpBot 38 (User 45) | Winner: WimpBot 38 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 32 earned ₡1,002 from Battle #276

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 72 earned ₡1,004 from Battle #276

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 32 (User 39) vs WimpBot 72 (User 79) | Winner: WimpBot 72 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: WimpBot 72

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 62 earned ₡1,003 from Battle #279

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 66 earned ₡1,003 from Battle #279

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 62 (User 69) vs WimpBot 66 (User 73) | Winner: WimpBot 62 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 68 earned ₡1,003 from Battle #283

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 56 earned ₡1,003 from Battle #283

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 108: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:761:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [Streaming] WimpBot 50 earned ₡1,003 from Battle #286

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 58 earned ₡1,003 from Battle #286

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 50 (User 57) vs WimpBot 58 (User 65) | Winner: WimpBot 50 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: WimpBot 50

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 74 earned ₡1,003 from Battle #289

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 84 earned ₡1,004 from Battle #289

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 74 (User 81) vs WimpBot 84 (User 91) | Winner: WimpBot 74 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 82 earned ₡1,003 from Battle #292

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 86 earned ₡1,003 from Battle #292

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 82 (User 89) vs WimpBot 86 (User 93) | Winner: WimpBot 86 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 88 earned ₡1,003 from Battle #295

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 90 earned ₡1,002 from Battle #295

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 88 (User 95) vs WimpBot 90 (User 97) | Winner: WimpBot 88 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Glass Cannon C C000 earned ₡1,002 from Battle #298

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Speed Demon B C000 earned ₡1,003 from Battle #298

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Glass Cannon C C000 (User 111) vs Speed Demon B C000 (User 113) | Winner: Speed Demon B C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 100 earned ₡1,002 from Battle #301

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 20 earned ₡1,003 from Battle #301

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 100 (User 107) vs WimpBot 20 (User 27) | Winner: WimpBot 20 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 12 earned ₡1,002 from Battle #304

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 18 earned ₡1,002 from Battle #304

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 12 (User 19) vs WimpBot 18 (User 25) | Winner: WimpBot 18 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 22 earned ₡1,003 from Battle #307

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 24 earned ₡1,004 from Battle #307

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 22 (User 29) vs WimpBot 24 (User 31) | Winner: WimpBot 22 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 28 earned ₡1,002 from Battle #310

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 8 earned ₡1,002 from Battle #310

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 28 (User 35) vs WimpBot 8 (User 15) | Winner: WimpBot 28 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 14 earned ₡1,002 from Battle #313

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 70 earned ₡1,002 from Battle #313

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 14 (User 21) vs WimpBot 70 (User 77) | Winner: WimpBot 70 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 80 earned ₡1,002 from Battle #316

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 60 earned ₡1,003 from Battle #316

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 80 (User 87) vs WimpBot 60 (User 67) | Winner: WimpBot 60 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 40 earned ₡1,002 from Battle #320

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 42 earned ₡1,003 from Battle #320

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 40 (User 47) vs WimpBot 42 (User 49) | Winner: WimpBot 40 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 48 earned ₡1,002 from Battle #323

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 26 earned ₡1,003 from Battle #323

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 48 (User 55) vs WimpBot 26 (User 33) | Winner: WimpBot 26 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 46 earned ₡1,003 from Battle #326

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 64 earned ₡1,002 from Battle #326

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 46 (User 53) vs WimpBot 64 (User 71) | Winner: WimpBot 46 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 44 earned ₡1,002 from Battle #329

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 76 earned ₡1,002 from Battle #329

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 44 (User 51) vs WimpBot 76 (User 83) | Winner: WimpBot 44 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 54 earned ₡1,002 from Battle #333

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 94 earned ₡1,002 from Battle #333

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 54 (User 61) vs WimpBot 94 (User 101) | Winner: WimpBot 94 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: WimpBot 94

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 52 earned ₡1,002 from Battle #336

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 78 earned ₡1,002 from Battle #336

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 52 (User 59) vs WimpBot 78 (User 85) | Winner: WimpBot 52 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 92 earned ₡1,002 from Battle #339

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 96 earned ₡1,003 from Battle #339

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 92 (User 99) vs WimpBot 96 (User 103) | Winner: WimpBot 96 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 98 earned ₡1,002 from Battle #342

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Two-Robot Alpha C000 earned ₡1,003 from Battle #342

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | WimpBot 98 (User 105) vs Two-Robot Alpha C000 (User 117) | Winner: Two-Robot Alpha C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Melee Specialist C000 earned ₡1,002 from Battle #345

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Balanced Brawler C000 earned ₡1,002 from Battle #345

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Melee Specialist C000 (User 118) vs Balanced Brawler C000 (User 115) | Winner: Balanced Brawler C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Balanced Brawler C000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Glass Cannon A C000 earned ₡1,005 from Battle #348

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] WimpBot 1 earned ₡1,002 from Battle #348

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Glass Cannon A C000 (User 109) vs WimpBot 1 (User 8) | Winner: Glass Cannon A C000 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Glass Cannon A C000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot1_1771959093297_0.5986110949662341 earned ₡2,005 from Battle #351

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959093297_0.47000568275593724 earned ₡10,131 from Battle #351

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 147: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.error
      [BattleOrchestrator] Failed to process match 148: Error: Robots not found for match 148
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:606:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 37 successful, 9 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 185 prestige, 89 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 12 | Robot 5 (WimpBot 5) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 14 | Robot 7 (WimpBot 7) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 16 | Robot 9 (WimpBot 9) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 18 | Robot 11 (WimpBot 11) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 10 | Robot 3 (WimpBot 3) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 32 | Robot 25 (WimpBot 25) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 34 | Robot 27 (WimpBot 27) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 56 | Robot 49 (WimpBot 49) | Cost: ₡1,171 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 58 | Robot 51 (WimpBot 51) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 80 | Robot 73 (WimpBot 73) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 82 | Robot 75 (WimpBot 75) | Cost: ₡1,505 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 84 | Robot 77 (WimpBot 77) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 106 | Robot 99 (WimpBot 99) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 110 | Robot 103 (Glass Cannon B C000) | Cost: ₡7,872 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 112 | Robot 105 (Speed Demon A C000) | Cost: ₡31,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 116 | Robot 109 (Facility Investor C000) | Cost: ₡5,948 | Discount: 6%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 104 | Robot 97 (WimpBot 97) | Cost: ₡502 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 633 (PBT_Limit_1771959092200_4_0.6231080329810477) | Cost: ₡1,568 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 630 (PBT_Limit_1771959092182_1_0.08921469003647553) | Cost: ₡2,624 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 631 (PBT_Limit_1771959092187_2_0.9858417724561371) | Cost: ₡2,368 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 632 (PBT_Limit_1771959092192_3_0.391232246124365) | Cost: ₡1,056 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 629 (PBT_Limit_1771959092177_0_0.2125634982154947) | Cost: ₡1,568 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 637 (PBT_Limit_1771959092210_6_0.5066055863934573) | Cost: ₡2,112 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 635 (PBT_Limit_1771959092205_5_0.6990815742550932) | Cost: ₡2,624 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 640 (PBT_Limit_1771959092226_9_0.26892166110590976) | Cost: ₡2,368 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 638 (PBT_Limit_1771959092215_7_0.6065972633915144) | Cost: ₡1,856 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 122 | Robot 639 (PBT_Limit_1771959092220_8_0.7275474819936254) | Cost: ₡4,704 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 90 | Robot 83 (WimpBot 83) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 48 | Robot 41 (WimpBot 41) | Cost: ₡3,325 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 88 | Robot 81 (WimpBot 81) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 688 (Robot1_1771959092828_0.5518216887125477) | Cost: ₡9,890 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 703 (Robot1_1771959093096_0.6359186297450872) | Cost: ₡46,000 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 717 (Robot1_1771959093297_0.5986110949662341) | Cost: ₡6,670 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 689 (Robot2_1771959092828_0.05985120275162836) | Cost: ₡46,000 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 704 (Robot2_1771959093096_0.4032917217628468) | Cost: ₡7,130 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 718 (Robot2_1771959093297_0.47000568275593724) | Cost: ₡31,740 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 120 | Robot 114 (AI Tactician C000) | Cost: ₡698 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 23 | Robot 16 (WimpBot 16) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 30 | Robot 23 (WimpBot 23) | Cost: ₡1,213 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 36 | Robot 29 (WimpBot 29) | Cost: ₡1,422 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 38 | Robot 31 (WimpBot 31) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 40 | Robot 33 (WimpBot 33) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 42 | Robot 35 (WimpBot 35) | Cost: ₡3,325 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 44 | Robot 37 (WimpBot 37) | Cost: ₡293 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 46 | Robot 39 (WimpBot 39) | Cost: ₡920 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 26 | Robot 19 (WimpBot 19) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 28 | Robot 21 (WimpBot 21) | Cost: ₡1,213 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 20 | Robot 13 (WimpBot 13) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 24 | Robot 17 (WimpBot 17) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 25 | Robot 18 (WimpBot 18) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 27 | Robot 20 (WimpBot 20) | Cost: ₡1,505 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 11 | Robot 4 (WimpBot 4) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 19 | Robot 12 (WimpBot 12) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 29 | Robot 22 (WimpBot 22) | Cost: ₡1,505 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 31 | Robot 24 (WimpBot 24) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 22 | Robot 15 (WimpBot 15) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 21 | Robot 14 (WimpBot 14) | Cost: ₡3,325 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 50 | Robot 43 (WimpBot 43) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 52 | Robot 45 (WimpBot 45) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 54 | Robot 47 (WimpBot 47) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 60 | Robot 53 (WimpBot 53) | Cost: ₡1,171 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 62 | Robot 55 (WimpBot 55) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 64 | Robot 57 (WimpBot 57) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 66 | Robot 59 (WimpBot 59) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 68 | Robot 61 (WimpBot 61) | Cost: ₡1,171 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 70 | Robot 63 (WimpBot 63) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 72 | Robot 65 (WimpBot 65) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 74 | Robot 67 (WimpBot 67) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 76 | Robot 69 (WimpBot 69) | Cost: ₡1,798 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 78 | Robot 71 (WimpBot 71) | Cost: ₡1,547 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 41 | Robot 34 (WimpBot 34) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 45 | Robot 38 (WimpBot 38) | Cost: ₡1,505 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 39 | Robot 32 (WimpBot 32) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 79 | Robot 72 (WimpBot 72) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 73 | Robot 66 (WimpBot 66) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 75 | Robot 68 (WimpBot 68) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 35 | Robot 28 (WimpBot 28) | Cost: ₡1,464 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 37 | Robot 30 (WimpBot 30) | Cost: ₡1,798 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 43 | Robot 36 (WimpBot 36) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 92 | Robot 85 (WimpBot 85) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 86 | Robot 79 (WimpBot 79) | Cost: ₡1,756 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 94 | Robot 87 (WimpBot 87) | Cost: ₡2,049 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 96 | Robot 89 (WimpBot 89) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 98 | Robot 91 (WimpBot 91) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 100 | Robot 93 (WimpBot 93) | Cost: ₡1,798 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 102 | Robot 95 (WimpBot 95) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 117 | Robot 111 (Two-Robot Beta C000) | Cost: ₡12,400 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 117 | Robot 110 (Two-Robot Alpha C000) | Cost: ₡372 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 119 | Robot 113 (Ranged Sniper C000) | Cost: ₡3,599 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 3 | Robot 118 (Henk) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 63 | Robot 56 (WimpBot 56) | Cost: ₡1,464 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 57 | Robot 50 (WimpBot 50) | Cost: ₡1,798 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 65 | Robot 58 (WimpBot 58) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 81 | Robot 74 (WimpBot 74) | Cost: ₡1,464 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 91 | Robot 84 (WimpBot 84) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 113 | Robot 106 (Speed Demon B C000) | Cost: ₡4,477 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 89 | Robot 82 (WimpBot 82) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 93 | Robot 86 (WimpBot 86) | Cost: ₡1,171 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 95 | Robot 88 (WimpBot 88) | Cost: ₡1,505 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 97 | Robot 90 (WimpBot 90) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 111 | Robot 104 (Glass Cannon C C000) | Cost: ₡13,104 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 107 | Robot 100 (WimpBot 100) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 87 | Robot 80 (WimpBot 80) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 77 | Robot 70 (WimpBot 70) | Cost: ₡1,171 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 47 | Robot 40 (WimpBot 40) | Cost: ₡1,882 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 67 | Robot 60 (WimpBot 60) | Cost: ₡1,673 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 55 | Robot 48 (WimpBot 48) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 49 | Robot 42 (WimpBot 42) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 53 | Robot 46 (WimpBot 46) | Cost: ₡1,505 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 33 | Robot 26 (WimpBot 26) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 71 | Robot 64 (WimpBot 64) | Cost: ₡3,325 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 51 | Robot 44 (WimpBot 44) | Cost: ₡1,547 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 83 | Robot 76 (WimpBot 76) | Cost: ₡3,325 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 61 | Robot 54 (WimpBot 54) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 101 | Robot 94 (WimpBot 94) | Cost: ₡1,213 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 59 | Robot 52 (WimpBot 52) | Cost: ₡1,255 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 69 | Robot 62 (WimpBot 62) | Cost: ₡920 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 13 | Robot 6 (WimpBot 6) | Cost: ₡1,840 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 17 | Robot 10 (WimpBot 10) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 9 | Robot 2 (WimpBot 2) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 15 | Robot 8 (WimpBot 8) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 85 | Robot 78 (WimpBot 78) | Cost: ₡3,262 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 115 | Robot 108 (Balanced Brawler C000) | Cost: ₡7,482 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 109 | Robot 102 (Glass Cannon A C000) | Cost: ₡672 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 99 | Robot 92 (WimpBot 92) | Cost: ₡3,199 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 103 | Robot 96 (WimpBot 96) | Cost: ₡1,464 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 8 | Robot 1 (WimpBot 1) | Cost: ₡4,600 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 105 | Robot 98 (WimpBot 98) | Cost: ₡3,136 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 118 | Robot 112 (Melee Specialist C000) | Cost: ₡23,400 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 278 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.207Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot1_1771959101159_0.8187964105059004 earned ₡2,004 from Battle #381

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959101159_0.11927972900705563 earned ₡5,274 from Battle #381

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Robot1_1771959101159_0.8187964105059004 (User 129) vs Robot2_1771959101159_0.11927972900705563 (User 130) | Winner: Robot2_1771959101159_0.11927972900705563 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 2: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 2 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 15 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 2 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.345Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot1_1771959101261_0.9994545573422632 earned ₡2,003 from Battle #384

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959101261_0.2679994690912504 earned ₡5,265 from Battle #384

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Battle] League: bronze | Robot1_1771959101261_0.9994545573422632 (User 129) vs Robot2_1771959101261_0.2679994690912504 (User 130) | Winner: Robot1_1771959101261_0.9994545573422632 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 173 | Robot 2170 (PBT_LowHP1_1771959101452_0.46994256551745484) | Cost: ₡1,216 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [RepairService] | ERROR | User 129 | Robot 2143 | Failed to log repair event: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at repairAllRobots (src/services/repairService.ts:166:17)
      at src/routes/admin.ts:443:32

    console.error
      [RepairService] | ERROR | User 129 | Robot 2154 | Failed to log repair event: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at repairAllRobots (src/services/repairService.ts:166:17)
      at src/routes/admin.ts:443:32

    console.error
      [RepairService] | ERROR | User 129 | Robot 1783 | Failed to log repair event: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at repairAllRobots (src/services/repairService.ts:166:17)
      at src/routes/admin.ts:443:32

    console.log
      [RepairService] | User 129 | Robot 2013 (Robot1_1771959100055_0.7145437820984759) | Cost: ₡17,020 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [RepairService] | ERROR | User 129 | Robot 1948 | Failed to log repair event: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at repairAllRobots (src/services/repairService.ts:166:17)
      at src/routes/admin.ts:443:32

    console.log
      [RepairService] | User 129 | Robot 2046 (Robot1_1771959100463_0.15217184442854725) | Cost: ₡32,775 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [RepairService] | ERROR | User 130 | Robot 2144 | Failed to log repair event: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at repairAllRobots (src/services/repairService.ts:166:17)
      at src/routes/admin.ts:443:32

    console.log
      [RepairService] | User 130 | Robot 2155 (Robot2_1771959101261_0.2679994690912504) | Cost: ₡15,180 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 1784 (Robot2_1771959099320_0.17469100085078448) | Cost: ₡9,430 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 1950 (Robot2_1771959099839_0.8384089102062334) | Cost: ₡10,810 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 2015 (Robot2_1771959100055_0.9680015172763039) | Cost: ₡9,890 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 2047 (Robot2_1771959100463_0.673564301306628) | Cost: ₡9,660 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 308 | Robot 2138 (Unready_Robot_0_1771959101122) | Cost: ₡1,150 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 309 | Robot 2140 (Unready_Robot_2_1771959101135) | Cost: ₡1,863 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 309 | Robot 2142 (Unready_Robot_3_1771959101140) | Cost: ₡1,909 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 117 | Robot 110 (Two-Robot Alpha C000) | Cost: ₡2,728 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [RepairService] | ERROR | User 291 | Robot 2055 | Failed to log repair event: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at repairAllRobots (src/services/repairService.ts:166:17)
      at src/routes/admin.ts:443:32

    console.error
      [RepairService] | ERROR | User 291 | Robot 2052 | Failed to log repair event: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at repairAllRobots (src/services/repairService.ts:166:17)
      at src/routes/admin.ts:443:32

    console.log
      [RepairService] | User 293 | Robot 2058 (MultiMatch_Robot_1_0_1771959100518) | Cost: ₡1,978 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 293 | Robot 2059 (MultiMatch_Robot_1_1_1771959100524) | Cost: ₡1,863 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 159

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 160 total robots across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_2: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Instance exceeds 100 robots, rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [LeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 4

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 4 total teams across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 1 archetype users for Cycle 1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/1: archetype_tank_fortress_1_1 (archetype: tank_fortress)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 4
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 4
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:42.834Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 79 robots available (100 total, 79 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Bye-match created for MultiMatch_Robot_1_0_1771959100518

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.scheduledMatch.createMany()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/matchmakingService.ts:340:31
      
        337   status: 'scheduled',
        338 }));
        339 
      → 340 await prisma.scheduledMatch.createMany(
      Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createScheduledMatches (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/matchmakingService.ts:340:3)
          at runMatchmakingForTier (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/matchmakingService.ts:371:5)
          at runMatchmaking (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/matchmakingService.ts:392:25)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:637:32 {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'ScheduledMatch',
          field_name: 'scheduled_matches_robot1_id_fkey (index)'
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.scheduledMatch.createMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/matchmakingService.ts:340:31\n\n  337   status: 'scheduled',\n  338 }));\n  339 \n→ 340 await prisma.scheduledMatch.createMany(\nForeign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 134 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.890Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 173 | Robot 2212 (PBT_LowHP1_1771959101883_0.4790968441202407) | Cost: ₡1,216 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 2: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 2 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 13 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 1 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/1)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/1) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStart (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:271:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:426:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 7 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 2 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStart (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:271:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:426:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 7 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:41.977Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot1_1771959101909_0.9308348148318287 earned ₡2,004 from Battle #390

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] Robot2_1771959101909_0.5884370505041243 earned ₡4,734 from Battle #390

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 210: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:722:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 2217 (Robot1_1771959101909_0.9308348148318287) | Cost: ₡32,430 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 2231 (Robot1_1771959102020_0.4331520451619506) | Cost: ₡17,710 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 2218 (Robot2_1771959101909_0.5884370505041243) | Cost: ₡11,040 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 2233 (Robot2_1771959102020_0.9337770745482403) | Cost: ₡20,240 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 339 | Robot 2241 (Poor_Robot_0_1771959102081) | Cost: ₡690 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 339 | Robot 2243 (Poor_Robot_1_1771959102085) | Cost: ₡690 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 182

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 183 total robots across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_2: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Instance exceeds 100 robots, rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [LeagueInstance] Rebalancing bronze instances...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total robots: 186

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Instances: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Average per instance: 93.0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Target instances: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [LeagueInstance] Rebalanced 86 robots across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 2: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:585:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 2 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 71 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 1 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/1)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/1) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:42.417Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 214: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.createMany()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:427:34
      
        424 });
        425 
        426 // Create BattleParticipant records
      → 427 await prisma.battleParticipant.createMany(
      Foreign key constraint violated: `battle_participants_battle_id_fkey (index)`
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at createBattleRecord (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:427:3)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:641:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2003',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          field_name: 'battle_participants_battle_id_fkey (index)'
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 129 | Robot 2281 (Robot1_1771959102377_0.24182396045857912) | Cost: ₡46,000 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 130 | Robot 2282 (Robot2_1771959102377_0.3826906808549627) | Cost: ₡14,950 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 341 | Robot 2244 (Poor_Robot_2_1771959102090) | Cost: ₡690 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 341 | Robot 2245 (Poor_Robot_3_1771959102095) | Cost: ₡690 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 338 | Robot 2240 (TestBot1_1771959102071) | Cost: ₡6,825 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [RepairService] | User 340 | Robot 2242 (TestBot2_1771959102071) | Cost: ₡2,300 | Discount: 0%

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 232

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 232 total robots across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_2: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Instance exceeds 100 robots, rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [LeagueInstance] Rebalancing bronze instances...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total robots: 234

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Instances: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Average per instance: 117.0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Target instances: 3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Rebalancing] Error checking bronze instances: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueInstanceService.ts:163:22
      
        160 
        161 if (robot.leagueId !== targetLeagueId) {
        162   updates.push(
      → 163     prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at async Promise.all (index 112)
          at rebalanceInstances (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueInstanceService.ts:171:3)
          at rebalanceLeagues (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:378:9)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:584:36 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at rebalanceLeagues (src/services/leagueRebalancingService.ts:383:15)
      at src/routes/admin.ts:584:36

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 1 archetype users for Cycle 1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/1: archetype_tank_fortress_1_1 (archetype: tank_fortress)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:43.935Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 4 robots available (6 total, 6 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Created 2 scheduled matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 2 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 2 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] bronze_1: 2 eligible teams (3 total, 2 ready, 0 already scheduled)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [TagTeamMatchmaking] Error in bronze tier: Error: Team 764 not found
          at calculateCombinedELO (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamService.ts:321:11)
          at pairTeams (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamMatchmakingService.ts:329:25)
          at runTagTeamMatchmaking (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamMatchmakingService.ts:461:25)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:652:41

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at runTagTeamMatchmaking (src/services/tagTeamMatchmakingService.ts:472:15)
      at src/routes/admin.ts:652:41

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 361 | Total: ₡500 | Facilities: roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 1 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 398 | Stable: test_user_1771959103608 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 402 | Stable: test_rebal_user | Balance: ₡3,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 403 | Stable: test_user_prop18_1771959103798 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 407 | Stable: test_csv_user1_1771959103818 | Balance: ₡1,015,020

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 408 | Stable: test_csv_user2_1771959103838 | Balance: ₡1,019,450

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 1 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 1 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 156 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 10 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:44.283Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 226: Error: BattleParticipant not found for battle 408, robot 4170
          at updateRobotStats (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:490:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:646:18)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 102

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 3 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 100 total robots across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing champion_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing champion_2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion_2: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 1 archetype users for Cycle 1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/1: archetype_tank_fortress_1_1 (archetype: tank_fortress)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:45.580Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (8 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (7 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (8 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (7 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing champion_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for champion_1: 0 robots available (80 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] champion_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing champion_2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for champion_2: 0 robots available (20 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] champion_2: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 2 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 416 | Total: ₡2,000 | Facilities: roster_expansion(L0): ₡2000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 398 | Total: ₡1,000 | Facilities: streaming_studio(L10): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 402 | Total: ₡49,500 | Facilities: roster_expansion(L0): ₡49500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 407 | Total: ₡500 | Facilities: streaming_studio(L5): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 408 | Total: ₡300 | Facilities: streaming_studio(L3): ₡300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡53,300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 1 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 452 | Stable: test_user_prop4_1771959105285 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 1 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 1 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 160 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:46.021Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 2 archetype users for Cycle 2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/2: archetype_glass_cannon_a_2_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:47.246Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 452 | Total: ₡300 | Facilities: streaming_studio(L3): ₡300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 2 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 452 | Stable: test_user_prop4_1771959105285 | Balance: ₡99,700

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 2 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 2 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 91 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 3 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 3 (3/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 3 (3/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:47.470Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 3 archetype users for Cycle 3...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/3: archetype_glass_cannon_c_3_1 (archetype: glass_cannon_c)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.error
      [Admin] Error in cycle 3: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:625:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 3 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 3 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 97 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle3.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 4 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 4 (4/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 4 (4/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:47.619Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 4)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 4)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 4 archetype users for Cycle 4...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/4: archetype_speed_demon_c_4_1 (archetype: speed_demon_c)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype speed_demon_c. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype speed_demon_c. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:48.723Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 4)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 4 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 460 | Stable: test_user_prop6_1771959108823 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 4

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 4 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 4 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 4 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 92 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle4.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 5 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 5 (5/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 5 (5/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:48.859Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 2 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 5 archetype users for Cycle 5...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/5: archetype_melee_specialist_5_1 (archetype: melee_specialist)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype melee_specialist. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype melee_specialist. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:49.976Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 5: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:698:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 5 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 5 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 119 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle5.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 6 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 6 (6/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 6 (6/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:49.002Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 1 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 6 archetype users for Cycle 6...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/6: archetype_glass_cannon_a_6_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:50.110Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (2 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 460 | Total: ₡700 | Facilities: streaming_studio(L2): ₡200, roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡700

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 6 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 460 | Stable: test_user_prop6_1771959108823 | Balance: ₡99,300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 6

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 6 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 6 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 6 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 96 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle6.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 7 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 7 (7/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 7 (7/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:50.259Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 1 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 7 archetype users for Cycle 7...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/7: archetype_balanced_brawler_7_1 (archetype: balanced_brawler)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:51.459Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (2 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 7 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 460 | Stable: test_user_prop6_1771959108823 | Balance: ₡99,300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 7

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 7 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 7 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 7 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 134 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle7.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 8 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 8 (8/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 8 (8/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:51.635Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 1 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 8 archetype users for Cycle 8...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/8: archetype_tank_fortress_8_1 (archetype: tank_fortress)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:52.775Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (5 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 460 | Total: ₡100 | Facilities: streaming_studio(L1): ₡100

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡100

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 8 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 465 | Stable: test_user_prop2_1_1771959112434 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 466 | Stable: test_user_prop2_2_1771959112447 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 8

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 8 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 8 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 8 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 97 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle8.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 9 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 9 (9/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 9 (9/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:52.918Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 9)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 9)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 9 archetype users for Cycle 9...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/9: archetype_facility_investor_9_1 (archetype: facility_investor)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype facility_investor. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype facility_investor. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:54.044Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (2 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 9)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 465 | Total: ₡200 | Facilities: streaming_studio(L2): ₡200

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 466 | Total: ₡900 | Facilities: streaming_studio(L9): ₡900

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡1,100

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 9 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 465 | Stable: test_user_prop2_1_1771959112434 | Balance: ₡99,800

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 466 | Stable: test_user_prop2_2_1771959112447 | Balance: ₡99,100

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 9

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 9 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 9 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 9 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 135 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle9.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 10 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 10 (10/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 10 (10/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:54.200Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 2 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 10 archetype users for Cycle 10...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/10: archetype_glass_cannon_c_10_1 (archetype: glass_cannon_c)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:55.296Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (2 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 10 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 469 | Stable: test_user_prop3_1771959115354 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 10

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 10 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 10 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 10 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 95 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle10.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 3 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:55.447Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 1 archetype users for Cycle 1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/1: archetype_tank_fortress_1_1 (archetype: tank_fortress)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:56.567Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (1 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 469 | Total: ₡300 | Facilities: streaming_studio(L3): ₡300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 1 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 469 | Stable: test_user_prop3_1771959115354 | Balance: ₡99,700

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 1 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 1 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 136 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:56.714Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 1 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 2 archetype users for Cycle 2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/2: archetype_glass_cannon_a_2_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:57.811Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 469 | Total: ₡1,000 | Facilities: streaming_studio(L10): ₡1000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡1,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 2 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 472 | Stable: test_user_prop12_team1_1771959116961 | Balance: ₡4,440,688

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 473 | Stable: test_user_prop12_team2_1771959116973 | Balance: ₡5,380,451

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 2 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 2 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 92 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 3 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 3 (3/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 3 (3/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-24T18:51:57.950Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 1 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 3 archetype users for Cycle 3...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/3: archetype_glass_cannon_c_3_1 (archetype: glass_cannon_c)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-24T18:51:59.072Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (4 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 472 | Total: ₡1,000 | Facilities: streaming_studio(L5): ₡500, roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 473 | Total: ₡900 | Facilities: streaming_studio(L4): ₡400, roster_expansion(L0): ₡500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡1,900

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 3 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 455 | Stable: rc_test_1771959105384_655112 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 472 | Stable: test_user_prop12_team1_1771959116961 | Balance: ₡6,550,579

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 473 | Stable: test_user_prop12_team2_1771959116973 | Balance: ₡8,788,164

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 3 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 3 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 3 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 137 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle3.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate progressive users per cycle

    TypeError: Cannot read properties of undefined (reading 'usersCreated')

      163 |
      164 |       // Verify user generation in each cycle
    > 165 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);
          |                                                      ^
      166 |       expect(response.body.results[1].userGeneration.usersCreated).toBe(2);
      167 |       expect(response.body.results[2].userGeneration.usersCreated).toBe(3);
      168 |

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:165:54)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should persist cycle count across multiple runs

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 50

      192 |       // Verify cycle metadata
      193 |       const metadata1 = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });
    > 194 |       expect(metadata1!.totalCycles).toBe(5);
          |                                      ^
      195 |
      196 |       // Second run: 3 cycles (should start at cycle 6)
      197 |       const response2 = await request(app)

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:194:38)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should not generate users when flag is false

    expect(received).toBeNull()

    Received: undefined

      242 |       // Verify no user generation in results
      243 |       response.body.results.forEach((result: any) => {
    > 244 |         expect(result.userGeneration).toBeNull();
          |                                       ^
      245 |       });
      246 |
      247 |       // Verify no users were created

      at tests/integration/adminCycleGeneration.test.ts:244:39
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:243:29)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should update lastCycleAt timestamp

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 1771959101338
    Received:    1771959092385

      289 |       const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });
      290 |       expect(metadata!.lastCycleAt).not.toBeNull();
    > 291 |       expect(metadata!.lastCycleAt!.getTime()).toBeGreaterThanOrEqual(beforeTime.getTime());
          |                                                ^
      292 |     });
      293 |
      294 |     it('should handle errors in user generation gracefully', async () => {

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:291:48)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should handle errors in user generation gracefully

    expect(received).toHaveProperty(path)

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      327 |         // Cycle should still complete despite user generation error
      328 |         expect(response.status).toBe(200);
    > 329 |         expect(response.body.results[0].userGeneration).toHaveProperty('error');
          |                                                         ^
      330 |         expect(response.body.results[0].userGeneration.error).toContain('Practice Sword');
      331 |
      332 |         // Restore Practice Sword

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:329:57)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should return correct response structure

    expect(received).toHaveProperty(path)

    Expected path: "userGeneration"
    Received path: []

    Received value: {"cycle": 1, "duration": 3, "error": "
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27·
      194 };
      195·
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      371 |       response.body.results.forEach((result: any) => {
      372 |         expect(result).toHaveProperty('cycle');
    > 373 |         expect(result).toHaveProperty('userGeneration');
          |                        ^
      374 |         expect(result.userGeneration).toHaveProperty('usersCreated');
      375 |         expect(result.userGeneration).toHaveProperty('robotsCreated');
      376 |         expect(result.userGeneration).toHaveProperty('usernames');

      at tests/integration/adminCycleGeneration.test.ts:373:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:371:29)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should auto-create CycleMetadata if missing

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: undefined

      416 |
      417 |       expect(response.status).toBe(200);
    > 418 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);
          |                                                                    ^
      419 |
      420 |       // Verify CycleMetadata was created
      421 |       const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:418:68)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate correct total user count formula (N*(N+1)/2)

    expect(received).toBe(expected) // Object.is equality

    Expected: 55
    Received: 0

      443 |       });
      444 |
    > 445 |       expect(totalUsers).toBe(expectedTotal);
          |                          ^
      446 |     });
      447 |
      448 |     it('should create users eligible for matchmaking', async () => {

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:445:26)

FAIL tests/streamingRevenueFormula.property.test.ts (32.663 s)
  ● Property 1: Streaming Revenue Formula Correctness › Property 1: Streaming revenue formula correctness

    Property failed after 91 tests
    { seed: 972043445, path: "90:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29

      20 
      21 // Helper function to create a minimal test robot
      22 async function createTestRobot(userId: number, battles: number, fame: number) {
    → 23   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      21 | // Helper function to create a minimal test robot
      22 | async function createTestRobot(userId: number, battles: number, fame: number) {
    > 23 |   return await prisma.robot.create({
         |          ^
      24 |     data: {
      25 |       userId,
      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)
      at tests/streamingRevenueFormula.property.test.ts:139:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:124:5)

  ● Property 1: Streaming Revenue Formula Correctness › Property 1.1: Bye matches return null

    Property failed after 1 tests
    { seed: -2116005098, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29

      20 
      21 // Helper function to create a minimal test robot
      22 async function createTestRobot(userId: number, battles: number, fame: number) {
    → 23   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      21 | // Helper function to create a minimal test robot
      22 | async function createTestRobot(userId: number, battles: number, fame: number) {
    > 23 |   return await prisma.robot.create({
         |          ^
      24 |     data: {
      25 |       userId,
      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)
      at tests/streamingRevenueFormula.property.test.ts:217:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:202:5)

  ● Property 1: Streaming Revenue Formula Correctness › Property 1.2: Zero battles and fame gives base amount times studio multiplier

    Property failed after 1 tests
    { seed: -853803894, path: "0:0", endOnFailure: true }
    Counterexample: [0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29

      20 
      21 // Helper function to create a minimal test robot
      22 async function createTestRobot(userId: number, battles: number, fame: number) {
    → 23   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      21 | // Helper function to create a minimal test robot
      22 | async function createTestRobot(userId: number, battles: number, fame: number) {
    > 23 |   return await prisma.robot.create({
         |          ^
      24 |     data: {
      25 |       userId,
      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)
      at tests/streamingRevenueFormula.property.test.ts:261:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:248:5)

  ● Property 1: Streaming Revenue Formula Correctness › Property 1.3: Revenue increases with battles, fame, and studio level

    Property failed after 1 tests
    { seed: 743508361, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0,1,1]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29

      20 
      21 // Helper function to create a minimal test robot
      22 async function createTestRobot(userId: number, battles: number, fame: number) {
    → 23   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      21 | // Helper function to create a minimal test robot
      22 | async function createTestRobot(userId: number, battles: number, fame: number) {
    > 23 |   return await prisma.robot.create({
         |          ^
      24 |     data: {
      25 |       userId,
      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)
      at tests/streamingRevenueFormula.property.test.ts:330:26
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:299:5)

  ● Property 12: Tag Team Single Payment Per Team › Property 12: Each stable receives exactly one payment per Tag Team battle

    Property failed after 55 tests
    { seed: -1709674936, path: "54", endOnFailure: true }
    Counterexample: [158,7124,980,3833,6,24998,691,17839,5,4]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 28806
    Received: 27806

      1768 |           const balanceIncrease2 = finalBalance2 - initialBalance2;
      1769 |
    > 1770 |           expect(balanceIncrease1).toBe(expectedTeam1Revenue);
           |                                    ^
      1771 |           expect(balanceIncrease2).toBe(expectedTeam2Revenue);
      1772 |
      1773 |           // Property: The service should return exactly one revenue calculation per team

      at tests/streamingRevenueFormula.property.test.ts:1770:36
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1659:5)

FAIL tests/performanceDegradation.property.test.ts (59.063 s)
  ● Property 16: Performance Degradation Detection › Property 16.1: Degradation detected when recent average > 150% of baseline

    Property failed after 1 tests
    { seed: -803281918, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [100,1.5099999904632568,"step_a"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/performanceDegradation.property.test.ts:52:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:39:5)

  ● Property 16: Performance Degradation Detection › Property 16.2: No degradation when recent average <= 150% of baseline

    Property failed after 1 tests
    { seed: -235569536, path: "0:3:0:0:0:0:0:1:0:0:0:1:0:1:0:1:0:0:0:2:0:0:0:1:0", endOnFailure: true }
    Counterexample: [100,0.5122798085212708,"step_x"]
    Shrunk 24 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:108:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:85:5)

  ● Property 16: Performance Degradation Detection › Property 16.3: Degradation severity correctly classified (warning vs critical)

    Property failed after 1 tests
    { seed: -1137141157, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [100,1.5099999904632568,"step_1"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).not.toBeNull()

    Received: null

      152 |           const alert = await service.detectStepDegradation(stepName, 10, 100);
      153 |
    > 154 |           expect(alert).not.toBeNull();
          |                             ^
      155 |
      156 |           // Property: Severity matches degradation percentage
      157 |           if (expectedDegradationPercent >= 100) {

      at tests/performanceDegradation.property.test.ts:154:29
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:125:5)

  ● Property 16: Performance Degradation Detection › Property 16.4: Multiple steps monitored independently

    Property failed after 1 tests
    { seed: 1703689124, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [[{"stepName":"step_a","baselineDuration":100,"isDegraded":false},{"stepName":"step_a","baselineDuration":100,"isDegraded":false}]]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/performanceDegradation.property.test.ts:200:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:172:5)

  ● Property 16: Performance Degradation Detection › Property 16.5: Detection consistent across different baseline sizes

    Property failed after 1 tests
    { seed: -891918537, path: "0:6:3:4", endOnFailure: true }
    Counterexample: [1722,112,"test_step_a"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:264:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:241:5)

  ● Property 16: Performance Degradation Detection › Property 16.6: Alerts sorted by degradation percentage (highest first)

    thrown: "Exceeded timeout of 30000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      279 |    * Property 16.6: Degradation alerts are sorted by severity
      280 |    */
    > 281 |   test('Property 16.6: Alerts sorted by degradation percentage (highest first)', async () => {
          |   ^
      282 |     await fc.assert(
      283 |       fc.asyncProperty(
      284 |         fc.array(

      at tests/performanceDegradation.property.test.ts:281:3
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:17:1)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL tests/cycleStepDuration.property.test.ts (7.502 s)
  ● Property 15: Cycle Step Duration Recording › Property 15.1: Each cycle step has a step completion event with duration

    Property failed after 3 tests
    { seed: -378807736, path: "2:0:1:2:1:0:0:5:2", endOnFailure: true }
    Counterexample: [1,1,[6789]]
    Shrunk 8 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      80 |
      81 |           // Property: Number of step events equals number of steps
    > 82 |           expect(stepEvents).toHaveLength(numberOfSteps);
         |                              ^
      83 |
      84 |           // Property: Each event has a duration field
      85 |           for (const event of stepEvents) {

      at tests/cycleStepDuration.property.test.ts:82:30
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:43:5)

  ● Property 15: Cycle Step Duration Recording › Property 15.2: Sum of step durations approximately equals total cycle duration (within 5% tolerance)

    Property failed after 1 tests
    { seed: 1677212814, path: "0:0:2:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,[100,100,100],0]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/cycleStepDuration.property.test.ts:120:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:107:5)

  ● Property 15: Cycle Step Duration Recording › Property 15.3: Step durations are recorded in sequence order

    Property failed after 1 tests
    { seed: 2141014443, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,[50,50,50,50,50]]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/cycleStepDuration.property.test.ts:189:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:177:5)

  ● Property 15: Cycle Step Duration Recording › Property 15.5: Step completion events include step name and number

    Property failed after 1 tests
    { seed: -117807609, path: "0:0:0:2:3:1:1:4:4:1:3:0:2:2:1:5:3:0:7:0:0:6:0:10:11:0:0:1:1:1:6:1:1:0:6:3:3:3:0:2:3:2:3:2:3:3", endOnFailure: true }
    Counterexample: [1,[{"name":"EPg4 ","duration":893},{"name":"! 7!,","duration":100},{"name":" O@AU","duration":100}]]
    Shrunk 45 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: "EPg4 "
    Received: " O@AU"

      310 |           for (let i = 0; i < steps.length; i++) {
      311 |             const payload = stepEvents[i].payload as any;
    > 312 |             expect(payload.stepName).toBe(steps[i].name as string);
          |                                      ^
      313 |             expect(payload.stepNumber).toBe(i + 1);
      314 |             expect(payload.duration).toBe(steps[i].duration as number);
      315 |           }

      at tests/cycleStepDuration.property.test.ts:312:38
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:273:5)

  ● Property 15: Cycle Step Duration Recording › Property 15.6: Multiple cycles can be logged independently with correct durations

    Property failed after 1 tests
    { seed: -805788778, path: "0:0:0:0:0:0:0:1:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [[{"cycleNumber":1,"stepDurations":[100,100,100]},{"cycleNumber":1,"stepDurations":[100,100,100]}]]
    Shrunk 14 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 0
    Received array:  []

      378 |
      379 |             // Property: Correct number of steps per cycle
    > 380 |             expect(stepEvents).toHaveLength(cycle.stepDurations.length);
          |                                ^
      381 |
      382 |             // Property: Durations match for each cycle
      383 |             for (let i = 0; i < cycle.stepDurations.length; i++) {

      at tests/cycleStepDuration.property.test.ts:380:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleStepDuration.property.test.ts:326:5)

FAIL tests/statsUpdatedBeforeStreamingRevenue.property.test.ts (9.244 s)
  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5: Stats updated before streaming revenue calculation

    Property failed after 1 tests
    { seed: 1159683976, path: "0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0,0,0,0,"bronze"]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).not.toBeNull()

    Received: null

      267 |           });
      268 |
    > 269 |           expect(battleCompleteEvent).not.toBeNull();
          |                                           ^
      270 |           const payload = battleCompleteEvent!.payload as any;
      271 |
      272 |           // Get updated robot stats from database

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:269:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:189:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.1: Battle count increments by exactly 1 per battle

    Property failed after 5 tests
    { seed: 991538798, path: "4:2:8:0:0:0:4:0", endOnFailure: true }
    Counterexample: [0,10691]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at processBattle (src/services/battleOrchestrator.ts:761:3)
      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:408:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:385:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.2: Winner fame increases after battle

    Property failed after 1 tests
    { seed: -1025564951, path: "0:0:0", endOnFailure: true }
    Counterexample: [0,"bronze"]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    TypeError: Cannot read properties of null (reading 'payload')

      485 |           });
      486 |
    > 487 |           const payload = battleCompleteEvent!.payload as any;
          |                                                ^
      488 |
      489 |           // Get updated robot stats
      490 |           const updatedRobot1 = await prisma.robot.findUnique({

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:487:48
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:438:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.3: Stats are always updated before streaming revenue calculation

    Property failed after 1 tests
    { seed: -234408839, path: "0:0:0", endOnFailure: true }
    Counterexample: [0,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at processBattle (src/services/battleOrchestrator.ts:761:3)
      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:549:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:526:5)

FAIL tests/cyclePerformanceMonitoring.test.ts
  ● Cycle Performance Monitoring Service › detectStepDegradation › should detect performance degradation when recent average exceeds 150% of baseline

    expect(received).not.toBeNull()

    Received: null

      54 |       const alert = await service.detectStepDegradation(stepName, 10, 100);
      55 |
    > 56 |       expect(alert).not.toBeNull();
         |                         ^
      57 |       expect(alert!.stepName).toBe(stepName);
      58 |       expect(alert!.currentAverageDuration).toBe(2000);
      59 |       expect(alert!.baselineAverageDuration).toBe(1000);

      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:56:25)

  ● Cycle Performance Monitoring Service › detectStepDegradation › should not detect degradation when recent average is within threshold

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:69:9)

  ● Cycle Performance Monitoring Service › detectStepDegradation › should return null when there is no baseline data

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:93:9)

  ● Cycle Performance Monitoring Service › detectStepDegradation › should classify degradation severity correctly

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:107:9)

  ● Cycle Performance Monitoring Service › detectAllStepDegradations › should detect degradation across multiple steps

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 0

      151 |       const alerts = await service.detectAllStepDegradations(10, 100);
      152 |
    > 153 |       expect(alerts.length).toBe(2); // Only step1 and step3 should be flagged
          |                             ^
      154 |       // Both have 100% degradation, so order may vary - just check both are present
      155 |       const stepNames = alerts.map(a => a.stepName);
      156 |       expect(stepNames).toContain('step1');

      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:153:29)

  ● Cycle Performance Monitoring Service › getCyclePerformanceMetrics › should calculate performance metrics for a cycle range

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:168:9)

  ● Cycle Performance Monitoring Service › getCyclePerformanceMetrics › should identify slowest steps

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:190:9)

  ● Cycle Performance Monitoring Service › getCycleExecutionTrend › should detect improving trend when recent cycles are faster

    No cycle data available

      356 |
      357 |     if (!latestCycle) {
    > 358 |       throw new Error('No cycle data available');
          |             ^
      359 |     }
      360 |
      361 |     const currentCycle = latestCycle.cycleNumber;

      at CyclePerformanceMonitoringService.getCycleExecutionTrend (src/services/cyclePerformanceMonitoringService.ts:358:13)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:250:21)

  ● Cycle Performance Monitoring Service › getCycleExecutionTrend › should detect degrading trend when recent cycles are slower

    Not enough cycle data for trend analysis

      380 |
      381 |     if (cycleEvents.length < 2) {
    > 382 |       throw new Error('Not enough cycle data for trend analysis');
          |             ^
      383 |     }
      384 |
      385 |     const durations = cycleEvents.map((e) => (e.payload as any).totalDuration as number);

      at CyclePerformanceMonitoringService.getCycleExecutionTrend (src/services/cyclePerformanceMonitoringService.ts:382:13)
      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:271:21)

FAIL tests/eventQueryability.property.test.ts (12.045 s)
  ● Property 5: Event Queryability › cycle range filtering returns only events within range

    Property failed after 1 tests
    { seed: 885584397, path: "0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [[1,1,1,1,1],1,1]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at tests/eventQueryability.property.test.ts:53:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:34:5)

  ● Property 5: Event Queryability › user filtering returns only events for that user

    Property failed after 2 tests
    { seed: -1979773952, path: "1:0:1:0:14:0:1:1:7:7:11:1:1:1:0:0:0:0:0:0:0:0:0:0:0:1:0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,[{"userId":1,"amount":0},{"userId":1,"amount":0},{"userId":1,"amount":0},{"userId":1,"amount":0},{"userId":1,"amount":0}]]
    Shrunk 33 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 1

      117 |           // Verify count matches
      118 |           const expectedCount = events.filter(e => e.userId === targetUserId).length;
    > 119 |           expect(result.events.length).toBe(expectedCount);
          |                                        ^
      120 |         }
      121 |       ),
      122 |       { numRuns: 30 }

      at tests/eventQueryability.property.test.ts:119:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:82:5)

  ● Property 5: Event Queryability › event type filtering returns only matching types

    Property failed after 1 tests
    { seed: 57542265, path: "0:0:1:0", endOnFailure: true }
    Counterexample: [["cycle_start"],5]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at tests/eventQueryability.property.test.ts:146:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:132:5)

  ● Property 5: Event Queryability › pagination returns correct subset

    Property failed after 1 tests
    { seed: -629045070, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [10,1,0]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 21

      208 |
      209 |           // Verify total count
    > 210 |           expect(result.total).toBe(totalEvents);
          |                                ^
      211 |         }
      212 |       ),
      213 |       { numRuns: 30 }

      at tests/eventQueryability.property.test.ts:210:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:180:5)

  ● Property 5: Event Queryability › sorting maintains order

    Property failed after 22 tests
    { seed: -265726314, path: "21", endOnFailure: true }
    Counterexample: [[16,16,13,7,16],"asc"]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at tests/eventQueryability.property.test.ts:236:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:223:5)

  ● Property 5: Event Queryability › combined filters are applied correctly

    Property failed after 3 tests
    { seed: -1498040472, path: "2:0:0:2:0:0:0:1:0:1:1:0:3:0:0:5:2:0:0:0:0:0:0:4:0:0:0:4:4", endOnFailure: true }
    Counterexample: [1,1,6,[{"cycle":1,"userId":1},{"cycle":4,"userId":5},{"cycle":1,"userId":2},{"cycle":1,"userId":1},{"cycle":1,"userId":1},{__proto__:null,"cycle":1,"userId":1},{"cycle":1,"userId":1},{__proto__:null,"cycle":1,"userId":1},{__proto__:null,"cycle":3,"userId":4},{"cycle":1,"userId":4}]]
    Shrunk 28 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 6
    Received: 1

      315 |               e.cycle <= rangeEnd
      316 |           ).length;
    > 317 |           expect(result.events.length).toBe(expectedCount);
          |                                        ^
      318 |         }
      319 |       ),
      320 |       { numRuns: 25 }

      at tests/eventQueryability.property.test.ts:317:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:268:5)

  ● Property 5: Event Queryability › empty result set handled correctly

    Property failed after 4 tests
    { seed: -1486533427, path: "3", endOnFailure: true }
    Counterexample: [1,106]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"cycleNumber": 106, "eventTimestamp": 2026-02-24T18:51:32.276Z, "eventType": "cycle_step_complete", "id": 6236n, "metadata": null, "payload": {"duration": 84, "stepName": "step_y", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 3, "userId": null}]

      345 |
      346 |           // Verify empty result
    > 347 |           expect(result.events).toHaveLength(0);
          |                                 ^
      348 |           expect(result.total).toBe(0);
      349 |           expect(result.hasMore).toBe(false);
      350 |         }

      at tests/eventQueryability.property.test.ts:347:33
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:330:5)

  ● Property 5: Event Queryability › count matches filtered results

    Property failed after 3 tests
    { seed: 1104883702, path: "2:9:9:4:1:18:0:14:16:7:3:3:0:6", endOnFailure: true }
    Counterexample: [[{__proto__:null,"cycle":6,"userId":5},{__proto__:null,"cycle":3,"userId":9},{"cycle":1,"userId":2},{"cycle":11,"userId":7},{"cycle":12,"userId":9},{"cycle":3,"userId":5},{__proto__:null,"cycle":9,"userId":7},{"cycle":1,"userId":1},{"cycle":20,"userId":2},{"cycle":10,"userId":4}],10]
    Shrunk 13 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCreditChange (src/services/eventLogger.ts:401:5)
      at tests/eventQueryability.property.test.ts:378:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/eventQueryability.property.test.ts:362:5)

FAIL tests/creditChangeAuditTrail.property.test.ts
  ● Property 3: Credit Change Audit Trail › sum of credit changes equals balance delta

    Property failed after 1 tests
    { seed: 1930274476, path: "0:6:1:0:0:1:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,1,0,[6]]
    Shrunk 10 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 6
    Received: 206

      76 |           const expectedDelta = currentBalance - startingBalance;
      77 |
    > 78 |           expect(sumOfChanges).toBe(expectedDelta);
         |                                ^
      79 |         }
      80 |       ),
      81 |       { numRuns: 30 }

      at tests/creditChangeAuditTrail.property.test.ts:78:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:33:5)

  ● Property 3: Credit Change Audit Trail › credit changes are recorded in order

    Property failed after 10 tests
    { seed: -1324785489, path: "9:0:1:0:1:0:0:0:0", endOnFailure: true }
    Counterexample: [1,1,0,[0,0]]
    Shrunk 8 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCreditChange (src/services/eventLogger.ts:401:5)
      at tests/creditChangeAuditTrail.property.test.ts:111:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:92:5)

  ● Property 3: Credit Change Audit Trail › multiple users tracked independently

    Property failed after 1 tests
    { seed: -948193635, path: "0:1:1:1:1:1:0:3:2:2:0:1:3:1:2:4:5:2:1:4:11:1:9", endOnFailure: true }
    Counterexample: [1,[{"userId":38,"startingBalance":0,"changes":[-462]},{__proto__:null,"userId":93,"startingBalance":6,"changes":[-106]}]]
    Shrunk 22 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: -462
    Received: 0

      263 |             }, 0);
      264 |
    > 265 |             expect(sumOfChanges).toBe(expectedDelta);
          |                                  ^
      266 |           }
      267 |         }
      268 |       ),

      at tests/creditChangeAuditTrail.property.test.ts:265:34
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:206:5)

  ● Property 3: Credit Change Audit Trail › credit changes across multiple cycles

    Property failed after 1 tests
    { seed: 74428971, path: "0:0:0:1:1:0:1:1:1:1:1:1:0:0:0:1:1:0:0:0:5:3:4:1:4:1:0:1:4:3:6:3:2", endOnFailure: true }
    Counterexample: [1,[{"cycleNumber":1,"startingBalance":0,"changes":[0,0]},{__proto__:null,"cycleNumber":1,"startingBalance":12994,"changes":[557,0]}]]
    Shrunk 32 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 557
    Received: 0

      337 |             }, 0);
      338 |
    > 339 |             expect(sumOfChanges).toBe(expectedDelta);
          |                                  ^
      340 |           }
      341 |         }
      342 |       ),

      at tests/creditChangeAuditTrail.property.test.ts:339:34
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:280:5)

  ● Property 3: Credit Change Audit Trail › credit source is preserved

    Property failed after 10 tests
    { seed: 229699560, path: "9:4:2:8:6:1:0:2:8:6:12:2:0:13:2:2:2:2:2:7:2:2:7", endOnFailure: true }
    Counterexample: [302,3,50186,[{__proto__:null,"amount":0,"source":"facility_purchase"},{"amount":1004,"source":"battle"},{__proto__:null,"amount":4183,"source":"battle"}]]
    Shrunk 22 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 1

      399 |           });
      400 |
    > 401 |           expect(events.length).toBe(changes.length);
          |                                 ^
      402 |
      403 |           for (let i = 0; i < events.length; i++) {
      404 |             const payload = events[i].payload as any;

      at tests/creditChangeAuditTrail.property.test.ts:401:33
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/creditChangeAuditTrail.property.test.ts:353:5)

FAIL tests/tagTeamLeagueInstance.property.test.ts
  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › no instance ever exceeds maximum capacity of 50 teams

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › new instance is created when 51st team would be added

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance assignment distributes teams correctly

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance capacity is enforced across all league tiers

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › assignTagTeamLeagueInstance never returns a full instance

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance numbers are sequential and start at 1

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › capacity enforcement works with concurrent team creation

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:57:26

      54 beforeEach(async () => {
      55   // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56   // This is necessary because getInstancesForTier counts ALL teams globally
    → 57   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      55 |     // Clean up ALL tag teams in ALL tiers to ensure test isolation
      56 |     // This is necessary because getInstancesForTier counts ALL teams globally
    > 57 |     await prisma.tagTeam.deleteMany({});
         |     ^
      58 |   });
      59 |
      60 |   afterEach(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:57:5)

FAIL tests/tagTeamLeagueRebalancing.test.ts
  ● Tag Team League Rebalancing › determinePromotions › should return empty array when fewer than 10 teams

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:131:28

      128 
      129 it('should return empty array when fewer than 10 teams', async () => {
      130   // Clean up any existing teams in bronze_1 from previous tests
    → 131   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      129 |     it('should return empty array when fewer than 10 teams', async () => {
      130 |       // Clean up any existing teams in bronze_1 from previous tests
    > 131 |       await prisma.tagTeam.deleteMany({
          |       ^
      132 |         where: { tagTeamLeagueId: 'bronze_1' },
      133 |       });
      134 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:131:7)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when no teams have 5+ cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:146:28

      143 
      144 it('should return empty array when no teams have 5+ cycles', async () => {
      145   // Clean up any existing teams in bronze_1 from previous tests
    → 146   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      144 |     it('should return empty array when no teams have 5+ cycles', async () => {
      145 |       // Clean up any existing teams in bronze_1 from previous tests
    > 146 |       await prisma.tagTeam.deleteMany({
          |       ^
      147 |         where: { tagTeamLeagueId: 'bronze_1' },
      148 |       });
      149 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:146:7)

  ● Tag Team League Rebalancing › determinePromotions › should promote top 10% of eligible teams with ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:161:28

      158 
      159 it('should promote top 10% of eligible teams with ≥25 league points', async () => {
      160   // Clean up any existing teams in bronze_1 from previous tests
    → 161   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      159 |     it('should promote top 10% of eligible teams with ≥25 league points', async () => {
      160 |       // Clean up any existing teams in bronze_1 from previous tests
    > 161 |       await prisma.tagTeam.deleteMany({
          |       ^
      162 |         where: { tagTeamLeagueId: 'bronze_1' },
      163 |       });
      164 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:161:7)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when no teams have ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:185:28

      182 
      183 it('should return empty array when no teams have ≥25 league points', async () => {
      184   // Clean up any existing teams in bronze_1 from previous tests
    → 185   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      183 |     it('should return empty array when no teams have ≥25 league points', async () => {
      184 |       // Clean up any existing teams in bronze_1 from previous tests
    > 185 |       await prisma.tagTeam.deleteMany({
          |       ^
      186 |         where: { tagTeamLeagueId: 'bronze_1' },
      187 |       });
      188 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:185:7)

  ● Tag Team League Rebalancing › determinePromotions › should exclude teams in excludeTeamIds set

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:200:28

      197 
      198 it('should exclude teams in excludeTeamIds set', async () => {
      199   // Clean up any existing teams in bronze_1 from previous tests
    → 200   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      198 |     it('should exclude teams in excludeTeamIds set', async () => {
      199 |       // Clean up any existing teams in bronze_1 from previous tests
    > 200 |       await prisma.tagTeam.deleteMany({
          |       ^
      201 |         where: { tagTeamLeagueId: 'bronze_1' },
      202 |       });
      203 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:200:7)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should handle empty league system

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28

      381 describe('rebalanceTagTeamLeagues', () => {
      382   beforeEach(async () => {
      383     // Clean up ALL teams before these tests since they count total teams
    → 384     await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      382 |     beforeEach(async () => {
      383 |       // Clean up ALL teams before these tests since they count total teams
    > 384 |       await prisma.tagTeam.deleteMany({});
          |       ^
      385 |     });
      386 |
      387 |     it('should handle empty league system', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should promote and demote teams across multiple tiers

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28

      381 describe('rebalanceTagTeamLeagues', () => {
      382   beforeEach(async () => {
      383     // Clean up ALL teams before these tests since they count total teams
    → 384     await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      382 |     beforeEach(async () => {
      383 |       // Clean up ALL teams before these tests since they count total teams
    > 384 |       await prisma.tagTeam.deleteMany({});
          |       ^
      385 |     });
      386 |
      387 |     it('should handle empty league system', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip tiers with insufficient teams

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28

      381 describe('rebalanceTagTeamLeagues', () => {
      382   beforeEach(async () => {
      383     // Clean up ALL teams before these tests since they count total teams
    → 384     await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      382 |     beforeEach(async () => {
      383 |       // Clean up ALL teams before these tests since they count total teams
    > 384 |       await prisma.tagTeam.deleteMany({});
          |       ^
      385 |     });
      386 |
      387 |     it('should handle empty league system', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip teams without 5+ cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28

      381 describe('rebalanceTagTeamLeagues', () => {
      382   beforeEach(async () => {
      383     // Clean up ALL teams before these tests since they count total teams
    → 384     await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      382 |     beforeEach(async () => {
      383 |       // Clean up ALL teams before these tests since they count total teams
    > 384 |       await prisma.tagTeam.deleteMany({});
          |       ^
      385 |     });
      386 |
      387 |     it('should handle empty league system', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)

FAIL tests/facilityAdvisorStreamingStudioROI.property.test.ts
  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21: Facility Advisor provides Streaming Studio ROI metrics

    Property failed after 1 tests
    { seed: 1697631905, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,1,0,0,5]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeDefined()

    Received: undefined

      292 |               // The service filters out recommendations with ROI <= 0 and priority === 'low'
      293 |               if (expectedROI > 0 || netBenefitPerCycle > expectedUpgradeCost / 30) {
    > 294 |                 expect(studioRec).toBeDefined();
          |                                   ^
      295 |               }
      296 |
      297 |               if (studioRec) {

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:294:35
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:196:5)

  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.2: Revenue increase per battle is calculated correctly

    Property failed after 1 tests
    { seed: 1167914915, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,100,1000,10]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeCloseTo(expected, precision)

    Expected: 2.93
    Received: 0.2

    Expected precision:    5
    Expected difference: < 0.000005
    Received difference:   2.73

      492 |             // Property: ROI should be calculated correctly
      493 |             const expectedROI = (expectedNetBenefitPerCycle * 30 - studioRec.upgradeCost) / studioRec.upgradeCost;
    > 494 |             expect(studioRec.projectedROI).toBeCloseTo(expectedROI, 5);
          |                                            ^
      495 |           }
      496 |         }
      497 |       ),

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:494:44
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:423:5)

  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.4: Operating cost increase reduces net benefit

    Property failed after 1 tests
    { seed: 664097257, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,100,1000,5]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toContain(expected) // indexOf

    Expected substring: "operating cost"
    Received string:    "Increases streaming revenue by 10% per battle (no battle history to estimate ROI)"

      596 |
      597 |             // Property: Reason should mention operating cost
    > 598 |             expect(studioRec.reason).toContain('operating cost');
          |                                      ^
      599 |             expect(studioRec.reason).toContain(`₡${operatingCostIncrease}`);
      600 |
      601 |             // Property: Operating cost should reduce the net benefit

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:598:38
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:549:5)

FAIL tests/facilityRecommendation.property.test.ts (14.73 s)
  ● Property 22: Investment Recommendation Ranking › Property 22.2: Only facilities with positive projected ROI are recommended

    Property failed after 1 tests
    { seed: -616409103, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [5,500000,2000]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      177 |           // Property: All recommendations should have positive ROI
      178 |           for (const recommendation of result.recommendations) {
    > 179 |             expect(recommendation.projectedROI).toBeGreaterThan(0);
          |                                                 ^
      180 |           }
      181 |         }
      182 |       ),

      at tests/facilityRecommendation.property.test.ts:179:49
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:129:5)

  ● Property 22: Investment Recommendation Ranking › Property 22.4: High activity users get more discount facility recommendations

    Property failed after 1 tests
    { seed: -97970124, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [50000,30000,20]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      307 |           // Discount facilities should have positive ROI
      308 |           for (const facility of discountFacilities) {
    > 309 |             expect(facility.projectedROI).toBeGreaterThan(0);
          |                                           ^
      310 |           }
      311 |         }
      312 |       ),

      at tests/facilityRecommendation.property.test.ts:309:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:235:5)

  ● Property 22: Investment Recommendation Ranking › Property 22.5: Recommendations include upgrade cost and payoff cycles

    Property failed after 1 tests
    { seed: -213407907, path: "0:0:0", endOnFailure: true }
    Counterexample: [10,2000000]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeTruthy()

    Received: ""

      371 |             
      372 |             // Should have a reason
    > 373 |             expect(recommendation.reason).toBeTruthy();
          |                                           ^
      374 |             expect(recommendation.reason.length).toBeGreaterThan(0);
      375 |             
      376 |             // Should have a priority

      at tests/facilityRecommendation.property.test.ts:373:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:318:5)

FAIL tests/tagTeamLeagueRebalancing.property.test.ts
  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › promotion resets league points and cycles to 0

    Property failed after 1 tests
    { seed: -723246990, path: "0:0:0:0", endOnFailure: true }
    Counterexample: ["bronze",1,1]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      155 |
      156 |             // Property: League points must be reset to 0
    > 157 |             expect(updatedTeam!.tagTeamLeaguePoints).toBe(0);
          |                                                      ^
      158 |
      159 |             // Property: Cycles counter must be reset to 0
      160 |             expect(updatedTeam!.cyclesInTagTeamLeague).toBe(0);

      at tests/tagTeamLeagueRebalancing.property.test.ts:157:54
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:132:7)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › demotion resets league points and cycles to 0

    Property failed after 1 tests
    { seed: -642308562, path: "0:0:0", endOnFailure: true }
    Counterexample: ["silver",1,1]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      196 |
      197 |             // Property: League points must be reset to 0
    > 198 |             expect(updatedTeam!.tagTeamLeaguePoints).toBe(0);
          |                                                      ^
      199 |
      200 |             // Property: Cycles counter must be reset to 0
      201 |             expect(updatedTeam!.cyclesInTagTeamLeague).toBe(0);

      at tests/tagTeamLeagueRebalancing.property.test.ts:198:54
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:173:7)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › tier change resets work across all valid tier transitions

    Property failed after 1 tests
    { seed: 1245050397, path: "0:1", endOnFailure: true }
    Counterexample: [{"action":"promote","tier":"bronze"},1,0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      247 |
      248 |             // Property: Both league points and cycles must be 0 after any tier change
    > 249 |             expect(updatedTeam!.tagTeamLeaguePoints).toBe(0);
          |                                                      ^
      250 |             expect(updatedTeam!.cyclesInTagTeamLeague).toBe(0);
      251 |
      252 |             // Property: Team should have moved to a different tier

      at tests/tagTeamLeagueRebalancing.property.test.ts:249:54
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:214:7)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › reset applies regardless of initial values magnitude

    Property failed after 1 tests
    { seed: -278674824, path: "0:0:1:0:0:0", endOnFailure: true }
    Counterexample: ["bronze",1,0]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      278 |
      279 |             // Property: Reset should work regardless of how large the initial values were
    > 280 |             expect(updatedTeam!.tagTeamLeaguePoints).toBe(0);
          |                                                      ^
      281 |             expect(updatedTeam!.cyclesInTagTeamLeague).toBe(0);
      282 |           }
      283 |         ),

      at tests/tagTeamLeagueRebalancing.property.test.ts:280:54
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:261:7)

FAIL tests/tagTeamLeagueInstanceService.test.ts
  ● TagTeamLeagueInstanceService › getInstancesForTier › should return empty array when no teams exist

    expect(received).toEqual(expected) // deep equality

    - Expected  -  1
    + Received  + 10

    - Array []
    + Array [
    +   Object {
    +     "currentTeams": 15,
    +     "instanceNumber": 1,
    +     "isFull": false,
    +     "leagueId": "bronze_1",
    +     "maxTeams": 50,
    +     "tier": "bronze",
    +   },
    + ]

      130 |     it('should return empty array when no teams exist', async () => {
      131 |       const instances = await getInstancesForTier('bronze');
    > 132 |       expect(instances).toEqual([]);
          |                         ^
      133 |     });
      134 |
      135 |     it('should return instances with correct team counts', async () => {

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:132:25)

  ● TagTeamLeagueInstanceService › getInstancesForTier › should return instances with correct team counts

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 16

      171 |       expect(instances).toHaveLength(2);
      172 |       expect(instances[0].leagueId).toBe('bronze_1');
    > 173 |       expect(instances[0].currentTeams).toBe(2);
          |                                         ^
      174 |       expect(instances[1].leagueId).toBe('bronze_2');
      175 |       expect(instances[1].currentTeams).toBe(1);
      176 |     });

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:173:41)

  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should not rebalance when instances are balanced

    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 12

      335 |       });
      336 |
    > 337 |       expect(instance1Teams).toBe(10);
          |                              ^
      338 |       expect(instance2Teams).toBe(10);
      339 |     });
      340 |

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:337:30)

  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should rebalance when deviation exceeds threshold

    expect(received).toBe(expected) // Object.is equality

    Expected: 43
    Received: 46

      382 |
      383 |       // Teams remain in original instances
    > 384 |       expect(instance1Teams).toBe(43);
          |                              ^
      385 |       expect(instance2Teams).toBe(2);
      386 |       expect(instance1Teams + instance2Teams).toBe(45);
      387 |     });

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:384:30)

  ● TagTeamLeagueInstanceService › getTeamsInInstance › should return teams sorted by league points

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 18
    Received array:  [{"activeRobot": {"elo": 1000, "id": 1915, "name": "Robot 2_1771959099631"}, "activeRobotId": 1915, "createdAt": 2026-02-24T18:51:39.655Z, "cyclesInTagTeamLeague": 0, "id": 638, "reserveRobot": {"elo": 1000, "id": 1916, "name": "Robot 3_1771959099632"}, "reserveRobotId": 1916, "stableId": 259, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 25, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.655Z}, {"activeRobot": {"elo": 1000, "id": 1919, "name": "Robot 4_1771959099632"}, "activeRobotId": 1919, "createdAt": 2026-02-24T18:51:39.658Z, "cyclesInTagTeamLeague": 0, "id": 639, "reserveRobot": {"elo": 1000, "id": 1918, "name": "Robot 5_1771959099632"}, "reserveRobotId": 1918, "stableId": 259, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 15, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.658Z}, {"activeRobot": {"elo": 1000, "id": 1914, "name": "Robot 0_1771959099631"}, "activeRobotId": 1914, "createdAt": 2026-02-24T18:51:39.639Z, "cyclesInTagTeamLeague": 0, "id": 635, "reserveRobot": {"elo": 1000, "id": 1917, "name": "Robot 1_1771959099631"}, "reserveRobotId": 1917, "stableId": 259, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 10, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.639Z}, {"activeRobot": {"elo": 1231, "id": 110, "name": "Two-Robot Alpha C000"}, "activeRobotId": 110, "createdAt": 2026-02-23T16:21:14.485Z, "cyclesInTagTeamLeague": 1, "id": 1, "reserveRobot": {"elo": 1156, "id": 111, "name": "Two-Robot Beta C000"}, "reserveRobotId": 111, "stableId": 117, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:32.397Z}, {"activeRobot": {"elo": 1200, "id": 1177, "name": "PBT_Elig1_1771959097372_0.37096954700756235"}, "activeRobotId": 1177, "createdAt": 2026-02-24T18:51:37.380Z, "cyclesInTagTeamLeague": 0, "id": 306, "reserveRobot": {"elo": 1200, "id": 1178, "name": "PBT_Elig2_1771959097376_0.4393392447671658"}, "reserveRobotId": 1178, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.380Z}, {"activeRobot": {"elo": 1200, "id": 1180, "name": "PBT_Elig1_1771959097381_0.05462207061092028"}, "activeRobotId": 1180, "createdAt": 2026-02-24T18:51:37.388Z, "cyclesInTagTeamLeague": 0, "id": 307, "reserveRobot": {"elo": 1200, "id": 1181, "name": "PBT_Elig2_1771959097385_0.5160533160070607"}, "reserveRobotId": 1181, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.388Z}, {"activeRobot": {"elo": 1200, "id": 1183, "name": "PBT_Elig1_1771959097392_0.9074418999552992"}, "activeRobotId": 1183, "createdAt": 2026-02-24T18:51:37.398Z, "cyclesInTagTeamLeague": 0, "id": 309, "reserveRobot": {"elo": 1200, "id": 1184, "name": "PBT_Elig2_1771959097394_0.500207891861727"}, "reserveRobotId": 1184, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.398Z}, {"activeRobot": {"elo": 1200, "id": 1227, "name": "PBT_Elig1_1771959097710_0.06859227972071769"}, "activeRobotId": 1227, "createdAt": 2026-02-24T18:51:37.716Z, "cyclesInTagTeamLeague": 0, "id": 326, "reserveRobot": {"elo": 1200, "id": 1228, "name": "PBT_Elig2_1771959097713_0.13093335459044697"}, "reserveRobotId": 1228, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.716Z}, {"activeRobot": {"elo": 1200, "id": 1230, "name": "PBT_Elig1_1771959097717_0.9991866125514247"}, "activeRobotId": 1230, "createdAt": 2026-02-24T18:51:37.722Z, "cyclesInTagTeamLeague": 0, "id": 328, "reserveRobot": {"elo": 1200, "id": 1231, "name": "PBT_Elig2_1771959097719_0.9071157232224021"}, "reserveRobotId": 1231, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.722Z}, {"activeRobot": {"elo": 1200, "id": 1233, "name": "PBT_Elig1_1771959097725_0.7754415056866972"}, "activeRobotId": 1233, "createdAt": 2026-02-24T18:51:37.730Z, "cyclesInTagTeamLeague": 0, "id": 330, "reserveRobot": {"elo": 1200, "id": 1235, "name": "PBT_Elig2_1771959097728_0.27657823658622105"}, "reserveRobotId": 1235, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.730Z}, …]

      428 |       const teams = await getTeamsInInstance('bronze_1');
      429 |
    > 430 |       expect(teams).toHaveLength(3);
          |                     ^
      431 |       expect(teams[0].tagTeamLeaguePoints).toBe(25);
      432 |       expect(teams[1].tagTeamLeaguePoints).toBe(15);
      433 |       expect(teams[2].tagTeamLeaguePoints).toBe(10);

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:430:21)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should return empty array when no teams exist

    expect(received).toEqual(expected) // deep equality

    - Expected  -   1
    + Received  + 380

    - Array []
    + Array [
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1177,
    +       "name": "PBT_Elig1_1771959097372_0.37096954700756235",
    +     },
    +     "activeRobotId": 1177,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.380Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 306,
    +     "rank": 1,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1178,
    +       "name": "PBT_Elig2_1771959097376_0.4393392447671658",
    +     },
    +     "reserveRobotId": 1178,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.380Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1180,
    +       "name": "PBT_Elig1_1771959097381_0.05462207061092028",
    +     },
    +     "activeRobotId": 1180,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.388Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 307,
    +     "rank": 2,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1181,
    +       "name": "PBT_Elig2_1771959097385_0.5160533160070607",
    +     },
    +     "reserveRobotId": 1181,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.388Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1183,
    +       "name": "PBT_Elig1_1771959097392_0.9074418999552992",
    +     },
    +     "activeRobotId": 1183,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.398Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 309,
    +     "rank": 3,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1184,
    +       "name": "PBT_Elig2_1771959097394_0.500207891861727",
    +     },
    +     "reserveRobotId": 1184,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.398Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1227,
    +       "name": "PBT_Elig1_1771959097710_0.06859227972071769",
    +     },
    +     "activeRobotId": 1227,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.716Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 326,
    +     "rank": 4,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1228,
    +       "name": "PBT_Elig2_1771959097713_0.13093335459044697",
    +     },
    +     "reserveRobotId": 1228,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.716Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1230,
    +       "name": "PBT_Elig1_1771959097717_0.9991866125514247",
    +     },
    +     "activeRobotId": 1230,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.722Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 328,
    +     "rank": 5,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1231,
    +       "name": "PBT_Elig2_1771959097719_0.9071157232224021",
    +     },
    +     "reserveRobotId": 1231,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.722Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1233,
    +       "name": "PBT_Elig1_1771959097725_0.7754415056866972",
    +     },
    +     "activeRobotId": 1233,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.730Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 330,
    +     "rank": 6,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1235,
    +       "name": "PBT_Elig2_1771959097728_0.27657823658622105",
    +     },
    +     "reserveRobotId": 1235,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.730Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1246,
    +       "name": "PBT_Elig1_1771959097783_0.0178882502269907",
    +     },
    +     "activeRobotId": 1246,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.789Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 335,
    +     "rank": 7,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1248,
    +       "name": "PBT_Elig2_1771959097786_0.5102029744394901",
    +     },
    +     "reserveRobotId": 1248,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.789Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1250,
    +       "name": "PBT_Elig1_1771959097792_0.7999893775061311",
    +     },
    +     "activeRobotId": 1250,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.798Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 337,
    +     "rank": 8,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1252,
    +       "name": "PBT_Elig2_1771959097795_0.16324572619291722",
    +     },
    +     "reserveRobotId": 1252,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.798Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1261,
    +       "name": "PBT_Elig1_1771959097861_0.5170042968174191",
    +     },
    +     "activeRobotId": 1261,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.865Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 341,
    +     "rank": 9,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1262,
    +       "name": "PBT_Elig2_1771959097863_0.4244293874202",
    +     },
    +     "reserveRobotId": 1262,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.865Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1276,
    +       "name": "PBT_Elig1_1771959097930_0.06716608712438321",
    +     },
    +     "activeRobotId": 1276,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.936Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 347,
    +     "rank": 10,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1277,
    +       "name": "PBT_Elig2_1771959097933_0.6076863883204697",
    +     },
    +     "reserveRobotId": 1277,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.936Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1303,
    +       "name": "PBT_Elig1_1771959098104_0.20858477854646285",
    +     },
    +     "activeRobotId": 1303,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:38.110Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 358,
    +     "rank": 11,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1304,
    +       "name": "PBT_Elig2_1771959098106_0.0924211021367577",
    +     },
    +     "reserveRobotId": 1304,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:38.110Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1320,
    +       "name": "PBT_Elig1_1771959098210_0.2048846589139287",
    +     },
    +     "activeRobotId": 1320,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:38.219Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 365,
    +     "rank": 12,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1321,
    +       "name": "PBT_Elig2_1771959098215_0.12778055827505597",
    +     },
    +     "reserveRobotId": 1321,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:38.219Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1711,
    +       "name": "PBT_Elig1_1771959099076_0.735504276361138",
    +     },
    +     "activeRobotId": 1711,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:39.082Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 522,
    +     "rank": 13,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1714,
    +       "name": "PBT_Elig2_1771959099079_0.3439915354733035",
    +     },
    +     "reserveRobotId": 1714,
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:39.082Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1231,
    +       "id": 110,
    +       "name": "Two-Robot Alpha C000",
    +     },
    +     "activeRobotId": 110,
    +     "combinedELO": 2387,
    +     "createdAt": 2026-02-23T16:21:14.485Z,
    +     "cyclesInTagTeamLeague": 1,
    +     "id": 1,
    +     "rank": 14,
    +     "reserveRobot": Object {
    +       "elo": 1156,
    +       "id": 111,
    +       "name": "Two-Robot Beta C000",
    +     },
    +     "reserveRobotId": 111,
    +     "stableId": 117,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:32.397Z,
    +   },
    + ]

      463 |     it('should return empty array when no teams exist', async () => {
      464 |       const standings = await getStandingsForInstance('bronze_1');
    > 465 |       expect(standings).toEqual([]);
          |                         ^
      466 |     });
      467 |
      468 |     it('should sort teams by league points descending', async () => {

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:465:25)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should sort teams by league points descending

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 18
    Received array:  [{"activeRobot": {"elo": 1000, "id": 1933, "name": "Robot 2_1771959099763"}, "activeRobotId": 1933, "combinedELO": 2000, "createdAt": 2026-02-24T18:51:39.773Z, "cyclesInTagTeamLeague": 0, "id": 644, "rank": 1, "reserveRobot": {"elo": 1000, "id": 1932, "name": "Robot 3_1771959099763"}, "reserveRobotId": 1932, "stableId": 262, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 25, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.773Z}, {"activeRobot": {"elo": 1000, "id": 1937, "name": "Robot 4_1771959099763"}, "activeRobotId": 1937, "combinedELO": 2000, "createdAt": 2026-02-24T18:51:39.776Z, "cyclesInTagTeamLeague": 0, "id": 645, "rank": 2, "reserveRobot": {"elo": 1000, "id": 1936, "name": "Robot 5_1771959099764"}, "reserveRobotId": 1936, "stableId": 262, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 15, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.776Z}, {"activeRobot": {"elo": 1000, "id": 1934, "name": "Robot 0_1771959099763"}, "activeRobotId": 1934, "combinedELO": 2000, "createdAt": 2026-02-24T18:51:39.771Z, "cyclesInTagTeamLeague": 0, "id": 643, "rank": 3, "reserveRobot": {"elo": 1000, "id": 1935, "name": "Robot 1_1771959099763"}, "reserveRobotId": 1935, "stableId": 262, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 10, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:39.771Z}, {"activeRobot": {"elo": 1200, "id": 1177, "name": "PBT_Elig1_1771959097372_0.37096954700756235"}, "activeRobotId": 1177, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.380Z, "cyclesInTagTeamLeague": 0, "id": 306, "rank": 4, "reserveRobot": {"elo": 1200, "id": 1178, "name": "PBT_Elig2_1771959097376_0.4393392447671658"}, "reserveRobotId": 1178, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.380Z}, {"activeRobot": {"elo": 1200, "id": 1180, "name": "PBT_Elig1_1771959097381_0.05462207061092028"}, "activeRobotId": 1180, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.388Z, "cyclesInTagTeamLeague": 0, "id": 307, "rank": 5, "reserveRobot": {"elo": 1200, "id": 1181, "name": "PBT_Elig2_1771959097385_0.5160533160070607"}, "reserveRobotId": 1181, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.388Z}, {"activeRobot": {"elo": 1200, "id": 1183, "name": "PBT_Elig1_1771959097392_0.9074418999552992"}, "activeRobotId": 1183, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.398Z, "cyclesInTagTeamLeague": 0, "id": 309, "rank": 6, "reserveRobot": {"elo": 1200, "id": 1184, "name": "PBT_Elig2_1771959097394_0.500207891861727"}, "reserveRobotId": 1184, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.398Z}, {"activeRobot": {"elo": 1200, "id": 1227, "name": "PBT_Elig1_1771959097710_0.06859227972071769"}, "activeRobotId": 1227, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.716Z, "cyclesInTagTeamLeague": 0, "id": 326, "rank": 7, "reserveRobot": {"elo": 1200, "id": 1228, "name": "PBT_Elig2_1771959097713_0.13093335459044697"}, "reserveRobotId": 1228, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.716Z}, {"activeRobot": {"elo": 1200, "id": 1230, "name": "PBT_Elig1_1771959097717_0.9991866125514247"}, "activeRobotId": 1230, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.722Z, "cyclesInTagTeamLeague": 0, "id": 328, "rank": 8, "reserveRobot": {"elo": 1200, "id": 1231, "name": "PBT_Elig2_1771959097719_0.9071157232224021"}, "reserveRobotId": 1231, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.722Z}, {"activeRobot": {"elo": 1200, "id": 1233, "name": "PBT_Elig1_1771959097725_0.7754415056866972"}, "activeRobotId": 1233, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.730Z, "cyclesInTagTeamLeague": 0, "id": 330, "rank": 9, "reserveRobot": {"elo": 1200, "id": 1235, "name": "PBT_Elig2_1771959097728_0.27657823658622105"}, "reserveRobotId": 1235, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.730Z}, {"activeRobot": {"elo": 1200, "id": 1246, "name": "PBT_Elig1_1771959097783_0.0178882502269907"}, "activeRobotId": 1246, "combinedELO": 2400, "createdAt": 2026-02-24T18:51:37.789Z, "cyclesInTagTeamLeague": 0, "id": 335, "rank": 10, "reserveRobot": {"elo": 1200, "id": 1248, "name": "PBT_Elig2_1771959097786_0.5102029744394901"}, "reserveRobotId": 1248, "stableId": 173, "tagTeamLeague": "bronze", "tagTeamLeagueId": "bronze_1", "tagTeamLeaguePoints": 0, "totalTagTeamDraws": 0, "totalTagTeamLosses": 0, "totalTagTeamWins": 0, "updatedAt": 2026-02-24T18:51:37.789Z}, …]

      505 |       const standings = await getStandingsForInstance('bronze_1');
      506 |
    > 507 |       expect(standings).toHaveLength(3);
          |                         ^
      508 |       expect(standings[0].tagTeamLeaguePoints).toBe(25);
      509 |       expect(standings[0].rank).toBe(1);
      510 |       expect(standings[1].tagTeamLeaguePoints).toBe(15);

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:507:25)

  ● TagTeamLeagueInstanceService › getStandingsForTier › should return empty array when no teams exist

    expect(received).toEqual(expected) // deep equality

    - Expected  -   1
    + Received  + 452

    - Array []
    + Array [
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1177,
    +       "name": "PBT_Elig1_1771959097372_0.37096954700756235",
    +     },
    +     "activeRobotId": 1177,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.380Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 306,
    +     "rank": 1,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1178,
    +       "name": "PBT_Elig2_1771959097376_0.4393392447671658",
    +     },
    +     "reserveRobotId": 1178,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.380Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1180,
    +       "name": "PBT_Elig1_1771959097381_0.05462207061092028",
    +     },
    +     "activeRobotId": 1180,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.388Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 307,
    +     "rank": 2,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1181,
    +       "name": "PBT_Elig2_1771959097385_0.5160533160070607",
    +     },
    +     "reserveRobotId": 1181,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.388Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1183,
    +       "name": "PBT_Elig1_1771959097392_0.9074418999552992",
    +     },
    +     "activeRobotId": 1183,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.398Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 309,
    +     "rank": 3,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1184,
    +       "name": "PBT_Elig2_1771959097394_0.500207891861727",
    +     },
    +     "reserveRobotId": 1184,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.398Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1227,
    +       "name": "PBT_Elig1_1771959097710_0.06859227972071769",
    +     },
    +     "activeRobotId": 1227,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.716Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 326,
    +     "rank": 4,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1228,
    +       "name": "PBT_Elig2_1771959097713_0.13093335459044697",
    +     },
    +     "reserveRobotId": 1228,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.716Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1230,
    +       "name": "PBT_Elig1_1771959097717_0.9991866125514247",
    +     },
    +     "activeRobotId": 1230,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.722Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 328,
    +     "rank": 5,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1231,
    +       "name": "PBT_Elig2_1771959097719_0.9071157232224021",
    +     },
    +     "reserveRobotId": 1231,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.722Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1233,
    +       "name": "PBT_Elig1_1771959097725_0.7754415056866972",
    +     },
    +     "activeRobotId": 1233,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.730Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 330,
    +     "rank": 6,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1235,
    +       "name": "PBT_Elig2_1771959097728_0.27657823658622105",
    +     },
    +     "reserveRobotId": 1235,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.730Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1246,
    +       "name": "PBT_Elig1_1771959097783_0.0178882502269907",
    +     },
    +     "activeRobotId": 1246,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.789Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 335,
    +     "rank": 7,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1248,
    +       "name": "PBT_Elig2_1771959097786_0.5102029744394901",
    +     },
    +     "reserveRobotId": 1248,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.789Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1250,
    +       "name": "PBT_Elig1_1771959097792_0.7999893775061311",
    +     },
    +     "activeRobotId": 1250,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.798Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 337,
    +     "rank": 8,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1252,
    +       "name": "PBT_Elig2_1771959097795_0.16324572619291722",
    +     },
    +     "reserveRobotId": 1252,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.798Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1261,
    +       "name": "PBT_Elig1_1771959097861_0.5170042968174191",
    +     },
    +     "activeRobotId": 1261,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.865Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 341,
    +     "rank": 9,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1262,
    +       "name": "PBT_Elig2_1771959097863_0.4244293874202",
    +     },
    +     "reserveRobotId": 1262,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.865Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1276,
    +       "name": "PBT_Elig1_1771959097930_0.06716608712438321",
    +     },
    +     "activeRobotId": 1276,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:37.936Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 347,
    +     "rank": 10,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1277,
    +       "name": "PBT_Elig2_1771959097933_0.6076863883204697",
    +     },
    +     "reserveRobotId": 1277,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:37.936Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1303,
    +       "name": "PBT_Elig1_1771959098104_0.20858477854646285",
    +     },
    +     "activeRobotId": 1303,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:38.110Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 358,
    +     "rank": 11,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1304,
    +       "name": "PBT_Elig2_1771959098106_0.0924211021367577",
    +     },
    +     "reserveRobotId": 1304,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:38.110Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1320,
    +       "name": "PBT_Elig1_1771959098210_0.2048846589139287",
    +     },
    +     "activeRobotId": 1320,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:38.219Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 365,
    +     "rank": 12,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1321,
    +       "name": "PBT_Elig2_1771959098215_0.12778055827505597",
    +     },
    +     "reserveRobotId": 1321,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:38.219Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1711,
    +       "name": "PBT_Elig1_1771959099076_0.735504276361138",
    +     },
    +     "activeRobotId": 1711,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:39.082Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 522,
    +     "rank": 13,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1714,
    +       "name": "PBT_Elig2_1771959099079_0.3439915354733035",
    +     },
    +     "reserveRobotId": 1714,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:39.082Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1200,
    +       "id": 1955,
    +       "name": "PBT_Elig1_1771959099865_0.5313864820958458",
    +     },
    +     "activeRobotId": 1955,
    +     "combinedELO": 2400,
    +     "createdAt": 2026-02-24T18:51:39.874Z,
    +     "cyclesInTagTeamLeague": 0,
    +     "id": 649,
    +     "rank": 14,
    +     "reserveRobot": Object {
    +       "elo": 1200,
    +       "id": 1956,
    +       "name": "PBT_Elig2_1771959099870_0.7602703808627449",
    +     },
    +     "reserveRobotId": 1956,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 173,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:39.874Z,
    +   },
    +   Object {
    +     "activeRobot": Object {
    +       "elo": 1231,
    +       "id": 110,
    +       "name": "Two-Robot Alpha C000",
    +     },
    +     "activeRobotId": 110,
    +     "combinedELO": 2387,
    +     "createdAt": 2026-02-23T16:21:14.485Z,
    +     "cyclesInTagTeamLeague": 1,
    +     "id": 1,
    +     "rank": 15,
    +     "reserveRobot": Object {
    +       "elo": 1156,
    +       "id": 111,
    +       "name": "Two-Robot Beta C000",
    +     },
    +     "reserveRobotId": 111,
    +     "stable": Object {
    +       "stableName": null,
    +     },
    +     "stableId": 117,
    +     "tagTeamLeague": "bronze",
    +     "tagTeamLeagueId": "bronze_1",
    +     "tagTeamLeaguePoints": 0,
    +     "totalTagTeamDraws": 0,
    +     "totalTagTeamLosses": 0,
    +     "totalTagTeamWins": 0,
    +     "updatedAt": 2026-02-24T18:51:32.397Z,
    +   },
    + ]

      617 |     it('should return empty array when no teams exist', async () => {
      618 |       const standings = await getStandingsForTier('bronze');
    > 619 |       expect(standings).toEqual([]);
          |                         ^
      620 |     });
      621 |
      622 |     it('should include teams from all instances in the tier', async () => {

      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:619:25)

FAIL tests/roiCalculatorService.test.ts
  ● ROICalculatorService › calculateFacilityROI › should calculate breakeven cycle when facility becomes profitable

    expect(received).not.toBeNull()

    Received: null

      338 |       );
      339 |
    > 340 |       expect(roi).not.toBeNull();
          |                       ^
      341 |       expect(roi!.totalInvestment).toBe(900000); // 150k + 300k + 450k
      342 |       expect(roi!.totalReturns).toBe(1500000); // (12000 + 3000) * 100 cycles
      343 |       expect(roi!.totalOperatingCosts).toBe(800000); // 8000 * 100 cycles

      at Object.<anonymous> (tests/roiCalculatorService.test.ts:340:23)

FAIL tests/cycleSummaryStreamingRevenue.property.test.ts (16.959 s)
  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should include totalStreamingRevenue property in battle execution summary

    Property failed after 5 tests
    { seed: 1534356569, path: "4", endOnFailure: true }
    Counterexample: [{"robot1Battles":4,"robot1Fame":1,"robot2Battles":496,"robot2Fame":3,"studioLevel1":6,"studioLevel2":6}]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:275:30

      272   },
      273 });
      274 await prisma.scheduledMatch.deleteMany({ where: { id: match.id } });
    → 275 await prisma.robot.deleteMany(
    Foreign key constraint violated: `battles_robot1_id_fkey (index)`

      273 |           });
      274 |           await prisma.scheduledMatch.deleteMany({ where: { id: match.id } });
    > 275 |           await prisma.robot.deleteMany({ where: { id: robot1.id } });
          |           ^
      276 |           await prisma.robot.deleteMany({ where: { id: robot2.id } });
      277 |         }
      278 |       ),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/cycleSummaryStreamingRevenue.property.test.ts:275:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:177:5)

FAIL tests/integration/tagTeamMultiMatchCycle.test.ts
  ● Tag Team Multi-Match Cycle Integration Test › should handle robot in both 1v1 and tag team match with cumulative damage

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:80:26

      77     robot1Id: { in: testRobotIds },
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_reserve_robot_id_fkey (index)`

      78 |         },
      79 |       });
    > 80 |       await prisma.robot.deleteMany({
         |       ^
      81 |         where: { id: { in: testRobotIds } },
      82 |       });
      83 |     }

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:80:7)

  ● Tag Team Multi-Match Cycle Integration Test › should exclude unready robots from tag team match after 1v1 damage

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:346:24

      343 await prisma.tagTeam.deleteMany({
      344   where: { id: { in: [team1.team!.id, team2.team!.id] } },
      345 });
    → 346 await prisma.robot.deleteMany(
    Foreign key constraint violated: `battles_robot2_id_fkey (index)`

      344 |       where: { id: { in: [team1.team!.id, team2.team!.id] } },
      345 |     });
    > 346 |     await prisma.robot.deleteMany({
          |     ^
      347 |       where: { id: { in: robots.map(r => r.id) } },
      348 |     });
      349 |     await prisma.weaponInventory.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:346:5)

  ● Tag Team Multi-Match Cycle Integration Test › should exclude unready robots from tag team match after 1v1 damage

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:80:26

      77     robot1Id: { in: testRobotIds },
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_reserve_robot_id_fkey (index)`

      78 |         },
      79 |       });
    > 80 |       await prisma.robot.deleteMany({
         |       ^
      81 |         where: { id: { in: testRobotIds } },
      82 |       });
      83 |     }

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:80:7)

  ● Tag Team Multi-Match Cycle Integration Test › should process matches in correct order: 1v1 first, then tag team

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:80:26

      77     robot1Id: { in: testRobotIds },
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_reserve_robot_id_fkey (index)`

      78 |         },
      79 |       });
    > 80 |       await prisma.robot.deleteMany({
         |       ^
      81 |         where: { id: { in: testRobotIds } },
      82 |       });
      83 |     }

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:80:7)

FAIL tests/queryService.test.ts
  ● QueryService › queryEvents › should query events by robot ID

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logAttributeUpgrade (src/services/eventLogger.ts:488:5)
      at Object.<anonymous> (tests/queryService.test.ts:94:7)

  ● QueryService › queryEvents › should query events by event type

    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at Object.<anonymous> (tests/queryService.test.ts:109:7)

  ● QueryService › queryEvents › should support pagination with limit and offset

    expect(received).toBe(expected) // Object.is equality

    Expected: 10
    Received: 26

      151 |       const page1 = await queryService.queryEvents({ limit: 5, offset: 0 });
      152 |       expect(page1.events).toHaveLength(5);
    > 153 |       expect(page1.total).toBe(10);
          |                           ^
      154 |       expect(page1.hasMore).toBe(true);
      155 |
      156 |       // Get second page (5 events)

      at Object.<anonymous> (tests/queryService.test.ts:153:27)

  ● QueryService › queryEvents › should support sorting by timestamp

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 15
    Received array:  [{"cycleNumber": 71, "eventTimestamp": 2026-02-24T18:51:41.698Z, "eventType": "cycle_step_complete", "id": 15087n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 3, "eventTimestamp": 2026-02-24T18:51:41.696Z, "eventType": "cycle_start", "id": 15086n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.696Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 4, "userId": null}, {"cycleNumber": 70, "eventTimestamp": 2026-02-24T18:51:41.695Z, "eventType": "cycle_step_complete", "id": 15085n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 69, "eventTimestamp": 2026-02-24T18:51:41.693Z, "eventType": "cycle_step_complete", "id": 15084n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.690Z, "eventType": "facility_upgrade", "id": 15083n, "metadata": null, "payload": {"action": "upgrade", "balanceAfter": 9700000, "balanceBefore": 9900000, "cost": 200000, "facilityType": "streaming_studio", "newLevel": 2, "oldLevel": 1}, "robotId": null, "sequenceNumber": 627, "userId": 310}, {"cycleNumber": 68, "eventTimestamp": 2026-02-24T18:51:41.689Z, "eventType": "cycle_step_complete", "id": 15082n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 67, "eventTimestamp": 2026-02-24T18:51:41.686Z, "eventType": "cycle_step_complete", "id": 15081n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 2, "eventTimestamp": 2026-02-24T18:51:41.683Z, "eventType": "cycle_start", "id": 15080n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.683Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 4, "userId": null}, {"cycleNumber": 66, "eventTimestamp": 2026-02-24T18:51:41.682Z, "eventType": "cycle_step_complete", "id": 15079n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 65, "eventTimestamp": 2026-02-24T18:51:41.679Z, "eventType": "cycle_step_complete", "id": 15078n, "metadata": null, "payload": {"duration": 2994, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 1, "userId": null}, …]

      179 |       });
      180 |
    > 181 |       expect(result.events).toHaveLength(3);
          |                             ^
      182 |       expect(result.events[0].cycleNumber).toBe(3);
      183 |       expect(result.events[2].cycleNumber).toBe(1);
      184 |     });

      at Object.<anonymous> (tests/queryService.test.ts:181:29)

  ● QueryService › getEventsByCycle › should get all events for a specific cycle

    expect(received).toHaveLength(expected)

    Expected length: 3
    Received length: 4
    Received array:  [{"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.725Z, "eventType": "cycle_start", "id": 15101n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.725Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 4, "userId": null}, {"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.727Z, "eventType": "cycle_step_complete", "id": 15103n, "metadata": null, "payload": {"duration": 100, "stepName": "step_1", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 5, "userId": null}, {"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.729Z, "eventType": "cycle_complete", "id": 15104n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.729Z", "totalDuration": 100}, "robotId": null, "sequenceNumber": 6, "userId": null}, {"cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:41.730Z, "eventType": "facility_purchase", "id": 15105n, "metadata": null, "payload": {"action": "purchase", "balanceAfter": 9900000, "balanceBefore": 10000000, "cost": 100000, "facilityType": "streaming_studio", "newLevel": 1, "oldLevel": 0}, "robotId": null, "sequenceNumber": 629, "userId": 310}]

      221 |       const events = await queryService.getEventsByCycle(1);
      222 |
    > 223 |       expect(events).toHaveLength(3);
          |                      ^
      224 |       expect(events.every(e => e.cycleNumber === 1)).toBe(true);
      225 |     });
      226 |   });

      at Object.<anonymous> (tests/queryService.test.ts:223:22)

  ● QueryService › getPaginatedEvents › should paginate events correctly

    expect(received).toHaveLength(expected)

    Expected length: 10
    Received length: 9
    Received array:  [{"cycleNumber": 6, "eventTimestamp": 2026-02-24T18:51:41.896Z, "eventType": "cycle_step_complete", "id": 15201n, "metadata": null, "payload": {"duration": 100, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 3, "userId": null}, {"cycleNumber": 7, "eventTimestamp": 2026-02-24T18:51:41.898Z, "eventType": "cycle_step_complete", "id": 15202n, "metadata": null, "payload": {"duration": 100, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 2, "userId": null}, {"cycleNumber": 8, "eventTimestamp": 2026-02-24T18:51:41.900Z, "eventType": "cycle_step_complete", "id": 15203n, "metadata": null, "payload": {"duration": 100, "stepName": "step_2", "stepNumber": 1, "summary": {}}, "robotId": null, "sequenceNumber": 2, "userId": null}, {"cycleNumber": 20, "eventTimestamp": 2026-02-24T18:51:41.880Z, "eventType": "cycle_start", "id": 15185n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.878Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 21, "eventTimestamp": 2026-02-24T18:51:41.883Z, "eventType": "cycle_start", "id": 15187n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.881Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 22, "eventTimestamp": 2026-02-24T18:51:41.886Z, "eventType": "cycle_start", "id": 15190n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.885Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 23, "eventTimestamp": 2026-02-24T18:51:41.888Z, "eventType": "cycle_start", "id": 15194n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.887Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 24, "eventTimestamp": 2026-02-24T18:51:41.892Z, "eventType": "cycle_start", "id": 15197n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.890Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"cycleNumber": 25, "eventTimestamp": 2026-02-24T18:51:41.895Z, "eventType": "cycle_start", "id": 15200n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:41.893Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}]

      310 |       // Get page 2
      311 |       const page2 = await queryService.getPaginatedEvents({}, 2, 10);
    > 312 |       expect(page2.events).toHaveLength(10);
          |                            ^
      313 |       expect(page2.hasMore).toBe(true);
      314 |
      315 |       // Get page 3

      at Object.<anonymous> (tests/queryService.test.ts:312:28)

  ● QueryService › getEventStatistics › should calculate event statistics

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 8

      338 |       const stats = await queryService.getEventStatistics([1, 2]);
      339 |
    > 340 |       expect(stats.totalEvents).toBe(5);
          |                                 ^
      341 |       expect(stats.eventsByType['cycle_start']).toBe(2);
      342 |       expect(stats.eventsByType['credit_change']).toBe(2);
      343 |       expect(stats.eventsByType['attribute_upgrade']).toBe(1);

      at Object.<anonymous> (tests/queryService.test.ts:340:33)

  ● QueryService › getRecentEvents › should get most recent events

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 23

      362 |
      363 |       expect(recent).toHaveLength(3);
    > 364 |       expect(recent[0].cycleNumber).toBe(5); // Most recent first
          |                                     ^
      365 |       expect(recent[2].cycleNumber).toBe(3);
      366 |     });
      367 |   });

      at Object.<anonymous> (tests/queryService.test.ts:364:37)

FAIL tests/trainingAcademyCaps.test.ts
  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should allow upgrading combatPower to level 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 400

      83 |           });
      84 |
    > 85 |         expect(response.status).toBe(200);
         |                                 ^
      86 |       }
      87 |
      88 |       // Verify the robot is at level 10

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:85:33)

  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should block upgrading combatPower from level 10 to level 11 without academy

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      106 |         .send({ attribute: 'combatPower' });
      107 |
    > 108 |       expect(response.status).toBe(400);
          |                               ^
      109 |       expect(response.body.error).toContain('Attribute cap of 10 reached');
      110 |       expect(response.body.error).toContain('Combat Training Academy');
      111 |     });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:108:31)

  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should allow upgrading combatPower to level 15 with academy level 1

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      137 |         .send({ attribute: 'combatPower' });
      138 |
    > 139 |       expect(response.status).toBe(200);
          |                               ^
      140 |
      141 |       // Verify the robot is at level 15
      142 |       const robot = await prisma.robot.findUnique({

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:139:31)

  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should block upgrading combatPower from level 15 to level 16

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      159 |         .send({ attribute: 'combatPower' });
      160 |
    > 161 |       expect(response.status).toBe(400);
          |                               ^
      162 |       expect(response.body.error).toContain('Attribute cap of 15 reached');
      163 |       expect(response.body.error).toContain('Combat Training Academy');
      164 |     });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:161:31)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Combat Training Academy for Combat Systems attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      189 |           .send({ attribute });
      190 |
    > 191 |         expect(response.status).toBe(400);
          |                                 ^
      192 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      193 |         expect(response.body.error).toContain('Combat Training Academy');
      194 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:191:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Defense Training Academy for Defensive Systems attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      217 |           .send({ attribute });
      218 |
    > 219 |         expect(response.status).toBe(400);
          |                                 ^
      220 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      221 |         expect(response.body.error).toContain('Defense Training Academy');
      222 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:219:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Mobility Training Academy for Chassis & Mobility attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      245 |           .send({ attribute });
      246 |
    > 247 |         expect(response.status).toBe(400);
          |                                 ^
      248 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      249 |         expect(response.body.error).toContain('Mobility Training Academy');
      250 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:247:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce AI Training Academy for AI Processing + Team attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      275 |           .send({ attribute });
      276 |
    > 277 |         expect(response.status).toBe(400);
          |                                 ^
      278 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      279 |         expect(response.body.error).toContain('AI Training Academy');
      280 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:277:33)

  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should allow upgrading combatPower to level 50 with academy level 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      307 |         .send({ attribute: 'combatPower' });
      308 |
    > 309 |       expect(response.status).toBe(200);
          |                               ^
      310 |
      311 |       // Verify the robot is at level 50
      312 |       const robot = await prisma.robot.findUnique({

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:309:31)

  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should block upgrading combatPower from level 50 to level 51

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      329 |         .send({ attribute: 'combatPower' });
      330 |
    > 331 |       expect(response.status).toBe(400);
          |                               ^
      332 |       expect(response.body.error).toContain('maximum level');
      333 |     });
      334 |   });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:331:31)

FAIL tests/integration/tagTeamAutoRepair.test.ts
  ● Tag Team Auto-Repair Integration Test › should auto-repair damaged robots before battle and deduct costs

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

      229 |     
      230 |     const battleResult = await executeScheduledTagTeamBattles();
    > 231 |     expect(battleResult.totalBattles).toBe(1);
          |                                       ^
      232 |     expect(battleResult.skippedDueToUnreadyRobots).toBe(0);
      233 |
      234 |     console.log('[Test] Step 6: Verifying repairs and currency deduction...');

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:231:39)

  ● Tag Team Auto-Repair Integration Test › should allow users to go into negative currency for repairs

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

      353 |     
      354 |     const battleResult = await executeScheduledTagTeamBattles();
    > 355 |     expect(battleResult.totalBattles).toBe(1);
          |                                       ^
      356 |     expect(battleResult.skippedDueToUnreadyRobots).toBe(0);
      357 |
      358 |     console.log('[Test] Step 4: Verifying user went into negative currency...');

      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:355:39)

FAIL tests/battleEventLogging.test.ts


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:112:24

      109 await prisma.battleParticipant.deleteMany({});
      110 await prisma.battle.deleteMany({});
      111 await prisma.scheduledMatch.deleteMany({});
    → 112 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      110 |     await prisma.battle.deleteMany({});
      111 |     await prisma.scheduledMatch.deleteMany({});
    > 112 |     await prisma.robot.deleteMany({});
          |     ^
      113 |     await prisma.user.deleteMany({});
      114 |
      115 |     await prisma.$disconnect();

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:112:5)

FAIL tests/tagTeams.test.ts
  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject duplicate team creation

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 201

      198 |         });
      199 |
    > 200 |       expect(response.status).toBe(400);
          |                               ^
      201 |       // System now validates that robots aren't already in teams
      202 |       expect(response.body.details).toBeDefined();
      203 |     });

      at Object.<anonymous> (tests/tagTeams.test.ts:200:31)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should list all teams for the user

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      213 |       expect(response.body.teams).toBeDefined();
      214 |       expect(Array.isArray(response.body.teams)).toBe(true);
    > 215 |       expect(response.body.teams.length).toBeGreaterThan(0);
          |                                          ^
      216 |       expect(response.body.total).toBe(response.body.teams.length);
      217 |     });
      218 |

      at Object.<anonymous> (tests/tagTeams.test.ts:215:42)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should include robot details and readiness status

    TypeError: Cannot read properties of undefined (reading 'activeRobot')

      224 |       expect(response.status).toBe(200);
      225 |       const team = response.body.teams[0];
    > 226 |       expect(team.activeRobot).toBeDefined();
          |                   ^
      227 |       expect(team.reserveRobot).toBeDefined();
      228 |       expect(team.readiness).toBeDefined();
      229 |       expect(team.readiness.isReady).toBeDefined();

      at Object.<anonymous> (tests/tagTeams.test.ts:226:19)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

FAIL tests/eventLogger.test.ts
  ● EventLogger Service › Cycle Event Helpers › should log cycle complete event and clear cache

    expect(received).not.toBeNull()

    Received: null

      222 |       });
      223 |
    > 224 |       expect(event).not.toBeNull();
          |                         ^
      225 |       expect(event!.payload).toHaveProperty('totalDuration', 5000);
      226 |       expect(event!.payload).toHaveProperty('timestamp');
      227 |     });

      at Object.<anonymous> (tests/eventLogger.test.ts:224:25)

  ● EventLogger Service › Sequence Number Management › should maintain separate sequence numbers per cycle

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 127

      484 |
      485 |       // Both cycles should start at sequence 1
    > 486 |       expect(cycle1Events[0].sequenceNumber).toBe(1);
          |                                              ^
      487 |       expect(cycle1Events[1].sequenceNumber).toBe(2);
      488 |       expect(cycle2Events[0].sequenceNumber).toBe(1);
      489 |       expect(cycle2Events[1].sequenceNumber).toBe(2);

      at Object.<anonymous> (tests/eventLogger.test.ts:486:46)

FAIL tests/tagTeamService.test.ts
  ● TagTeamService › validateTeam › should reject robots from different stables

    expect(received).toContain(expected) // indexOf

    Expected value: "Robots must be from the same stable"
    Received array: ["Active robot not found", "Reserve robot not found"]

      257 |       const result = await validateTeam(testRobot1Id, otherRobotId);
      258 |       expect(result.isValid).toBe(false);
    > 259 |       expect(result.errors).toContain('Robots must be from the same stable');
          |                             ^
      260 |     });
      261 |
      262 |     it('should reject team with unready robot (low HP)', async () => {

      at Object.<anonymous> (tests/tagTeamService.test.ts:259:29)

  ● TagTeamService › validateTeam › should reject team with unready robot (low HP)

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:265:54

      262 it('should reject team with unready robot (low HP)', async () => {
      263   // Create a robot with low HP for this test
      264   const weapon = await prisma.weapon.findFirst();
    → 265   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      263 |       // Create a robot with low HP for this test
      264 |       const weapon = await prisma.weapon.findFirst();
    > 265 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      266 |         data: { userId: testUserId, weaponId: weapon!.id },
      267 |       });
      268 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamService.test.ts:265:25)

  ● TagTeamService › validateTeam › should reject duplicate teams

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      294 |       // Create a team first
      295 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 296 |       expect(createResult.success).toBe(true);
          |                                    ^
      297 |
      298 |       // Try to create the same team again
      299 |       const result = await validateTeam(testRobot1Id, testRobot2Id);

      at Object.<anonymous> (tests/tagTeamService.test.ts:296:36)

  ● TagTeamService › validateTeam › should reject duplicate teams in reverse order

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      307 |       // Create a team
      308 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 309 |       expect(createResult.success).toBe(true);
          |                                    ^
      310 |
      311 |       // Try to create the same team with reversed positions
      312 |       const result = await validateTeam(testRobot2Id, testRobot1Id);

      at Object.<anonymous> (tests/tagTeamService.test.ts:309:36)

  ● TagTeamService › validateTeam › should enforce roster limit (max teams = roster size / 2)

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      321 |       // Create 2 teams
      322 |       const team1 = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 323 |       expect(team1.success).toBe(true);
          |                             ^
      324 |       
      325 |       const team2 = await createTeam(testUserId, testRobot3Id, testRobot4Id);
      326 |       expect(team2.success).toBe(true);

      at Object.<anonymous> (tests/tagTeamService.test.ts:323:29)

  ● TagTeamService › createTeam › should create a valid team

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      337 |       const result = await createTeam(testUserId, testRobot1Id, testRobot2Id);
      338 |
    > 339 |       expect(result.success).toBe(true);
          |                              ^
      340 |       expect(result.team).toBeDefined();
      341 |       expect(result.team!.stableId).toBe(testUserId);
      342 |       expect(result.team!.activeRobotId).toBe(testRobot1Id);

      at Object.<anonymous> (tests/tagTeamService.test.ts:339:30)

  ● TagTeamService › createTeam › should place new teams in Bronze league with initial values

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      352 |       const result = await createTeam(testUserId, testRobot1Id, testRobot2Id);
      353 |
    > 354 |       expect(result.success).toBe(true);
          |                              ^
      355 |       expect(result.team).toBeDefined();
      356 |       
      357 |       // Verify initial placement in Bronze league (bronze_1 instance)

      at Object.<anonymous> (tests/tagTeamService.test.ts:354:30)

  ● TagTeamService › createTeam › should reject team creation if user does not own robots

    expect(received).toContain(expected) // indexOf

    Expected value: "You do not own these robots"
    Received array: ["Active robot not found", "Reserve robot not found"]

      383 |
      384 |       expect(result.success).toBe(false);
    > 385 |       expect(result.errors).toContain('You do not own these robots');
          |                             ^
      386 |     });
      387 |   });
      388 |

      at Object.<anonymous> (tests/tagTeamService.test.ts:385:29)

  ● TagTeamService › getTeamById › should retrieve a team by ID

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      390 |     it('should retrieve a team by ID', async () => {
      391 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 392 |       expect(createResult.success).toBe(true);
          |                                    ^
      393 |       const teamId = createResult.team!.id;
      394 |
      395 |       const team = await getTeamById(teamId);

      at Object.<anonymous> (tests/tagTeamService.test.ts:392:36)

  ● TagTeamService › getTeamById › should include robot details in response

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      403 |     it('should include robot details in response', async () => {
      404 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 405 |       expect(createResult.success).toBe(true);
          |                                    ^
      406 |       const teamId = createResult.team!.id;
      407 |
      408 |       const team = await getTeamById(teamId);

      at Object.<anonymous> (tests/tagTeamService.test.ts:405:36)

  ● TagTeamService › getTeamsByStable › should retrieve all teams for a stable

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      432 |     it('should retrieve all teams for a stable', async () => {
      433 |       const team1 = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 434 |       expect(team1.success).toBe(true);
          |                             ^
      435 |       
      436 |       const team2 = await createTeam(testUserId, testRobot3Id, testRobot4Id);
      437 |       expect(team2.success).toBe(true);

      at Object.<anonymous> (tests/tagTeamService.test.ts:434:29)

  ● TagTeamService › getTeamsByStable › should include robot details for all teams

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      447 |     it('should include robot details for all teams', async () => {
      448 |       const team1 = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 449 |       expect(team1.success).toBe(true);
          |                             ^
      450 |       
      451 |       const team2 = await createTeam(testUserId, testRobot3Id, testRobot4Id);
      452 |       expect(team2.success).toBe(true);

      at Object.<anonymous> (tests/tagTeamService.test.ts:449:29)

  ● TagTeamService › disbandTeam › should disband a team

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      479 |     it('should disband a team', async () => {
      480 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 481 |       expect(createResult.success).toBe(true);
          |                                    ^
      482 |       const teamId = createResult.team!.id;
      483 |
      484 |       const result = await disbandTeam(teamId, testUserId);

      at Object.<anonymous> (tests/tagTeamService.test.ts:481:36)

  ● TagTeamService › disbandTeam › should reject disbanding team from wrong stable

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      492 |     it('should reject disbanding team from wrong stable', async () => {
      493 |       const createResult = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 494 |       expect(createResult.success).toBe(true);
          |                                    ^
      495 |       const teamId = createResult.team!.id;
      496 |
      497 |       const result = await disbandTeam(teamId, otherUserId);

      at Object.<anonymous> (tests/tagTeamService.test.ts:494:36)

  ● TagTeamService › disbandTeam › should make robots available for new teams after disbanding

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      511 |       // Create a team with robot1 and robot2
      512 |       const createResult1 = await createTeam(testUserId, testRobot1Id, testRobot2Id);
    > 513 |       expect(createResult1.success).toBe(true);
          |                                     ^
      514 |       const teamId = createResult1.team!.id;
      515 |
      516 |       // Verify we cannot create another team with the same robots

      at Object.<anonymous> (tests/tagTeamService.test.ts:513:37)

FAIL tests/leagueRebalancingService.test.ts
  ● League Rebalancing Service › determinePromotions › should return top 10% of robots with ≥5 cycles AND ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should return top 10% of robots with ≥5 cycles AND ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determinePromotions › should skip robots with <5 cycles in current league

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should skip robots with <5 cycles in current league

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determinePromotions › should return empty array for champion tier

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should return empty array for champion tier

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determinePromotions › should return empty array when no robots have ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should return empty array when no robots have ≥25 league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determinePromotions › should return empty array when too few robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determinePromotions › should return empty array when too few robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `battles_robot1_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determineDemotions › should return bottom 10% of robots with ≥5 cycles in current league

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determineDemotions › should return bottom 10% of robots with ≥5 cycles in current league

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › determineDemotions › should return empty array for bronze tier

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › determineDemotions › should return empty array for bronze tier

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › promoteRobot › should move robot to next tier and reset league points and cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › promoteRobot › should move robot to next tier and reset league points and cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › promoteRobot › should throw error when trying to promote from champion

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › promoteRobot › should throw error when trying to promote from champion

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › demoteRobot › should move robot to previous tier and reset league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › demoteRobot › should move robot to previous tier and reset league points

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › demoteRobot › should throw error when trying to demote from bronze

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › demoteRobot › should throw error when trying to demote from bronze

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:58:24

      55 await prisma.scheduledMatch.deleteMany({});
      56 await prisma.battleParticipant.deleteMany({});
      57 await prisma.battle.deleteMany({});
    → 58 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      56 |     await prisma.battleParticipant.deleteMany({});
      57 |     await prisma.battle.deleteMany({});
    > 58 |     await prisma.robot.deleteMany({});
         |     ^
      59 |     await prisma.weaponInventory.deleteMany({});
      60 |     await prisma.facility.deleteMany({});
      61 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:58:5)

  ● League Rebalancing Service › rebalanceLeagues › should process all tiers and return summary

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

  ● League Rebalancing Service › rebalanceLeagues › should not promote or demote robots multiple times in same cycle

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:23:24

      20 await prisma.battle.deleteMany({});
      21 await prisma.tagTeamMatch.deleteMany({});
      22 await prisma.tagTeam.deleteMany({});
    → 23 await prisma.robot.deleteMany(
    Foreign key constraint violated: `tag_teams_active_robot_id_fkey (index)`

      21 |     await prisma.tagTeamMatch.deleteMany({});
      22 |     await prisma.tagTeam.deleteMany({});
    > 23 |     await prisma.robot.deleteMany({});
         |     ^
      24 |     await prisma.weaponInventory.deleteMany({});
      25 |     await prisma.user.deleteMany({});
      26 |     await prisma.weapon.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:23:5)

FAIL tests/financialReportStreamingRevenue.property.test.ts
  ● Property 17: Financial Report Includes Streaming Revenue › Property 17: Financial report includes streaming revenue line item

    Property failed after 1 tests
    { seed: 207559121, path: "0:0:0:0:38:28:21:0:0:0", endOnFailure: true }
    Counterexample: [{"numBattles":1,"robotBattles":0,"robotFame":0,"studioLevel":0,"streamingRevenuePerBattle":[1000]}]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at tests/financialReportStreamingRevenue.property.test.ts:182:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:127:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.2: Only counts streaming revenue from user's robots

    Property failed after 4 tests
    { seed: -318641219, path: "3:0:0:8:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"userBattles":1,"opponentBattles":1,"userStreamingRevenue":[1000],"opponentStreamingRevenue":[1000]}]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:298:29
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:282:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.3: Streaming revenue contributes to total revenue

    Property failed after 1 tests
    { seed: -992717984, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [{"numBattles":1,"streamingRevenuePerBattle":1000,"battleWinnings":0}]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:417:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:408:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.4: Aggregates streaming revenue across multiple robots

    Property failed after 1 tests
    { seed: 575388905, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"numRobots":2,"battlesPerRobot":[1,1],"revenuePerBattle":[1000,1000]}]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:496:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:473:5)

FAIL tests/terminalLogStreamingRevenue.property.test.ts (19.053 s)
  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14: Terminal log contains streaming revenue for all battles

    Property failed after 1 tests
    { seed: 637105865, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0,0,0,0]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeDefined()

    Received: undefined

      297 |               log.includes(`Battle #${battle!.id}`)
      298 |             );
    > 299 |             expect(streamingLog1).toBeDefined();
          |                                   ^
      300 |
      301 |             // Property: Terminal log should contain robot name
      302 |             expect(streamingLog1).toContain(robotName1);

      at tests/terminalLogStreamingRevenue.property.test.ts:299:35
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)

  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.1: Streaming revenue logged immediately after battle completion

    Property failed after 1 tests
    { seed: 1251083632, path: "0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [100,500,100,500,1]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 2
    Received:    0

      448 |             );
      449 |
    > 450 |             expect(streamingLogs.length).toBeGreaterThanOrEqual(2);
          |                                          ^
      451 |
      452 |             // Property: Both robots should have streaming revenue logged
      453 |             const robot1Logged = streamingLogs.some(log => log.includes(robotName1));

      at tests/terminalLogStreamingRevenue.property.test.ts:450:42
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)

  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.2: No streaming revenue logged for bye matches

    Property failed after 1 tests
    { seed: -492843097, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:601:32

      598 // Cleanup
      599 await prisma.battle.deleteMany({ where: { id: battle!.id } });
      600 await prisma.scheduledMatch.deleteMany({ where: { id: match.id } });
    → 601 await prisma.robot.deleteMany(
    Foreign key constraint violated: `battles_robot1_id_fkey (index)`

      599 |             await prisma.battle.deleteMany({ where: { id: battle!.id } });
      600 |             await prisma.scheduledMatch.deleteMany({ where: { id: match.id } });
    > 601 |             await prisma.robot.deleteMany({ where: { id: robot.id } });
          |             ^
      602 |             await prisma.robot.deleteMany({ where: { id: byeRobot.id } });
      603 |           } finally {
      604 |             capture.restore();

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/terminalLogStreamingRevenue.property.test.ts:601:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:503:5)

  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.3: Terminal log format is consistent

    Property failed after 1 tests
    { seed: 1439727811, path: "0:0:0:1:1:0:0:3:0:3:2:0:0:0:0:0:0:0:0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [[{"battles":0,"fame":0},{"battles":0,"fame":0}],0]
    Shrunk 25 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:20:29

      17 
      18 // Helper function to create a minimal test robot
      19 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 20   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      18 | // Helper function to create a minimal test robot
      19 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 20 |   return await prisma.robot.create({
         |          ^
      21 |     data: {
      22 |       userId,
      23 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/terminalLogStreamingRevenue.property.test.ts:20:10)
      at tests/terminalLogStreamingRevenue.property.test.ts:631:26
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)

FAIL tests/cycleExecutionTiming.test.ts
  ● Cycle Execution Timing › Complete cycle timing flow › should log complete cycle with start, steps, and complete events

    expect(received).toHaveLength(expected)

    Expected length: 5
    Received length: 6
    Received array:  [{"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.878Z, "eventType": "cycle_start", "id": 15727n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:42.877Z", "triggerType": "manual"}, "robotId": null, "sequenceNumber": 1, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.883Z, "eventType": "cycle_step_complete", "id": 15729n, "metadata": null, "payload": {"duration": 1000, "stepName": "execute_battles", "stepNumber": 1, "summary": {"battles": 5}}, "robotId": null, "sequenceNumber": 2, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.886Z, "eventType": "cycle_step_complete", "id": 15731n, "metadata": null, "payload": {"duration": 500, "stepName": "repair_robots", "stepNumber": 2, "summary": {"repaired": 10}}, "robotId": null, "sequenceNumber": 3, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.889Z, "eventType": "cycle_step_complete", "id": 15733n, "metadata": null, "payload": {"duration": 300, "stepName": "matchmaking", "stepNumber": 3, "summary": {"matches": 8}}, "robotId": null, "sequenceNumber": 4, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.892Z, "eventType": "cycle_complete", "id": 15736n, "metadata": null, "payload": {"timestamp": "2026-02-24T18:51:42.892Z", "totalDuration": 1800}, "robotId": null, "sequenceNumber": 5, "userId": null}, {"battleId": null, "cycleNumber": 1, "eventTimestamp": 2026-02-24T18:51:42.892Z, "eventType": "facility_upgrade", "id": 15735n, "metadata": null, "payload": {"action": "upgrade", "balanceAfter": 9700000, "balanceBefore": 9900000, "cost": 200000, "facilityType": "streaming_studio", "newLevel": 2, "oldLevel": 1}, "robotId": null, "sequenceNumber": 678, "userId": 364}]

      182 |       });
      183 |       
    > 184 |       expect(allEvents).toHaveLength(5);
          |                         ^
      185 |       expect(allEvents[0].eventType).toBe('cycle_start');
      186 |       expect(allEvents[1].eventType).toBe('cycle_step_complete');
      187 |       expect(allEvents[2].eventType).toBe('cycle_step_complete');

      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:184:25)

  ● Cycle Execution Timing › Step duration recording › should sum step durations approximately equal to total cycle duration

    expect(received).toBe(expected) // Object.is equality

    Expected: 2000
    Received: 2043

      273 |       
      274 |       const sumOfSteps = stepEvents.reduce((sum, e) => sum + ((e.payload as any).duration as number), 0);
    > 275 |       expect(sumOfSteps).toBe((completeEvent?.payload as any).totalDuration);
          |                          ^
      276 |     });
      277 |   });
      278 |

      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:275:26)

FAIL tests/tagTeamValidation.property.test.ts (19.268 s)
  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size

    Property failed after 9 tests
    { seed: 155383656, path: "8", endOnFailure: true }
    Counterexample: [10]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:675:30

      672 await prisma.tagTeam.deleteMany({
      673   where: { id: { in: createdTeams } },
      674 });
    → 675 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      673 |             where: { id: { in: createdTeams } },
      674 |           });
    > 675 |           await prisma.robot.deleteMany({
          |           ^
      676 |             where: { id: { in: robots } },
      677 |           });
      678 |           await prisma.weaponInventory.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/tagTeamValidation.property.test.ts:675:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:609:5)

  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:80:24

      77     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      78 |       },
      79 |     });
    > 80 |     await prisma.robot.deleteMany({
         |     ^
      81 |       where: {
      82 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      83 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:80:5)

  ● Tag Team Validation Property Tests › should remove team from database and free robots for new teams

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:80:24

      77     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      78 |       },
      79 |     });
    > 80 |     await prisma.robot.deleteMany({
         |     ^
      81 |       where: {
      82 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      83 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:80:5)

  ● Tag Team Validation Property Tests › should validate team readiness based on both robots meeting all requirements

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:80:24

      77     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      78 |       },
      79 |     });
    > 80 |     await prisma.robot.deleteMany({
         |     ^
      81 |       where: {
      82 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      83 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:80:5)

  ● Tag Team Validation Property Tests › should calculate combined ELO as sum of both robots ELOs

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:80:24

      77     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78   },
      79 });
    → 80 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      78 |       },
      79 |     });
    > 80 |     await prisma.robot.deleteMany({
         |     ^
      81 |       where: {
      82 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      83 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:80:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking only on odd cycles

    Property failed after 12 tests
    { seed: -1932473505, path: "11", endOnFailure: true }
    Counterexample: [37]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      1075 |           // Property: Should run if and only if cycle is odd
      1076 |           const isOdd = cycleNumber % 2 === 1;
    > 1077 |           expect(shouldRun).toBe(isOdd);
           |                             ^
      1078 |
      1079 |           // Inverse property: Should not run if cycle is even
      1080 |           const isEven = cycleNumber % 2 === 0;

      at tests/tagTeamValidation.property.test.ts:1077:29
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1061:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking on known odd cycles

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      1155 |
      1156 |       const shouldRun = await shouldRunTagTeamMatchmaking();
    > 1157 |       expect(shouldRun).toBe(true);
           |                         ^
      1158 |     }
      1159 |   });
      1160 |

      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1157:25)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams with unready robots from eligible teams

    Property failed after 36 tests
    { seed: -900698832, path: "35:4:0:0:0:1:0:7", endOnFailure: true }
    Counterexample: [[{"robot1":{"hpPercent":0,"yieldThreshold":12,"hasWeapon":false},"robot2":{__proto__:null,"hpPercent":95,"yieldThreshold":34,"hasWeapon":true}}]]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toContain(expected) // indexOf

    Expected value: 520
    Received array: []

      1360 |           // Property: All eligible teams should be in the expected ready teams list
      1361 |           for (const eligibleId of eligibleTeamIds) {
    > 1362 |             expect(expectedReadyTeams).toContain(eligibleId);
           |                                        ^
      1363 |           }
      1364 |
      1365 |           // Property: All expected ready teams should be in the eligible teams list

      at tests/tagTeamValidation.property.test.ts:1362:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1250:5)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%

    Property failed after 21 tests
    { seed: 547361605, path: "20", endOnFailure: true }
    Counterexample: [62,17]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).not.toContain(expected) // indexOf

    Expected value: not 718
    Received array:     [718]

      1455 |
      1456 |           // Property: Team with low HP robot should not be eligible
    > 1457 |           expect(eligibleTeamIds).not.toContain(team.id);
           |                                       ^
      1458 |
      1459 |           // Clean up
      1460 |           await prisma.tagTeam.deleteMany({ where: { id: team.id } });

      at tests/tagTeamValidation.property.test.ts:1457:39
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1391:5)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1231:26

      1228 
      1229 afterEach(async () => {
      1230   // Clean up teams and robots after each test
    → 1231   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      1229 |   afterEach(async () => {
      1230 |     // Clean up teams and robots after each test
    > 1231 |     await prisma.tagTeam.deleteMany({
           |     ^
      1232 |       where: { stableId: testUserId },
      1233 |     });
      1234 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1231:5)

  ● Tag Team Matchmaking ELO Matching Property Tests › should prefer matching teams with smaller ELO differences

    Property failed after 5 tests
    { seed: -1504352133, path: "4:1:0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [[{"robot1ELO":800,"robot2ELO":800},{"robot1ELO":800,"robot2ELO":800}]]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1558:61

      1555 // Create teams with specific ELO values
      1556 for (const config of teamConfigs) {
      1557   // Create weapon inventory
    → 1558   const weapon1Inv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      1556 |           for (const config of teamConfigs) {
      1557 |             // Create weapon inventory
    > 1558 |             const weapon1Inv = await prisma.weaponInventory.create({
           |                                ^
      1559 |               data: { userId: testUserId, weaponId },
      1560 |             });
      1561 |             const weapon2Inv = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/tagTeamValidation.property.test.ts:1558:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1542:5)

  ● Tag Team Matchmaking Same-Stable Exclusion Property Tests › should strongly deprioritize same-stable matches

    Property failed after 1 tests
    { seed: 442812562, path: "0:0", endOnFailure: true }
    Counterexample: [{"stable1Teams":1,"stable2Teams":1}]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1751:61

      1748 
      1749 // Create teams for stable 1
      1750 for (let i = 0; i < stable1Teams; i++) {
    → 1751   const weapon1Inv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      1749 |           // Create teams for stable 1
      1750 |           for (let i = 0; i < stable1Teams; i++) {
    > 1751 |             const weapon1Inv = await prisma.weaponInventory.create({
           |                                ^
      1752 |               data: { userId: testUserId1, weaponId },
      1753 |             });
      1754 |             const weapon2Inv = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/tagTeamValidation.property.test.ts:1751:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1739:5)

  ● Tag Team Matchmaking Recent Opponent Deprioritization Property Tests › should deprioritize recent opponents when multiple options exist

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1977:24

      1974 await prisma.tagTeam.deleteMany({
      1975   where: { stableId: testUserId },
      1976 });
    → 1977 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      1975 |       where: { stableId: testUserId },
      1976 |     });
    > 1977 |     await prisma.robot.deleteMany({
           |     ^
      1978 |       where: { userId: testUserId },
      1979 |     });
      1980 |     await prisma.weaponInventory.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1977:5)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:55:24

      52     OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      53   },
      54 });
    → 55 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      53 |       },
      54 |     });
    > 55 |     await prisma.robot.deleteMany({
         |     ^
      56 |       where: {
      57 |         OR: [{ userId: testUserId }, { userId: otherUserId }],
      58 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:55:5)

  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1214:26

      1211 
      1212 afterAll(async () => {
      1213   // Clean up test data
    → 1214   await prisma.tagTeam.deleteMany(
    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`

      1212 |   afterAll(async () => {
      1213 |     // Clean up test data
    > 1214 |     await prisma.tagTeam.deleteMany({
           |     ^
      1215 |       where: { stableId: testUserId },
      1216 |     });
      1217 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1214:5)

  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1952:24

      1949 await prisma.tagTeam.deleteMany({
      1950   where: { stableId: testUserId },
      1951 });
    → 1952 await prisma.robot.deleteMany(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      1950 |       where: { stableId: testUserId },
      1951 |     });
    > 1952 |     await prisma.robot.deleteMany({
           |     ^
      1953 |       where: { userId: testUserId },
      1954 |     });
      1955 |     await prisma.weaponInventory.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1952:5)

FAIL tests/tagTeamDatabaseSchema.test.ts
  ● Tag Team Database Schema Verification › TagTeam Model › should have check constraint for different robots

    expect(received).toContain(expected) // indexOf

    Expected value: "tag_teams_different_robots_check"
    Received array: []

      76 |
      77 |       const checkConstraints = constraints.map(c => c.conname);
    > 78 |       expect(checkConstraints).toContain('tag_teams_different_robots_check');
         |                                ^
      79 |     });
      80 |   });
      81 |

      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:78:32)

FAIL tests/tagTeamStreamingRevenue.test.ts
  ● Tag Team Streaming Revenue Integration › should calculate and award streaming revenue for Tag Team battles

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      253 |     const team2Result = await createTeam(testUser2.id, robot2_1.id, robot2_2.id);
      254 |
    > 255 |     expect(team1Result.success).toBe(true);
          |                                 ^
      256 |     expect(team2Result.success).toBe(true);
      257 |
      258 |     const team1 = team1Result.team!;

      at Object.<anonymous> (tests/tagTeamStreamingRevenue.test.ts:255:33)

FAIL tests/finances.test.ts
  ● Finances Routes › GET /api/finances/summary › should get financial summary with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      137 |         .set('Authorization', `Bearer ${authToken}`);
      138 |
    > 139 |       expect(response.status).toBe(200);
          |                               ^
      140 |       // Should return financial data
      141 |       expect(response.body).toBeDefined();
      142 |       expect(typeof response.body).toBe('object');

      at Object.<anonymous> (tests/finances.test.ts:139:31)

  ● Finances Routes › GET /api/finances/revenue-streams › should get revenue streams with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      177 |         .set('Authorization', `Bearer ${authToken}`);
      178 |
    > 179 |       expect(response.status).toBe(200);
          |                               ^
      180 |       // Should return some financial data
      181 |       expect(response.body).toBeDefined();
      182 |       expect(typeof response.body).toBe('object');

      at Object.<anonymous> (tests/finances.test.ts:179:31)

  ● Finances Routes › GET /api/finances/projections › should get financial projections with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      197 |         .set('Authorization', `Bearer ${authToken}`);
      198 |
    > 199 |       expect(response.status).toBe(200);
          |                               ^
      200 |       // Projections should have projections and metrics
      201 |       expect(response.body).toHaveProperty('projections');
      202 |       expect(response.body.projections).toHaveProperty('weekly');

      at Object.<anonymous> (tests/finances.test.ts:199:31)

FAIL tests/matchmakingService.test.ts
  ● Matchmaking Service › checkBattleReadiness › should mark robot as ready when HP >= 75% and weapon equipped

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:121:54

      118 
      119 describe('checkBattleReadiness', () => {
      120   it('should mark robot as ready when HP >= 75% and weapon equipped', async () => {
    → 121     const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      119 |   describe('checkBattleReadiness', () => {
      120 |     it('should mark robot as ready when HP >= 75% and weapon equipped', async () => {
    > 121 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      122 |         data: {
      123 |           userId: testUser.id,
      124 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:121:25)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP < 75%

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:158:54

      155 });
      156 
      157 it('should mark robot as not ready when HP < 75%', async () => {
    → 158   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      156 |
      157 |     it('should mark robot as not ready when HP < 75%', async () => {
    > 158 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      159 |         data: {
      160 |           userId: testUser.id,
      161 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:158:25)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP is at or below yield threshold

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:193:54

      190 });
      191 
      192 it('should mark robot as not ready when HP is at or below yield threshold', async () => {
    → 193   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      191 |
      192 |     it('should mark robot as not ready when HP is at or below yield threshold', async () => {
    > 193 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      194 |         data: {
      195 |           userId: testUser.id,
      196 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:193:25)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when weapon not equipped

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:228:40

      225 });
      226 
      227 it('should mark robot as not ready when weapon not equipped', async () => {
    → 228   const robot = await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      226 |
      227 |     it('should mark robot as not ready when weapon not equipped', async () => {
    > 228 |       const robot = await prisma.robot.create({
          |                     ^
      229 |         data: {
      230 |           userId: testUser.id,
      231 |           name: 'No Weapon Robot',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:228:21)

  ● Matchmaking Service › checkBattleReadiness › should check dual wield loadout correctly

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:254:55

      251 });
      252 
      253 it('should check dual wield loadout correctly', async () => {
    → 254   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      252 |
      253 |     it('should check dual wield loadout correctly', async () => {
    > 254 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      255 |         data: {
      256 |           userId: testUser.id,
      257 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:254:26)

  ● Matchmaking Service › runMatchmakingForTier › should create matches for available robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:293:56

      290 // Create 4 ready robots in bronze league
      291 const robots = [];
      292 for (let i = 0; i < 4; i++) {
    → 293   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      291 |       const robots = [];
      292 |       for (let i = 0; i < 4; i++) {
    > 293 |         const weaponInv = await prisma.weaponInventory.create({
          |                           ^
      294 |           data: {
      295 |             userId: testUser.id,
      296 |             weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:293:27)

  ● Matchmaking Service › runMatchmakingForTier › should create bye-match for odd number of robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:375:56

      372 // Create 3 ready robots (odd number)
      373 const robots = [];
      374 for (let i = 0; i < 3; i++) {
    → 375   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      373 |       const robots = [];
      374 |       for (let i = 0; i < 3; i++) {
    > 375 |         const weaponInv = await prisma.weaponInventory.create({
          |                           ^
      376 |           data: {
      377 |             userId: testUser.id,
      378 |             weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:375:27)

  ● Matchmaking Service › runMatchmakingForTier › should not create duplicate matches for already scheduled robots

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:432:56

      429 // Create 2 robots
      430 const robots = [];
      431 for (let i = 0; i < 2; i++) {
    → 432   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      430 |       const robots = [];
      431 |       for (let i = 0; i < 2; i++) {
    > 432 |         const weaponInv = await prisma.weaponInventory.create({
          |                           ^
      433 |           data: {
      434 |             userId: testUser.id,
      435 |             weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:432:27)

  ● Matchmaking Service › runMatchmakingForTier › should skip robots that are not battle-ready

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:480:55

      477 
      478 it('should skip robots that are not battle-ready', async () => {
      479   // Create 1 ready robot and 1 not-ready robot
    → 480   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      478 |     it('should skip robots that are not battle-ready', async () => {
      479 |       // Create 1 ready robot and 1 not-ready robot
    > 480 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      481 |         data: {
      482 |           userId: testUser.id,
      483 |           weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:480:26)

  ● Matchmaking Service › runMatchmaking (all tiers) › should run matchmaking across all tiers

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:541:58

      538 
      539 for (const tier of tiers) {
      540   for (let i = 0; i < 2; i++) {
    → 541     const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      539 |       for (const tier of tiers) {
      540 |         for (let i = 0; i < 2; i++) {
    > 541 |           const weaponInv = await prisma.weaponInventory.create({
          |                             ^
      542 |             data: {
      543 |               userId: testUser.id,
      544 |               weaponId: practiceSword.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:541:29)

FAIL tests/twoRobotTagTeamGeneration.test.ts
  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)

    Practice Sword weapon not found. Run seed first.

      19 |
      20 |     if (!practiceSword) {
    > 21 |       throw new Error('Practice Sword weapon not found. Run seed first.');
         |             ^
      22 |     }
      23 |   });
      24 |

      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:21:13)

  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)

    Practice Sword weapon not found. Run seed first.

      19 |
      20 |     if (!practiceSword) {
    > 21 |       throw new Error('Practice Sword weapon not found. Run seed first.');
         |             ^
      22 |     }
      23 |   });
      24 |

      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:21:13)

  ● Two-Robot Specialist Tag Team Generation › should not create tag teams for single-robot archetypes

    Practice Sword weapon not found. Run seed first.

      19 |
      20 |     if (!practiceSword) {
    > 21 |       throw new Error('Practice Sword weapon not found. Run seed first.');
         |             ^
      22 |     }
      23 |   });
      24 |

      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:21:13)

  ● Two-Robot Specialist Tag Team Generation › should create tag teams with correct robot assignments

    Practice Sword weapon not found. Run seed first.

      19 |
      20 |     if (!practiceSword) {
    > 21 |       throw new Error('Practice Sword weapon not found. Run seed first.');
         |             ^
      22 |     }
      23 |   });
      24 |

      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:21:13)

FAIL tests/battleOrchestrator.test.ts
  ● Battle Orchestrator › processBattle › should execute a battle and create records

    PrismaClientKnownRequestError: 
    Invalid `prisma.scheduledMatch.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:803:31

      800 // No need to update Battle table
      801 
      802 // Update scheduled match
    → 803 await prisma.scheduledMatch.update(
    Foreign key constraint violated: `scheduled_matches_battle_id_fkey (index)`

      801 |   
      802 |   // Update scheduled match
    > 803 |   await prisma.scheduledMatch.update({
          |   ^
      804 |     where: { id: scheduledMatch.id },
      805 |     data: {
      806 |       status: 'completed',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at processBattle (src/services/battleOrchestrator.ts:803:3)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:175:22)

  ● Battle Orchestrator › processBattle › should handle bye-robot battles correctly

    PrismaClientKnownRequestError: 
    Invalid `prisma.scheduledMatch.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:259:58

      256 });
      257 
      258 // Create scheduled bye-match
    → 259 const scheduledMatch = await prisma.scheduledMatch.create(
    Foreign key constraint violated: `scheduled_matches_robot1_id_fkey (index)`

      257 |
      258 |       // Create scheduled bye-match
    > 259 |       const scheduledMatch = await prisma.scheduledMatch.create({
          |                              ^
      260 |         data: {
      261 |           robot1Id: playerRobot.id,
      262 |           robot2Id: byeRobot.id,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:259:30)

  ● Battle Orchestrator › processBattle › should increment kills when a robot destroys its opponent

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:290:55

      287 
      288 it('should increment kills when a robot destroys its opponent', async () => {
      289   // Create two test robots
    → 290   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      288 |     it('should increment kills when a robot destroys its opponent', async () => {
      289 |       // Create two test robots
    > 290 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      291 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      292 |       });
      293 |       const weaponInv2 = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:290:26)

  ● Battle Orchestrator › executeScheduledBattles › should execute multiple scheduled battles

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:383:56

      380 // Create robots and scheduled matches
      381 const robots = [];
      382 for (let i = 0; i < 4; i++) {
    → 383   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      381 |       const robots = [];
      382 |       for (let i = 0; i < 4; i++) {
    > 383 |         const weaponInv = await prisma.weaponInventory.create({
          |                           ^
      384 |           data: { userId: testUser.id, weaponId: practiceSword.id },
      385 |         });
      386 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:383:27)

  ● Battle Orchestrator › Streaming Revenue Integration › should calculate and award streaming revenue after battle

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:448:55

      445 describe('Streaming Revenue Integration', () => {
      446   it('should calculate and award streaming revenue after battle', async () => {
      447     // Create test robots with some fame and battles
    → 448     const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      446 |     it('should calculate and award streaming revenue after battle', async () => {
      447 |       // Create test robots with some fame and battles
    > 448 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      449 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      450 |       });
      451 |       const weaponInv2 = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:448:26)

  ● Battle Orchestrator › Streaming Revenue Integration › should not award streaming revenue for bye matches

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:525:54

      522 
      523 it('should not award streaming revenue for bye matches', async () => {
      524   // Create player robot
    → 525   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      523 |     it('should not award streaming revenue for bye matches', async () => {
      524 |       // Create player robot
    > 525 |       const weaponInv = await prisma.weaponInventory.create({
          |                         ^
      526 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      527 |       });
      528 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:525:25)

  ● Battle Orchestrator › Streaming Revenue Integration › should add streaming revenue to audit log

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:618:55

      615 
      616 it('should add streaming revenue to audit log', async () => {
      617   // Create test robots
    → 618   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      616 |     it('should add streaming revenue to audit log', async () => {
      617 |       // Create test robots
    > 618 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      619 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      620 |       });
      621 |       const weaponInv2 = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:618:26)

  ● Battle Orchestrator › Streaming Revenue Integration › should log streaming revenue to terminal

    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:696:55

      693 
      694 it('should log streaming revenue to terminal', async () => {
      695   // Create test robots
    → 696   const weaponInv1 = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      694 |     it('should log streaming revenue to terminal', async () => {
      695 |       // Create test robots
    > 696 |       const weaponInv1 = await prisma.weaponInventory.create({
          |                          ^
      697 |         data: { userId: testUser.id, weaponId: practiceSword.id },
      698 |       });
      699 |       const weaponInv2 = await prisma.weaponInventory.create({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:696:26)

FAIL tests/integration/bronzeLeagueRebalancing.test.ts
  ● Bronze League Rebalancing - Integration Test › should correctly rebalance 331 robots from single bronze instance into multiple instances

    expect(received).toBe(expected) // Object.is equality

    Expected: 331
    Received: 332

      63 |     // Verify initial state - all robots in one instance
      64 |     const initialStats = await getLeagueInstanceStats('bronze');
    > 65 |     expect(initialStats.totalRobots).toBe(331);
         |                                      ^
      66 |     expect(initialStats.instances).toHaveLength(1);
      67 |     expect(initialStats.instances[0].leagueId).toBe('bronze_1');
      68 |     expect(initialStats.instances[0].currentRobots).toBe(331);

      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:65:38)

  ● Bronze League Rebalancing - Integration Test › should handle the scenario progressively over multiple cycles

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.createMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/bronzeLeagueRebalancing.test.ts:161:24

      158     maxShield: 2,
      159   });
      160 }
    → 161 await prisma.robot.createMany(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      159 |       });
      160 |     }
    > 161 |     await prisma.robot.createMany({ data: newRobots });
          |     ^
      162 |
      163 |     // Verify all 350 robots are in bronze_1
      164 |     const beforeStats = await getLeagueInstanceStats('bronze');

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:161:5)

FAIL tests/streamingStudioPrestigeRequirements.property.test.ts
  ● Property 9: Streaming Studio Prestige Requirements › Property 9: Prestige requirements enforced for all levels

    Property failed after 19 tests
    { seed: -880653486, path: "18:0:0", endOnFailure: true }
    Counterexample: [1,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:110:29

      107 });
      108 
      109 // Reset user prestige and currency
    → 110 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      108 |
      109 |           // Reset user prestige and currency
    > 110 |           await prisma.user.update({
          |           ^
      111 |             where: { id: testUser.id },
      112 |             data: { prestige: userPrestige, currency: 10000000 },
      113 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:110:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:96:5)

  ● Property 9: Streaming Studio Prestige Requirements › Property 9.1: Levels 1-3 require no prestige

    Property failed after 5 tests
    { seed: -789842218, path: "4:0:0", endOnFailure: true }
    Counterexample: [1,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:196:29

      193 });
      194 
      195 // Set user prestige
    → 196 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      194 |
      195 |           // Set user prestige
    > 196 |           await prisma.user.update({
          |           ^
      197 |             where: { id: testUser.id },
      198 |             data: { prestige: userPrestige, currency: 10000000 },
      199 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:196:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:182:5)

  ● Property 9: Streaming Studio Prestige Requirements › Property 9.2: Levels 4-10 enforce progressive prestige requirements

    Property failed after 1 tests
    { seed: 182497721, path: "0:0", endOnFailure: true }
    Counterexample: [4]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:252:29

      249 const maxPrestigeNeeded = Math.max(
      250   ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      251 );
    → 252 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      250 |             ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      251 |           );
    > 252 |           await prisma.user.update({
          |           ^
      253 |             where: { id: testUser.id },
      254 |             data: { prestige: maxPrestigeNeeded, currency: 10000000 },
      255 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:252:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:231:5)

  ● Property 9: Streaming Studio Prestige Requirements › Property 9.4: Error messages contain required prestige information

    Property failed after 1 tests
    { seed: -1971714069, path: "0:0", endOnFailure: true }
    Counterexample: [4]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:346:29

      343 const maxPrestigeNeeded = Math.max(
      344   ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      345 );
    → 346 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      344 |             ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      345 |           );
    > 346 |           await prisma.user.update({
          |           ^
      347 |             where: { id: testUser.id },
      348 |             data: { prestige: maxPrestigeNeeded, currency: 10000000 },
      349 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:346:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:328:5)

  ● Property 9: Streaming Studio Prestige Requirements › Property 9.5: Prestige validation occurs regardless of currency

    Property failed after 1 tests
    { seed: -1773304865, path: "0:0:0", endOnFailure: true }
    Counterexample: [4,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:415:29

      412 const maxPrestigeNeeded = Math.max(
      413   ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      414 );
    → 415 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      413 |             ...PRESTIGE_REQUIREMENTS.slice(0, targetLevel - 1)
      414 |           );
    > 415 |           await prisma.user.update({
          |           ^
      416 |             where: { id: testUser.id },
      417 |             data: { prestige: maxPrestigeNeeded, currency: 10000000 },
      418 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/streamingStudioPrestigeRequirements.property.test.ts:415:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:396:5)

FAIL tests/prestigeGates.test.ts
  ● Prestige Gates › Facility Config Prestige Requirements › Training Facility has correct prestige requirements

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 0

    @@ -6,7 +6,6 @@
        0,
        0,
        5000,
        0,
        10000,
    -   0,
      ]

      24 |       const config = getFacilityConfig('training_facility');
      25 |       expect(config).toBeDefined();
    > 26 |       expect(config?.prestigeRequirements).toEqual([0, 0, 0, 1000, 0, 0, 5000, 0, 10000, 0]);
         |                                            ^
      27 |     });
      28 |
      29 |     test('Weapons Workshop has correct prestige requirements', () => {

      at Object.<anonymous> (tests/prestigeGates.test.ts:26:44)

  ● Prestige Gates › Facility Config Prestige Requirements › Income Generator has correct prestige requirements

    expect(received).toBeDefined()

    Received: undefined

      89 |     test('Income Generator has correct prestige requirements', () => {
      90 |       const config = getFacilityConfig('income_generator');
    > 91 |       expect(config).toBeDefined();
         |                      ^
      92 |       expect(config?.prestigeRequirements).toEqual([0, 0, 0, 3000, 0, 0, 7500, 0, 15000, 0]);
      93 |     });
      94 |

      at Object.<anonymous> (tests/prestigeGates.test.ts:91:22)

FAIL tests/tagTeamLeagueStandings.property.test.ts
  ● Tag Team League Standings Property Tests › should maintain independent 1v1 and tag team league standings

    TypeError: Cannot read properties of null (reading 'id')

      34 |     // Get a weapon for testing
      35 |     const weapon = await prisma.weapon.findFirst();
    > 36 |     weaponId = weapon!.id;
         |                        ^
      37 |   });
      38 |
      39 |   afterAll(async () => {

      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:36:24)

  ● Tag Team League Standings Property Tests › should not affect robot 1v1 standings when tag team league changes

    TypeError: Cannot read properties of null (reading 'id')

      34 |     // Get a weapon for testing
      35 |     const weapon = await prisma.weapon.findFirst();
    > 36 |     weaponId = weapon!.id;
         |                        ^
      37 |   });
      38 |
      39 |   afterAll(async () => {

      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:36:24)

  ● Tag Team League Standings Property Tests › should allow robots with different 1v1 leagues to be in the same tag team

    TypeError: Cannot read properties of null (reading 'id')

      34 |     // Get a weapon for testing
      35 |     const weapon = await prisma.weapon.findFirst();
    > 36 |     weaponId = weapon!.id;
         |                        ^
      37 |   });
      38 |
      39 |   afterAll(async () => {

      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:36:24)

FAIL tests/leagueInstanceService.test.ts
  ● League Instance Service › getInstancesForTier › should return instances sorted by instance number

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:65:31

      62 
      63 // Clean up
      64 await prisma.robot.deleteMany({ where: { userId: user.id } });
    → 65 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      63 |       // Clean up
      64 |       await prisma.robot.deleteMany({ where: { userId: user.id } });
    > 65 |       await prisma.user.delete({ where: { id: user.id } });
         |       ^
      66 |     });
      67 |
      68 |     it('should exclude bye-robot from instance counts', async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:65:7)

  ● League Instance Service › getLeagueInstanceStats › should detect when rebalancing is needed

    expect(received).toBe(expected) // Object.is equality

    Expected: 100
    Received: 433

      159 |       const stats = await getLeagueInstanceStats('bronze');
      160 |       
    > 161 |       expect(stats.totalRobots).toBe(100);
          |                                 ^
      162 |       expect(stats.averagePerInstance).toBe(50);
      163 |       expect(stats.needsRebalancing).toBe(true); // Deviation of 30 > threshold of 20
      164 |

      at Object.<anonymous> (tests/leagueInstanceService.test.ts:161:33)

  ● League Instance Service › getLeagueInstanceStats › should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE

    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.createMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:192:26

      189     maxShield: 2,
      190   });
      191 }
    → 192 await prisma.robot.createMany(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      190 |         });
      191 |       }
    > 192 |       await prisma.robot.createMany({ data: robots });
          |       ^
      193 |
      194 |       const stats = await getLeagueInstanceStats('bronze');
      195 |       

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:192:7)

  ● League Instance Service › rebalanceInstances › should rebalance when imbalance exceeds threshold

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 2
    Received array:  [{"currentRobots": 80, "instanceNumber": 1, "isFull": false, "leagueId": "champion_1", "maxRobots": 100, "tier": "champion"}, {"currentRobots": 20, "instanceNumber": 2, "isFull": false, "leagueId": "champion_2", "maxRobots": 100, "tier": "champion"}]

      356 |       
      357 |       // With 100 robots and MAX_ROBOTS_PER_INSTANCE=100, should have exactly 1 instance
    > 358 |       expect(instances).toHaveLength(1);
          |                         ^
      359 |       expect(instances[0].currentRobots).toBe(100);
      360 |       
      361 |       // Verify no instance exceeds the limit

      at Object.<anonymous> (tests/leagueInstanceService.test.ts:358:25)

FAIL tests/profileUpdate.test.ts
  ● Profile Update Endpoint › PUT /api/user/profile › should change password successfully with correct current password

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      178 |         });
      179 |
    > 180 |       expect(response.status).toBe(200);
          |                               ^
      181 |       
      182 |       // Verify new password works
      183 |       const updatedUser = await prisma.user.findUnique({

      at Object.<anonymous> (tests/profileUpdate.test.ts:180:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject password change with incorrect current password

    expect(received).toBe(expected) // Object.is equality

    Expected: 401
    Received: 404

      203 |         });
      204 |
    > 205 |       expect(response.status).toBe(401);
          |                               ^
      206 |       expect(response.body.error).toBe('Current password is incorrect');
      207 |     });
      208 |

      at Object.<anonymous> (tests/profileUpdate.test.ts:205:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (too short)

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      296 |         });
      297 |
    > 298 |       expect(response.status).toBe(400);
          |                               ^
      299 |       expect(response.body.error).toBe('Validation failed');
      300 |       expect(response.body.details.newPassword).toContain('at least 8 characters');
      301 |     });

      at Object.<anonymous> (tests/profileUpdate.test.ts:298:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no uppercase)

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      310 |         });
      311 |
    > 312 |       expect(response.status).toBe(400);
          |                               ^
      313 |       expect(response.body.error).toBe('Validation failed');
      314 |       expect(response.body.details.newPassword).toContain('uppercase letter');
      315 |     });

      at Object.<anonymous> (tests/profileUpdate.test.ts:312:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no lowercase)

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      324 |         });
      325 |
    > 326 |       expect(response.status).toBe(400);
          |                               ^
      327 |       expect(response.body.error).toBe('Validation failed');
      328 |       expect(response.body.details.newPassword).toContain('lowercase letter');
      329 |     });

      at Object.<anonymous> (tests/profileUpdate.test.ts:326:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no number)

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      338 |         });
      339 |
    > 340 |       expect(response.status).toBe(400);
          |                               ^
      341 |       expect(response.body.error).toBe('Validation failed');
      342 |       expect(response.body.details.newPassword).toContain('number');
      343 |     });

      at Object.<anonymous> (tests/profileUpdate.test.ts:340:31)

  ● Profile Update Endpoint › PUT /api/user/profile › should preserve unchanged fields when updating partial data

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:388:25

      385 
      386 it('should preserve unchanged fields when updating partial data', async () => {
      387   // First, set some initial values
    → 388   await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      386 |     it('should preserve unchanged fields when updating partial data', async () => {
      387 |       // First, set some initial values
    > 388 |       await prisma.user.update({
          |       ^
      389 |         where: { id: testUser.id },
      390 |         data: {
      391 |           stableName: 'InitialName',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/profileUpdate.test.ts:388:7)

  ● Profile Update Endpoint › PUT /api/user/profile › should return all profile fields in response

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      419 |         .send({ themePreference: 'dark' });
      420 |
    > 421 |       expect(response.status).toBe(200);
          |                               ^
      422 |       
      423 |       // Verify core user fields are present
      424 |       expect(response.body).toHaveProperty('id');

      at Object.<anonymous> (tests/profileUpdate.test.ts:421:31)

FAIL tests/matches.test.ts
  ● Matches Routes › GET /api/matches/upcoming › should get upcoming matches with auth

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/upcoming › should return 401 without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/upcoming › should return 403 with invalid token

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/history › should get match history with auth

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/history › should support pagination

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/history › should filter by robot ID

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/history › should return 401 without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/battles/:id/log › should return 401 without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/battles/:id/log › should return 403 with invalid token

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

  ● Matches Routes › GET /api/matches/battles/:id/log › should handle non-existent battle ID with auth

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/matches.test.ts:30:16)

FAIL tests/tournamentStreamingRevenue.test.ts
  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |
      16 |   beforeAll(async () => {
    > 17 |     await prisma.$connect();
         |     ^
      18 |
      19 |     // Create cycle metadata
      20 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle

    PrismaClientInitializationError: 
    Invalid `prisma.tournamentMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34

      80 
      81 afterEach(async () => {
      82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    → 83   await prisma.tournamentMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      81 |   afterEach(async () => {
      82 |     // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    > 83 |     await prisma.tournamentMatch.deleteMany({});
         |     ^
      84 |     await prisma.battleParticipant.deleteMany({});
      85 |     await prisma.battle.deleteMany({});
      86 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:83:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should not award streaming revenue for bye matches

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |
      16 |   beforeAll(async () => {
    > 17 |     await prisma.$connect();
         |     ^
      18 |
      19 |     // Create cycle metadata
      20 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)

FAIL tests/robotNameUniqueness.test.ts
  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should handle case-sensitive name validation correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 500

      251 |         console.error('First creation error:', response1.body);
      252 |       }
    > 253 |       expect(response1.status).toBe(201);
          |                                ^
      254 |       if (response1.body.robot?.id) {
      255 |         testRobotIds.push(response1.body.robot.id);
      256 |       }

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:253:32)

  ● Robot Name Uniqueness › POST /api/robots - Name validation › should accept robot names at the 50 character boundary

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 404

      323 |       }
      324 |
    > 325 |       expect(response.status).toBe(201);
          |                               ^
      326 |       expect(response.body.robot.name).toBe(maxLengthName);
      327 |
      328 |       // Cleanup

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:325:31)

FAIL tests/incomeGeneratorNoStreaming.property.test.ts
  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.1: No Income Generator means no passive income

    Property failed after 16 tests
    { seed: 1646601153, path: "15:0", endOnFailure: true }
    Counterexample: [0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:155:29

      152 });
      153 
      154 // Update user prestige
    → 155 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      153 |
      154 |           // Update user prestige
    > 155 |           await prisma.user.update({
          |           ^
      156 |             where: { id: testUserId },
      157 |             data: { prestige },
      158 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/incomeGeneratorNoStreaming.property.test.ts:155:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:134:5)

  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.2: Passive income is independent of robot stats

    Property failed after 1 tests
    { seed: -2089214549, path: "0:0:0", endOnFailure: true }
    Counterexample: [1,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:199:29

      196 });
      197 
      198 // Update user prestige
    → 199 await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      197 |
      198 |           // Update user prestige
    > 199 |           await prisma.user.update({
          |           ^
      200 |             where: { id: testUserId },
      201 |             data: { prestige },
      202 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/incomeGeneratorNoStreaming.property.test.ts:199:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:185:5)

  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.3: Merchandising scales with prestige only

    Property failed after 1 tests
    { seed: 1544752924, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [1,0,1]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.facility.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:252:33

      249 });
      250 
      251 // Create Income Generator facility
    → 252 await prisma.facility.create(
    Foreign key constraint violated: `facilities_user_id_fkey (index)`

      250 |
      251 |           // Create Income Generator facility
    > 252 |           await prisma.facility.create({
          |           ^
      253 |             data: {
      254 |               userId: testUserId,
      255 |               facilityType: 'merchandising_hub',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/incomeGeneratorNoStreaming.property.test.ts:252:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:235:5)

  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.4: All Income Generator levels provide only merchandising

    Property failed after 1 tests
    { seed: -1951852217, path: "0:0", endOnFailure: true }
    Counterexample: [0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.user.update()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:301:29

      298 fc.integer({ min: 0, max: 50000 }), // User prestige
      299 async (prestige) => {
      300   // Update user prestige
    → 301   await prisma.user.update(
    An operation failed because it depends on one or more records that were required but not found. Record to update not found.

      299 |         async (prestige) => {
      300 |           // Update user prestige
    > 301 |           await prisma.user.update({
          |           ^
      302 |             where: { id: testUserId },
      303 |             data: { prestige },
      304 |           });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at tests/incomeGeneratorNoStreaming.property.test.ts:301:11
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:296:5)

FAIL tests/leagues.test.ts
  ● Leagues Routes › GET /api/leagues/:tier/standings › should get bronze league standings

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should get silver league standings

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should return 400 for invalid tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should support pagination

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/instances › should get bronze league instances

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

  ● Leagues Routes › GET /api/leagues/:tier/instances › should return 400 for invalid tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/testHelpers.ts:10:28

       7  * Creates a test user with default values
       8  */
       9 export async function createTestUser(username?: string) {
    → 10   return await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

       8 |  */
       9 | export async function createTestUser(username?: string) {
    > 10 |   return await prisma.user.create({
         |          ^
      11 |     data: {
      12 |       username: username || `test_user_${Date.now()}_${Math.random().toString(36).substring(7)}`,
      13 |       passwordHash: await bcrypt.hash('password123', 10),

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestUser (tests/testHelpers.ts:10:10)
      at Object.<anonymous> (tests/leagues.test.ts:29:16)

FAIL tests/stanceAndYieldAPI.test.ts
  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should update yield threshold to 25

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      206 |         .send({ yieldThreshold: 25 });
      207 |
    > 208 |       expect(response.status).toBe(200);
          |                               ^
      209 |       expect(response.body.yieldThreshold).toBe(25);
      210 |       expect(response.body.message).toContain('25');
      211 |     });

      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:208:31)

FAIL tests/weaponInventory.test.ts
  ● Weapon Inventory Routes › GET /api/weapon-inventory › should get user weapon inventory with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      59 |         .set('Authorization', `Bearer ${authToken}`);
      60 |
    > 61 |       expect(response.status).toBe(200);
         |                               ^
      62 |       expect(Array.isArray(response.body)).toBe(true);
      63 |       
      64 |       // Verify inventory item structure if any items exist

      at Object.<anonymous> (tests/weaponInventory.test.ts:61:31)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 404 with non-existent weapon ID

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      108 |         .send({ weaponId: 99999 });
      109 |
    > 110 |       expect(response.status).toBe(404);
          |                               ^
      111 |     });
      112 |
      113 |     it('should return 401 without authentication', async () => {

      at Object.<anonymous> (tests/weaponInventory.test.ts:110:31)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/storage-status › should get storage status with auth

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      126 |         .set('Authorization', `Bearer ${authToken}`);
      127 |
    > 128 |       expect(response.status).toBe(200);
          |                               ^
      129 |       expect(response.body).toHaveProperty('currentWeapons');
      130 |       expect(response.body).toHaveProperty('maxCapacity');
      131 |       expect(response.body).toHaveProperty('isFull');

      at Object.<anonymous> (tests/weaponInventory.test.ts:128:31)

FAIL tests/leaderboards.test.ts
  ● Leaderboards Routes › GET /api/leaderboards/fame › should get fame leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by league

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by minimum battles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/losses › should get losses leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/losses › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/prestige › should get prestige leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/prestige › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

FAIL tests/facility.test.ts
  ● Facility Routes › GET /api/facility › should get user facilities with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › GET /api/facility › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › GET /api/facility › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 400 without facility type

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 400 with invalid facility type

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should handle upgrade attempt when at max level

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

FAIL tests/economyCalculations.test.ts
  ● Economy Calculations › Facility Operating Costs › should calculate Training Facility operating costs correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 1500
    Received: 250

      29 |
      30 |     it('should calculate Training Facility operating costs correctly', () => {
    > 31 |       expect(calculateFacilityOperatingCost('training_facility', 1)).toBe(1500);
         |                                                                      ^
      32 |       expect(calculateFacilityOperatingCost('training_facility', 5)).toBe(4500); // 1500 + (4 * 750)
      33 |     });
      34 |

      at Object.<anonymous> (tests/economyCalculations.test.ts:31:70)

FAIL tests/integration/tagTeamByeHandling.test.ts
  ● Test suite failed to run

    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m245[0m:[93m27[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?

    [7m245[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);
    [7m   [0m [91m                          ~~~~~~~~~~[0m

      [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m24[0m:[93m7[0m
        [7m24[0m   let testRobotIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~~[0m
        'testRobotIds' is declared here.
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m245[0m:[93m43[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m245[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);
    [7m   [0m [91m                                          ~[0m
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m257[0m:[93m26[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testUsers'. Did you mean 'testUserIds'?

    [7m257[0m     const originalUser = testUsers.find(u => u.id === user!.id);
    [7m   [0m [91m                         ~~~~~~~~~[0m

      [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m23[0m:[93m7[0m
        [7m23[0m   let testUserIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~[0m
        'testUserIds' is declared here.
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m257[0m:[93m41[0m - [91merror[0m[90m TS7006: [0mParameter 'u' implicitly has an 'any' type.

    [7m257[0m     const originalUser = testUsers.find(u => u.id === user!.id);
    [7m   [0m [91m                                        ~[0m

FAIL tests/integration/repairCostConsistency.test.ts
  ● Test suite failed to run

    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m40[0m:[93m18[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'robot' does not exist in type 'WeaponInventoryWhereInput'.

    [7m40[0m         where: { robot: { id: { in: testRobotIds } } },
    [7m  [0m [91m                 ~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m148[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m148[0m           loadoutType: 'single',
    [7m   [0m [91m                       ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'mainWeaponId'.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m25[0m - [91merror[0m[90m TS2304: [0mCannot find name 'weaponInv'.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m                        ~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'currentLeague'.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m                         ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'leagueId'.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m          ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m21[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m                    ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'leaguePoints'.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m25[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'cyclesInCurrentLeague'.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m34[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m                                 ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'combatPower'.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'targetingSystems'.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'criticalSystems'.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'penetration'.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'weaponControl'.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'attackSpeed'.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'armorPlating'.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m25[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m                        ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'shieldCapacity'.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'evasionThrusters'.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'damageDampeners'.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'counterProtocols'.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'hullIntegrity'.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'servoMotors'.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'gyroStabilizers'.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'hydraulicSystems'.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'powerCore'.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m          ~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m22[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m                     ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'combatAlgorithms'.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'threatAnalysis'.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'adaptiveAI'.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m          ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m23[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m                      ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'logicCores'.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m          ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m23[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m                      ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'syncProtocols'.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'supportSystems'.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'formationTactics'.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m180[0m:[93m7[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m180[0m       testRobots.push(robot);
    [7m   [0m [91m      ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m180[0m:[93m23[0m - [91merror[0m[90m TS2448: [0mBlock-scoped variable 'robot' used before its declaration.

    [7m180[0m       testRobots.push(robot);
    [7m   [0m [91m                      ~~~~~[0m

      [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m11[0m
        [7m212[0m     const robot = testRobots[0];
        [7m   [0m [96m          ~~~~~[0m
        'robot' is declared here.
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m181[0m:[93m7[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobotIds'.

    [7m181[0m       testRobotIds.push(robot.id);
    [7m   [0m [91m      ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m181[0m:[93m25[0m - [91merror[0m[90m TS2448: [0mBlock-scoped variable 'robot' used before its declaration.

    [7m181[0m       testRobotIds.push(robot.id);
    [7m   [0m [91m                        ~~~~~[0m

      [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m11[0m
        [7m212[0m     const robot = testRobots[0];
        [7m   [0m [96m          ~~~~~[0m
        'robot' is declared here.
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m187[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m187[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m194[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m194[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m202[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m202[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m212[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m254[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m254[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m261[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m261[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m269[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m269[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m275[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m275[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m321[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m321[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m328[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m328[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m336[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m336[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m342[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m342[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m384[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m384[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m389[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m389[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m441[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m441[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m480[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m480[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m496[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m496[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m529[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m529[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m535[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m535[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m542[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m542[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m549[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m549[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m608[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m608[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m614[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m614[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m621[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m621[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m628[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m628[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m685[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m685[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m691[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m691[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m698[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m698[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m706[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m706[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m772[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m772[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m778[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m778[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m785[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m785[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m792[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m792[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m836[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m836[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m842[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m842[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m19[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m                  ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m32[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m                               ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m20[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m                   ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m21[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m                    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m21[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m                    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m178[0m:[93m9[0m - [91merror[0m[90m TS1109: [0mExpression expected.

    [7m178[0m         },
    [7m   [0m [91m        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m179[0m:[93m7[0m - [91merror[0m[90m TS1135: [0mArgument expression expected.

    [7m179[0m       });
    [7m   [0m [91m      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m182[0m:[93m5[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m182[0m     }
    [7m   [0m [91m    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m248[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m248[0m   });
    [7m   [0m [91m  ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m248[0m:[93m4[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m248[0m   });
    [7m   [0m [91m   ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m894[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m894[0m });
    [7m   [0m [91m~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m894[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m894[0m });
    [7m   [0m [91m ~[0m

FAIL tests/userGeneration.test.ts
  ● Test suite failed to run

    [96mtests/userGeneration.test.ts[0m:[93m148[0m:[93m56[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m148[0m       const result = await generateBattleReadyUsers(5, cycleNumber);
    [7m   [0m [91m                                                       ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m166[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m166[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m181[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m181[0m       await generateBattleReadyUsers(1, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m208[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m208[0m       await generateBattleReadyUsers(2, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m229[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m229[0m       await generateBattleReadyUsers(1, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m247[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m247[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m263[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m263[0m       await generateBattleReadyUsers(5, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m301[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m301[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m327[0m:[93m56[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m327[0m       const result = await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                                       ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m351[0m:[93m5[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m351[0m     });
    [7m   [0m [91m    ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m421[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m421[0m   });
    [7m   [0m [91m  ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m421[0m:[93m4[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m421[0m   });
    [7m   [0m [91m   ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m422[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m422[0m });
    [7m   [0m [91m~[0m
    [96mtests/userGeneration.test.ts[0m:[93m422[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m422[0m });
    [7m   [0m [91m ~[0m

FAIL tests/integration/tagTeamCompleteCycle.test.ts
  ● Test suite failed to run

    [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m300[0m:[93m25[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?

    [7m300[0m         robot1Id: { in: testRobots.map(r => r.id) },
    [7m   [0m [91m                        ~~~~~~~~~~[0m

      [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m25[0m:[93m7[0m
        [7m25[0m   let testRobotIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~~[0m
        'testRobotIds' is declared here.
    [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m300[0m:[93m40[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m300[0m         robot1Id: { in: testRobots.map(r => r.id) },
    [7m   [0m [91m                                       ~[0m

FAIL tests/stanceAndYield.test.ts
  ● Test suite failed to run

    [96mtests/stanceAndYield.test.ts[0m:[93m13[0m:[93m65[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'totalTagTeamBattles' are incompatible.
        Type 'number | undefined' is not assignable to type 'number'.
          Type 'undefined' is not assignable to type 'number'.

    [7m 13[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({
    [7m   [0m [91m                                                                ~[0m
    [7m 14[0m   id: 1,
    [7m   [0m [91m~~~~~~~~[0m
    [7m...[0m 
    [7m 71[0m   ...overrides,
    [7m   [0m [91m~~~~~~~~~~~~~~~[0m
    [7m 72[0m });
    [7m   [0m [91m~[0m

FAIL tests/tagTeamModelIntegration.test.ts
  ● Test suite failed to run

    [96mtests/tagTeamModelIntegration.test.ts[0m:[93m307[0m:[93m14[0m - [91merror[0m[90m TS18047: [0m'match.team2' is possibly 'null'.

    [7m307[0m       expect(match?.team2.activeRobot.id).toBe(testRobot3Id);
    [7m   [0m [91m             ~~~~~~~~~~~~[0m
    [96mtests/tagTeamModelIntegration.test.ts[0m:[93m308[0m:[93m14[0m - [91merror[0m[90m TS18047: [0m'match.team2' is possibly 'null'.

    [7m308[0m       expect(match?.team2.reserveRobot.id).toBe(testRobot4Id);
    [7m   [0m [91m             ~~~~~~~~~~~~[0m

FAIL tests/robotStatsView.test.ts
  ● Test suite failed to run

    [96mtests/robotStatsView.test.ts[0m:[93m79[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m79[0m           userId: testUserId,
    [7m  [0m [91m          ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/robotStatsView.test.ts[0m:[93m113[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m113[0m         userId: testUserId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/robotCalculations.test.ts
  ● Test suite failed to run

    [96mtests/robotCalculations.test.ts[0m:[93m12[0m:[93m65[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'totalTagTeamBattles' are incompatible.
        Type 'number | undefined' is not assignable to type 'number'.
          Type 'undefined' is not assignable to type 'number'.

    [7m 12[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({
    [7m   [0m [91m                                                                ~[0m
    [7m 13[0m   id: 1,
    [7m   [0m [91m~~~~~~~~[0m
    [7m...[0m 
    [7m 70[0m   ...overrides,
    [7m   [0m [91m~~~~~~~~~~~~~~~[0m
    [7m 71[0m });
    [7m   [0m [91m~[0m

FAIL tests/trendAnalysis.property.test.ts
  ● Test suite failed to run

    [96mtests/trendAnalysis.property.test.ts[0m:[93m12[0m:[93m38[0m - [91merror[0m[90m TS2307: [0mCannot find module '../src/services/trendAnalysisService' or its corresponding type declarations.

    [7m12[0m import { trendAnalysisService } from '../src/services/trendAnalysisService';
    [7m  [0m [91m                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                          ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m85[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m88[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                       ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m203[0m:[93m53[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m203[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);
    [7m   [0m [91m                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m260[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m260[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                          ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m85[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m88[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                       ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m329[0m:[93m53[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m329[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);
    [7m   [0m [91m                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m419[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m419[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber);
    [7m   [0m [91m                                                          ~[0m

FAIL tests/tagTeamBattleLogCompleteness.property.test.ts
  ● Test suite failed to run

    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m65[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m65[0m           { userId: testUserId1 },
    [7m  [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m66[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m66[0m           { userId: testUserId2 },
    [7m  [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m125[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m125[0m           { userId: testUserId1 },
    [7m   [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m125[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m125[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m126[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m126[0m           { userId: testUserId2 },
    [7m   [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m126[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m126[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m133[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m133[0m           { team1: { stableId: testUserId1 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m134[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m134[0m           { team1: { stableId: testUserId2 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m135[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m135[0m           { team2: { stableId: testUserId1 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m136[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m136[0m           { team2: { stableId: testUserId2 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m143[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m143[0m           { stableId: testUserId1 },
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m144[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m144[0m           { stableId: testUserId2 },
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m151[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m151[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m152[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m152[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m159[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m159[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m160[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m160[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m186[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m186[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m186[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m186[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m189[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m189[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m189[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m189[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m192[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m192[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m192[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m192[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m195[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m195[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m195[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m195[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m201[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m201[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m216[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m216[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m232[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m232[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m247[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m247[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m261[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m261[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m262[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m262[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m337[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m337[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m337[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m337[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m340[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m340[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m340[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m340[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m343[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m343[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m343[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m343[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m346[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m346[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m346[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m346[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m352[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m352[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m367[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m367[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m382[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m382[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m397[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m397[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m411[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m411[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m412[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m412[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m492[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m492[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m492[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m492[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m495[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m495[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m495[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m495[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m498[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m498[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m498[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m498[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m501[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m501[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m501[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m501[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m507[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m507[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m522[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m522[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m537[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m537[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m552[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m552[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m566[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m566[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m567[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m567[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m648[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m648[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m648[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m648[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m651[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m651[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m651[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m651[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m654[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m654[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m654[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m654[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m657[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m657[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m657[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m657[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m663[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m663[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m678[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m678[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m693[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m693[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m708[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m708[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m722[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m722[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m723[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m723[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m803[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m803[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m803[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m803[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m806[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m806[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m806[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m806[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m809[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m809[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m809[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m809[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m812[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m812[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m812[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m812[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m818[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m818[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m833[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m833[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m848[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m848[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m863[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m863[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m877[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m877[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m878[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m878[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m944[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m944[0m });
    [7m   [0m [91m~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m944[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m944[0m });
    [7m   [0m [91m ~[0m

FAIL tests/profileUpdate.property.test.ts
  ● Test suite failed to run

    [96mtests/profileUpdate.property.test.ts[0m:[93m491[0m:[93m43[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.
      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.

    [7m491[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);
    [7m   [0m [91m                                          ~~~~~~~~[0m
    [96mtests/profileUpdate.property.test.ts[0m:[93m518[0m:[93m43[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.
      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.

    [7m518[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);
    [7m   [0m [91m                                          ~~~~~~~~[0m

FAIL tests/profileApiResponse.property.test.ts
  ● Test suite failed to run

    [96mtests/profileApiResponse.property.test.ts[0m:[93m66[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'totalBattles' does not exist in type '(Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput)'.

    [7m66[0m                 totalBattles: userProfile.totalBattles,
    [7m  [0m [91m                ~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m3397[0m:[93m5[0m
        [7m3397[0m     data: XOR<UserCreateInput, UserUncheckedCreateInput>
        [7m    [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: UserSelect<DefaultArgs> | null | undefined; include?: UserInclude<DefaultArgs> | null | undefined; data: (Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput); }'

FAIL tests/migrateBattlesToEvents.test.ts
  ● Test suite failed to run

    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m8[0m:[93m57[0m - [91merror[0m[90m TS2307: [0mCannot find module '../src/scripts/migrateBattlesToEvents' or its corresponding type declarations.

    [7m8[0m import { migrateBattlesToEvents, verifyMigration } from '../src/scripts/migrateBattlesToEvents';
    [7m [0m [91m                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m111[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.

    [7m111[0m       robot1DamageDealt: battle.robot1DamageDealt,
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m
    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m112[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.

    [7m112[0m       robot2DamageDealt: battle.robot2DamageDealt,
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m

FAIL tests/multiMatchScheduling.property.test.ts
  ● Test suite failed to run

    [96mtests/multiMatchScheduling.property.test.ts[0m:[93m226[0m:[93m26[0m - [91merror[0m[90m TS2322: [0mType 'number | null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.
      Type 'null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.

    [7m226[0m                 where: { id: match.team2Id },
    [7m   [0m [91m                         ~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m22658[0m:[93m5[0m
        [7m22658[0m     id?: number
        [7m     [0m [96m    ~~[0m
        The expected type comes from property 'id' which is declared here on type 'TagTeamWhereUniqueInput'

FAIL tests/metricProgression.property.test.ts
  ● Test suite failed to run

    [96mtests/metricProgression.property.test.ts[0m:[93m131[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1FameAwarded' does not exist on type '{ robot2Id: number; robot1Id: number; id: number; createdAt: Date; winnerId: number | null; battleType: string; leagueType: string; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m131[0m               const fameAwarded = battle.robot1FameAwarded;
    [7m   [0m [91m                                         ~~~~~~~~~~~~~~~~~[0m
    [96mtests/metricProgression.property.test.ts[0m:[93m343[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m343[0m                 userId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m590[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m590[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m644[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m644[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m698[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m698[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m752[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m752[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m806[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m806[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/facilityROI.property.test.ts
  ● Test suite failed to run

    [96mtests/facilityROI.property.test.ts[0m:[93m53[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m53[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m  [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m54[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m54[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m  [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m59[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m59[0m               userId: testUserId,
    [7m  [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m73[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m73[0m               testUserId,
    [7m  [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m89[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m89[0m               testUserId,
    [7m  [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m99[0m:[93m56[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m99[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [
    [7m  [0m [91m                                                       ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m113[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m113[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m150[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m150[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m151[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m151[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m156[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m156[0m               userId: testUserId,
    [7m   [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m170[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m170[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m197[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m197[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m198[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m198[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m208[0m:[93m52[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m208[0m             await eventLogger.logOperatingCosts(i, testUserId, [
    [7m   [0m [91m                                                   ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m222[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m222[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m256[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m256[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m257[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m257[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m262[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m262[0m               userId: testUserId,
    [7m   [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m276[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m276[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m303[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m303[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m304[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m304[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m316[0m:[93m52[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m316[0m             await eventLogger.logOperatingCosts(i, testUserId, [
    [7m   [0m [91m                                                   ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m330[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m330[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m366[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m366[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m367[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m367[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m372[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m372[0m               { userId: testUserId, facilityType: 'income_generator', level: 1 },
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m373[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m373[0m               { userId: testUserId, facilityType: 'repair_bay', level: 1 },
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m380[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m380[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m389[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m389[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m407[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m407[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m428[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m428[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m429[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m429[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m439[0m:[93m56[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m439[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [
    [7m   [0m [91m                                                       ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m455[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m455[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m459[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m459[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m

FAIL tests/integration.test.ts
  ● Test suite failed to run

    [96mtests/integration.test.ts[0m:[93m159[0m:[93m22[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'InputJsonValue | FieldRef<"Battle", "Json"> | JsonNullValueFilter | undefined'.

    [7m159[0m         battleLog: { not: null },
    [7m   [0m [91m                     ~~~[0m
    [96mtests/integration.test.ts[0m:[93m268[0m:[93m13[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'number | IntFilter<"Battle"> | undefined'.

    [7m268[0m           { robot1Id: null },
    [7m   [0m [91m            ~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m21904[0m:[93m5[0m
        [7m21904[0m     robot1Id?: IntFilter<"Battle"> | number
        [7m     [0m [96m    ~~~~~~~~[0m
        The expected type comes from property 'robot1Id' which is declared here on type 'BattleWhereInput'
    [96mtests/integration.test.ts[0m:[93m269[0m:[93m13[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'number | IntFilter<"Battle"> | undefined'.

    [7m269[0m           { robot2Id: null },
    [7m   [0m [91m            ~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m21905[0m:[93m5[0m
        [7m21905[0m     robot2Id?: IntFilter<"Battle"> | number
        [7m     [0m [96m    ~~~~~~~~[0m
        The expected type comes from property 'robot2Id' which is declared here on type 'BattleWhereInput'

FAIL tests/matchListInclusion.property.test.ts
  ● Test suite failed to run

    [96mtests/matchListInclusion.property.test.ts[0m:[93m298[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m298[0m                 userId: testUserId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/matchListInclusion.property.test.ts[0m:[93m333[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m333[0m                 userId: testUserId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/eventLogger.property.test.ts
  ● Test suite failed to run

    [96mtests/eventLogger.property.test.ts[0m:[93m92[0m:[93m15[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to parameter of type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }[]'.
      Type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }'.
        Types of property 'userId' are incompatible.
          Type 'number | null' is not assignable to type 'number | undefined'.
            Type 'null' is not assignable to type 'number | undefined'.

    [7m 92[0m               events.map(e => ({
    [7m   [0m [91m              ~~~~~~~~~~~~~~~~~~[0m
    [7m 93[0m                 eventType: e.eventType,
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 96[0m                 robotId: e.robotId,
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m 97[0m               }))
    [7m   [0m [91m~~~~~~~~~~~~~~~~~[0m

FAIL tests/eloProgression.property.test.ts
  ● Test suite failed to run

    [96mtests/eloProgression.property.test.ts[0m:[93m161[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m161[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m351[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m351[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m529[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m529[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m684[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m684[0m                 userId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/byeTeamBattles.property.test.ts
  ● Test suite failed to run

    [96mtests/byeTeamBattles.property.test.ts[0m:[93m16[0m:[93m3[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'imageUrl' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'string | null'.
          Type 'undefined' is not assignable to type 'string | null'.

    [7m16[0m   return {
    [7m  [0m [91m  ~~~~~~[0m

FAIL tests/battleLogStreamingRevenue.property.test.ts
  ● Test suite failed to run

    [96mtests/battleLogStreamingRevenue.property.test.ts[0m:[93m111[0m:[93m7[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m111[0m       userId,
    [7m   [0m [91m      ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/cycleSnapshot.property.test.ts
  ● Test suite failed to run

    [96mtests/cycleSnapshot.property.test.ts[0m:[93m282[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m282[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m359[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m359[0m               robot1Metric.damageDealt += createdBattle.robot1DamageDealt;
    [7m   [0m [91m                                                        ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m360[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m360[0m               robot1Metric.damageReceived += createdBattle.robot2DamageDealt;
    [7m   [0m [91m                                                           ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m362[0m:[93m56[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m362[0m               robot1Metric.fameChange += createdBattle.robot1FameAwarded;
    [7m   [0m [91m                                                       ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m381[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m381[0m               robot2Metric.damageDealt += createdBattle.robot2DamageDealt;
    [7m   [0m [91m                                                        ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m382[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m382[0m               robot2Metric.damageReceived += createdBattle.robot1DamageDealt;
    [7m   [0m [91m                                                           ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m384[0m:[93m56[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m384[0m               robot2Metric.fameChange += createdBattle.robot2FameAwarded;
    [7m   [0m [91m                                                       ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m528[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m528[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m592[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m592[0m               actualUserIds.add(battle.userId);
    [7m   [0m [91m                                       ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m594[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m594[0m               if (!expectedStableMetrics.has(battle.userId)) {
    [7m   [0m [91m                                                    ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m595[0m:[93m50[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m595[0m                 expectedStableMetrics.set(battle.userId, {
    [7m   [0m [91m                                                 ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m602[0m:[93m64[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m602[0m               const metrics = expectedStableMetrics.get(battle.userId)!;
    [7m   [0m [91m                                                               ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m605[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m605[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;
    [7m   [0m [91m                                                    ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m605[0m:[93m84[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m605[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;
    [7m   [0m [91m                                                                                   ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m606[0m:[93m51[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m606[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);
    [7m   [0m [91m                                                  ~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m606[0m:[93m84[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m606[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);
    [7m   [0m [91m                                                                                   ~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m659[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m659[0m                 user: { connect: { id: user.id } },
    [7m   [0m [91m                ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/analyticsApi.test.ts
  ● Test suite failed to run

    [96mtests/analyticsApi.test.ts[0m:[93m228[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m228[0m           stableMetrics: snapshot.stableMetrics,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24461[0m:[93m5[0m
        [7m24461[0m     stableMetrics: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~~[0m
        The expected type comes from property 'stableMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m229[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m229[0m           robotMetrics: snapshot.robotMetrics,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24462[0m:[93m5[0m
        [7m24462[0m     robotMetrics: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~[0m
        The expected type comes from property 'robotMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m230[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m230[0m           stepDurations: snapshot.stepDurations,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24463[0m:[93m5[0m
        [7m24463[0m     stepDurations: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~~[0m
        The expected type comes from property 'stepDurations' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m1220[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m1220[0m           userId: testUserId,
    [7m    [0m [91m          ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m1724[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m1724[0m             userId: testUserId,
    [7m    [0m [91m            ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m2068[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m2068[0m         userId: testUserId,
    [7m    [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m2211[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m2211[0m             userId: testUserId,
    [7m    [0m [91m            ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/integration/adminCycleGeneration.test.ts (35.469 s)
  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate progressive users per cycle

    TypeError: Cannot read properties of undefined (reading 'usersCreated')

      163 |
      164 |       // Verify user generation in each cycle
    > 165 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);
          |                                                      ^
      166 |       expect(response.body.results[1].userGeneration.usersCreated).toBe(2);
      167 |       expect(response.body.results[2].userGeneration.usersCreated).toBe(3);
      168 |

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:165:54)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should persist cycle count across multiple runs

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 50

      192 |       // Verify cycle metadata
      193 |       const metadata1 = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });
    > 194 |       expect(metadata1!.totalCycles).toBe(5);
          |                                      ^
      195 |
      196 |       // Second run: 3 cycles (should start at cycle 6)
      197 |       const response2 = await request(app)

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:194:38)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should not generate users when flag is false

    expect(received).toBeNull()

    Received: undefined

      242 |       // Verify no user generation in results
      243 |       response.body.results.forEach((result: any) => {
    > 244 |         expect(result.userGeneration).toBeNull();
          |                                       ^
      245 |       });
      246 |
      247 |       // Verify no users were created

      at tests/integration/adminCycleGeneration.test.ts:244:39
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:243:29)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should update lastCycleAt timestamp

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 1771959101338
    Received:    1771959092385

      289 |       const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });
      290 |       expect(metadata!.lastCycleAt).not.toBeNull();
    > 291 |       expect(metadata!.lastCycleAt!.getTime()).toBeGreaterThanOrEqual(beforeTime.getTime());
          |                                                ^
      292 |     });
      293 |
      294 |     it('should handle errors in user generation gracefully', async () => {

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:291:48)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should handle errors in user generation gracefully

    expect(received).toHaveProperty(path)

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

      327 |         // Cycle should still complete despite user generation error
      328 |         expect(response.status).toBe(200);
    > 329 |         expect(response.body.results[0].userGeneration).toHaveProperty('error');
          |                                                         ^
      330 |         expect(response.body.results[0].userGeneration.error).toContain('Practice Sword');
      331 |
      332 |         // Restore Practice Sword

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:329:57)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should return correct response structure

    expect(received).toHaveProperty(path)

    Expected path: "userGeneration"
    Received path: []

    Received value: {"cycle": 1, "duration": 3, "error": "
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27·
      194 };
      195·
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      371 |       response.body.results.forEach((result: any) => {
      372 |         expect(result).toHaveProperty('cycle');
    > 373 |         expect(result).toHaveProperty('userGeneration');
          |                        ^
      374 |         expect(result.userGeneration).toHaveProperty('usersCreated');
      375 |         expect(result.userGeneration).toHaveProperty('robotsCreated');
      376 |         expect(result.userGeneration).toHaveProperty('usernames');

      at tests/integration/adminCycleGeneration.test.ts:373:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:371:29)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should auto-create CycleMetadata if missing

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: undefined

      416 |
      417 |       expect(response.status).toBe(200);
    > 418 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);
          |                                                                    ^
      419 |
      420 |       // Verify CycleMetadata was created
      421 |       const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:418:68)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate correct total user count formula (N*(N+1)/2)

    expect(received).toBe(expected) // Object.is equality

    Expected: 55
    Received: 0

      443 |       });
      444 |
    > 445 |       expect(totalUsers).toBe(expectedTotal);
          |                          ^
      446 |     });
      447 |
      448 |     it('should create users eligible for matchmaking', async () => {

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:445:26)

FAIL tests/streamingRevenueFormula.property.test.ts (32.663 s)
  ● Property 1: Streaming Revenue Formula Correctness › Property 1: Streaming revenue formula correctness

    Property failed after 91 tests
    { seed: 972043445, path: "90:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29

      20 
      21 // Helper function to create a minimal test robot
      22 async function createTestRobot(userId: number, battles: number, fame: number) {
    → 23   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      21 | // Helper function to create a minimal test robot
      22 | async function createTestRobot(userId: number, battles: number, fame: number) {
    > 23 |   return await prisma.robot.create({
         |          ^
      24 |     data: {
      25 |       userId,
      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)
      at tests/streamingRevenueFormula.property.test.ts:139:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:124:5)

  ● Property 1: Streaming Revenue Formula Correctness › Property 1.1: Bye matches return null

    Property failed after 1 tests
    { seed: -2116005098, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29

      20 
      21 // Helper function to create a minimal test robot
      22 async function createTestRobot(userId: number, battles: number, fame: number) {
    → 23   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      21 | // Helper function to create a minimal test robot
      22 | async function createTestRobot(userId: number, battles: number, fame: number) {
    > 23 |   return await prisma.robot.create({
         |          ^
      24 |     data: {
      25 |       userId,
      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)
      at tests/streamingRevenueFormula.property.test.ts:217:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:202:5)

  ● Property 1: Streaming Revenue Formula Correctness › Property 1.2: Zero battles and fame gives base amount times studio multiplier

    Property failed after 1 tests
    { seed: -853803894, path: "0:0", endOnFailure: true }
    Counterexample: [0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29

      20 
      21 // Helper function to create a minimal test robot
      22 async function createTestRobot(userId: number, battles: number, fame: number) {
    → 23   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      21 | // Helper function to create a minimal test robot
      22 | async function createTestRobot(userId: number, battles: number, fame: number) {
    > 23 |   return await prisma.robot.create({
         |          ^
      24 |     data: {
      25 |       userId,
      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)
      at tests/streamingRevenueFormula.property.test.ts:261:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:248:5)

  ● Property 1: Streaming Revenue Formula Correctness › Property 1.3: Revenue increases with battles, fame, and studio level

    Property failed after 1 tests
    { seed: 743508361, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0,1,1]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29

      20 
      21 // Helper function to create a minimal test robot
      22 async function createTestRobot(userId: number, battles: number, fame: number) {
    → 23   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      21 | // Helper function to create a minimal test robot
      22 | async function createTestRobot(userId: number, battles: number, fame: number) {
    > 23 |   return await prisma.robot.create({
         |          ^
      24 |     data: {
      25 |       userId,
      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)
      at tests/streamingRevenueFormula.property.test.ts:330:26
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:299:5)

  ● Property 12: Tag Team Single Payment Per Team › Property 12: Each stable receives exactly one payment per Tag Team battle

    Property failed after 55 tests
    { seed: -1709674936, path: "54", endOnFailure: true }
    Counterexample: [158,7124,980,3833,6,24998,691,17839,5,4]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 28806
    Received: 27806

      1768 |           const balanceIncrease2 = finalBalance2 - initialBalance2;
      1769 |
    > 1770 |           expect(balanceIncrease1).toBe(expectedTeam1Revenue);
           |                                    ^
      1771 |           expect(balanceIncrease2).toBe(expectedTeam2Revenue);
      1772 |
      1773 |           // Property: The service should return exactly one revenue calculation per team

      at tests/streamingRevenueFormula.property.test.ts:1770:36
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1659:5)

FAIL tests/performanceDegradation.property.test.ts (59.063 s)
  ● Property 16: Performance Degradation Detection › Property 16.1: Degradation detected when recent average > 150% of baseline

    Property failed after 1 tests
    { seed: -803281918, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [100,1.5099999904632568,"step_a"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/performanceDegradation.property.test.ts:52:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:39:5)

  ● Property 16: Performance Degradation Detection › Property 16.2: No degradation when recent average <= 150% of baseline

    Property failed after 1 tests
    { seed: -235569536, path: "0:3:0:0:0:0:0:1:0:0:0:1:0:1:0:1:0:0:0:2:0:0:0:1:0", endOnFailure: true }
    Counterexample: [100,0.5122798085212708,"step_x"]
    Shrunk 24 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:108:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:85:5)

  ● Property 16: Performance Degradation Detection › Property 16.3: Degradation severity correctly classified (warning vs critical)

    Property failed after 1 tests
    { seed: -1137141157, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [100,1.5099999904632568,"step_1"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).not.toBeNull()

    Received: null

      152 |           const alert = await service.detectStepDegradation(stepName, 10, 100);
      153 |
    > 154 |           expect(alert).not.toBeNull();
          |                             ^
      155 |
      156 |           // Property: Severity matches degradation percentage
      157 |           if (expectedDegradationPercent >= 100) {

      at tests/performanceDegradation.property.test.ts:154:29
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:125:5)

  ● Property 16: Performance Degradation Detection › Property 16.4: Multiple steps monitored independently

    Property failed after 1 tests
    { seed: 1703689124, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [[{"stepName":"step_a","baselineDuration":100,"isDegraded":false},{"stepName":"step_a","baselineDuration":100,"isDegraded":false}]]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/performanceDegradation.property.test.ts:200:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:172:5)

  ● Property 16: Performance Degradation Detection › Property 16.5: Detection consistent across different baseline sizes

    Property failed after 1 tests
    { seed: -891918537, path: "0:6:3:4", endOnFailure: true }
    Counterexample: [1722,112,"test_step_a"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:264:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:241:5)

  ● Property 16: Performance Degradation Detection › Property 16.6: Alerts sorted by degradation percentage (highest first)

    thrown: "Exceeded timeout of 30000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      279 |    * Property 16.6: Degradation alerts are sorted by severity
      280 |    */
    > 281 |   test('Property 16.6: Alerts sorted by degradation percentage (highest first)', async () => {
          |   ^
      282 |     await fc.assert(
      283 |       fc.asyncProperty(
      284 |         fc.array(

      at tests/performanceDegradation.property.test.ts:281:3
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:17:1)


Test Suites: 75 failed, 25 passed, 100 total
Tests:       261 failed, 568 passed, 829 total
Snapshots:   0 total
Time:        60.421 s, estimated 92 s
Ran all test suites.
