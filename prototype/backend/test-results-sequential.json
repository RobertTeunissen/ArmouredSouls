
> armoured-souls-backend@0.1.0 test
> jest --maxWorkers=1 --json

{"numFailedTestSuites":87,"numFailedTests":497,"numPassedTestSuites":13,"numPassedTests":332,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":39,"numTodoTests":0,"numTotalTestSuites":100,"numTotalTests":829,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1771860659303,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":21119,"failureDetails":[{"matcherResult":{"actual":41,"expected":1,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: 41","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: 41\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:165:68)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should generate progressive users per cycle","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"should generate progressive users per cycle"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":30003,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 30000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 30000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:176:5\n    at _dispatchDescribe (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/index.js:91:26)\n    at describe (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/index.js:55:5)\n    at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:146:3\n    at _dispatchDescribe (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/index.js:91:26)\n    at describe (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/index.js:55:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:25:1)\n    at Runtime._execModule (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runtime/build/index.js:1439:24)\n    at Runtime._loadModule (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runtime/build/index.js:1022:12)\n    at Runtime.requireModule (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runtime/build/index.js:882:12)\n    at jestAdapter (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)\n    at runTestInternal (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should persist cycle count across multiple runs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should persist cycle count across multiple runs"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":24268,"failureDetails":[],"failureMessages":[],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should not generate users when flag is false","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should not generate users when flag is false"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":18338,"failureDetails":[],"failureMessages":[],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should not generate users when flag is omitted (default false)","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should not generate users when flag is omitted (default false)"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":18999,"failureDetails":[],"failureMessages":[],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should update lastCycleAt timestamp","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update lastCycleAt timestamp"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should handle errors in user generation gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should handle errors in user generation gracefully"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":18344,"failureDetails":[{"matcherResult":{"message":"expect(received).toHaveProperty(path)\n\nExpected path: \"usersCreated\"\nReceived path: []\n\nReceived value: {\"error\": \"\nInvalid `tx.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:479:36·\n  476 await prisma.$transaction(async (tx) => {\n  477   // Create user\n  478   const hashedPassword = await bcrypt.hash('testpass123', 10);\n→ 479   const user = await tx.user.create(\nUnique constraint failed on the fields: (`username`)\"}","pass":false}}],"failureMessages":["Error: expect(received).toHaveProperty(path)\n\nExpected path: \"usersCreated\"\nReceived path: []\n\nReceived value: {\"error\": \"\nInvalid `tx.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:479:36·\n  476 await prisma.$transaction(async (tx) => {\n  477   // Create user\n  478   const hashedPassword = await bcrypt.hash('testpass123', 10);\n→ 479   const user = await tx.user.create(\nUnique constraint failed on the fields: (`username`)\"}\n    at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:374:39\n    at Array.forEach (<anonymous>)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:371:29)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should return correct response structure","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"failed","title":"should return correct response structure"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":92,"failureDetails":[],"failureMessages":[],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should require admin authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require admin authentication"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":9818,"failureDetails":[{"matcherResult":{"expected":1,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: undefined","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: undefined\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:418:68)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should auto-create CycleMetadata if missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should auto-create CycleMetadata if missing"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":30003,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 30000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 30000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:426:5\n    at _dispatchDescribe (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/index.js:91:26)\n    at describe (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/index.js:55:5)\n    at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:146:3\n    at _dispatchDescribe (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/index.js:91:26)\n    at describe (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/index.js:55:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:25:1)\n    at Runtime._execModule (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runtime/build/index.js:1439:24)\n    at Runtime._loadModule (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runtime/build/index.js:1022:12)\n    at Runtime.requireModule (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runtime/build/index.js:882:12)\n    at jestAdapter (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)\n    at runTestInternal (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should generate correct total user count formula (N*(N+1)/2)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate correct total user count formula (N*(N+1)/2)"},{"ancestorTitles":["Admin Cycle Generation Integration Tests","POST /api/admin/cycles/bulk with generateUsersPerCycle"],"duration":27256,"failureDetails":[],"failureMessages":[],"fullName":"Admin Cycle Generation Integration Tests POST /api/admin/cycles/bulk with generateUsersPerCycle should create users eligible for matchmaking","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should create users eligible for matchmaking"}],"coverage":{},"endTime":1771861048230,"message":"  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate progressive users per cycle\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1\n    Received: 41\n\n      163 |\n      164 |       // Verify user generation in each cycle\n    > 165 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);\n          |                                                                    ^\n      166 |       expect(response.body.results[1].userGeneration.usersCreated).toBe(2);\n      167 |       expect(response.body.results[2].userGeneration.usersCreated).toBe(3);\n      168 |\n\n      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:165:68)\n\n  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should persist cycle count across multiple runs\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n      174 |     });\n      175 |\n    > 176 |     it('should persist cycle count across multiple runs', async () => {\n          |     ^\n      177 |       // First run: 5 cycles\n      178 |       const response1 = await request(app)\n      179 |         .post('/api/admin/cycles/bulk')\n\n      at tests/integration/adminCycleGeneration.test.ts:176:5\n      at tests/integration/adminCycleGeneration.test.ts:146:3\n      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:25:1)\n\n  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should return correct response structure\n\n    expect(received).toHaveProperty(path)\n\n    Expected path: \"usersCreated\"\n    Received path: []\n\n    Received value: {\"error\": \"\n    Invalid `tx.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:479:36·\n      476 await prisma.$transaction(async (tx) => {\n      477   // Create user\n      478   const hashedPassword = await bcrypt.hash('testpass123', 10);\n    → 479   const user = await tx.user.create(\n    Unique constraint failed on the fields: (`username`)\"}\n\n      372 |         expect(result).toHaveProperty('cycle');\n      373 |         expect(result).toHaveProperty('userGeneration');\n    > 374 |         expect(result.userGeneration).toHaveProperty('usersCreated');\n          |                                       ^\n      375 |         expect(result.userGeneration).toHaveProperty('robotsCreated');\n      376 |         expect(result.userGeneration).toHaveProperty('usernames');\n      377 |       });\n\n      at tests/integration/adminCycleGeneration.test.ts:374:39\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:371:29)\n\n  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should auto-create CycleMetadata if missing\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1\n    Received: undefined\n\n      416 |\n      417 |       expect(response.status).toBe(200);\n    > 418 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);\n          |                                                                    ^\n      419 |\n      420 |       // Verify CycleMetadata was created\n      421 |       const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });\n\n      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:418:68)\n\n  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate correct total user count formula (N*(N+1)/2)\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n      424 |     });\n      425 |\n    > 426 |     it('should generate correct total user count formula (N*(N+1)/2)', async () => {\n          |     ^\n      427 |       const cycles = 10;\n      428 |       const expectedTotal = (cycles * (cycles + 1)) / 2; // 55 users\n      429 |\n\n      at tests/integration/adminCycleGeneration.test.ts:426:5\n      at tests/integration/adminCycleGeneration.test.ts:146:3\n      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:25:1)\n\n\n  ● Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.weapon.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts:135:25\n\n      132 }\n      133 \n      134 // Cleanup weapons created in beforeAll\n    → 135 await prisma.weapon.deleteMany(\n    Foreign key constraint violated: `weapon_inventory_weapon_id_fkey (index)`\n\n      133 |\n      134 |     // Cleanup weapons created in beforeAll\n    > 135 |     await prisma.weapon.deleteMany({\n          |     ^\n      136 |       where: {\n      137 |         name: {\n      138 |           in: ['Power Sword', 'Combat Shield', 'Plasma Cannon', 'Railgun', 'Heavy Hammer', 'Machine Gun', 'Plasma Blade', 'Plasma Rifle'],\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:135:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/adminCycleGeneration.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 16: Performance Degradation Detection"],"duration":5647,"failureDetails":[{}],"failureMessages":["Error: Property failed after 14 tests\n{ seed: 285449287, path: \"13:0:0:0\", endOnFailure: true }\nCounterexample: [100,1.5099999904632568,\"step_a\"]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 16: Performance Degradation Detection Property 16.1: Degradation detected when recent average > 150% of baseline","invocations":1,"location":null,"numPassingAsserts":65,"retryReasons":[],"status":"failed","title":"Property 16.1: Degradation detected when recent average > 150% of baseline"},{"ancestorTitles":["Property 16: Performance Degradation Detection"],"duration":14890,"failureDetails":[{}],"failureMessages":["Error: Property failed after 2 tests\n{ seed: 1932694778, path: \"1:2:1:4:2:4:1:2:1:1:0:0:0:1\", endOnFailure: true }\nCounterexample: [100,0.9957386255264282,\"step_x\"]\nShrunk 13 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 16: Performance Degradation Detection Property 16.2: No degradation when recent average <= 150% of baseline","invocations":1,"location":null,"numPassingAsserts":32,"retryReasons":[],"status":"failed","title":"Property 16.2: No degradation when recent average <= 150% of baseline"},{"ancestorTitles":["Property 16: Performance Degradation Detection"],"duration":8548,"failureDetails":[],"failureMessages":[],"fullName":"Property 16: Performance Degradation Detection Property 16.3: Degradation severity correctly classified (warning vs critical)","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"Property 16.3: Degradation severity correctly classified (warning vs critical)"},{"ancestorTitles":["Property 16: Performance Degradation Detection"],"duration":11656,"failureDetails":[],"failureMessages":[],"fullName":"Property 16: Performance Degradation Detection Property 16.4: Multiple steps monitored independently","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"Property 16.4: Multiple steps monitored independently"},{"ancestorTitles":["Property 16: Performance Degradation Detection"],"duration":7663,"failureDetails":[],"failureMessages":[],"fullName":"Property 16: Performance Degradation Detection Property 16.5: Detection consistent across different baseline sizes","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"Property 16.5: Detection consistent across different baseline sizes"},{"ancestorTitles":["Property 16: Performance Degradation Detection"],"duration":12642,"failureDetails":[],"failureMessages":[],"fullName":"Property 16: Performance Degradation Detection Property 16.6: Alerts sorted by degradation percentage (highest first)","invocations":1,"location":null,"numPassingAsserts":62,"retryReasons":[],"status":"passed","title":"Property 16.6: Alerts sorted by degradation percentage (highest first)"}],"endTime":1771860922575,"message":"  ● Property 16: Performance Degradation Detection › Property 16.1: Degradation detected when recent average > 150% of baseline\n\n    Property failed after 14 tests\n    { seed: 285449287, path: \"13:0:0:0\", endOnFailure: true }\n    Counterexample: [100,1.5099999904632568,\"step_a\"]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.auditLog.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n      194 };\n      195 \n      196 // Insert into database\n    → 197 await prisma.auditLog.create(\n    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)\n\n      195 |     \n      196 |     // Insert into database\n    > 197 |     await prisma.auditLog.create({\n          |     ^\n      198 |       data: {\n      199 |         cycleNumber: entry.cycleNumber,\n      200 |         eventType: entry.eventType,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)\n      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)\n      at tests/performanceDegradation.property.test.ts:62:13\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:39:5)\n\n  ● Property 16: Performance Degradation Detection › Property 16.2: No degradation when recent average <= 150% of baseline\n\n    Property failed after 2 tests\n    { seed: 1932694778, path: \"1:2:1:4:2:4:1:2:1:1:0:0:0:1\", endOnFailure: true }\n    Counterexample: [100,0.9957386255264282,\"step_x\"]\n    Shrunk 13 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.auditLog.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n      194 };\n      195 \n      196 // Insert into database\n    → 197 await prisma.auditLog.create(\n    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)\n\n      195 |     \n      196 |     // Insert into database\n    > 197 |     await prisma.auditLog.create({\n          |     ^\n      198 |       data: {\n      199 |         cycleNumber: entry.cycleNumber,\n      200 |         eventType: entry.eventType,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)\n      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)\n      at tests/performanceDegradation.property.test.ts:108:13\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:85:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/performanceDegradation.property.test.ts","startTime":1771860861251,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 1: Streaming Revenue Formula Correctness"],"duration":1114,"failureDetails":[],"failureMessages":[],"fullName":"Property 1: Streaming Revenue Formula Correctness Property 1: Streaming revenue formula correctness","invocations":1,"location":null,"numPassingAsserts":900,"retryReasons":[],"status":"passed","title":"Property 1: Streaming revenue formula correctness"},{"ancestorTitles":["Property 1: Streaming Revenue Formula Correctness"],"duration":942,"failureDetails":[],"failureMessages":[],"fullName":"Property 1: Streaming Revenue Formula Correctness Property 1.1: Bye matches return null","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"Property 1.1: Bye matches return null"},{"ancestorTitles":["Property 1: Streaming Revenue Formula Correctness"],"duration":1767,"failureDetails":[],"failureMessages":[],"fullName":"Property 1: Streaming Revenue Formula Correctness Property 1.2: Zero battles and fame gives base amount times studio multiplier","invocations":1,"location":null,"numPassingAsserts":150,"retryReasons":[],"status":"passed","title":"Property 1.2: Zero battles and fame gives base amount times studio multiplier"},{"ancestorTitles":["Property 1: Streaming Revenue Formula Correctness"],"duration":2135,"failureDetails":[],"failureMessages":[],"fullName":"Property 1: Streaming Revenue Formula Correctness Property 1.3: Revenue increases with battles, fame, and studio level","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"Property 1.3: Revenue increases with battles, fame, and studio level"},{"ancestorTitles":["Property 4: Battle Count Includes All Battle Types"],"duration":1860,"failureDetails":[],"failureMessages":[],"fullName":"Property 4: Battle Count Includes All Battle Types Property 4: Battle count includes all battle types","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"Property 4: Battle count includes all battle types"},{"ancestorTitles":["Property 4: Battle Count Includes All Battle Types"],"duration":534,"failureDetails":[],"failureMessages":[],"fullName":"Property 4: Battle Count Includes All Battle Types Property 4.1: Battle count with only 1v1 battles","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"Property 4.1: Battle count with only 1v1 battles"},{"ancestorTitles":["Property 4: Battle Count Includes All Battle Types"],"duration":706,"failureDetails":[],"failureMessages":[],"fullName":"Property 4: Battle Count Includes All Battle Types Property 4.2: Battle count with only tag team battles","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"Property 4.2: Battle count with only tag team battles"},{"ancestorTitles":["Property 4: Battle Count Includes All Battle Types"],"duration":1503,"failureDetails":[],"failureMessages":[],"fullName":"Property 4: Battle Count Includes All Battle Types Property 4.3: More battles always means more revenue (with same fame and studio)","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 4.3: More battles always means more revenue (with same fame and studio)"},{"ancestorTitles":["Property 6: Studio Multiplier Applies Stable-Wide"],"duration":2643,"failureDetails":[],"failureMessages":[],"fullName":"Property 6: Studio Multiplier Applies Stable-Wide Property 6: Studio multiplier applies stable-wide","invocations":1,"location":null,"numPassingAsserts":898,"retryReasons":[],"status":"passed","title":"Property 6: Studio multiplier applies stable-wide"},{"ancestorTitles":["Property 6: Studio Multiplier Applies Stable-Wide"],"duration":3074,"failureDetails":[],"failureMessages":[],"fullName":"Property 6: Studio Multiplier Applies Stable-Wide Property 6.1: Studio multiplier is determined by stable, not robot","invocations":1,"location":null,"numPassingAsserts":350,"retryReasons":[],"status":"passed","title":"Property 6.1: Studio multiplier is determined by stable, not robot"},{"ancestorTitles":["Property 6: Studio Multiplier Applies Stable-Wide"],"duration":2036,"failureDetails":[],"failureMessages":[],"fullName":"Property 6: Studio Multiplier Applies Stable-Wide Property 6.2: Studio upgrade affects all robots in stable","invocations":1,"location":null,"numPassingAsserts":350,"retryReasons":[],"status":"passed","title":"Property 6.2: Studio upgrade affects all robots in stable"},{"ancestorTitles":["Property 6: Studio Multiplier Applies Stable-Wide"],"duration":1573,"failureDetails":[],"failureMessages":[],"fullName":"Property 6: Studio Multiplier Applies Stable-Wide Property 6.3: All robots in stable use same studio multiplier","invocations":1,"location":null,"numPassingAsserts":764,"retryReasons":[],"status":"passed","title":"Property 6.3: All robots in stable use same studio multiplier"},{"ancestorTitles":["Property 2: Streaming Revenue Awarded to All Battle Participants"],"duration":2323,"failureDetails":[{}],"failureMessages":["Error: Property failed after 39 tests\n{ seed: 163298783, path: \"38:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [0,0,0,0,0,0]\nShrunk 5 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 2: Streaming Revenue Awarded to All Battle Participants Property 2: Both participants receive streaming revenue in non-bye battles","invocations":1,"location":null,"numPassingAsserts":532,"retryReasons":[],"status":"failed","title":"Property 2: Both participants receive streaming revenue in non-bye battles"},{"ancestorTitles":["Property 2: Streaming Revenue Awarded to All Battle Participants"],"duration":31,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1534544641, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [0,0,0]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 2: Streaming Revenue Awarded to All Battle Participants Property 2.1: Both winner and loser receive streaming revenue","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 2.1: Both winner and loser receive streaming revenue"},{"ancestorTitles":["Property 2: Streaming Revenue Awarded to All Battle Participants"],"duration":22,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -199288330, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [0,0,0,0]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 2: Streaming Revenue Awarded to All Battle Participants Property 2.2: Streaming revenue is independent of battle outcome","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 2.2: Streaming revenue is independent of battle outcome"},{"ancestorTitles":["Property 2: Streaming Revenue Awarded to All Battle Participants"],"duration":9,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1053460349, path: \"0\", endOnFailure: true }\nCounterexample: [null]\nShrunk 0 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 2: Streaming Revenue Awarded to All Battle Participants Property 2.3: New robots with no stats still receive base streaming revenue","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 2.3: New robots with no stats still receive base streaming revenue"},{"ancestorTitles":["Property 2: Streaming Revenue Awarded to All Battle Participants"],"duration":54,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -312014272, path: \"0:0:1:0:1:1\", endOnFailure: true }\nCounterexample: [0,1,0,0]\nShrunk 5 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 2: Streaming Revenue Awarded to All Battle Participants Property 2.4: Both participants receive revenue even with different studio levels","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 2.4: Both participants receive revenue even with different studio levels"},{"ancestorTitles":["Property 3: No Streaming Revenue for Bye Matches"],"duration":845,"failureDetails":[{}],"failureMessages":["Error: Property failed after 64 tests\n{ seed: -1502997055, path: \"63:0:0:0\", endOnFailure: true }\nCounterexample: [0,0,0]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 3: No Streaming Revenue for Bye Matches Property 3: No streaming revenue for bye matches","invocations":1,"location":null,"numPassingAsserts":63,"retryReasons":[],"status":"failed","title":"Property 3: No streaming revenue for bye matches"},{"ancestorTitles":["Property 3: No Streaming Revenue for Bye Matches"],"duration":28,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1192470947, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [1000,5000,5]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 3: No Streaming Revenue for Bye Matches Property 3.1: Veteran robots get no revenue from bye matches","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 3.1: Veteran robots get no revenue from bye matches"},{"ancestorTitles":["Property 3: No Streaming Revenue for Bye Matches"],"duration":20,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1774215304, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [0,0,0]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 3: No Streaming Revenue for Bye Matches Property 3.2: Bye match flag always results in null revenue","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 3.2: Bye match flag always results in null revenue"},{"ancestorTitles":["Property 3: No Streaming Revenue for Bye Matches"],"duration":10,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -266818197, path: \"0\", endOnFailure: true }\nCounterexample: [null]\nShrunk 0 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 3: No Streaming Revenue for Bye Matches Property 3.3: New robots get null revenue from bye matches","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 3.3: New robots get null revenue from bye matches"},{"ancestorTitles":["Property 3: No Streaming Revenue for Bye Matches"],"duration":29,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -901603213, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [0,0]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 3: No Streaming Revenue for Bye Matches Property 3.4: Max studio level does not override bye match rule","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 3.4: Max studio level does not override bye match rule"},{"ancestorTitles":["Property 12: Tag Team Single Payment Per Team"],"duration":12813,"failureDetails":[{}],"failureMessages":["Error: Property failed after 89 tests\n{ seed: 1771654850, path: \"88:41:43:46:53\", endOnFailure: true }\nCounterexample: [2117,14984,3391,523,0,12905,1109,10921,4,9]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 12: Tag Team Single Payment Per Team Property 12: Each stable receives exactly one payment per Tag Team battle","invocations":1,"location":null,"numPassingAsserts":4746,"retryReasons":[],"status":"failed","title":"Property 12: Each stable receives exactly one payment per Tag Team battle"},{"ancestorTitles":["Property 12: Tag Team Single Payment Per Team"],"duration":1103,"failureDetails":[],"failureMessages":[],"fullName":"Property 12: Tag Team Single Payment Per Team Property 12.1: Single payment even with identical robot stats","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 12.1: Single payment even with identical robot stats"},{"ancestorTitles":["Property 12: Tag Team Single Payment Per Team"],"duration":1870,"failureDetails":[{}],"failureMessages":["Error: Property failed after 41 tests\n{ seed: 741915854, path: \"40\", endOnFailure: true }\nCounterexample: [100,12499,2405,111,0]\nShrunk 0 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 12: Tag Team Single Payment Per Team Property 12.2: Payment uses team max values, not sum of robots","invocations":1,"location":null,"numPassingAsserts":280,"retryReasons":[],"status":"failed","title":"Property 12.2: Payment uses team max values, not sum of robots"},{"ancestorTitles":["Property 10: Tag Team Uses Maximum Values"],"duration":2183,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Tag Team Uses Maximum Values Property 10: Tag Team uses maximum battles and fame from each team","invocations":1,"location":null,"numPassingAsserts":1600,"retryReasons":[],"status":"passed","title":"Property 10: Tag Team uses maximum battles and fame from each team"},{"ancestorTitles":["Property 10: Tag Team Uses Maximum Values"],"duration":937,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Tag Team Uses Maximum Values Property 10.1: Tag Team uses max battles from one robot and max fame from another","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"Property 10.1: Tag Team uses max battles from one robot and max fame from another"},{"ancestorTitles":["Property 10: Tag Team Uses Maximum Values"],"duration":999,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Tag Team Uses Maximum Values Property 10.2: Tag Team with equal robot stats uses either robot","invocations":1,"location":null,"numPassingAsserts":250,"retryReasons":[],"status":"passed","title":"Property 10.2: Tag Team with equal robot stats uses either robot"},{"ancestorTitles":["Property 10: Tag Team Uses Maximum Values"],"duration":1781,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Tag Team Uses Maximum Values Property 10.3: Each team independently selects max values","invocations":1,"location":null,"numPassingAsserts":1200,"retryReasons":[],"status":"passed","title":"Property 10.3: Each team independently selects max values"},{"ancestorTitles":["Property 10: Tag Team Uses Maximum Values"],"duration":941,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Tag Team Uses Maximum Values Property 10.4: Tag Team revenue benefits from max value selection","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"Property 10.4: Tag Team revenue benefits from max value selection"},{"ancestorTitles":["Property 10: Tag Team Uses Maximum Values"],"duration":994,"failureDetails":[],"failureMessages":[],"fullName":"Property 10: Tag Team Uses Maximum Values Property 10.5: Tag Team with new robots uses base multipliers","invocations":1,"location":null,"numPassingAsserts":450,"retryReasons":[],"status":"passed","title":"Property 10.5: Tag Team with new robots uses base multipliers"},{"ancestorTitles":["Property 11: Tag Team Separate Calculations"],"duration":2177,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Tag Team Separate Calculations Property 11: Tag Team separate calculations use own team values","invocations":1,"location":null,"numPassingAsserts":2208,"retryReasons":[],"status":"passed","title":"Property 11: Tag Team separate calculations use own team values"},{"ancestorTitles":["Property 11: Tag Team Separate Calculations"],"duration":1082,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Tag Team Separate Calculations Property 11.1: Higher stat team gets more revenue independently","invocations":1,"location":null,"numPassingAsserts":300,"retryReasons":[],"status":"passed","title":"Property 11.1: Higher stat team gets more revenue independently"},{"ancestorTitles":["Property 11: Tag Team Separate Calculations"],"duration":981,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Tag Team Separate Calculations Property 11.2: Each team uses their own studio multiplier","invocations":1,"location":null,"numPassingAsserts":432,"retryReasons":[],"status":"passed","title":"Property 11.2: Each team uses their own studio multiplier"},{"ancestorTitles":["Property 11: Tag Team Separate Calculations"],"duration":1318,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Tag Team Separate Calculations Property 11.3: Team calculations are independent of opponent composition","invocations":1,"location":null,"numPassingAsserts":300,"retryReasons":[],"status":"passed","title":"Property 11.3: Team calculations are independent of opponent composition"},{"ancestorTitles":["Property 11: Tag Team Separate Calculations"],"duration":2739,"failureDetails":[],"failureMessages":[],"fullName":"Property 11: Tag Team Separate Calculations Property 11.4: Both teams receive positive revenue independently","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"Property 11.4: Both teams receive positive revenue independently"}],"coverage":{},"endTime":1771861048230,"message":"  ● Property 2: Streaming Revenue Awarded to All Battle Participants › Property 2: Both participants receive streaming revenue in non-bye battles\n\n    Property failed after 39 tests\n    { seed: 163298783, path: \"38:0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,0,0,0,0,0]\n    Shrunk 5 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1029:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1005:5)\n\n  ● Property 2: Streaming Revenue Awarded to All Battle Participants › Property 2.1: Both winner and loser receive streaming revenue\n\n    Property failed after 1 tests\n    { seed: 1534544641, path: \"0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,0,0]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1117:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1096:5)\n\n  ● Property 2: Streaming Revenue Awarded to All Battle Participants › Property 2.2: Streaming revenue is independent of battle outcome\n\n    Property failed after 1 tests\n    { seed: -199288330, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,0,0,0]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1176:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1168:5)\n\n  ● Property 2: Streaming Revenue Awarded to All Battle Participants › Property 2.3: New robots with no stats still receive base streaming revenue\n\n    Property failed after 1 tests\n    { seed: 1053460349, path: \"0\", endOnFailure: true }\n    Counterexample: [null]\n    Shrunk 0 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1228:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1223:5)\n\n  ● Property 2: Streaming Revenue Awarded to All Battle Participants › Property 2.4: Both participants receive revenue even with different studio levels\n\n    Property failed after 1 tests\n    { seed: -312014272, path: \"0:0:1:0:1:1\", endOnFailure: true }\n    Counterexample: [0,1,0,0]\n    Shrunk 5 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1292:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1265:5)\n\n  ● Property 3: No Streaming Revenue for Bye Matches › Property 3: No streaming revenue for bye matches\n\n    Property failed after 64 tests\n    { seed: -1502997055, path: \"63:0:0:0\", endOnFailure: true }\n    Counterexample: [0,0,0]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1405:25\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1390:5)\n\n  ● Property 3: No Streaming Revenue for Bye Matches › Property 3.1: Veteran robots get no revenue from bye matches\n\n    Property failed after 1 tests\n    { seed: -1192470947, path: \"0:0:0:0\", endOnFailure: true }\n    Counterexample: [1000,5000,5]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1451:25\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1436:5)\n\n  ● Property 3: No Streaming Revenue for Bye Matches › Property 3.2: Bye match flag always results in null revenue\n\n    Property failed after 1 tests\n    { seed: 1774215304, path: \"0:0:0\", endOnFailure: true }\n    Counterexample: [0,0,0]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1500:25\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1485:5)\n\n  ● Property 3: No Streaming Revenue for Bye Matches › Property 3.3: New robots get null revenue from bye matches\n\n    Property failed after 1 tests\n    { seed: -266818197, path: \"0\", endOnFailure: true }\n    Counterexample: [null]\n    Shrunk 0 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1543:25\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1538:5)\n\n  ● Property 3: No Streaming Revenue for Bye Matches › Property 3.4: Max studio level does not override bye match rule\n\n    Property failed after 1 tests\n    { seed: -901603213, path: \"0:0:0\", endOnFailure: true }\n    Counterexample: [0,0]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:23:29\n\n      20 \n      21 // Helper function to create a minimal test robot\n      22 async function createTestRobot(userId: number, battles: number, fame: number) {\n    → 23   return await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      21 | // Helper function to create a minimal test robot\n      22 | async function createTestRobot(userId: number, battles: number, fame: number) {\n    > 23 |   return await prisma.robot.create({\n         |          ^\n      24 |     data: {\n      25 |       userId,\n      26 |       name: `TestRobot_${Date.now()}_${Math.random()}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at createTestRobot (tests/streamingRevenueFormula.property.test.ts:23:10)\n      at tests/streamingRevenueFormula.property.test.ts:1577:25\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1563:5)\n\n  ● Property 12: Tag Team Single Payment Per Team › Property 12: Each stable receives exactly one payment per Tag Team battle\n\n    Property failed after 89 tests\n    { seed: 1771654850, path: \"88:41:43:46:53\", endOnFailure: true }\n    Counterexample: [2117,14984,3391,523,0,12905,1109,10921,4,9]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 87749\n    Received: 83249\n\n      1768 |           const balanceIncrease2 = finalBalance2 - initialBalance2;\n      1769 |\n    > 1770 |           expect(balanceIncrease1).toBe(expectedTeam1Revenue);\n           |                                    ^\n      1771 |           expect(balanceIncrease2).toBe(expectedTeam2Revenue);\n      1772 |\n      1773 |           // Property: The service should return exactly one revenue calculation per team\n\n      at tests/streamingRevenueFormula.property.test.ts:1770:36\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1659:5)\n\n  ● Property 12: Tag Team Single Payment Per Team › Property 12.2: Payment uses team max values, not sum of robots\n\n    Property failed after 41 tests\n    { seed: 741915854, path: \"40\", endOnFailure: true }\n    Counterexample: [100,12499,2405,111,0]\n    Shrunk 0 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 11916\n    Received: 11416\n\n      1963 |           // Property: Balance should increase by revenue calculated from MAX values\n      1964 |           const balanceIncrease = finalBalance1 - initialBalance1;\n    > 1965 |           expect(balanceIncrease).toBe(expectedRevenue);\n           |                                   ^\n      1966 |\n      1967 |           // Property: Should NOT use sum of robot stats (unless max happens to equal sum)\n      1968 |           if (robot1Battles !== robot2Battles || robot1Fame !== robot2Fame) {\n\n      at tests/streamingRevenueFormula.property.test.ts:1965:35\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1889:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.user.delete()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:988:29\n\n      985 await prisma.robot.deleteMany({ where: { userId: testUserId2 } });\n      986 await prisma.facility.deleteMany({ where: { userId: testUserId1 } });\n      987 await prisma.facility.deleteMany({ where: { userId: testUserId2 } });\n    → 988 await prisma.user.delete(\n    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\n\n      986 |     await prisma.facility.deleteMany({ where: { userId: testUserId1 } });\n      987 |     await prisma.facility.deleteMany({ where: { userId: testUserId2 } });\n    > 988 |     await prisma.user.delete({ where: { id: testUserId1 } });\n          |     ^\n      989 |     await prisma.user.delete({ where: { id: testUserId2 } });\n      990 |     await prisma.$disconnect();\n      991 |   });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:988:5)\n\n  ● Test suite failed to run\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.user.delete()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts:1375:29\n\n      1372 // Clean up test data\n      1373 await prisma.robot.deleteMany({ where: { userId: testUserId } });\n      1374 await prisma.facility.deleteMany({ where: { userId: testUserId } });\n    → 1375 await prisma.user.delete(\n    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\n\n      1373 |     await prisma.robot.deleteMany({ where: { userId: testUserId } });\n      1374 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });\n    > 1375 |     await prisma.user.delete({ where: { id: testUserId } });\n           |     ^\n      1376 |     await prisma.$disconnect();\n      1377 |   });\n      1378 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/streamingRevenueFormula.property.test.ts:1375:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingRevenueFormula.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 14: Terminal Log Contains Streaming Revenue"],"duration":11922,"failureDetails":[{}],"failureMessages":["Error: Property failed after 96 tests\n{ seed: 899528685, path: \"95:0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [0,0,0,0,0,0]\nShrunk 6 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 14: Terminal Log Contains Streaming Revenue Property 14: Terminal log contains streaming revenue for all battles","invocations":1,"location":null,"numPassingAsserts":1432,"retryReasons":[],"status":"failed","title":"Property 14: Terminal log contains streaming revenue for all battles"},{"ancestorTitles":["Property 14: Terminal Log Contains Streaming Revenue"],"duration":1256,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1655366370, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [100,500,100,500,1]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 14: Terminal Log Contains Streaming Revenue Property 14.1: Streaming revenue logged immediately after battle completion","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"failed","title":"Property 14.1: Streaming revenue logged immediately after battle completion"},{"ancestorTitles":["Property 14: Terminal Log Contains Streaming Revenue"],"duration":912,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1864755753, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [0,0,0]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 14: Terminal Log Contains Streaming Revenue Property 14.2: No streaming revenue logged for bye matches","invocations":1,"location":null,"numPassingAsserts":16,"retryReasons":[],"status":"failed","title":"Property 14.2: No streaming revenue logged for bye matches"},{"ancestorTitles":["Property 14: Terminal Log Contains Streaming Revenue"],"duration":1686,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -912961802, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [[{\"battles\":0,\"fame\":0},{\"battles\":0,\"fame\":0}],1]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 14: Terminal Log Contains Streaming Revenue Property 14.3: Terminal log format is consistent","invocations":1,"location":null,"numPassingAsserts":39,"retryReasons":[],"status":"failed","title":"Property 14.3: Terminal log format is consistent"}],"endTime":1771860994180,"message":"  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14: Terminal log contains streaming revenue for all battles\n\n    Property failed after 96 tests\n    { seed: 899528685, path: \"95:0:0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,0,0,0,0,0]\n    Shrunk 6 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      297 |               log.includes(`Battle #${battle!.id}`)\n      298 |             );\n    > 299 |             expect(streamingLog1).toBeDefined();\n          |                                   ^\n      300 |\n      301 |             // Property: Terminal log should contain robot name\n      302 |             expect(streamingLog1).toContain(robotName1);\n\n      at tests/terminalLogStreamingRevenue.property.test.ts:299:35\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:199:5)\n\n  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.1: Streaming revenue logged immediately after battle completion\n\n    Property failed after 1 tests\n    { seed: -1655366370, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [100,500,100,500,1]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBeGreaterThanOrEqual(expected)\n\n    Expected: >= 2\n    Received:    0\n\n      448 |             );\n      449 |\n    > 450 |             expect(streamingLogs.length).toBeGreaterThanOrEqual(2);\n          |                                          ^\n      451 |\n      452 |             // Property: Both robots should have streaming revenue logged\n      453 |             const robot1Logged = streamingLogs.some(log => log.includes(robotName1));\n\n      at tests/terminalLogStreamingRevenue.property.test.ts:450:42\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:364:5)\n\n  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.2: No streaming revenue logged for bye matches\n\n    Property failed after 1 tests\n    { seed: 1864755753, path: \"0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,0,0]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.delete()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts:601:38\n\n      598 // Cleanup\n      599 await prisma.battle.delete({ where: { id: battle!.id } });\n      600 await prisma.scheduledMatch.delete({ where: { id: match.id } });\n    → 601 await prisma.robot.delete(\n    Foreign key constraint violated: `battles_robot1_id_fkey (index)`\n\n      599 |             await prisma.battle.delete({ where: { id: battle!.id } });\n      600 |             await prisma.scheduledMatch.delete({ where: { id: match.id } });\n    > 601 |             await prisma.robot.delete({ where: { id: robot.id } });\n          |             ^\n      602 |             await prisma.robot.delete({ where: { id: byeRobot.id } });\n      603 |           } finally {\n      604 |             capture.restore();\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/terminalLogStreamingRevenue.property.test.ts:601:13\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:503:5)\n\n  ● Property 14: Terminal Log Contains Streaming Revenue › Property 14.3: Terminal log format is consistent\n\n    Property failed after 1 tests\n    { seed: -912961802, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [[{\"battles\":0,\"fame\":0},{\"battles\":0,\"fame\":0}],1]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 0\n\n      715 |             );\n      716 |\n    > 717 |             expect(streamingLogs.length).toBe(2);\n          |                                          ^\n      718 |\n      719 |             // Property: Both logs should match the expected format\n      720 |             const formatRegex = /\\[Streaming\\] .+ earned ₡[\\d,]+ from Battle #\\d+/;\n\n      at tests/terminalLogStreamingRevenue.property.test.ts:717:42\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/terminalLogStreamingRevenue.property.test.ts:616:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/terminalLogStreamingRevenue.property.test.ts","startTime":1771860978208,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":629,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Validation Property Tests should only validate teams where both robots are from same stable and battle ready","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"should only validate teams where both robots are from same stable and battle ready"},{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":1310,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Validation Property Tests should reject teams with robots from different stables","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"should reject teams with robots from different stables"},{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":1309,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Validation Property Tests should reject teams with unready robots","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"should reject teams with unready robots"},{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":1997,"failureDetails":[{}],"failureMessages":["Error: Property failed after 17 tests\n{ seed: 588063101, path: \"16:2:6\", endOnFailure: true }\nCounterexample: [{\"hpPercent1\":79,\"hpPercent2\":81,\"yieldThreshold\":29}]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Tag Team Validation Property Tests should preserve team configuration through create and retrieve cycle","invocations":1,"location":null,"numPassingAsserts":198,"retryReasons":[],"status":"failed","title":"should preserve team configuration through create and retrieve cycle"},{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":835,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Validation Property Tests should place all new teams in Bronze league with initial values","invocations":1,"location":null,"numPassingAsserts":180,"retryReasons":[],"status":"passed","title":"should place all new teams in Bronze league with initial values"},{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":1154,"failureDetails":[{}],"failureMessages":["Error: Property failed after 11 tests\n{ seed: -1653821950, path: \"10:0\", endOnFailure: true }\nCounterexample: [2]\nShrunk 1 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Tag Team Validation Property Tests should enforce team creation limit based on roster size","invocations":1,"location":null,"numPassingAsserts":55,"retryReasons":[],"status":"failed","title":"should enforce team creation limit based on roster size"},{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":145,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -997861022, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"hpPercent1\":75,\"hpPercent2\":75,\"yieldThreshold\":10}]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Tag Team Validation Property Tests should remove team from database and free robots for new teams","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"failed","title":"should remove team from database and free robots for new teams"},{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":32,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -811156441, path: \"0:0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"robot1\":{\"hpPercent\":0,\"yieldThreshold\":10,\"hasWeapon\":false},\"robot2\":{\"hpPercent\":0,\"yieldThreshold\":10,\"hasWeapon\":false}}]\nShrunk 6 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Tag Team Validation Property Tests should validate team readiness based on both robots meeting all requirements","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate team readiness based on both robots meeting all requirements"},{"ancestorTitles":["Tag Team Validation Property Tests"],"duration":20,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1014418498, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"robot1ELO\":800,\"robot2ELO\":800,\"yieldThreshold\":10}]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Tag Team Validation Property Tests should calculate combined ELO as sum of both robots ELOs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate combined ELO as sum of both robots ELOs"},{"ancestorTitles":["Tag Team Matchmaking Cycle Scheduling Property Tests"],"duration":102,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Matchmaking Cycle Scheduling Property Tests should run matchmaking only on odd cycles","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"should run matchmaking only on odd cycles"},{"ancestorTitles":["Tag Team Matchmaking Cycle Scheduling Property Tests"],"duration":48,"failureDetails":[{}],"failureMessages":["Error: Property failed after 3 tests\n{ seed: -2040400992, path: \"2:0\", endOnFailure: true }\nCounterexample: [0]\nShrunk 1 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Tag Team Matchmaking Cycle Scheduling Property Tests should alternate matchmaking between consecutive cycles","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"should alternate matchmaking between consecutive cycles"},{"ancestorTitles":["Tag Team Matchmaking Cycle Scheduling Property Tests"],"duration":7,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1157:25)"],"fullName":"Tag Team Matchmaking Cycle Scheduling Property Tests should run matchmaking on known odd cycles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should run matchmaking on known odd cycles"},{"ancestorTitles":["Tag Team Matchmaking Cycle Scheduling Property Tests"],"duration":112,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Matchmaking Cycle Scheduling Property Tests should skip matchmaking on known even cycles","invocations":1,"location":null,"numPassingAsserts":21,"retryReasons":[],"status":"passed","title":"should skip matchmaking on known even cycles"},{"ancestorTitles":["Tag Team Matchmaking Eligible Teams Property Tests"],"duration":10,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of null (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1209:24)"],"fullName":"Tag Team Matchmaking Eligible Teams Property Tests should exclude teams with unready robots from eligible teams","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should exclude teams with unready robots from eligible teams"},{"ancestorTitles":["Tag Team Matchmaking Eligible Teams Property Tests"],"duration":5,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of null (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1209:24)"],"fullName":"Tag Team Matchmaking Eligible Teams Property Tests should exclude teams where any robot has HP below 75%","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should exclude teams where any robot has HP below 75%"},{"ancestorTitles":["Tag Team Matchmaking ELO Matching Property Tests"],"duration":9,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of null (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1500:24)"],"fullName":"Tag Team Matchmaking ELO Matching Property Tests should prefer matching teams with smaller ELO differences","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should prefer matching teams with smaller ELO differences"},{"ancestorTitles":["Tag Team Matchmaking Same-Stable Exclusion Property Tests"],"duration":11,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of null (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1686:24)"],"fullName":"Tag Team Matchmaking Same-Stable Exclusion Property Tests should strongly deprioritize same-stable matches","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should strongly deprioritize same-stable matches"},{"ancestorTitles":["Tag Team Matchmaking Recent Opponent Deprioritization Property Tests"],"duration":15,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of null (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1936:24)"],"fullName":"Tag Team Matchmaking Recent Opponent Deprioritization Property Tests should deprioritize recent opponents when multiple options exist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should deprioritize recent opponents when multiple options exist"}],"endTime":1771861002383,"message":"  ● Tag Team Validation Property Tests › should preserve team configuration through create and retrieve cycle\n\n    Property failed after 17 tests\n    { seed: 588063101, path: \"16:2:6\", endOnFailure: true }\n    Counterexample: [{\"hpPercent1\":79,\"hpPercent2\":81,\"yieldThreshold\":29}]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.delete()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:494:38\n\n      491 expect(retrievedTeam!.reserveRobotId).toBe(robot2.id);\n      492 \n      493 // Clean up\n    → 494 await prisma.tagTeam.delete(\n    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.\n\n      492 |\n      493 |           // Clean up\n    > 494 |           await prisma.tagTeam.delete({ where: { id: teamId } });\n          |           ^\n      495 |           await prisma.robot.deleteMany({\n      496 |             where: { id: { in: [robot1.id, robot2.id] } },\n      497 |           });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/tagTeamValidation.property.test.ts:494:11\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:425:5)\n\n  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size\n\n    Property failed after 11 tests\n    { seed: -1653821950, path: \"10:0\", endOnFailure: true }\n    Counterexample: [2]\n    Shrunk 1 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1\n    Received: 0\n\n      667 |             where: { stableId: testUserId },\n      668 |           });\n    > 669 |           expect(currentTeamCount).toBe(maxTeams);\n          |                                    ^\n      670 |\n      671 |           // Clean up\n      672 |           await prisma.tagTeam.deleteMany({\n\n      at tests/tagTeamValidation.property.test.ts:669:36\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:609:5)\n\n  ● Tag Team Validation Property Tests › should remove team from database and free robots for new teams\n\n    Property failed after 1 tests\n    { seed: -997861022, path: \"0:0:0:0\", endOnFailure: true }\n    Counterexample: [{\"hpPercent1\":75,\"hpPercent2\":75,\"yieldThreshold\":10}]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      747 |           // Create the team\n      748 |           const createResult = await createTeam(testUserId, robot1.id, robot2.id);\n    > 749 |           expect(createResult.success).toBe(true);\n          |                                        ^\n      750 |           expect(createResult.team).toBeDefined();\n      751 |\n      752 |           const teamId = createResult.team!.id;\n\n      at tests/tagTeamValidation.property.test.ts:749:40\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:695:5)\n\n  ● Tag Team Validation Property Tests › should validate team readiness based on both robots meeting all requirements\n\n    Property failed after 1 tests\n    { seed: -811156441, path: \"0:0:0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [{\"robot1\":{\"hpPercent\":0,\"yieldThreshold\":10,\"hasWeapon\":false},\"robot2\":{\"hpPercent\":0,\"yieldThreshold\":10,\"hasWeapon\":false}}]\n    Shrunk 6 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:835:52\n\n      832 const currentHP1 = Math.floor((robot1.hpPercent / 100) * maxHP);\n      833 const currentHP2 = Math.floor((robot2.hpPercent / 100) * maxHP);\n      834 \n    → 835 const createdRobot1 = await prisma.robot.create(\n    Foreign key constraint violated: `robots_user_id_fkey (index)`\n\n      833 |           const currentHP2 = Math.floor((robot2.hpPercent / 100) * maxHP);\n      834 |\n    > 835 |           const createdRobot1 = await prisma.robot.create({\n          |                                 ^\n      836 |             data: {\n      837 |               userId: testUserId,\n      838 |               name: `PBT_R1_${Math.random().toString(36).substring(7)}`,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/tagTeamValidation.property.test.ts:835:33\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:801:5)\n\n  ● Tag Team Validation Property Tests › should calculate combined ELO as sum of both robots ELOs\n\n    Property failed after 1 tests\n    { seed: -1014418498, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [{\"robot1ELO\":800,\"robot2ELO\":800,\"yieldThreshold\":10}]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.weaponInventory.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:957:59\n\n      954 }),\n      955 async (config) => {\n      956   // Create weapon inventory\n    → 957   const weapon1Inv = await prisma.weaponInventory.create(\n    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`\n\n      955 |         async (config) => {\n      956 |           // Create weapon inventory\n    > 957 |           const weapon1Inv = await prisma.weaponInventory.create({\n          |                              ^\n      958 |             data: { userId: testUserId, weaponId },\n      959 |           });\n      960 |           const weapon2Inv = await prisma.weaponInventory.create({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/tagTeamValidation.property.test.ts:957:30\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:947:5)\n\n  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should alternate matchmaking between consecutive cycles\n\n    Property failed after 3 tests\n    { seed: -2040400992, path: \"2:0\", endOnFailure: true }\n    Counterexample: [0]\n    Shrunk 1 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).not.toBe(expected) // Object.is equality\n\n    Expected: not false\n\n      1121 |\n      1122 |           // Property: Consecutive cycles should have opposite values\n    > 1123 |           expect(shouldRunCurrent).not.toBe(shouldRunNext);\n           |                                        ^\n      1124 |\n      1125 |           // Property: If current cycle runs, next should not\n      1126 |           if (shouldRunCurrent) {\n\n      at tests/tagTeamValidation.property.test.ts:1123:40\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1103:5)\n\n  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking on known odd cycles\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      1155 |\n      1156 |       const shouldRun = await shouldRunTagTeamMatchmaking();\n    > 1157 |       expect(shouldRun).toBe(true);\n           |                         ^\n      1158 |     }\n      1159 |   });\n      1160 |\n\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1157:25)\n\n  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams with unready robots from eligible teams\n\n    TypeError: Cannot read properties of null (reading 'id')\n\n      1207 |     // Get a weapon for testing\n      1208 |     const weapon = await prisma.weapon.findFirst();\n    > 1209 |     weaponId = weapon!.id;\n           |                        ^\n      1210 |   });\n      1211 |\n      1212 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1209:24)\n\n  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%\n\n    TypeError: Cannot read properties of null (reading 'id')\n\n      1207 |     // Get a weapon for testing\n      1208 |     const weapon = await prisma.weapon.findFirst();\n    > 1209 |     weaponId = weapon!.id;\n           |                        ^\n      1210 |   });\n      1211 |\n      1212 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1209:24)\n\n  ● Tag Team Matchmaking ELO Matching Property Tests › should prefer matching teams with smaller ELO differences\n\n    TypeError: Cannot read properties of null (reading 'id')\n\n      1498 |     // Get a weapon for testing\n      1499 |     const weapon = await prisma.weapon.findFirst();\n    > 1500 |     weaponId = weapon!.id;\n           |                        ^\n      1501 |   });\n      1502 |\n      1503 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1500:24)\n\n  ● Tag Team Matchmaking Same-Stable Exclusion Property Tests › should strongly deprioritize same-stable matches\n\n    TypeError: Cannot read properties of null (reading 'id')\n\n      1684 |     // Get a weapon for testing\n      1685 |     const weapon = await prisma.weapon.findFirst();\n    > 1686 |     weaponId = weapon!.id;\n           |                        ^\n      1687 |   });\n      1688 |\n      1689 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1686:24)\n\n  ● Tag Team Matchmaking Recent Opponent Deprioritization Property Tests › should deprioritize recent opponents when multiple options exist\n\n    TypeError: Cannot read properties of null (reading 'id')\n\n      1934 |     // Get a weapon for testing\n      1935 |     const weapon = await prisma.weapon.findFirst();\n    > 1936 |     weaponId = weapon!.id;\n           |                        ^\n      1937 |   });\n      1938 |\n      1939 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1936:24)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts","startTime":1771860994309,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 5: Event Queryability"],"duration":396,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1125697794, path: \"0:0:5:1:0:0\", endOnFailure: true }\nCounterexample: [[1,2,45,1,1],1,1]\nShrunk 5 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 5: Event Queryability cycle range filtering returns only events within range","invocations":1,"location":null,"numPassingAsserts":58,"retryReasons":[],"status":"failed","title":"cycle range filtering returns only events within range"},{"ancestorTitles":["Property 5: Event Queryability"],"duration":932,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1355609602, path: \"0:0:1:0:0:0:1:0:0:0:2:0:0:0:1:0:1:0:0:1:0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [1,[{\"userId\":1,\"amount\":0},{\"userId\":3,\"amount\":0},{\"userId\":1,\"amount\":0},{\"userId\":1,\"amount\":0},{\"userId\":1,\"amount\":0}]]\nShrunk 25 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 5: Event Queryability user filtering returns only events for that user","invocations":1,"location":null,"numPassingAsserts":61,"retryReasons":[],"status":"failed","title":"user filtering returns only events for that user"},{"ancestorTitles":["Property 5: Event Queryability"],"duration":261,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1835474690, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [[\"cycle_start\"],5]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 5: Event Queryability event type filtering returns only matching types","invocations":1,"location":null,"numPassingAsserts":30,"retryReasons":[],"status":"failed","title":"event type filtering returns only matching types"},{"ancestorTitles":["Property 5: Event Queryability"],"duration":167,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -392308314, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [10,1,0]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 5: Event Queryability pagination returns correct subset","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"pagination returns correct subset"},{"ancestorTitles":["Property 5: Event Queryability"],"duration":3361,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -449356823, path: \"0:5\", endOnFailure: true }\nCounterexample: [[15,14,9,4,15,20,5,19,20,1,19],\"asc\"]\nShrunk 1 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 5: Event Queryability sorting maintains order","invocations":1,"location":null,"numPassingAsserts":587,"retryReasons":[],"status":"failed","title":"sorting maintains order"},{"ancestorTitles":["Property 5: Event Queryability"],"duration":683,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Event Queryability combined filters are applied correctly","invocations":1,"location":null,"numPassingAsserts":105,"retryReasons":[],"status":"passed","title":"combined filters are applied correctly"},{"ancestorTitles":["Property 5: Event Queryability"],"duration":141,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Event Queryability empty result set handled correctly","invocations":1,"location":null,"numPassingAsserts":75,"retryReasons":[],"status":"passed","title":"empty result set handled correctly"},{"ancestorTitles":["Property 5: Event Queryability"],"duration":803,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Event Queryability count matches filtered results","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"count matches filtered results"}],"endTime":1771861009220,"message":"  ● Property 5: Event Queryability › cycle range filtering returns only events within range\n\n    Property failed after 1 tests\n    { seed: 1125697794, path: \"0:0:5:1:0:0\", endOnFailure: true }\n    Counterexample: [[1,2,45,1,1],1,1]\n    Shrunk 5 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 3\n    Received: 5\n\n      67 |           // Verify count matches\n      68 |           const expectedCount = cycles.filter(c => c >= start && c <= end).length;\n    > 69 |           expect(result.events.length).toBe(expectedCount);\n         |                                        ^\n      70 |         }\n      71 |       ),\n      72 |       { numRuns: 30 }\n\n      at tests/eventQueryability.property.test.ts:69:40\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/eventQueryability.property.test.ts:34:5)\n\n  ● Property 5: Event Queryability › user filtering returns only events for that user\n\n    Property failed after 1 tests\n    { seed: -1355609602, path: \"0:0:1:0:0:0:1:0:0:0:2:0:0:0:1:0:1:0:0:1:0:0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [1,[{\"userId\":1,\"amount\":0},{\"userId\":3,\"amount\":0},{\"userId\":1,\"amount\":0},{\"userId\":1,\"amount\":0},{\"userId\":1,\"amount\":0}]]\n    Shrunk 25 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 4\n    Received: 0\n\n      117 |           // Verify count matches\n      118 |           const expectedCount = events.filter(e => e.userId === targetUserId).length;\n    > 119 |           expect(result.events.length).toBe(expectedCount);\n          |                                        ^\n      120 |         }\n      121 |       ),\n      122 |       { numRuns: 30 }\n\n      at tests/eventQueryability.property.test.ts:119:40\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/eventQueryability.property.test.ts:82:5)\n\n  ● Property 5: Event Queryability › event type filtering returns only matching types\n\n    Property failed after 1 tests\n    { seed: -1835474690, path: \"0:0:0:0\", endOnFailure: true }\n    Counterexample: [[\"cycle_start\"],5]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 3\n\n      165 |\n      166 |           // Verify count matches\n    > 167 |           expect(result.events.length).toBe(expectedCount);\n          |                                        ^\n      168 |         }\n      169 |       ),\n      170 |       { numRuns: 25 }\n\n      at tests/eventQueryability.property.test.ts:167:40\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/eventQueryability.property.test.ts:132:5)\n\n  ● Property 5: Event Queryability › pagination returns correct subset\n\n    Property failed after 1 tests\n    { seed: -392308314, path: \"0:0:0:0\", endOnFailure: true }\n    Counterexample: [10,1,0]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 10\n    Received: 4\n\n      208 |\n      209 |           // Verify total count\n    > 210 |           expect(result.total).toBe(totalEvents);\n          |                                ^\n      211 |         }\n      212 |       ),\n      213 |       { numRuns: 30 }\n\n      at tests/eventQueryability.property.test.ts:210:32\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/eventQueryability.property.test.ts:180:5)\n\n  ● Property 5: Event Queryability › sorting maintains order\n\n    Property failed after 1 tests\n    { seed: -449356823, path: \"0:5\", endOnFailure: true }\n    Counterexample: [[15,14,9,4,15,20,5,19,20,1,19],\"asc\"]\n    Shrunk 1 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientKnownRequestError: \n    Invalid `prisma.auditLog.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n      194 };\n      195 \n      196 // Insert into database\n    → 197 await prisma.auditLog.create(\n    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)\n\n      195 |     \n      196 |     // Insert into database\n    > 197 |     await prisma.auditLog.create({\n          |     ^\n      198 |       data: {\n      199 |         cycleNumber: entry.cycleNumber,\n      200 |         eventType: entry.eventType,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)\n      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)\n      at tests/eventQueryability.property.test.ts:236:13\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/eventQueryability.property.test.ts:223:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventQueryability.property.test.ts","startTime":1771861002402,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 15: Cycle Step Duration Recording"],"duration":562,"failureDetails":[],"failureMessages":[],"fullName":"Property 15: Cycle Step Duration Recording Property 15.1: Each cycle step has a step completion event with duration","invocations":1,"location":null,"numPassingAsserts":1190,"retryReasons":[],"status":"passed","title":"Property 15.1: Each cycle step has a step completion event with duration"},{"ancestorTitles":["Property 15: Cycle Step Duration Recording"],"duration":771,"failureDetails":[],"failureMessages":[],"fullName":"Property 15: Cycle Step Duration Recording Property 15.2: Sum of step durations approximately equals total cycle duration (within 5% tolerance)","invocations":1,"location":null,"numPassingAsserts":90,"retryReasons":[],"status":"passed","title":"Property 15.2: Sum of step durations approximately equals total cycle duration (within 5% tolerance)"},{"ancestorTitles":["Property 15: Cycle Step Duration Recording"],"duration":476,"failureDetails":[],"failureMessages":[],"fullName":"Property 15: Cycle Step Duration Recording Property 15.3: Step durations are recorded in sequence order","invocations":1,"location":null,"numPassingAsserts":522,"retryReasons":[],"status":"passed","title":"Property 15.3: Step durations are recorded in sequence order"},{"ancestorTitles":["Property 15: Cycle Step Duration Recording"],"duration":318,"failureDetails":[],"failureMessages":[],"fullName":"Property 15: Cycle Step Duration Recording Property 15.4: Step durations are always positive","invocations":1,"location":null,"numPassingAsserts":182,"retryReasons":[],"status":"passed","title":"Property 15.4: Step durations are always positive"},{"ancestorTitles":["Property 15: Cycle Step Duration Recording"],"duration":454,"failureDetails":[],"failureMessages":[],"fullName":"Property 15: Cycle Step Duration Recording Property 15.5: Step completion events include step name and number","invocations":1,"location":null,"numPassingAsserts":687,"retryReasons":[],"status":"passed","title":"Property 15.5: Step completion events include step name and number"},{"ancestorTitles":["Property 15: Cycle Step Duration Recording"],"duration":1185,"failureDetails":[],"failureMessages":[],"fullName":"Property 15: Cycle Step Duration Recording Property 15.6: Multiple cycles can be logged independently with correct durations","invocations":1,"location":null,"numPassingAsserts":458,"retryReasons":[],"status":"passed","title":"Property 15.6: Multiple cycles can be logged independently with correct durations"}],"endTime":1771861013044,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleStepDuration.property.test.ts","startTime":1771861009223,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 22: Investment Recommendation Ranking"],"duration":4221,"failureDetails":[],"failureMessages":[],"fullName":"Property 22: Investment Recommendation Ranking Property 22.1: Recommendations are sorted by ROI (highest first)","invocations":1,"location":null,"numPassingAsserts":240,"retryReasons":[],"status":"passed","title":"Property 22.1: Recommendations are sorted by ROI (highest first)"},{"ancestorTitles":["Property 22: Investment Recommendation Ranking"],"duration":328,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1978004380, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [5,500000,2000]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 22: Investment Recommendation Ranking Property 22.2: Only facilities with positive projected ROI are recommended","invocations":1,"location":null,"numPassingAsserts":32,"retryReasons":[],"status":"failed","title":"Property 22.2: Only facilities with positive projected ROI are recommended"},{"ancestorTitles":["Property 22: Investment Recommendation Ranking"],"duration":2215,"failureDetails":[],"failureMessages":[],"fullName":"Property 22: Investment Recommendation Ranking Property 22.3: Recommendations respect prestige requirements","invocations":1,"location":null,"numPassingAsserts":240,"retryReasons":[],"status":"passed","title":"Property 22.3: Recommendations respect prestige requirements"},{"ancestorTitles":["Property 22: Investment Recommendation Ranking"],"duration":492,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1335328857, path: \"0:0:0:0\", endOnFailure: true }\nCounterexample: [50000,30000,20]\nShrunk 3 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 22: Investment Recommendation Ranking Property 22.4: High activity users get more discount facility recommendations","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"Property 22.4: High activity users get more discount facility recommendations"},{"ancestorTitles":["Property 22: Investment Recommendation Ranking"],"duration":285,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1966124194, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [10,2000000]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 22: Investment Recommendation Ranking Property 22.5: Recommendations include upgrade cost and payoff cycles","invocations":1,"location":null,"numPassingAsserts":123,"retryReasons":[],"status":"failed","title":"Property 22.5: Recommendations include upgrade cost and payoff cycles"}],"endTime":1771861020707,"message":"  ● Property 22: Investment Recommendation Ranking › Property 22.2: Only facilities with positive projected ROI are recommended\n\n    Property failed after 1 tests\n    { seed: -1978004380, path: \"0:0:0:0\", endOnFailure: true }\n    Counterexample: [5,500000,2000]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 0\n    Received:   0\n\n      177 |           // Property: All recommendations should have positive ROI\n      178 |           for (const recommendation of result.recommendations) {\n    > 179 |             expect(recommendation.projectedROI).toBeGreaterThan(0);\n          |                                                 ^\n      180 |           }\n      181 |         }\n      182 |       ),\n\n      at tests/facilityRecommendation.property.test.ts:179:49\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:129:5)\n\n  ● Property 22: Investment Recommendation Ranking › Property 22.4: High activity users get more discount facility recommendations\n\n    Property failed after 1 tests\n    { seed: -1335328857, path: \"0:0:0:0\", endOnFailure: true }\n    Counterexample: [50000,30000,20]\n    Shrunk 3 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 0\n    Received:   0\n\n      307 |           // Discount facilities should have positive ROI\n      308 |           for (const facility of discountFacilities) {\n    > 309 |             expect(facility.projectedROI).toBeGreaterThan(0);\n          |                                           ^\n      310 |           }\n      311 |         }\n      312 |       ),\n\n      at tests/facilityRecommendation.property.test.ts:309:43\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:235:5)\n\n  ● Property 22: Investment Recommendation Ranking › Property 22.5: Recommendations include upgrade cost and payoff cycles\n\n    Property failed after 1 tests\n    { seed: -1966124194, path: \"0:0:0\", endOnFailure: true }\n    Counterexample: [10,2000000]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).toBeTruthy()\n\n    Received: \"\"\n\n      371 |             \n      372 |             // Should have a reason\n    > 373 |             expect(recommendation.reason).toBeTruthy();\n          |                                           ^\n      374 |             expect(recommendation.reason.length).toBeGreaterThan(0);\n      375 |             \n      376 |             // Should have a priority\n\n      at tests/facilityRecommendation.property.test.ts:373:43\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:318:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendation.property.test.ts","startTime":1771861013051,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 5: Stats Updated Before Streaming Revenue Calculation"],"duration":618,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -537509816, path: \"0:0:0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [0,0,0,0,0,0,\"bronze\"]\nShrunk 7 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 5: Stats Updated Before Streaming Revenue Calculation Property 5: Stats updated before streaming revenue calculation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 5: Stats updated before streaming revenue calculation"},{"ancestorTitles":["Property 5: Stats Updated Before Streaming Revenue Calculation"],"duration":3600,"failureDetails":[],"failureMessages":[],"fullName":"Property 5: Stats Updated Before Streaming Revenue Calculation Property 5.1: Battle count increments by exactly 1 per battle","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"Property 5.1: Battle count increments by exactly 1 per battle"},{"ancestorTitles":["Property 5: Stats Updated Before Streaming Revenue Calculation"],"duration":197,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1605796579, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [0,\"bronze\"]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 5: Stats Updated Before Streaming Revenue Calculation Property 5.2: Winner fame increases after battle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 5.2: Winner fame increases after battle"},{"ancestorTitles":["Property 5: Stats Updated Before Streaming Revenue Calculation"],"duration":193,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1587271078, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [0,0]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 5: Stats Updated Before Streaming Revenue Calculation Property 5.3: Stats are always updated before streaming revenue calculation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 5.3: Stats are always updated before streaming revenue calculation"}],"endTime":1771861025387,"message":"  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5: Stats updated before streaming revenue calculation\n\n    Property failed after 1 tests\n    { seed: -537509816, path: \"0:0:0:0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,0,0,0,0,0,\"bronze\"]\n    Shrunk 7 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    expect(received).not.toBeNull()\n\n    Received: null\n\n      267 |           });\n      268 |\n    > 269 |           expect(battleCompleteEvent).not.toBeNull();\n          |                                           ^\n      270 |           const payload = battleCompleteEvent!.payload as any;\n      271 |\n      272 |           // Get updated robot stats from database\n\n      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:269:43\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:189:5)\n\n  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.2: Winner fame increases after battle\n\n    Property failed after 1 tests\n    { seed: 1605796579, path: \"0:0:0\", endOnFailure: true }\n    Counterexample: [0,\"bronze\"]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    TypeError: Cannot read properties of null (reading 'payload')\n\n      485 |           });\n      486 |\n    > 487 |           const payload = battleCompleteEvent!.payload as any;\n          |                                                ^\n      488 |\n      489 |           // Get updated robot stats\n      490 |           const updatedRobot1 = await prisma.robot.findUnique({\n\n      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:487:48\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:438:5)\n\n  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.3: Stats are always updated before streaming revenue calculation\n\n    Property failed after 1 tests\n    { seed: 1587271078, path: \"0:0:0\", endOnFailure: true }\n    Counterexample: [0,0]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    TypeError: Cannot read properties of null (reading 'payload')\n\n      561 |           });\n      562 |\n    > 563 |           const payload = battleCompleteEvent!.payload as any;\n          |                                                ^\n      564 |\n      565 |           // Property: The battle count used in streaming revenue should be \n      566 |           // the initial count + 1 (proving stats were updated first)\n\n      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:563:48\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:526:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/statsUpdatedBeforeStreamingRevenue.property.test.ts","startTime":1771861020709,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 3: Credit Change Audit Trail"],"duration":290,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Credit Change Audit Trail sum of credit changes equals balance delta","invocations":1,"location":null,"numPassingAsserts":30,"retryReasons":[],"status":"passed","title":"sum of credit changes equals balance delta"},{"ancestorTitles":["Property 3: Credit Change Audit Trail"],"duration":297,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Credit Change Audit Trail credit changes are recorded in order","invocations":1,"location":null,"numPassingAsserts":192,"retryReasons":[],"status":"passed","title":"credit changes are recorded in order"},{"ancestorTitles":["Property 3: Credit Change Audit Trail"],"duration":244,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Credit Change Audit Trail balance progression is continuous","invocations":1,"location":null,"numPassingAsserts":150,"retryReasons":[],"status":"passed","title":"balance progression is continuous"},{"ancestorTitles":["Property 3: Credit Change Audit Trail"],"duration":333,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Credit Change Audit Trail multiple users tracked independently","invocations":1,"location":null,"numPassingAsserts":81,"retryReasons":[],"status":"passed","title":"multiple users tracked independently"},{"ancestorTitles":["Property 3: Credit Change Audit Trail"],"duration":423,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Credit Change Audit Trail credit changes across multiple cycles","invocations":1,"location":null,"numPassingAsserts":86,"retryReasons":[],"status":"passed","title":"credit changes across multiple cycles"},{"ancestorTitles":["Property 3: Credit Change Audit Trail"],"duration":196,"failureDetails":[],"failureMessages":[],"fullName":"Property 3: Credit Change Audit Trail credit source is preserved","invocations":1,"location":null,"numPassingAsserts":287,"retryReasons":[],"status":"passed","title":"credit source is preserved"}],"endTime":1771861027233,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/creditChangeAuditTrail.property.test.ts","startTime":1771861025404,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Cycle Performance Monitoring Service","detectStepDegradation"],"duration":472,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service detectStepDegradation should detect performance degradation when recent average exceeds 150% of baseline","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should detect performance degradation when recent average exceeds 150% of baseline"},{"ancestorTitles":["Cycle Performance Monitoring Service","detectStepDegradation"],"duration":434,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service detectStepDegradation should not detect degradation when recent average is within threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not detect degradation when recent average is within threshold"},{"ancestorTitles":["Cycle Performance Monitoring Service","detectStepDegradation"],"duration":45,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service detectStepDegradation should return null when there is no baseline data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when there is no baseline data"},{"ancestorTitles":["Cycle Performance Monitoring Service","detectStepDegradation"],"duration":436,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service detectStepDegradation should classify degradation severity correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should classify degradation severity correctly"},{"ancestorTitles":["Cycle Performance Monitoring Service","detectAllStepDegradations"],"duration":248,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2002","clientVersion":"5.22.0","meta":{"modelName":"AuditLog","target":["cycle_number","sequence_number"]}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)\n    at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cyclePerformanceMonitoring.test.ts:137:11)"],"fullName":"Cycle Performance Monitoring Service detectAllStepDegradations should detect degradation across multiple steps","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect degradation across multiple steps"},{"ancestorTitles":["Cycle Performance Monitoring Service","getCyclePerformanceMetrics"],"duration":94,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service getCyclePerformanceMetrics should calculate performance metrics for a cycle range","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should calculate performance metrics for a cycle range"},{"ancestorTitles":["Cycle Performance Monitoring Service","getCyclePerformanceMetrics"],"duration":44,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service getCyclePerformanceMetrics should identify slowest steps","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should identify slowest steps"},{"ancestorTitles":["Cycle Performance Monitoring Service","identifySlowSteps"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service identifySlowSteps should identify steps exceeding threshold in a specific cycle","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should identify steps exceeding threshold in a specific cycle"},{"ancestorTitles":["Cycle Performance Monitoring Service","identifySlowSteps"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service identifySlowSteps should return empty array when no steps exceed threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array when no steps exceed threshold"},{"ancestorTitles":["Cycle Performance Monitoring Service","getCycleExecutionTrend"],"duration":58,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service getCycleExecutionTrend should detect improving trend when recent cycles are faster","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should detect improving trend when recent cycles are faster"},{"ancestorTitles":["Cycle Performance Monitoring Service","getCycleExecutionTrend"],"duration":61,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service getCycleExecutionTrend should detect degrading trend when recent cycles are slower","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should detect degrading trend when recent cycles are slower"},{"ancestorTitles":["Cycle Performance Monitoring Service","getCycleExecutionTrend"],"duration":61,"failureDetails":[],"failureMessages":[],"fullName":"Cycle Performance Monitoring Service getCycleExecutionTrend should detect stable trend when durations are consistent","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should detect stable trend when durations are consistent"}],"endTime":1771861029234,"message":"  ● Cycle Performance Monitoring Service › detectAllStepDegradations › should detect degradation across multiple steps\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.auditLog.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n      194 };\n      195 \n      196 // Insert into database\n    → 197 await prisma.auditLog.create(\n    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)\n\n      195 |     \n      196 |     // Insert into database\n    > 197 |     await prisma.auditLog.create({\n          |     ^\n      198 |       data: {\n      199 |         cycleNumber: entry.cycleNumber,\n      200 |         eventType: entry.eventType,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)\n      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)\n      at Object.<anonymous> (tests/cyclePerformanceMonitoring.test.ts:137:11)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cyclePerformanceMonitoring.test.ts","startTime":1771861027235,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team League Rebalancing","determinePromotions"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing determinePromotions should return empty array for champion tier","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array for champion tier"},{"ancestorTitles":["Tag Team League Rebalancing","determinePromotions"],"duration":92,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing determinePromotions should return empty array when fewer than 10 teams","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array when fewer than 10 teams"},{"ancestorTitles":["Tag Team League Rebalancing","determinePromotions"],"duration":163,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing determinePromotions should return empty array when no teams have 5+ cycles","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array when no teams have 5+ cycles"},{"ancestorTitles":["Tag Team League Rebalancing","determinePromotions"],"duration":211,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing determinePromotions should promote top 10% of eligible teams with ≥25 league points","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should promote top 10% of eligible teams with ≥25 league points"},{"ancestorTitles":["Tag Team League Rebalancing","determinePromotions"],"duration":200,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing determinePromotions should return empty array when no teams have ≥25 league points","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array when no teams have ≥25 league points"},{"ancestorTitles":["Tag Team League Rebalancing","determinePromotions"],"duration":215,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing determinePromotions should exclude teams in excludeTeamIds set","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should exclude teams in excludeTeamIds set"},{"ancestorTitles":["Tag Team League Rebalancing","determineDemotions"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing determineDemotions should return empty array for bronze tier","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array for bronze tier"},{"ancestorTitles":["Tag Team League Rebalancing","determineDemotions"],"duration":10,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2003","clientVersion":"5.22.0","meta":{"modelName":"TagTeam","field_name":"tag_team_matches_team1_id_fkey (index)"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:231:28\n\n  228 \n  229 it('should return empty array when fewer than 10 teams', async () => {\n  230   // Clean up any existing teams in silver_1 from previous tests\n→ 231   await prisma.tagTeam.deleteMany(\nForeign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:231:7)"],"fullName":"Tag Team League Rebalancing determineDemotions should return empty array when fewer than 10 teams","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when fewer than 10 teams"},{"ancestorTitles":["Tag Team League Rebalancing","determineDemotions"],"duration":4,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2003","clientVersion":"5.22.0","meta":{"modelName":"TagTeam","field_name":"tag_team_matches_team1_id_fkey (index)"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:246:28\n\n  243 \n  244 it('should return empty array when no teams have 5+ cycles', async () => {\n  245   // Clean up any existing teams in silver_1 from previous tests\n→ 246   await prisma.tagTeam.deleteMany(\nForeign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:246:7)"],"fullName":"Tag Team League Rebalancing determineDemotions should return empty array when no teams have 5+ cycles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when no teams have 5+ cycles"},{"ancestorTitles":["Tag Team League Rebalancing","determineDemotions"],"duration":4,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2003","clientVersion":"5.22.0","meta":{"modelName":"TagTeam","field_name":"tag_team_matches_team1_id_fkey (index)"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:261:28\n\n  258 \n  259 it('should demote bottom 10% of eligible teams', async () => {\n  260   // Clean up any existing teams in silver_1 from previous tests\n→ 261   await prisma.tagTeam.deleteMany(\nForeign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:261:7)"],"fullName":"Tag Team League Rebalancing determineDemotions should demote bottom 10% of eligible teams","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should demote bottom 10% of eligible teams"},{"ancestorTitles":["Tag Team League Rebalancing","determineDemotions"],"duration":5,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2003","clientVersion":"5.22.0","meta":{"modelName":"TagTeam","field_name":"tag_team_matches_team1_id_fkey (index)"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:282:28\n\n  279 \n  280 it('should exclude teams in excludeTeamIds set', async () => {\n  281   // Clean up any existing teams in silver_1 from previous tests\n→ 282   await prisma.tagTeam.deleteMany(\nForeign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:282:7)"],"fullName":"Tag Team League Rebalancing determineDemotions should exclude teams in excludeTeamIds set","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should exclude teams in excludeTeamIds set"},{"ancestorTitles":["Tag Team League Rebalancing","promoteTeam"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing promoteTeam should promote team from bronze to silver","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should promote team from bronze to silver"},{"ancestorTitles":["Tag Team League Rebalancing","promoteTeam"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing promoteTeam should promote team from silver to gold","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should promote team from silver to gold"},{"ancestorTitles":["Tag Team League Rebalancing","promoteTeam"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing promoteTeam should throw error when promoting from champion tier","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error when promoting from champion tier"},{"ancestorTitles":["Tag Team League Rebalancing","demoteTeam"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing demoteTeam should demote team from silver to bronze","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should demote team from silver to bronze"},{"ancestorTitles":["Tag Team League Rebalancing","demoteTeam"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing demoteTeam should demote team from gold to silver","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should demote team from gold to silver"},{"ancestorTitles":["Tag Team League Rebalancing","demoteTeam"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing demoteTeam should throw error when demoting from bronze tier","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error when demoting from bronze tier"},{"ancestorTitles":["Tag Team League Rebalancing","rebalanceTagTeamLeagues"],"duration":5,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2003","clientVersion":"5.22.0","meta":{"modelName":"TagTeam","field_name":"tag_team_matches_team1_id_fkey (index)"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28\n\n  381 describe('rebalanceTagTeamLeagues', () => {\n  382   beforeEach(async () => {\n  383     // Clean up ALL teams before these tests since they count total teams\n→ 384     await prisma.tagTeam.deleteMany(\nForeign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:7)"],"fullName":"Tag Team League Rebalancing rebalanceTagTeamLeagues should handle empty league system","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle empty league system"},{"ancestorTitles":["Tag Team League Rebalancing","rebalanceTagTeamLeagues"],"duration":4,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2003","clientVersion":"5.22.0","meta":{"modelName":"TagTeam","field_name":"tag_team_matches_team1_id_fkey (index)"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28\n\n  381 describe('rebalanceTagTeamLeagues', () => {\n  382   beforeEach(async () => {\n  383     // Clean up ALL teams before these tests since they count total teams\n→ 384     await prisma.tagTeam.deleteMany(\nForeign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:7)"],"fullName":"Tag Team League Rebalancing rebalanceTagTeamLeagues should promote and demote teams across multiple tiers","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should promote and demote teams across multiple tiers"},{"ancestorTitles":["Tag Team League Rebalancing","rebalanceTagTeamLeagues"],"duration":4,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2003","clientVersion":"5.22.0","meta":{"modelName":"TagTeam","field_name":"tag_team_matches_team1_id_fkey (index)"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28\n\n  381 describe('rebalanceTagTeamLeagues', () => {\n  382   beforeEach(async () => {\n  383     // Clean up ALL teams before these tests since they count total teams\n→ 384     await prisma.tagTeam.deleteMany(\nForeign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:7)"],"fullName":"Tag Team League Rebalancing rebalanceTagTeamLeagues should skip tiers with insufficient teams","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should skip tiers with insufficient teams"},{"ancestorTitles":["Tag Team League Rebalancing","rebalanceTagTeamLeagues"],"duration":4,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2003","clientVersion":"5.22.0","meta":{"modelName":"TagTeam","field_name":"tag_team_matches_team1_id_fkey (index)"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28\n\n  381 describe('rebalanceTagTeamLeagues', () => {\n  382   beforeEach(async () => {\n  383     // Clean up ALL teams before these tests since they count total teams\n→ 384     await prisma.tagTeam.deleteMany(\nForeign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:7)"],"fullName":"Tag Team League Rebalancing rebalanceTagTeamLeagues should skip teams without 5+ cycles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should skip teams without 5+ cycles"},{"ancestorTitles":["Tag Team League Rebalancing","Edge Cases"],"duration":110,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing Edge Cases should handle exactly 10 teams (minimum for rebalancing)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle exactly 10 teams (minimum for rebalancing)"},{"ancestorTitles":["Tag Team League Rebalancing","Edge Cases"],"duration":117,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing Edge Cases should handle 11 teams (10% rounds down to 1)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle 11 teams (10% rounds down to 1)"},{"ancestorTitles":["Tag Team League Rebalancing","Edge Cases"],"duration":207,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team League Rebalancing Edge Cases should handle teams with same league points (tiebreaker)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle teams with same league points (tiebreaker)"}],"endTime":1771861030764,"message":"  ● Tag Team League Rebalancing › determineDemotions › should return empty array when fewer than 10 teams\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:231:28\n\n      228 \n      229 it('should return empty array when fewer than 10 teams', async () => {\n      230   // Clean up any existing teams in silver_1 from previous tests\n    → 231   await prisma.tagTeam.deleteMany(\n    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n\n      229 |     it('should return empty array when fewer than 10 teams', async () => {\n      230 |       // Clean up any existing teams in silver_1 from previous tests\n    > 231 |       await prisma.tagTeam.deleteMany({\n          |       ^\n      232 |         where: { tagTeamLeagueId: 'silver_1' },\n      233 |       });\n      234 |       \n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:231:7)\n\n  ● Tag Team League Rebalancing › determineDemotions › should return empty array when no teams have 5+ cycles\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:246:28\n\n      243 \n      244 it('should return empty array when no teams have 5+ cycles', async () => {\n      245   // Clean up any existing teams in silver_1 from previous tests\n    → 246   await prisma.tagTeam.deleteMany(\n    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n\n      244 |     it('should return empty array when no teams have 5+ cycles', async () => {\n      245 |       // Clean up any existing teams in silver_1 from previous tests\n    > 246 |       await prisma.tagTeam.deleteMany({\n          |       ^\n      247 |         where: { tagTeamLeagueId: 'silver_1' },\n      248 |       });\n      249 |       \n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:246:7)\n\n  ● Tag Team League Rebalancing › determineDemotions › should demote bottom 10% of eligible teams\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:261:28\n\n      258 \n      259 it('should demote bottom 10% of eligible teams', async () => {\n      260   // Clean up any existing teams in silver_1 from previous tests\n    → 261   await prisma.tagTeam.deleteMany(\n    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n\n      259 |     it('should demote bottom 10% of eligible teams', async () => {\n      260 |       // Clean up any existing teams in silver_1 from previous tests\n    > 261 |       await prisma.tagTeam.deleteMany({\n          |       ^\n      262 |         where: { tagTeamLeagueId: 'silver_1' },\n      263 |       });\n      264 |       \n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:261:7)\n\n  ● Tag Team League Rebalancing › determineDemotions › should exclude teams in excludeTeamIds set\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:282:28\n\n      279 \n      280 it('should exclude teams in excludeTeamIds set', async () => {\n      281   // Clean up any existing teams in silver_1 from previous tests\n    → 282   await prisma.tagTeam.deleteMany(\n    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n\n      280 |     it('should exclude teams in excludeTeamIds set', async () => {\n      281 |       // Clean up any existing teams in silver_1 from previous tests\n    > 282 |       await prisma.tagTeam.deleteMany({\n          |       ^\n      283 |         where: { tagTeamLeagueId: 'silver_1' },\n      284 |       });\n      285 |       \n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:282:7)\n\n  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should handle empty league system\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28\n\n      381 describe('rebalanceTagTeamLeagues', () => {\n      382   beforeEach(async () => {\n      383     // Clean up ALL teams before these tests since they count total teams\n    → 384     await prisma.tagTeam.deleteMany(\n    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n\n      382 |     beforeEach(async () => {\n      383 |       // Clean up ALL teams before these tests since they count total teams\n    > 384 |       await prisma.tagTeam.deleteMany({});\n          |       ^\n      385 |     });\n      386 |\n      387 |     it('should handle empty league system', async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)\n\n  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should promote and demote teams across multiple tiers\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28\n\n      381 describe('rebalanceTagTeamLeagues', () => {\n      382   beforeEach(async () => {\n      383     // Clean up ALL teams before these tests since they count total teams\n    → 384     await prisma.tagTeam.deleteMany(\n    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n\n      382 |     beforeEach(async () => {\n      383 |       // Clean up ALL teams before these tests since they count total teams\n    > 384 |       await prisma.tagTeam.deleteMany({});\n          |       ^\n      385 |     });\n      386 |\n      387 |     it('should handle empty league system', async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)\n\n  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip tiers with insufficient teams\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28\n\n      381 describe('rebalanceTagTeamLeagues', () => {\n      382   beforeEach(async () => {\n      383     // Clean up ALL teams before these tests since they count total teams\n    → 384     await prisma.tagTeam.deleteMany(\n    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n\n      382 |     beforeEach(async () => {\n      383 |       // Clean up ALL teams before these tests since they count total teams\n    > 384 |       await prisma.tagTeam.deleteMany({});\n          |       ^\n      385 |     });\n      386 |\n      387 |     it('should handle empty league system', async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)\n\n  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip teams without 5+ cycles\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:384:28\n\n      381 describe('rebalanceTagTeamLeagues', () => {\n      382   beforeEach(async () => {\n      383     // Clean up ALL teams before these tests since they count total teams\n    → 384     await prisma.tagTeam.deleteMany(\n    Foreign key constraint violated: `tag_team_matches_team1_id_fkey (index)`\n\n      382 |     beforeEach(async () => {\n      383 |       // Clean up ALL teams before these tests since they count total teams\n    > 384 |       await prisma.tagTeam.deleteMany({});\n          |       ^\n      385 |     });\n      386 |\n      387 |     it('should handle empty league system', async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:384:7)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts","startTime":1771861029237,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 21: Facility Advisor Provides Streaming Studio ROI"],"duration":140,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 893526069, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [0,1,0,0,5]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 21: Facility Advisor Provides Streaming Studio ROI Property 21: Facility Advisor provides Streaming Studio ROI metrics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 21: Facility Advisor provides Streaming Studio ROI metrics"},{"ancestorTitles":["Property 21: Facility Advisor Provides Streaming Studio ROI"],"duration":40,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: -1995568575, path: \"0:0\", endOnFailure: true }\nCounterexample: [0]\nShrunk 1 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 21: Facility Advisor Provides Streaming Studio ROI Property 21.1: Upgrade cost follows formula (L+1) × 100,000","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 21.1: Upgrade cost follows formula (L+1) × 100,000"},{"ancestorTitles":["Property 21: Facility Advisor Provides Streaming Studio ROI"],"duration":83,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 423031111, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [0,100,1000,10]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 21: Facility Advisor Provides Streaming Studio ROI Property 21.2: Revenue increase per battle is calculated correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 21.2: Revenue increase per battle is calculated correctly"},{"ancestorTitles":["Property 21: Facility Advisor Provides Streaming Studio ROI"],"duration":18,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.facility.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/roiCalculatorService.ts:535:46\n\n  532  * Calculate ROI for all facilities owned by a user\n  533  */\n  534 async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n→ 535   const facilities = await prisma.facility.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at ROICalculatorService.calculateAllFacilityROIs (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/roiCalculatorService.ts:535:24)\n    at FacilityRecommendationService.generateRecommendations (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/facilityRecommendationService.ts:65:26)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudioROI.property.test.ts:531:29)"],"fullName":"Property 21: Facility Advisor Provides Streaming Studio ROI Property 21.3: No Streaming Studio recommendation when at max level (10)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 21.3: No Streaming Studio recommendation when at max level (10)"},{"ancestorTitles":["Property 21: Facility Advisor Provides Streaming Studio ROI"],"duration":91,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1700376064, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [0,100,1000,5]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)"],"fullName":"Property 21: Facility Advisor Provides Streaming Studio ROI Property 21.4: Operating cost increase reduces net benefit","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 21.4: Operating cost increase reduces net benefit"}],"endTime":1771861031208,"message":"  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21: Facility Advisor provides Streaming Studio ROI metrics\n\n    Property failed after 1 tests\n    { seed: 893526069, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,1,0,0,5]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/roiCalculatorService.ts:535:46\n\n      532  * Calculate ROI for all facilities owned by a user\n      533  */\n      534 async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    → 535   const facilities = await prisma.facility.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      533 |    */\n      534 |   async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    > 535 |     const facilities = await prisma.facility.findMany({\n          |                        ^\n      536 |       where: {\n      537 |         userId,\n      538 |         level: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ROICalculatorService.calculateAllFacilityROIs (src/services/roiCalculatorService.ts:535:24)\n      at FacilityRecommendationService.generateRecommendations (src/services/facilityRecommendationService.ts:65:26)\n      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:245:35\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:196:5)\n\n  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.1: Upgrade cost follows formula (L+1) × 100,000\n\n    Property failed after 1 tests\n    { seed: -1995568575, path: \"0:0\", endOnFailure: true }\n    Counterexample: [0]\n    Shrunk 1 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/roiCalculatorService.ts:535:46\n\n      532  * Calculate ROI for all facilities owned by a user\n      533  */\n      534 async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    → 535   const facilities = await prisma.facility.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      533 |    */\n      534 |   async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    > 535 |     const facilities = await prisma.facility.findMany({\n          |                        ^\n      536 |       where: {\n      537 |         userId,\n      538 |         level: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ROICalculatorService.calculateAllFacilityROIs (src/services/roiCalculatorService.ts:535:24)\n      at FacilityRecommendationService.generateRecommendations (src/services/facilityRecommendationService.ts:65:26)\n      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:396:35\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:365:5)\n\n  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.2: Revenue increase per battle is calculated correctly\n\n    Property failed after 1 tests\n    { seed: 423031111, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,100,1000,10]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/roiCalculatorService.ts:535:46\n\n      532  * Calculate ROI for all facilities owned by a user\n      533  */\n      534 async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    → 535   const facilities = await prisma.facility.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      533 |    */\n      534 |   async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    > 535 |     const facilities = await prisma.facility.findMany({\n          |                        ^\n      536 |       where: {\n      537 |         userId,\n      538 |         level: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ROICalculatorService.calculateAllFacilityROIs (src/services/roiCalculatorService.ts:535:24)\n      at FacilityRecommendationService.generateRecommendations (src/services/facilityRecommendationService.ts:65:26)\n      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:457:35\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:423:5)\n\n  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.3: No Streaming Studio recommendation when at max level (10)\n\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/roiCalculatorService.ts:535:46\n\n      532  * Calculate ROI for all facilities owned by a user\n      533  */\n      534 async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    → 535   const facilities = await prisma.facility.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      533 |    */\n      534 |   async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    > 535 |     const facilities = await prisma.facility.findMany({\n          |                        ^\n      536 |       where: {\n      537 |         userId,\n      538 |         level: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ROICalculatorService.calculateAllFacilityROIs (src/services/roiCalculatorService.ts:535:24)\n      at FacilityRecommendationService.generateRecommendations (src/services/facilityRecommendationService.ts:65:26)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:531:29)\n\n  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.4: Operating cost increase reduces net benefit\n\n    Property failed after 1 tests\n    { seed: 1700376064, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [0,100,1000,5]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/roiCalculatorService.ts:535:46\n\n      532  * Calculate ROI for all facilities owned by a user\n      533  */\n      534 async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    → 535   const facilities = await prisma.facility.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      533 |    */\n      534 |   async calculateAllFacilityROIs(userId: number): Promise<FacilityROI[]> {\n    > 535 |     const facilities = await prisma.facility.findMany({\n          |                        ^\n      536 |       where: {\n      537 |         userId,\n      538 |         level: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at ROICalculatorService.calculateAllFacilityROIs (src/services/roiCalculatorService.ts:535:24)\n      at FacilityRecommendationService.generateRecommendations (src/services/facilityRecommendationService.ts:65:26)\n      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:583:35\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:549:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudioROI.property.test.ts","startTime":1771861030767,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 17: Financial Report Includes Streaming Revenue"],"duration":2671,"failureDetails":[],"failureMessages":[],"fullName":"Property 17: Financial Report Includes Streaming Revenue Property 17: Financial report includes streaming revenue line item","invocations":1,"location":null,"numPassingAsserts":700,"retryReasons":[],"status":"passed","title":"Property 17: Financial report includes streaming revenue line item"},{"ancestorTitles":["Property 17: Financial Report Includes Streaming Revenue"],"duration":499,"failureDetails":[],"failureMessages":[],"fullName":"Property 17: Financial Report Includes Streaming Revenue Property 17.1: Zero streaming revenue when no battles","invocations":1,"location":null,"numPassingAsserts":150,"retryReasons":[],"status":"passed","title":"Property 17.1: Zero streaming revenue when no battles"},{"ancestorTitles":["Property 17: Financial Report Includes Streaming Revenue"],"duration":1340,"failureDetails":[],"failureMessages":[],"fullName":"Property 17: Financial Report Includes Streaming Revenue Property 17.2: Only counts streaming revenue from user's robots","invocations":1,"location":null,"numPassingAsserts":150,"retryReasons":[],"status":"passed","title":"Property 17.2: Only counts streaming revenue from user's robots"},{"ancestorTitles":["Property 17: Financial Report Includes Streaming Revenue"],"duration":796,"failureDetails":[],"failureMessages":[],"fullName":"Property 17: Financial Report Includes Streaming Revenue Property 17.3: Streaming revenue contributes to total revenue","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 17.3: Streaming revenue contributes to total revenue"},{"ancestorTitles":["Property 17: Financial Report Includes Streaming Revenue"],"duration":1501,"failureDetails":[],"failureMessages":[],"fullName":"Property 17: Financial Report Includes Streaming Revenue Property 17.4: Aggregates streaming revenue across multiple robots","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 17.4: Aggregates streaming revenue across multiple robots"}],"endTime":1771861038112,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts","startTime":1771861031210,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TagTeamLeagueInstanceService","getInstancesForTier"],"duration":36,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.tagTeam.groupBy()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:35:42\n\n  32  */\n  33 export async function getInstancesForTier(tier: TagTeamLeagueTier): Promise<TagTeamLeagueInstance[]> {\n  34   // Query tag teams grouped by tagTeamLeagueId for this tier\n→ 35   const instances = await prisma.tagTeam.groupBy(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getInstancesForTier (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:35:21)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:131:25)"],"fullName":"TagTeamLeagueInstanceService getInstancesForTier should return empty array when no teams exist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when no teams exist"},{"ancestorTitles":["TagTeamLeagueInstanceService","getInstancesForTier"],"duration":15,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 1)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:136:22)"],"fullName":"TagTeamLeagueInstanceService getInstancesForTier should return instances with correct team counts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return instances with correct team counts"},{"ancestorTitles":["TagTeamLeagueInstanceService","getInstancesForTier"],"duration":13,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 1)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:179:22)"],"fullName":"TagTeamLeagueInstanceService getInstancesForTier should sort instances by instance number","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should sort instances by instance number"},{"ancestorTitles":["TagTeamLeagueInstanceService","assignTagTeamLeagueInstance"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at _r.transaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:111:11891)\n    at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:7924)\n    at assignTagTeamLeagueInstance (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:100:10)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:223:24)"],"fullName":"TagTeamLeagueInstanceService assignTagTeamLeagueInstance should create first instance when none exist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create first instance when none exist"},{"ancestorTitles":["TagTeamLeagueInstanceService","assignTagTeamLeagueInstance"],"duration":79,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}},{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"User","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 35)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:228:22)","PrismaClientKnownRequestError: \nInvalid `prisma.user.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:25\n\n  111 }\n  112 \n  113 if (testUserIds.length > 0) {\n→ 114   await prisma.user.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:7)"],"fullName":"TagTeamLeagueInstanceService assignTagTeamLeagueInstance should assign to instance with most free spots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should assign to instance with most free spots"},{"ancestorTitles":["TagTeamLeagueInstanceService","assignTagTeamLeagueInstance"],"duration":255,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}},{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"User","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 1)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:262:22)","PrismaClientKnownRequestError: \nInvalid `prisma.user.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:25\n\n  111 }\n  112 \n  113 if (testUserIds.length > 0) {\n→ 114   await prisma.user.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:7)"],"fullName":"TagTeamLeagueInstanceService assignTagTeamLeagueInstance should create new instance when all are full","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create new instance when all are full"},{"ancestorTitles":["TagTeamLeagueInstanceService","rebalanceTagTeamInstances"],"duration":46,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}},{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"User","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 14)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:298:22)","PrismaClientKnownRequestError: \nInvalid `prisma.user.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:25\n\n  111 }\n  112 \n  113 if (testUserIds.length > 0) {\n→ 114   await prisma.user.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:7)"],"fullName":"TagTeamLeagueInstanceService rebalanceTagTeamInstances should not rebalance when instances are balanced","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not rebalance when instances are balanced"},{"ancestorTitles":["TagTeamLeagueInstanceService","rebalanceTagTeamInstances"],"duration":89,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 3)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:342:22)"],"fullName":"TagTeamLeagueInstanceService rebalanceTagTeamInstances should rebalance when deviation exceeds threshold","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should rebalance when deviation exceeds threshold"},{"ancestorTitles":["TagTeamLeagueInstanceService","getTeamsInInstance"],"duration":13,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 0)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:392:22)"],"fullName":"TagTeamLeagueInstanceService getTeamsInInstance should return teams sorted by league points","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return teams sorted by league points"},{"ancestorTitles":["TagTeamLeagueInstanceService","moveTeamToInstance"],"duration":7,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 1)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:439:22)"],"fullName":"TagTeamLeagueInstanceService moveTeamToInstance should move team to appropriate instance in new tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should move team to appropriate instance in new tier"},{"ancestorTitles":["TagTeamLeagueInstanceService","getStandingsForInstance"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.tagTeam.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:353:38\n\n  350  * Includes team rank calculation\n  351  */\n  352 export async function getStandingsForInstance(leagueId: string): Promise<any[]> {\n→ 353   const teams = await prisma.tagTeam.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getStandingsForInstance (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:353:17)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:464:25)"],"fullName":"TagTeamLeagueInstanceService getStandingsForInstance should return empty array when no teams exist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when no teams exist"},{"ancestorTitles":["TagTeamLeagueInstanceService","getStandingsForInstance"],"duration":10,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 1)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:469:22)"],"fullName":"TagTeamLeagueInstanceService getStandingsForInstance should sort teams by league points descending","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should sort teams by league points descending"},{"ancestorTitles":["TagTeamLeagueInstanceService","getStandingsForInstance"],"duration":11,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 2)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:517:22)"],"fullName":"TagTeamLeagueInstanceService getStandingsForInstance should use combined ELO as tiebreaker when league points are equal","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use combined ELO as tiebreaker when league points are equal"},{"ancestorTitles":["TagTeamLeagueInstanceService","getStandingsForInstance"],"duration":11,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 1)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:592:22)"],"fullName":"TagTeamLeagueInstanceService getStandingsForInstance should include robot details in standings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include robot details in standings"},{"ancestorTitles":["TagTeamLeagueInstanceService","getStandingsForTier"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.tagTeam.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:400:38\n\n  397  * Includes team rank calculation\n  398  */\n  399 export async function getStandingsForTier(tier: TagTeamLeagueTier): Promise<any[]> {\n→ 400   const teams = await prisma.tagTeam.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getStandingsForTier (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:400:17)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:618:25)"],"fullName":"TagTeamLeagueInstanceService getStandingsForTier should return empty array when no teams exist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when no teams exist"},{"ancestorTitles":["TagTeamLeagueInstanceService","getStandingsForTier"],"duration":17,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 4)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:623:22)"],"fullName":"TagTeamLeagueInstanceService getStandingsForTier should include teams from all instances in the tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include teams from all instances in the tier"},{"ancestorTitles":["TagTeamLeagueInstanceService","getStandingsForTier"],"duration":17,"failureDetails":[{"name":"PrismaClientKnownRequestError","code":"P2037","clientVersion":"5.22.0","meta":{"modelName":"Robot","message":"FATAL: sorry, too many clients already"}}],"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.robot.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n  24 async function createTestRobots(count: number, baseIndex: number = 0) {\n  25   const robots = await Promise.all(\n  26     Array.from({ length: count }, (_, i) =>\n→ 27       prisma.robot.create(\nToo many database connections opened: FATAL: sorry, too many clients already\nPrisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async Promise.all (index 3)\n    at createTestRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:25:20)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:675:22)"],"fullName":"TagTeamLeagueInstanceService getStandingsForTier should sort by league points then ELO across all instances","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should sort by league points then ELO across all instances"}],"endTime":1771861038806,"message":"  ● TagTeamLeagueInstanceService › getInstancesForTier › should return empty array when no teams exist\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.groupBy()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:35:42\n\n      32  */\n      33 export async function getInstancesForTier(tier: TagTeamLeagueTier): Promise<TagTeamLeagueInstance[]> {\n      34   // Query tag teams grouped by tagTeamLeagueId for this tier\n    → 35   const instances = await prisma.tagTeam.groupBy(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 | export async function getInstancesForTier(tier: TagTeamLeagueTier): Promise<TagTeamLeagueInstance[]> {\n      34 |   // Query tag teams grouped by tagTeamLeagueId for this tier\n    > 35 |   const instances = await prisma.tagTeam.groupBy({\n         |                     ^\n      36 |     by: ['tagTeamLeagueId'],\n      37 |     where: {\n      38 |       tagTeamLeague: tier,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getInstancesForTier (src/services/tagTeamLeagueInstanceService.ts:35:21)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:131:25)\n\n  ● TagTeamLeagueInstanceService › getInstancesForTier › should return instances with correct team counts\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 1)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:136:22)\n\n  ● TagTeamLeagueInstanceService › getInstancesForTier › should sort instances by instance number\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 1)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:179:22)\n\n  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should create first instance when none exist\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n       98 | export async function assignTagTeamLeagueInstance(tier: TagTeamLeagueTier): Promise<string> {\n       99 |   // Use a transaction with advisory lock to ensure atomic read-check-assign operation\n    > 100 |   return await prisma.$transaction(async (tx) => {\n          |          ^\n      101 |     // Acquire an advisory lock for this tier (using a hash of the tier name)\n      102 |     // This ensures only one assignment can happen at a time for this tier\n      103 |     const lockId = hashTierName(tier);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at _r.transaction (node_modules/@prisma/client/runtime/library.js:111:11891)\n      at Proxy._transactionWithCallback (node_modules/@prisma/client/runtime/library.js:130:7924)\n      at assignTagTeamLeagueInstance (src/services/tagTeamLeagueInstanceService.ts:100:10)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:223:24)\n\n  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should assign to instance with most free spots\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 35)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:228:22)\n\n  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should assign to instance with most free spots\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.user.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:25\n\n      111 }\n      112 \n      113 if (testUserIds.length > 0) {\n    → 114   await prisma.user.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      112 |\n      113 |     if (testUserIds.length > 0) {\n    > 114 |       await prisma.user.deleteMany({\n          |       ^\n      115 |         where: { id: { in: testUserIds } },\n      116 |       });\n      117 |     }\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:114:7)\n\n  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should create new instance when all are full\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 1)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:262:22)\n\n  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should create new instance when all are full\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.user.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:25\n\n      111 }\n      112 \n      113 if (testUserIds.length > 0) {\n    → 114   await prisma.user.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      112 |\n      113 |     if (testUserIds.length > 0) {\n    > 114 |       await prisma.user.deleteMany({\n          |       ^\n      115 |         where: { id: { in: testUserIds } },\n      116 |       });\n      117 |     }\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:114:7)\n\n  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should not rebalance when instances are balanced\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 14)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:298:22)\n\n  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should not rebalance when instances are balanced\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.user.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:114:25\n\n      111 }\n      112 \n      113 if (testUserIds.length > 0) {\n    → 114   await prisma.user.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      112 |\n      113 |     if (testUserIds.length > 0) {\n    > 114 |       await prisma.user.deleteMany({\n          |       ^\n      115 |         where: { id: { in: testUserIds } },\n      116 |       });\n      117 |     }\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:114:7)\n\n  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should rebalance when deviation exceeds threshold\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 3)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:342:22)\n\n  ● TagTeamLeagueInstanceService › getTeamsInInstance › should return teams sorted by league points\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 0)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:392:22)\n\n  ● TagTeamLeagueInstanceService › moveTeamToInstance › should move team to appropriate instance in new tier\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 1)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:439:22)\n\n  ● TagTeamLeagueInstanceService › getStandingsForInstance › should return empty array when no teams exist\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:353:38\n\n      350  * Includes team rank calculation\n      351  */\n      352 export async function getStandingsForInstance(leagueId: string): Promise<any[]> {\n    → 353   const teams = await prisma.tagTeam.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      351 |  */\n      352 | export async function getStandingsForInstance(leagueId: string): Promise<any[]> {\n    > 353 |   const teams = await prisma.tagTeam.findMany({\n          |                 ^\n      354 |     where: { tagTeamLeagueId: leagueId },\n      355 |     include: {\n      356 |       activeRobot: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getStandingsForInstance (src/services/tagTeamLeagueInstanceService.ts:353:17)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:464:25)\n\n  ● TagTeamLeagueInstanceService › getStandingsForInstance › should sort teams by league points descending\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 1)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:469:22)\n\n  ● TagTeamLeagueInstanceService › getStandingsForInstance › should use combined ELO as tiebreaker when league points are equal\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 2)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:517:22)\n\n  ● TagTeamLeagueInstanceService › getStandingsForInstance › should include robot details in standings\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 1)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:592:22)\n\n  ● TagTeamLeagueInstanceService › getStandingsForTier › should return empty array when no teams exist\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/tagTeamLeagueInstanceService.ts:400:38\n\n      397  * Includes team rank calculation\n      398  */\n      399 export async function getStandingsForTier(tier: TagTeamLeagueTier): Promise<any[]> {\n    → 400   const teams = await prisma.tagTeam.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      398 |  */\n      399 | export async function getStandingsForTier(tier: TagTeamLeagueTier): Promise<any[]> {\n    > 400 |   const teams = await prisma.tagTeam.findMany({\n          |                 ^\n      401 |     where: { tagTeamLeague: tier },\n      402 |     include: {\n      403 |       activeRobot: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getStandingsForTier (src/services/tagTeamLeagueInstanceService.ts:400:17)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:618:25)\n\n  ● TagTeamLeagueInstanceService › getStandingsForTier › should include teams from all instances in the tier\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 4)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:623:22)\n\n  ● TagTeamLeagueInstanceService › getStandingsForTier › should sort by league points then ELO across all instances\n\n    PrismaClientKnownRequestError: \n    Invalid `prisma.robot.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:27:22\n\n      24 async function createTestRobots(count: number, baseIndex: number = 0) {\n      25   const robots = await Promise.all(\n      26     Array.from({ length: count }, (_, i) =>\n    → 27       prisma.robot.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n    Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate\n\n      23 |   // Helper function to create test robots\n      24 |   async function createTestRobots(count: number, baseIndex: number = 0) {\n    > 25 |     const robots = await Promise.all(\n         |                    ^\n      26 |       Array.from({ length: count }, (_, i) =>\n      27 |         prisma.robot.create({\n      28 |           data: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n          at async Promise.all (index 3)\n      at createTestRobots (tests/tagTeamLeagueInstanceService.test.ts:25:20)\n      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:675:22)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts","startTime":1771861038115,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["ROICalculatorService","calculateFacilityROI"],"duration":95,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n  25 testRobotId = robot.id;\n  26 \n  27 // Ensure cycle metadata exists\n→ 28 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n  37 \n  38 afterEach(async () => {\n  39   // Clean up test data\n→ 40   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:5)"],"fullName":"ROICalculatorService calculateFacilityROI should return null for facility not purchased","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return null for facility not purchased"},{"ancestorTitles":["ROICalculatorService","calculateFacilityROI"],"duration":72,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n  25 testRobotId = robot.id;\n  26 \n  27 // Ensure cycle metadata exists\n→ 28 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n  37 \n  38 afterEach(async () => {\n  39   // Clean up test data\n→ 40   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:5)"],"fullName":"ROICalculatorService calculateFacilityROI should calculate ROI for income generator facility","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate ROI for income generator facility"},{"ancestorTitles":["ROICalculatorService","calculateFacilityROI"],"duration":75,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n  25 testRobotId = robot.id;\n  26 \n  27 // Ensure cycle metadata exists\n→ 28 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n  37 \n  38 afterEach(async () => {\n  39   // Clean up test data\n→ 40   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:5)"],"fullName":"ROICalculatorService calculateFacilityROI should calculate ROI for repair bay facility with discounts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate ROI for repair bay facility with discounts"},{"ancestorTitles":["ROICalculatorService","calculateFacilityROI"],"duration":75,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n  25 testRobotId = robot.id;\n  26 \n  27 // Ensure cycle metadata exists\n→ 28 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n  37 \n  38 afterEach(async () => {\n  39   // Clean up test data\n→ 40   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:5)"],"fullName":"ROICalculatorService calculateFacilityROI should calculate ROI for training facility with discounts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate ROI for training facility with discounts"},{"ancestorTitles":["ROICalculatorService","calculateFacilityROI"],"duration":75,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n  25 testRobotId = robot.id;\n  26 \n  27 // Ensure cycle metadata exists\n→ 28 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n  37 \n  38 afterEach(async () => {\n  39   // Clean up test data\n→ 40   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:5)"],"fullName":"ROICalculatorService calculateFacilityROI should calculate breakeven cycle when facility becomes profitable","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate breakeven cycle when facility becomes profitable"},{"ancestorTitles":["ROICalculatorService","calculateAllFacilityROIs"],"duration":70,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n  25 testRobotId = robot.id;\n  26 \n  27 // Ensure cycle metadata exists\n→ 28 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n  37 \n  38 afterEach(async () => {\n  39   // Clean up test data\n→ 40   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:5)"],"fullName":"ROICalculatorService calculateAllFacilityROIs should calculate ROI for all purchased facilities","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate ROI for all purchased facilities"},{"ancestorTitles":["ROICalculatorService","calculateAllFacilityROIs"],"duration":83,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n  25 testRobotId = robot.id;\n  26 \n  27 // Ensure cycle metadata exists\n→ 28 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n  37 \n  38 afterEach(async () => {\n  39   // Clean up test data\n→ 40   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:5)"],"fullName":"ROICalculatorService calculateAllFacilityROIs should return empty array when no facilities purchased","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when no facilities purchased"}],"endTime":1771861039413,"message":"  ● ROICalculatorService › calculateFacilityROI › should return null for facility not purchased\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n      25 testRobotId = robot.id;\n      26 \n      27 // Ensure cycle metadata exists\n    → 28 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      26 |\n      27 |     // Ensure cycle metadata exists\n    > 28 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      29 |       where: { id: 1 },\n      30 |       update: { totalCycles: baseCycleNumber },\n      31 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:28:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should return null for facility not purchased\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n      37 \n      38 afterEach(async () => {\n      39   // Clean up test data\n    → 40   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      38 |   afterEach(async () => {\n      39 |     // Clean up test data\n    > 40 |     await prisma.auditLog.deleteMany({ \n         |     ^\n      41 |       where: { \n      42 |         OR: [\n      43 |           { userId: testUserId },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:40:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for income generator facility\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n      25 testRobotId = robot.id;\n      26 \n      27 // Ensure cycle metadata exists\n    → 28 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      26 |\n      27 |     // Ensure cycle metadata exists\n    > 28 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      29 |       where: { id: 1 },\n      30 |       update: { totalCycles: baseCycleNumber },\n      31 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:28:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for income generator facility\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n      37 \n      38 afterEach(async () => {\n      39   // Clean up test data\n    → 40   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      38 |   afterEach(async () => {\n      39 |     // Clean up test data\n    > 40 |     await prisma.auditLog.deleteMany({ \n         |     ^\n      41 |       where: { \n      42 |         OR: [\n      43 |           { userId: testUserId },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:40:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for repair bay facility with discounts\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n      25 testRobotId = robot.id;\n      26 \n      27 // Ensure cycle metadata exists\n    → 28 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      26 |\n      27 |     // Ensure cycle metadata exists\n    > 28 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      29 |       where: { id: 1 },\n      30 |       update: { totalCycles: baseCycleNumber },\n      31 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:28:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for repair bay facility with discounts\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n      37 \n      38 afterEach(async () => {\n      39   // Clean up test data\n    → 40   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      38 |   afterEach(async () => {\n      39 |     // Clean up test data\n    > 40 |     await prisma.auditLog.deleteMany({ \n         |     ^\n      41 |       where: { \n      42 |         OR: [\n      43 |           { userId: testUserId },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:40:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for training facility with discounts\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n      25 testRobotId = robot.id;\n      26 \n      27 // Ensure cycle metadata exists\n    → 28 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      26 |\n      27 |     // Ensure cycle metadata exists\n    > 28 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      29 |       where: { id: 1 },\n      30 |       update: { totalCycles: baseCycleNumber },\n      31 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:28:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for training facility with discounts\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n      37 \n      38 afterEach(async () => {\n      39   // Clean up test data\n    → 40   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      38 |   afterEach(async () => {\n      39 |     // Clean up test data\n    > 40 |     await prisma.auditLog.deleteMany({ \n         |     ^\n      41 |       where: { \n      42 |         OR: [\n      43 |           { userId: testUserId },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:40:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should calculate breakeven cycle when facility becomes profitable\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n      25 testRobotId = robot.id;\n      26 \n      27 // Ensure cycle metadata exists\n    → 28 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      26 |\n      27 |     // Ensure cycle metadata exists\n    > 28 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      29 |       where: { id: 1 },\n      30 |       update: { totalCycles: baseCycleNumber },\n      31 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:28:5)\n\n  ● ROICalculatorService › calculateFacilityROI › should calculate breakeven cycle when facility becomes profitable\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n      37 \n      38 afterEach(async () => {\n      39   // Clean up test data\n    → 40   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      38 |   afterEach(async () => {\n      39 |     // Clean up test data\n    > 40 |     await prisma.auditLog.deleteMany({ \n         |     ^\n      41 |       where: { \n      42 |         OR: [\n      43 |           { userId: testUserId },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:40:5)\n\n  ● ROICalculatorService › calculateAllFacilityROIs › should calculate ROI for all purchased facilities\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n      25 testRobotId = robot.id;\n      26 \n      27 // Ensure cycle metadata exists\n    → 28 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      26 |\n      27 |     // Ensure cycle metadata exists\n    > 28 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      29 |       where: { id: 1 },\n      30 |       update: { totalCycles: baseCycleNumber },\n      31 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:28:5)\n\n  ● ROICalculatorService › calculateAllFacilityROIs › should calculate ROI for all purchased facilities\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n      37 \n      38 afterEach(async () => {\n      39   // Clean up test data\n    → 40   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      38 |   afterEach(async () => {\n      39 |     // Clean up test data\n    > 40 |     await prisma.auditLog.deleteMany({ \n         |     ^\n      41 |       where: { \n      42 |         OR: [\n      43 |           { userId: testUserId },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:40:5)\n\n  ● ROICalculatorService › calculateAllFacilityROIs › should return empty array when no facilities purchased\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:28:32\n\n      25 testRobotId = robot.id;\n      26 \n      27 // Ensure cycle metadata exists\n    → 28 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      26 |\n      27 |     // Ensure cycle metadata exists\n    > 28 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      29 |       where: { id: 1 },\n      30 |       update: { totalCycles: baseCycleNumber },\n      31 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:28:5)\n\n  ● ROICalculatorService › calculateAllFacilityROIs › should return empty array when no facilities purchased\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:40:27\n\n      37 \n      38 afterEach(async () => {\n      39   // Clean up test data\n    → 40   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      38 |   afterEach(async () => {\n      39 |     // Clean up test data\n    > 40 |     await prisma.auditLog.deleteMany({ \n         |     ^\n      41 |       where: { \n      42 |         OR: [\n      43 |           { userId: testUserId },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/roiCalculatorService.test.ts:40:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts","startTime":1771861038809,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Authentication Endpoints","POST /api/auth/login"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/auth.test.ts:27:5)"],"fullName":"Authentication Endpoints POST /api/auth/login should successfully login with valid credentials","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should successfully login with valid credentials"},{"ancestorTitles":["Authentication Endpoints","POST /api/auth/login"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/auth.test.ts:27:5)"],"fullName":"Authentication Endpoints POST /api/auth/login should return 401 for invalid credentials","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 for invalid credentials"},{"ancestorTitles":["Authentication Endpoints","POST /api/auth/login"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/auth.test.ts:27:5)"],"fullName":"Authentication Endpoints POST /api/auth/login should return 400 for missing credentials","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 for missing credentials"},{"ancestorTitles":["Authentication Endpoints","GET /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/auth.test.ts:27:5)"],"fullName":"Authentication Endpoints GET /api/user/profile should return user profile with correct data structure","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return user profile with correct data structure"},{"ancestorTitles":["Authentication Endpoints","GET /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/auth.test.ts:27:5)"],"fullName":"Authentication Endpoints GET /api/user/profile should return 401 without authentication token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication token"},{"ancestorTitles":["Authentication Endpoints","GET /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/auth.test.ts:27:5)"],"fullName":"Authentication Endpoints GET /api/user/profile should return 403 with invalid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 with invalid token"},{"ancestorTitles":["Authentication Endpoints","Test User Compatibility"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/auth.test.ts:27:5)"],"fullName":"Authentication Endpoints Test User Compatibility should verify test user can login and access profile","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should verify test user can login and access profile"}],"endTime":1771861039547,"message":"  ● Authentication Endpoints › POST /api/auth/login › should successfully login with valid credentials\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |   });\n      29 |\n      30 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/auth.test.ts:27:5)\n\n  ● Authentication Endpoints › POST /api/auth/login › should return 401 for invalid credentials\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |   });\n      29 |\n      30 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/auth.test.ts:27:5)\n\n  ● Authentication Endpoints › POST /api/auth/login › should return 400 for missing credentials\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |   });\n      29 |\n      30 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/auth.test.ts:27:5)\n\n  ● Authentication Endpoints › GET /api/user/profile › should return user profile with correct data structure\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |   });\n      29 |\n      30 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/auth.test.ts:27:5)\n\n  ● Authentication Endpoints › GET /api/user/profile › should return 401 without authentication token\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |   });\n      29 |\n      30 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/auth.test.ts:27:5)\n\n  ● Authentication Endpoints › GET /api/user/profile › should return 403 with invalid token\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |   });\n      29 |\n      30 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/auth.test.ts:27:5)\n\n  ● Authentication Endpoints › Test User Compatibility › should verify test user can login and access profile\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |   });\n      29 |\n      30 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/auth.test.ts:27:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/auth.test.ts","startTime":1771861039415,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should get all hall of records statistics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get all hall of records statistics"},{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should have combat records section","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have combat records section"},{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should have career records section","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have career records section"},{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should have economic records section","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have economic records section"},{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should have prestige records section","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have prestige records section"},{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should have upsets section","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have upsets section"},{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should handle empty database gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle empty database gracefully"},{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should return records with proper structure","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return records with proper structure"},{"ancestorTitles":["Records Routes","GET /api/records"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts:20:5)"],"fullName":"Records Routes GET /api/records should return up to 10 records per category","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return up to 10 records per category"}],"endTime":1771861039623,"message":"  ● Records Routes › GET /api/records › should get all hall of records statistics\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n\n  ● Records Routes › GET /api/records › should have combat records section\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n\n  ● Records Routes › GET /api/records › should have career records section\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n\n  ● Records Routes › GET /api/records › should have economic records section\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n\n  ● Records Routes › GET /api/records › should have prestige records section\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n\n  ● Records Routes › GET /api/records › should have upsets section\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n\n  ● Records Routes › GET /api/records › should handle empty database gracefully\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n\n  ● Records Routes › GET /api/records › should return records with proper structure\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n\n  ● Records Routes › GET /api/records › should return up to 10 records per category\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Records Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/records.test.ts:20:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/records.test.ts","startTime":1771861039551,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["FacilityRecommendationService","generateRecommendations"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Ensure cycle metadata exists\n→ 14 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:5)"],"fullName":"FacilityRecommendationService generateRecommendations should recommend facilities with positive ROI","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should recommend facilities with positive ROI"},{"ancestorTitles":["FacilityRecommendationService","generateRecommendations"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Ensure cycle metadata exists\n→ 14 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:5)"],"fullName":"FacilityRecommendationService generateRecommendations should recommend repair bay for user with high repair costs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should recommend repair bay for user with high repair costs"},{"ancestorTitles":["FacilityRecommendationService","generateRecommendations"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Ensure cycle metadata exists\n→ 14 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:5)"],"fullName":"FacilityRecommendationService generateRecommendations should rank recommendations by projected ROI","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should rank recommendations by projected ROI"},{"ancestorTitles":["FacilityRecommendationService","generateRecommendations"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Ensure cycle metadata exists\n→ 14 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:5)"],"fullName":"FacilityRecommendationService generateRecommendations should not recommend facilities above user prestige level","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not recommend facilities above user prestige level"},{"ancestorTitles":["FacilityRecommendationService","generateRecommendations"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Ensure cycle metadata exists\n→ 14 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:5)"],"fullName":"FacilityRecommendationService generateRecommendations should not recommend facilities at max level","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not recommend facilities at max level"},{"ancestorTitles":["FacilityRecommendationService","generateRecommendations"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Ensure cycle metadata exists\n→ 14 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:5)"],"fullName":"FacilityRecommendationService generateRecommendations should recommend roster expansion when user is at capacity","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should recommend roster expansion when user is at capacity"},{"ancestorTitles":["FacilityRecommendationService","generateRecommendations"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.upsert()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Ensure cycle metadata exists\n→ 14 await prisma.cycleMetadata.upsert(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:5)"],"fullName":"FacilityRecommendationService generateRecommendations should calculate total recommended investment","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate total recommended investment"}],"endTime":1771861039710,"message":"  ● FacilityRecommendationService › generateRecommendations › should recommend facilities with positive ROI\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Ensure cycle metadata exists\n    → 14 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Ensure cycle metadata exists\n    > 14 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      15 |       where: { id: 1 },\n      16 |       update: {},\n      17 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)\n\n  ● FacilityRecommendationService › generateRecommendations › should recommend repair bay for user with high repair costs\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Ensure cycle metadata exists\n    → 14 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Ensure cycle metadata exists\n    > 14 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      15 |       where: { id: 1 },\n      16 |       update: {},\n      17 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)\n\n  ● FacilityRecommendationService › generateRecommendations › should rank recommendations by projected ROI\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Ensure cycle metadata exists\n    → 14 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Ensure cycle metadata exists\n    > 14 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      15 |       where: { id: 1 },\n      16 |       update: {},\n      17 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)\n\n  ● FacilityRecommendationService › generateRecommendations › should not recommend facilities above user prestige level\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Ensure cycle metadata exists\n    → 14 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Ensure cycle metadata exists\n    > 14 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      15 |       where: { id: 1 },\n      16 |       update: {},\n      17 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)\n\n  ● FacilityRecommendationService › generateRecommendations › should not recommend facilities at max level\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Ensure cycle metadata exists\n    → 14 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Ensure cycle metadata exists\n    > 14 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      15 |       where: { id: 1 },\n      16 |       update: {},\n      17 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)\n\n  ● FacilityRecommendationService › generateRecommendations › should recommend roster expansion when user is at capacity\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Ensure cycle metadata exists\n    → 14 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Ensure cycle metadata exists\n    > 14 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      15 |       where: { id: 1 },\n      16 |       update: {},\n      17 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)\n\n  ● FacilityRecommendationService › generateRecommendations › should calculate total recommended investment\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.upsert()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Ensure cycle metadata exists\n    → 14 await prisma.cycleMetadata.upsert(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Ensure cycle metadata exists\n    > 14 |     await prisma.cycleMetadata.upsert({\n         |     ^\n      15 |       where: { id: 1 },\n      16 |       update: {},\n      17 |       create: {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts","startTime":1771861039625,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Training Academy Cap Enforcement","Test 1: Base cap of 10 without any academy"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 1: Base cap of 10 without any academy should allow upgrading combatPower to level 10","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrading combatPower to level 10"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 1: Base cap of 10 without any academy"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 1: Base cap of 10 without any academy should block upgrading combatPower from level 10 to level 11 without academy","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should block upgrading combatPower from level 10 to level 11 without academy"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 2: Academy Level 1 cap (15)"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 2: Academy Level 1 cap (15) should allow upgrading combatPower to level 15 with academy level 1","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrading combatPower to level 15 with academy level 1"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 2: Academy Level 1 cap (15)"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 2: Academy Level 1 cap (15) should block upgrading combatPower from level 15 to level 16","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should block upgrading combatPower from level 15 to level 16"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 3: All 4 academies control their respective attributes"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 3: All 4 academies control their respective attributes should enforce Combat Training Academy for Combat Systems attributes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce Combat Training Academy for Combat Systems attributes"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 3: All 4 academies control their respective attributes"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 3: All 4 academies control their respective attributes should enforce Defense Training Academy for Defensive Systems attributes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce Defense Training Academy for Defensive Systems attributes"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 3: All 4 academies control their respective attributes"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 3: All 4 academies control their respective attributes should enforce Mobility Training Academy for Chassis & Mobility attributes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce Mobility Training Academy for Chassis & Mobility attributes"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 3: All 4 academies control their respective attributes"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 3: All 4 academies control their respective attributes should enforce AI Training Academy for AI Processing + Team attributes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce AI Training Academy for AI Processing + Team attributes"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 4: Maximum cap of 50 at academy level 10"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 4: Maximum cap of 50 at academy level 10 should allow upgrading combatPower to level 50 with academy level 10","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrading combatPower to level 50 with academy level 10"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 4: Maximum cap of 50 at academy level 10"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 4: Maximum cap of 50 at academy level 10 should block upgrading combatPower from level 50 to level 51","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should block upgrading combatPower from level 50 to level 51"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 10 for academy level 0","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 10 for academy level 0"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 15 for academy level 1","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 15 for academy level 1"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 20 for academy level 2","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 20 for academy level 2"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 25 for academy level 3","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 25 for academy level 3"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 30 for academy level 4","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 30 for academy level 4"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 35 for academy level 5","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 35 for academy level 5"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 40 for academy level 6","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 40 for academy level 6"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 42 for academy level 7","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 42 for academy level 7"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 45 for academy level 8","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 45 for academy level 8"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 48 for academy level 9","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 48 for academy level 9"},{"ancestorTitles":["Training Academy Cap Enforcement","Test 5: Verify cap progression mapping"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts:15:5)"],"fullName":"Training Academy Cap Enforcement Test 5: Verify cap progression mapping should enforce cap of 50 for academy level 10","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce cap of 50 for academy level 10"}],"endTime":1771861039781,"message":"  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should allow upgrading combatPower to level 10\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should block upgrading combatPower from level 10 to level 11 without academy\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should allow upgrading combatPower to level 15 with academy level 1\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should block upgrading combatPower from level 15 to level 16\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Combat Training Academy for Combat Systems attributes\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Defense Training Academy for Defensive Systems attributes\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Mobility Training Academy for Chassis & Mobility attributes\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce AI Training Academy for AI Processing + Team attributes\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should allow upgrading combatPower to level 50 with academy level 10\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should block upgrading combatPower from level 50 to level 51\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 10 for academy level 0\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 15 for academy level 1\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 20 for academy level 2\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 25 for academy level 3\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 30 for academy level 4\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 35 for academy level 5\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 40 for academy level 6\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 42 for academy level 7\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 45 for academy level 8\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 48 for academy level 9\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n\n  ● Training Academy Cap Enforcement › Test 5: Verify cap progression mapping › should enforce cap of 50 for academy level 10\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeAll(async () => {\n      14 |     // Ensure database connection\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:15:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trainingAcademyCaps.test.ts","startTime":1771861039712,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Battle Orchestrator","calculateELOChange"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator calculateELOChange should calculate ELO changes for equal-rated players","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate ELO changes for equal-rated players"},{"ancestorTitles":["Battle Orchestrator","calculateELOChange"],"duration":13,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator calculateELOChange should give smaller ELO gain when favorite wins","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should give smaller ELO gain when favorite wins"},{"ancestorTitles":["Battle Orchestrator","calculateELOChange"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator calculateELOChange should give larger ELO gain when underdog wins","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should give larger ELO gain when underdog wins"},{"ancestorTitles":["Battle Orchestrator","calculateELOChange"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator calculateELOChange should calculate ELO changes for draw","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate ELO changes for draw"},{"ancestorTitles":["Battle Orchestrator","processBattle"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator processBattle should execute a battle and create records","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should execute a battle and create records"},{"ancestorTitles":["Battle Orchestrator","processBattle"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator processBattle should handle bye-robot battles correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle bye-robot battles correctly"},{"ancestorTitles":["Battle Orchestrator","processBattle"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator processBattle should increment kills when a robot destroys its opponent","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should increment kills when a robot destroys its opponent"},{"ancestorTitles":["Battle Orchestrator","executeScheduledBattles"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator executeScheduledBattles should execute multiple scheduled battles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should execute multiple scheduled battles"},{"ancestorTitles":["Battle Orchestrator","Streaming Revenue Integration"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator Streaming Revenue Integration should calculate and award streaming revenue after battle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate and award streaming revenue after battle"},{"ancestorTitles":["Battle Orchestrator","Streaming Revenue Integration"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator Streaming Revenue Integration should not award streaming revenue for bye matches","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not award streaming revenue for bye matches"},{"ancestorTitles":["Battle Orchestrator","Streaming Revenue Integration"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator Streaming Revenue Integration should add streaming revenue to audit log","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should add streaming revenue to audit log"},{"ancestorTitles":["Battle Orchestrator","Streaming Revenue Integration"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order to respect foreign key constraints\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up test data between tests\n→ 58   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:5)"],"fullName":"Battle Orchestrator Streaming Revenue Integration should log streaming revenue to terminal","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log streaming revenue to terminal"}],"coverage":{},"endTime":1771861048230,"message":"  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for equal-rated players\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for equal-rated players\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › calculateELOChange › should give smaller ELO gain when favorite wins\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › calculateELOChange › should give smaller ELO gain when favorite wins\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › calculateELOChange › should give larger ELO gain when underdog wins\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › calculateELOChange › should give larger ELO gain when underdog wins\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for draw\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for draw\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › processBattle › should execute a battle and create records\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › processBattle › should execute a battle and create records\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › processBattle › should handle bye-robot battles correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › processBattle › should handle bye-robot battles correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › processBattle › should increment kills when a robot destroys its opponent\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › processBattle › should increment kills when a robot destroys its opponent\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › executeScheduledBattles › should execute multiple scheduled battles\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › executeScheduledBattles › should execute multiple scheduled battles\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › Streaming Revenue Integration › should calculate and award streaming revenue after battle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › Streaming Revenue Integration › should calculate and award streaming revenue after battle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › Streaming Revenue Integration › should not award streaming revenue for bye matches\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › Streaming Revenue Integration › should not award streaming revenue for bye matches\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › Streaming Revenue Integration › should add streaming revenue to audit log\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › Streaming Revenue Integration › should add streaming revenue to audit log\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n  ● Battle Orchestrator › Streaming Revenue Integration › should log streaming revenue to terminal\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order to respect foreign key constraints\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order to respect foreign key constraints\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)\n\n  ● Battle Orchestrator › Streaming Revenue Integration › should log streaming revenue to terminal\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up test data between tests\n    → 58   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up test data between tests\n    > 58 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      59 |     await prisma.battleParticipant.deleteMany({});\n      60 |     await prisma.battle.deleteMany({});\n      61 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:79:27\n\n      76 \n      77 afterAll(async () => {\n      78   // Final cleanup\n    → 79   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      77 |   afterAll(async () => {\n      78 |     // Final cleanup\n    > 79 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      80 |     await prisma.battleParticipant.deleteMany({});\n      81 |     await prisma.battle.deleteMany({});\n      82 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleOrchestrator.test.ts:79:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team Multi-Match Cycle Integration Test"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)"],"fullName":"Tag Team Multi-Match Cycle Integration Test should handle robot in both 1v1 and tag team match with cumulative damage","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle robot in both 1v1 and tag team match with cumulative damage"},{"ancestorTitles":["Tag Team Multi-Match Cycle Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)"],"fullName":"Tag Team Multi-Match Cycle Integration Test should exclude unready robots from tag team match after 1v1 damage","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should exclude unready robots from tag team match after 1v1 damage"},{"ancestorTitles":["Tag Team Multi-Match Cycle Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)"],"fullName":"Tag Team Multi-Match Cycle Integration Test should process matches in correct order: 1v1 first, then tag team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should process matches in correct order: 1v1 first, then tag team"}],"endTime":1771861039963,"message":"  ● Tag Team Multi-Match Cycle Integration Test › should handle robot in both 1v1 and tag team match with cumulative damage\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)\n      30 |     await prisma.cycleMetadata.upsert({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)\n\n  ● Tag Team Multi-Match Cycle Integration Test › should exclude unready robots from tag team match after 1v1 damage\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)\n      30 |     await prisma.cycleMetadata.upsert({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)\n\n  ● Tag Team Multi-Match Cycle Integration Test › should process matches in correct order: 1v1 first, then tag team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)\n      30 |     await prisma.cycleMetadata.upsert({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamMultiMatchCycle.test.ts","startTime":1771861039919,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Facility Advisor - Streaming Studio"],"duration":15,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Clean up cycle snapshots from previous tests\n→ 14 await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:5)","PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32\n\n  34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});\n  35 }\n  36 // Clean up cycle snapshots\n→ 37 await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:5)"],"fullName":"Facility Advisor - Streaming Studio should recommend Streaming Studio with positive ROI when user has battle history","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should recommend Streaming Studio with positive ROI when user has battle history"},{"ancestorTitles":["Facility Advisor - Streaming Studio"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Clean up cycle snapshots from previous tests\n→ 14 await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:5)","PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32\n\n  34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});\n  35 }\n  36 // Clean up cycle snapshots\n→ 37 await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:5)"],"fullName":"Facility Advisor - Streaming Studio should recommend Streaming Studio with strategic value when user has no battle history","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should recommend Streaming Studio with strategic value when user has no battle history"},{"ancestorTitles":["Facility Advisor - Streaming Studio"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Clean up cycle snapshots from previous tests\n→ 14 await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:5)","PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32\n\n  34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});\n  35 }\n  36 // Clean up cycle snapshots\n→ 37 await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:5)"],"fullName":"Facility Advisor - Streaming Studio should calculate correct ROI for Streaming Studio upgrade from level 1 to 2","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate correct ROI for Streaming Studio upgrade from level 1 to 2"},{"ancestorTitles":["Facility Advisor - Streaming Studio"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32\n\n  11 testUserIds = [];\n  12 \n  13 // Clean up cycle snapshots from previous tests\n→ 14 await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:5)","PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32\n\n  34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});\n  35 }\n  36 // Clean up cycle snapshots\n→ 37 await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:5)"],"fullName":"Facility Advisor - Streaming Studio should not recommend Streaming Studio when battle frequency is too low","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not recommend Streaming Studio when battle frequency is too low"}],"endTime":1771861040058,"message":"  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with positive ROI when user has battle history\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Clean up cycle snapshots from previous tests\n    → 14 await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Clean up cycle snapshots from previous tests\n    > 14 |     await prisma.cycleSnapshot.deleteMany({});\n         |     ^\n      15 |     \n      16 |     // Ensure cycle metadata exists\n      17 |     await prisma.cycleMetadata.upsert({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)\n\n  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with positive ROI when user has battle history\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32\n\n      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});\n      35 }\n      36 // Clean up cycle snapshots\n    → 37 await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      35 |     }\n      36 |     // Clean up cycle snapshots\n    > 37 |     await prisma.cycleSnapshot.deleteMany({});\n         |     ^\n      38 |   });\n      39 |\n      40 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)\n\n  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with strategic value when user has no battle history\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Clean up cycle snapshots from previous tests\n    → 14 await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Clean up cycle snapshots from previous tests\n    > 14 |     await prisma.cycleSnapshot.deleteMany({});\n         |     ^\n      15 |     \n      16 |     // Ensure cycle metadata exists\n      17 |     await prisma.cycleMetadata.upsert({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)\n\n  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with strategic value when user has no battle history\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32\n\n      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});\n      35 }\n      36 // Clean up cycle snapshots\n    → 37 await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      35 |     }\n      36 |     // Clean up cycle snapshots\n    > 37 |     await prisma.cycleSnapshot.deleteMany({});\n         |     ^\n      38 |   });\n      39 |\n      40 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)\n\n  ● Facility Advisor - Streaming Studio › should calculate correct ROI for Streaming Studio upgrade from level 1 to 2\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Clean up cycle snapshots from previous tests\n    → 14 await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Clean up cycle snapshots from previous tests\n    > 14 |     await prisma.cycleSnapshot.deleteMany({});\n         |     ^\n      15 |     \n      16 |     // Ensure cycle metadata exists\n      17 |     await prisma.cycleMetadata.upsert({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)\n\n  ● Facility Advisor - Streaming Studio › should calculate correct ROI for Streaming Studio upgrade from level 1 to 2\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32\n\n      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});\n      35 }\n      36 // Clean up cycle snapshots\n    → 37 await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      35 |     }\n      36 |     // Clean up cycle snapshots\n    > 37 |     await prisma.cycleSnapshot.deleteMany({});\n         |     ^\n      38 |   });\n      39 |\n      40 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)\n\n  ● Facility Advisor - Streaming Studio › should not recommend Streaming Studio when battle frequency is too low\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32\n\n      11 testUserIds = [];\n      12 \n      13 // Clean up cycle snapshots from previous tests\n    → 14 await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |     \n      13 |     // Clean up cycle snapshots from previous tests\n    > 14 |     await prisma.cycleSnapshot.deleteMany({});\n         |     ^\n      15 |     \n      16 |     // Ensure cycle metadata exists\n      17 |     await prisma.cycleMetadata.upsert({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)\n\n  ● Facility Advisor - Streaming Studio › should not recommend Streaming Studio when battle frequency is too low\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32\n\n      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});\n      35 }\n      36 // Clean up cycle snapshots\n    → 37 await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      35 |     }\n      36 |     // Clean up cycle snapshots\n    > 37 |     await prisma.cycleSnapshot.deleteMany({});\n         |     ^\n      38 |   });\n      39 |\n      40 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts","startTime":1771861039966,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["League Instance Service","getInstancesForTier"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service getInstancesForTier should return empty array for tier with no robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array for tier with no robots"},{"ancestorTitles":["League Instance Service","getInstancesForTier"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service getInstancesForTier should return instances sorted by instance number","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return instances sorted by instance number"},{"ancestorTitles":["League Instance Service","getInstancesForTier"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service getInstancesForTier should exclude bye-robot from instance counts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should exclude bye-robot from instance counts"},{"ancestorTitles":["League Instance Service","getLeagueInstanceStats"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service getLeagueInstanceStats should calculate correct statistics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate correct statistics"},{"ancestorTitles":["League Instance Service","getLeagueInstanceStats"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service getLeagueInstanceStats should detect when rebalancing is needed","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect when rebalancing is needed"},{"ancestorTitles":["League Instance Service","getLeagueInstanceStats"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service getLeagueInstanceStats should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE"},{"ancestorTitles":["League Instance Service","assignLeagueInstance"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service assignLeagueInstance should create first instance when none exist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create first instance when none exist"},{"ancestorTitles":["League Instance Service","assignLeagueInstance"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service assignLeagueInstance should assign to instance with most free spots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should assign to instance with most free spots"},{"ancestorTitles":["League Instance Service","assignLeagueInstance"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service assignLeagueInstance should create new instance when all are full","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create new instance when all are full"},{"ancestorTitles":["League Instance Service","rebalanceInstances"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service rebalanceInstances should not rebalance when instances are balanced","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not rebalance when instances are balanced"},{"ancestorTitles":["League Instance Service","rebalanceInstances"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service rebalanceInstances should rebalance when imbalance exceeds threshold","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should rebalance when imbalance exceeds threshold"},{"ancestorTitles":["League Instance Service","getRobotsInInstance"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service getRobotsInInstance should return robots in correct order","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return robots in correct order"},{"ancestorTitles":["League Instance Service","moveRobotToInstance"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n  21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  22 \n  23 // Clean up test data\n→ 24 await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n  32 \n  33 afterEach(async () => {\n  34   // Clean up after each test - delete all test data\n→ 35   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:5)"],"fullName":"League Instance Service moveRobotToInstance should move robot to appropriate instance in new tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should move robot to appropriate instance in new tier"}],"endTime":1771861040179,"message":"  ● League Instance Service › getInstancesForTier › should return empty array for tier with no robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › getInstancesForTier › should return empty array for tier with no robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › getInstancesForTier › should return instances sorted by instance number\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › getInstancesForTier › should return instances sorted by instance number\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › getInstancesForTier › should exclude bye-robot from instance counts\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › getInstancesForTier › should exclude bye-robot from instance counts\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › getLeagueInstanceStats › should calculate correct statistics\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › getLeagueInstanceStats › should calculate correct statistics\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › getLeagueInstanceStats › should detect when rebalancing is needed\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › getLeagueInstanceStats › should detect when rebalancing is needed\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › getLeagueInstanceStats › should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › getLeagueInstanceStats › should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › assignLeagueInstance › should create first instance when none exist\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › assignLeagueInstance › should create first instance when none exist\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › assignLeagueInstance › should assign to instance with most free spots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › assignLeagueInstance › should assign to instance with most free spots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › assignLeagueInstance › should create new instance when all are full\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › assignLeagueInstance › should create new instance when all are full\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › rebalanceInstances › should not rebalance when instances are balanced\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › rebalanceInstances › should not rebalance when instances are balanced\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › rebalanceInstances › should rebalance when imbalance exceeds threshold\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › rebalanceInstances › should rebalance when imbalance exceeds threshold\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › getRobotsInInstance › should return robots in correct order\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › getRobotsInInstance › should return robots in correct order\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n\n  ● League Instance Service › moveRobotToInstance › should move robot to appropriate instance in new tier\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:24:33\n\n      21 testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n      22 \n      23 // Clean up test data\n    → 24 await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |     \n      23 |     // Clean up test data\n    > 24 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      25 |     await prisma.battle.deleteMany({});\n      26 |     await prisma.robot.deleteMany({});\n      27 |     await prisma.weaponInventory.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:24:5)\n\n  ● League Instance Service › moveRobotToInstance › should move robot to appropriate instance in new tier\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:35:33\n\n      32 \n      33 afterEach(async () => {\n      34   // Clean up after each test - delete all test data\n    → 35   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      33 |   afterEach(async () => {\n      34 |     // Clean up after each test - delete all test data\n    > 35 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      36 |     await prisma.battleParticipant.deleteMany({});\n      37 |     await prisma.battle.deleteMany({});\n      38 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueInstanceService.test.ts:35:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts","startTime":1771861040060,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["QueryService","queryEvents"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should query events by cycle number","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should query events by cycle number"},{"ancestorTitles":["QueryService","queryEvents"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should query events by cycle range","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should query events by cycle range"},{"ancestorTitles":["QueryService","queryEvents"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should query events by user ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should query events by user ID"},{"ancestorTitles":["QueryService","queryEvents"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should query events by robot ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should query events by robot ID"},{"ancestorTitles":["QueryService","queryEvents"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should query events by event type","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should query events by event type"},{"ancestorTitles":["QueryService","queryEvents"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should query events by multiple event types","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should query events by multiple event types"},{"ancestorTitles":["QueryService","queryEvents"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should support pagination with limit and offset","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support pagination with limit and offset"},{"ancestorTitles":["QueryService","queryEvents"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should support sorting by timestamp","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support sorting by timestamp"},{"ancestorTitles":["QueryService","queryEvents"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService queryEvents should combine multiple filters","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should combine multiple filters"},{"ancestorTitles":["QueryService","getEventsByCycle"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService getEventsByCycle should get all events for a specific cycle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get all events for a specific cycle"},{"ancestorTitles":["QueryService","getEventsByUser"],"duration":9,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService getEventsByUser should get all events for a specific user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get all events for a specific user"},{"ancestorTitles":["QueryService","getEventsByUser"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService getEventsByUser should get user events within cycle range","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get user events within cycle range"},{"ancestorTitles":["QueryService","getEventsByRobot"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService getEventsByRobot should get all events for a specific robot","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get all events for a specific robot"},{"ancestorTitles":["QueryService","getEventsByType"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService getEventsByType should get events by type","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get events by type"},{"ancestorTitles":["QueryService","getPaginatedEvents"],"duration":3,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService getPaginatedEvents should paginate events correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should paginate events correctly"},{"ancestorTitles":["QueryService","getEventStatistics"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService getEventStatistics should calculate event statistics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate event statistics"},{"ancestorTitles":["QueryService","getRecentEvents"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService getRecentEvents should get most recent events","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get most recent events"},{"ancestorTitles":["QueryService","countEvents"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n  11 \n  12 beforeEach(async () => {\n  13   // Clean up test data\n→ 14   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:5)"],"fullName":"QueryService countEvents should count events matching filters","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should count events matching filters"}],"endTime":1771861040333,"message":"  ● QueryService › queryEvents › should query events by cycle number\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › queryEvents › should query events by cycle range\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › queryEvents › should query events by user ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › queryEvents › should query events by robot ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › queryEvents › should query events by event type\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › queryEvents › should query events by multiple event types\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › queryEvents › should support pagination with limit and offset\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › queryEvents › should support sorting by timestamp\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › queryEvents › should combine multiple filters\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › getEventsByCycle › should get all events for a specific cycle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › getEventsByUser › should get all events for a specific user\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › getEventsByUser › should get user events within cycle range\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › getEventsByRobot › should get all events for a specific robot\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › getEventsByType › should get events by type\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › getPaginatedEvents › should paginate events correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › getEventStatistics › should calculate event statistics\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › getRecentEvents › should get most recent events\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n\n  ● QueryService › countEvents › should count events matching filters\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27\n\n      11 \n      12 beforeEach(async () => {\n      13   // Clean up test data\n    → 14   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      12 |   beforeEach(async () => {\n      13 |     // Clean up test data\n    > 14 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      15 |     testCycleNumbers = [];\n      16 |   });\n      17 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/queryService.test.ts:14:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts","startTime":1771861040182,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Validation Service - Unit Tests","Profanity Filter"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Profanity Filter should detect profanity in stable names","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should detect profanity in stable names"},{"ancestorTitles":["Validation Service - Unit Tests","Profanity Filter"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Profanity Filter should not flag clean names as profane","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should not flag clean names as profane"},{"ancestorTitles":["Validation Service - Unit Tests","Profanity Filter"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Profanity Filter should be case-insensitive","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should be case-insensitive"},{"ancestorTitles":["Validation Service - Unit Tests","Profanity Filter"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Profanity Filter should detect profanity within words","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should detect profanity within words"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Validation - Boundary Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Stable Name Validation - Boundary Conditions should accept stable name with exactly 3 characters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept stable name with exactly 3 characters"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Validation - Boundary Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Stable Name Validation - Boundary Conditions should accept stable name with exactly 30 characters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept stable name with exactly 30 characters"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Validation - Boundary Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Stable Name Validation - Boundary Conditions should reject stable name with 2 characters (just below minimum)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject stable name with 2 characters (just below minimum)"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Validation - Boundary Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Stable Name Validation - Boundary Conditions should reject stable name with 31 characters (just above maximum)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject stable name with 31 characters (just above maximum)"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Validation - Boundary Conditions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Stable Name Validation - Boundary Conditions should accept stable name with valid special characters","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"should accept stable name with valid special characters"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Validation - Boundary Conditions"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Stable Name Validation - Boundary Conditions should reject stable name with invalid special characters","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"should reject stable name with invalid special characters"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Uniqueness Check"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/validation.test.ts:137:7)"],"fullName":"Validation Service - Unit Tests Stable Name Uniqueness Check should return false when stable name is already taken by another user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return false when stable name is already taken by another user"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Uniqueness Check"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/validation.test.ts:137:7)"],"fullName":"Validation Service - Unit Tests Stable Name Uniqueness Check should return true when stable name is not taken","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return true when stable name is not taken"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Uniqueness Check"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/validation.test.ts:137:7)"],"fullName":"Validation Service - Unit Tests Stable Name Uniqueness Check should return true when stable name is owned by the current user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return true when stable name is owned by the current user"},{"ancestorTitles":["Validation Service - Unit Tests","Stable Name Uniqueness Check"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/validation.test.ts:137:7)"],"fullName":"Validation Service - Unit Tests Stable Name Uniqueness Check should be case-sensitive for uniqueness","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should be case-sensitive for uniqueness"},{"ancestorTitles":["Validation Service - Unit Tests","Password Validation - Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Password Validation - Edge Cases should accept password with exactly 8 characters meeting all requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept password with exactly 8 characters meeting all requirements"},{"ancestorTitles":["Validation Service - Unit Tests","Password Validation - Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Password Validation - Edge Cases should reject password with 7 characters (just below minimum)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject password with 7 characters (just below minimum)"},{"ancestorTitles":["Validation Service - Unit Tests","Password Validation - Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Password Validation - Edge Cases should accept very long password meeting all requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept very long password meeting all requirements"},{"ancestorTitles":["Validation Service - Unit Tests","Password Validation - Edge Cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Password Validation - Edge Cases should reject password with only one missing requirement at a time","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should reject password with only one missing requirement at a time"},{"ancestorTitles":["Validation Service - Unit Tests","Password Validation - Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Password Validation - Edge Cases should accept password with special characters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept password with special characters"},{"ancestorTitles":["Validation Service - Unit Tests","Password Validation - Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Unit Tests Password Validation - Edge Cases should accept password with multiple uppercase, lowercase, and numbers","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should accept password with multiple uppercase, lowercase, and numbers"}],"endTime":1771861040382,"message":"  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return false when stable name is already taken by another user\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      135 |\n      136 |     beforeAll(async () => {\n    > 137 |       await prisma.$connect();\n          |       ^\n      138 |     });\n      139 |\n      140 |     afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/validation.test.ts:137:7)\n\n  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return true when stable name is not taken\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      135 |\n      136 |     beforeAll(async () => {\n    > 137 |       await prisma.$connect();\n          |       ^\n      138 |     });\n      139 |\n      140 |     afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/validation.test.ts:137:7)\n\n  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return true when stable name is owned by the current user\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      135 |\n      136 |     beforeAll(async () => {\n    > 137 |       await prisma.$connect();\n          |       ^\n      138 |     });\n      139 |\n      140 |     afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/validation.test.ts:137:7)\n\n  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should be case-sensitive for uniqueness\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      135 |\n      136 |     beforeAll(async () => {\n    > 137 |       await prisma.$connect();\n          |       ^\n      138 |     });\n      139 |\n      140 |     afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/validation.test.ts:137:7)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/validation.test.ts","startTime":1771861040335,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team League Instance - Property Tests","Property 21: League Instance Capacity"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create a test stable\n→ 24   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n  60 afterEach(async () => {\n  61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n  62   // This ensures we start fresh even if previous tests failed\n→ 63   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:5)"],"fullName":"Tag Team League Instance - Property Tests Property 21: League Instance Capacity no instance ever exceeds maximum capacity of 50 teams","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"no instance ever exceeds maximum capacity of 50 teams"},{"ancestorTitles":["Tag Team League Instance - Property Tests","Property 21: League Instance Capacity"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create a test stable\n→ 24   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n  60 afterEach(async () => {\n  61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n  62   // This ensures we start fresh even if previous tests failed\n→ 63   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:5)"],"fullName":"Tag Team League Instance - Property Tests Property 21: League Instance Capacity new instance is created when 51st team would be added","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"new instance is created when 51st team would be added"},{"ancestorTitles":["Tag Team League Instance - Property Tests","Property 21: League Instance Capacity"],"duration":9,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create a test stable\n→ 24   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n  60 afterEach(async () => {\n  61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n  62   // This ensures we start fresh even if previous tests failed\n→ 63   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:5)"],"fullName":"Tag Team League Instance - Property Tests Property 21: League Instance Capacity instance assignment distributes teams correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"instance assignment distributes teams correctly"},{"ancestorTitles":["Tag Team League Instance - Property Tests","Property 21: League Instance Capacity"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create a test stable\n→ 24   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n  60 afterEach(async () => {\n  61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n  62   // This ensures we start fresh even if previous tests failed\n→ 63   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:5)"],"fullName":"Tag Team League Instance - Property Tests Property 21: League Instance Capacity instance capacity is enforced across all league tiers","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"instance capacity is enforced across all league tiers"},{"ancestorTitles":["Tag Team League Instance - Property Tests","Property 21: League Instance Capacity"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create a test stable\n→ 24   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n  60 afterEach(async () => {\n  61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n  62   // This ensures we start fresh even if previous tests failed\n→ 63   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:5)"],"fullName":"Tag Team League Instance - Property Tests Property 21: League Instance Capacity assignTagTeamLeagueInstance never returns a full instance","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"assignTagTeamLeagueInstance never returns a full instance"},{"ancestorTitles":["Tag Team League Instance - Property Tests","Property 21: League Instance Capacity"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create a test stable\n→ 24   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n  60 afterEach(async () => {\n  61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n  62   // This ensures we start fresh even if previous tests failed\n→ 63   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:5)"],"fullName":"Tag Team League Instance - Property Tests Property 21: League Instance Capacity instance numbers are sequential and start at 1","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"instance numbers are sequential and start at 1"},{"ancestorTitles":["Tag Team League Instance - Property Tests","Property 21: League Instance Capacity"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create a test stable\n→ 24   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n  60 afterEach(async () => {\n  61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n  62   // This ensures we start fresh even if previous tests failed\n→ 63   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:5)"],"fullName":"Tag Team League Instance - Property Tests Property 21: League Instance Capacity capacity enforcement works with concurrent team creation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"capacity enforcement works with concurrent team creation"}],"endTime":1771861040491,"message":"  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › no instance ever exceeds maximum capacity of 50 teams\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create a test stable\n    → 24   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create a test stable\n    > 24 |     const stable = await prisma.user.create({\n         |                    ^\n      25 |       data: {\n      26 |         username: `pbt_instance_${Date.now()}`,\n      27 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:24:20)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › no instance ever exceeds maximum capacity of 50 teams\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n      60 afterEach(async () => {\n      61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62   // This ensures we start fresh even if previous tests failed\n    → 63   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      61 |     // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62 |     // This ensures we start fresh even if previous tests failed\n    > 63 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      64 |       where: { stableId: testStableId },\n      65 |     });\n      66 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:63:5)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › new instance is created when 51st team would be added\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create a test stable\n    → 24   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create a test stable\n    > 24 |     const stable = await prisma.user.create({\n         |                    ^\n      25 |       data: {\n      26 |         username: `pbt_instance_${Date.now()}`,\n      27 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:24:20)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › new instance is created when 51st team would be added\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n      60 afterEach(async () => {\n      61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62   // This ensures we start fresh even if previous tests failed\n    → 63   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      61 |     // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62 |     // This ensures we start fresh even if previous tests failed\n    > 63 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      64 |       where: { stableId: testStableId },\n      65 |     });\n      66 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:63:5)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance assignment distributes teams correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create a test stable\n    → 24   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create a test stable\n    > 24 |     const stable = await prisma.user.create({\n         |                    ^\n      25 |       data: {\n      26 |         username: `pbt_instance_${Date.now()}`,\n      27 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:24:20)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance assignment distributes teams correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n      60 afterEach(async () => {\n      61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62   // This ensures we start fresh even if previous tests failed\n    → 63   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      61 |     // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62 |     // This ensures we start fresh even if previous tests failed\n    > 63 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      64 |       where: { stableId: testStableId },\n      65 |     });\n      66 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:63:5)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance capacity is enforced across all league tiers\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create a test stable\n    → 24   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create a test stable\n    > 24 |     const stable = await prisma.user.create({\n         |                    ^\n      25 |       data: {\n      26 |         username: `pbt_instance_${Date.now()}`,\n      27 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:24:20)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance capacity is enforced across all league tiers\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n      60 afterEach(async () => {\n      61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62   // This ensures we start fresh even if previous tests failed\n    → 63   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      61 |     // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62 |     // This ensures we start fresh even if previous tests failed\n    > 63 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      64 |       where: { stableId: testStableId },\n      65 |     });\n      66 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:63:5)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › assignTagTeamLeagueInstance never returns a full instance\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create a test stable\n    → 24   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create a test stable\n    > 24 |     const stable = await prisma.user.create({\n         |                    ^\n      25 |       data: {\n      26 |         username: `pbt_instance_${Date.now()}`,\n      27 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:24:20)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › assignTagTeamLeagueInstance never returns a full instance\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n      60 afterEach(async () => {\n      61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62   // This ensures we start fresh even if previous tests failed\n    → 63   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      61 |     // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62 |     // This ensures we start fresh even if previous tests failed\n    > 63 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      64 |       where: { stableId: testStableId },\n      65 |     });\n      66 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:63:5)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance numbers are sequential and start at 1\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create a test stable\n    → 24   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create a test stable\n    > 24 |     const stable = await prisma.user.create({\n         |                    ^\n      25 |       data: {\n      26 |         username: `pbt_instance_${Date.now()}`,\n      27 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:24:20)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance numbers are sequential and start at 1\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n      60 afterEach(async () => {\n      61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62   // This ensures we start fresh even if previous tests failed\n    → 63   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      61 |     // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62 |     // This ensures we start fresh even if previous tests failed\n    > 63 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      64 |       where: { stableId: testStableId },\n      65 |     });\n      66 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:63:5)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › capacity enforcement works with concurrent team creation\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:24:38\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create a test stable\n    → 24   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create a test stable\n    > 24 |     const stable = await prisma.user.create({\n         |                    ^\n      25 |       data: {\n      26 |         username: `pbt_instance_${Date.now()}`,\n      27 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:24:20)\n\n  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › capacity enforcement works with concurrent team creation\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:63:26\n\n      60 afterEach(async () => {\n      61   // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62   // This ensures we start fresh even if previous tests failed\n    → 63   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      61 |     // Clean up ALL teams and robots for this test stable (not just tracked ones)\n      62 |     // This ensures we start fresh even if previous tests failed\n    > 63 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      64 |       where: { stableId: testStableId },\n      65 |     });\n      66 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:63:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts","startTime":1771861040385,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Robot Name Uniqueness","POST /api/robots - Duplicate name validation"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:31:5)","TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:119:28)\n    at Promise.then.completed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:254:5)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Robot Name Uniqueness POST /api/robots - Duplicate name validation should successfully create a robot with a unique name","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should successfully create a robot with a unique name"},{"ancestorTitles":["Robot Name Uniqueness","POST /api/robots - Duplicate name validation"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:31:5)","TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:119:28)\n    at Promise.then.completed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:254:5)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Robot Name Uniqueness POST /api/robots - Duplicate name validation should reject creating a robot with a duplicate name for the same user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject creating a robot with a duplicate name for the same user"},{"ancestorTitles":["Robot Name Uniqueness","POST /api/robots - Duplicate name validation"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:31:5)","TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:119:28)\n    at Promise.then.completed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:254:5)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Robot Name Uniqueness POST /api/robots - Duplicate name validation should allow different users to create robots with the same name","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow different users to create robots with the same name"},{"ancestorTitles":["Robot Name Uniqueness","POST /api/robots - Duplicate name validation"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:31:5)","TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:119:28)\n    at Promise.then.completed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:254:5)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Robot Name Uniqueness POST /api/robots - Duplicate name validation should handle case-sensitive name validation correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle case-sensitive name validation correctly"},{"ancestorTitles":["Robot Name Uniqueness","POST /api/robots - Name validation"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:31:5)"],"fullName":"Robot Name Uniqueness POST /api/robots - Name validation should reject empty robot names","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject empty robot names"},{"ancestorTitles":["Robot Name Uniqueness","POST /api/robots - Name validation"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:31:5)"],"fullName":"Robot Name Uniqueness POST /api/robots - Name validation should reject robot names longer than 50 characters","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject robot names longer than 50 characters"},{"ancestorTitles":["Robot Name Uniqueness","POST /api/robots - Name validation"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts:31:5)"],"fullName":"Robot Name Uniqueness POST /api/robots - Name validation should accept robot names at the 50 character boundary","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept robot names at the 50 character boundary"}],"endTime":1771861040565,"message":"  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should successfully create a robot with a unique name\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      29 |\n      30 |   beforeAll(async () => {\n    > 31 |     await prisma.$connect();\n         |     ^\n      32 |     \n      33 |     // Create a test user with sufficient currency for robot creation\n      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)\n\n  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should successfully create a robot with a unique name\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      117 |       const robots = await prisma.robot.findMany({\n      118 |         where: {\n    > 119 |           userId: testUser.id,\n          |                            ^\n      120 |           name: robotName,\n      121 |         },\n      122 |       });\n\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)\n\n  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should reject creating a robot with a duplicate name for the same user\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      29 |\n      30 |   beforeAll(async () => {\n    > 31 |     await prisma.$connect();\n         |     ^\n      32 |     \n      33 |     // Create a test user with sufficient currency for robot creation\n      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)\n\n  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should reject creating a robot with a duplicate name for the same user\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      117 |       const robots = await prisma.robot.findMany({\n      118 |         where: {\n    > 119 |           userId: testUser.id,\n          |                            ^\n      120 |           name: robotName,\n      121 |         },\n      122 |       });\n\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)\n\n  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should allow different users to create robots with the same name\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      29 |\n      30 |   beforeAll(async () => {\n    > 31 |     await prisma.$connect();\n         |     ^\n      32 |     \n      33 |     // Create a test user with sufficient currency for robot creation\n      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)\n\n  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should allow different users to create robots with the same name\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      117 |       const robots = await prisma.robot.findMany({\n      118 |         where: {\n    > 119 |           userId: testUser.id,\n          |                            ^\n      120 |           name: robotName,\n      121 |         },\n      122 |       });\n\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)\n\n  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should handle case-sensitive name validation correctly\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      29 |\n      30 |   beforeAll(async () => {\n    > 31 |     await prisma.$connect();\n         |     ^\n      32 |     \n      33 |     // Create a test user with sufficient currency for robot creation\n      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)\n\n  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should handle case-sensitive name validation correctly\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\n      117 |       const robots = await prisma.robot.findMany({\n      118 |         where: {\n    > 119 |           userId: testUser.id,\n          |                            ^\n      120 |           name: robotName,\n      121 |         },\n      122 |       });\n\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)\n\n  ● Robot Name Uniqueness › POST /api/robots - Name validation › should reject empty robot names\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      29 |\n      30 |   beforeAll(async () => {\n    > 31 |     await prisma.$connect();\n         |     ^\n      32 |     \n      33 |     // Create a test user with sufficient currency for robot creation\n      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)\n\n  ● Robot Name Uniqueness › POST /api/robots - Name validation › should reject robot names longer than 50 characters\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      29 |\n      30 |   beforeAll(async () => {\n    > 31 |     await prisma.$connect();\n         |     ^\n      32 |     \n      33 |     // Create a test user with sufficient currency for robot creation\n      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)\n\n  ● Robot Name Uniqueness › POST /api/robots - Name validation › should accept robot names at the 50 character boundary\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      29 |\n      30 |   beforeAll(async () => {\n    > 31 |     await prisma.$connect();\n         |     ^\n      32 |     \n      33 |     // Create a test user with sufficient currency for robot creation\n      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotNameUniqueness.test.ts","startTime":1771861040494,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Bronze League Rebalancing - Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/bronzeLeagueRebalancing.test.ts:24:5)"],"fullName":"Bronze League Rebalancing - Integration Test should correctly rebalance 331 robots from single bronze instance into multiple instances","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should correctly rebalance 331 robots from single bronze instance into multiple instances"},{"ancestorTitles":["Bronze League Rebalancing - Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/bronzeLeagueRebalancing.test.ts:24:5)"],"fullName":"Bronze League Rebalancing - Integration Test should handle the scenario progressively over multiple cycles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle the scenario progressively over multiple cycles"}],"endTime":1771861040603,"message":"  ● Bronze League Rebalancing - Integration Test › should correctly rebalance 331 robots from single bronze instance into multiple instances\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n    > 24 |     await prisma.$connect();\n         |     ^\n      25 |   });\n      26 |\n      27 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:24:5)\n\n  ● Bronze League Rebalancing - Integration Test › should handle the scenario progressively over multiple cycles\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     testTimestamp = `${Date.now()}_${Math.random().toString(36).substring(7)}`;\n    > 24 |     await prisma.$connect();\n         |     ^\n      25 |   });\n      26 |\n      27 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:24:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/bronzeLeagueRebalancing.test.ts","startTime":1771861040567,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["EventLogger Service","Single Event Logging"],"duration":27,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:38:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Single Event Logging should log a single event with correct sequence number","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log a single event with correct sequence number"},{"ancestorTitles":["EventLogger Service","Single Event Logging"],"duration":15,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:51:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Single Event Logging should increment sequence numbers correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should increment sequence numbers correctly"},{"ancestorTitles":["EventLogger Service","Single Event Logging"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:70:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Single Event Logging should store userId and robotId when provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should store userId and robotId when provided"},{"ancestorTitles":["EventLogger Service","Single Event Logging"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:94:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Single Event Logging should store metadata when provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should store metadata when provided"},{"ancestorTitles":["EventLogger Service","Single Event Logging"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Single Event Logging should throw error for invalid payload","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should throw error for invalid payload"},{"ancestorTitles":["EventLogger Service","Batch Event Logging"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEventBatch (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:236:30)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:127:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Batch Event Logging should log multiple events in a batch","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log multiple events in a batch"},{"ancestorTitles":["EventLogger Service","Batch Event Logging"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:145:44\n\n  142 \n  143 await eventLogger.logEventBatch(testCycleNumber, []);\n  144 \n→ 145 const events = await prisma.auditLog.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:145:22)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Batch Event Logging should handle empty batch gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle empty batch gracefully"},{"ancestorTitles":["EventLogger Service","Batch Event Logging"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:164:50\n\n  161 ).rejects.toThrow('Invalid payload');\n  162 \n  163 // Verify no events were inserted\n→ 164 const storedEvents = await prisma.auditLog.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:164:28)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Batch Event Logging should validate all payloads before inserting","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should validate all payloads before inserting"},{"ancestorTitles":["EventLogger Service","Cycle Event Helpers"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logCycleStart (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:271:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:175:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Cycle Event Helpers should log cycle start event","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log cycle start event"},{"ancestorTitles":["EventLogger Service","Cycle Event Helpers"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:189:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Cycle Event Helpers should log cycle step complete event","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log cycle step complete event"},{"ancestorTitles":["EventLogger Service","Cycle Event Helpers"],"duration":16,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logCycleStart (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:271:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:214:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Cycle Event Helpers should log cycle complete event and clear cache","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log cycle complete event and clear cache"},{"ancestorTitles":["EventLogger Service","Facility Event Helpers"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:235:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Facility Event Helpers should log facility purchase","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log facility purchase"},{"ancestorTitles":["EventLogger Service","Facility Event Helpers"],"duration":19,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logFacilityTransaction (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:325:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:264:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Facility Event Helpers should log facility upgrade","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log facility upgrade"},{"ancestorTitles":["EventLogger Service","Economic Event Helpers"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logPassiveIncome (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:354:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:295:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Economic Event Helpers should log passive income","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log passive income"},{"ancestorTitles":["EventLogger Service","Economic Event Helpers"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logOperatingCosts (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:379:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:331:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Economic Event Helpers should log operating costs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log operating costs"},{"ancestorTitles":["EventLogger Service","Economic Event Helpers"],"duration":9,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logCreditChange (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:401:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:349:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Economic Event Helpers should log credit change","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log credit change"},{"ancestorTitles":["EventLogger Service","Economic Event Helpers"],"duration":13,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logPrestigeChange (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:424:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:376:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Economic Event Helpers should log prestige change","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log prestige change"},{"ancestorTitles":["EventLogger Service","Weapon Event Helpers"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logWeaponPurchase (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:445:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:403:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Weapon Event Helpers should log weapon purchase","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log weapon purchase"},{"ancestorTitles":["EventLogger Service","Weapon Event Helpers"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logWeaponSale (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:465:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:421:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Weapon Event Helpers should log weapon sale","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log weapon sale"},{"ancestorTitles":["EventLogger Service","Robot Event Helpers"],"duration":14,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at EventLogger.logAttributeUpgrade (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:488:5)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:441:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Robot Event Helpers should log attribute upgrade","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log attribute upgrade"},{"ancestorTitles":["EventLogger Service","Sequence Number Management"],"duration":14,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.findFirst()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n  119 }\n  120 \n  121 // Query database for the highest sequence number in this cycle\n→ 122 const lastEvent = await prisma.auditLog.findFirst(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at getNextSequenceNumber (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:23)\n    at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:181:28)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:468:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Sequence Number Management should maintain separate sequence numbers per cycle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should maintain separate sequence numbers per cycle"},{"ancestorTitles":["EventLogger Service","Sequence Number Management"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:494:29\n\n  491 \n  492 it('should resume sequence numbers from database on restart', async () => {\n  493   // Simulate existing events in database\n→ 494   await prisma.auditLog.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:494:7)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up audit logs for this test's cycle number\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:5)"],"fullName":"EventLogger Service Sequence Number Management should resume sequence numbers from database on restart","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should resume sequence numbers from database on restart"}],"endTime":1771861040925,"message":"  ● EventLogger Service › Single Event Logging › should log a single event with correct sequence number\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at Object.<anonymous> (tests/eventLogger.test.ts:38:7)\n\n  ● EventLogger Service › Single Event Logging › should log a single event with correct sequence number\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Single Event Logging › should increment sequence numbers correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at Object.<anonymous> (tests/eventLogger.test.ts:51:7)\n\n  ● EventLogger Service › Single Event Logging › should increment sequence numbers correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Single Event Logging › should store userId and robotId when provided\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at Object.<anonymous> (tests/eventLogger.test.ts:70:7)\n\n  ● EventLogger Service › Single Event Logging › should store userId and robotId when provided\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Single Event Logging › should store metadata when provided\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at Object.<anonymous> (tests/eventLogger.test.ts:94:7)\n\n  ● EventLogger Service › Single Event Logging › should store metadata when provided\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Single Event Logging › should throw error for invalid payload\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Batch Event Logging › should log multiple events in a batch\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEventBatch (src/services/eventLogger.ts:236:30)\n      at Object.<anonymous> (tests/eventLogger.test.ts:127:7)\n\n  ● EventLogger Service › Batch Event Logging › should log multiple events in a batch\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Batch Event Logging › should handle empty batch gracefully\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:145:44\n\n      142 \n      143 await eventLogger.logEventBatch(testCycleNumber, []);\n      144 \n    → 145 const events = await prisma.auditLog.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      143 |       await eventLogger.logEventBatch(testCycleNumber, []);\n      144 |\n    > 145 |       const events = await prisma.auditLog.findMany({\n          |                      ^\n      146 |         where: { cycleNumber: testCycleNumber },\n      147 |       });\n      148 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:145:22)\n\n  ● EventLogger Service › Batch Event Logging › should handle empty batch gracefully\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Batch Event Logging › should validate all payloads before inserting\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:164:50\n\n      161 ).rejects.toThrow('Invalid payload');\n      162 \n      163 // Verify no events were inserted\n    → 164 const storedEvents = await prisma.auditLog.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      162 |\n      163 |       // Verify no events were inserted\n    > 164 |       const storedEvents = await prisma.auditLog.findMany({\n          |                            ^\n      165 |         where: { cycleNumber: testCycleNumber },\n      166 |       });\n      167 |       expect(storedEvents).toHaveLength(0);\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:164:28)\n\n  ● EventLogger Service › Batch Event Logging › should validate all payloads before inserting\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Cycle Event Helpers › should log cycle start event\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:175:7)\n\n  ● EventLogger Service › Cycle Event Helpers › should log cycle start event\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Cycle Event Helpers › should log cycle step complete event\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:189:7)\n\n  ● EventLogger Service › Cycle Event Helpers › should log cycle step complete event\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Cycle Event Helpers › should log cycle complete event and clear cache\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:214:7)\n\n  ● EventLogger Service › Cycle Event Helpers › should log cycle complete event and clear cache\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Facility Event Helpers › should log facility purchase\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:235:7)\n\n  ● EventLogger Service › Facility Event Helpers › should log facility purchase\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Facility Event Helpers › should log facility upgrade\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:264:7)\n\n  ● EventLogger Service › Facility Event Helpers › should log facility upgrade\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Economic Event Helpers › should log passive income\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logPassiveIncome (src/services/eventLogger.ts:354:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:295:7)\n\n  ● EventLogger Service › Economic Event Helpers › should log passive income\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Economic Event Helpers › should log operating costs\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logOperatingCosts (src/services/eventLogger.ts:379:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:331:7)\n\n  ● EventLogger Service › Economic Event Helpers › should log operating costs\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Economic Event Helpers › should log credit change\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logCreditChange (src/services/eventLogger.ts:401:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:349:7)\n\n  ● EventLogger Service › Economic Event Helpers › should log credit change\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Economic Event Helpers › should log prestige change\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logPrestigeChange (src/services/eventLogger.ts:424:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:376:7)\n\n  ● EventLogger Service › Economic Event Helpers › should log prestige change\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Weapon Event Helpers › should log weapon purchase\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logWeaponPurchase (src/services/eventLogger.ts:445:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:403:7)\n\n  ● EventLogger Service › Weapon Event Helpers › should log weapon purchase\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Weapon Event Helpers › should log weapon sale\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logWeaponSale (src/services/eventLogger.ts:465:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:421:7)\n\n  ● EventLogger Service › Weapon Event Helpers › should log weapon sale\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Robot Event Helpers › should log attribute upgrade\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at EventLogger.logAttributeUpgrade (src/services/eventLogger.ts:488:5)\n      at Object.<anonymous> (tests/eventLogger.test.ts:441:7)\n\n  ● EventLogger Service › Robot Event Helpers › should log attribute upgrade\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Sequence Number Management › should maintain separate sequence numbers per cycle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.findFirst()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45\n\n      119 }\n      120 \n      121 // Query database for the highest sequence number in this cycle\n    → 122 const lastEvent = await prisma.auditLog.findFirst(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      120 |     \n      121 |     // Query database for the highest sequence number in this cycle\n    > 122 |     const lastEvent = await prisma.auditLog.findFirst({\n          |                       ^\n      123 |       where: { cycleNumber },\n      124 |       orderBy: { sequenceNumber: 'desc' },\n      125 |       select: { sequenceNumber: true },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)\n      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)\n      at Object.<anonymous> (tests/eventLogger.test.ts:468:7)\n\n  ● EventLogger Service › Sequence Number Management › should maintain separate sequence numbers per cycle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n\n  ● EventLogger Service › Sequence Number Management › should resume sequence numbers from database on restart\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:494:29\n\n      491 \n      492 it('should resume sequence numbers from database on restart', async () => {\n      493   // Simulate existing events in database\n    → 494   await prisma.auditLog.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      492 |     it('should resume sequence numbers from database on restart', async () => {\n      493 |       // Simulate existing events in database\n    > 494 |       await prisma.auditLog.create({\n          |       ^\n      495 |         data: {\n      496 |           cycleNumber: testCycleNumber,\n      497 |           eventType: EventType.CYCLE_START,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:494:7)\n\n  ● EventLogger Service › Sequence Number Management › should resume sequence numbers from database on restart\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up audit logs for this test's cycle number\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up audit logs for this test's cycle number\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: { cycleNumber: testCycleNumber },\n      25 |     });\n      26 |     // Clear sequence cache\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts","startTime":1771861040605,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team Auto-Repair Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamAutoRepair.test.ts:27:5)"],"fullName":"Tag Team Auto-Repair Integration Test should auto-repair damaged robots before battle and deduct costs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should auto-repair damaged robots before battle and deduct costs"},{"ancestorTitles":["Tag Team Auto-Repair Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamAutoRepair.test.ts:27:5)"],"fullName":"Tag Team Auto-Repair Integration Test should allow users to go into negative currency for repairs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow users to go into negative currency for repairs"}],"endTime":1771861040966,"message":"  ● Tag Team Auto-Repair Integration Test › should auto-repair damaged robots before battle and deduct costs\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Get a weapon for robots\n      30 |     weapon = await prisma.weapon.findFirst();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:27:5)\n\n  ● Tag Team Auto-Repair Integration Test › should allow users to go into negative currency for repairs\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Get a weapon for robots\n      30 |     weapon = await prisma.weapon.findFirst();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:27:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamAutoRepair.test.ts","startTime":1771861040928,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["League Rebalancing Service","determinePromotions"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service determinePromotions should return top 10% of robots with ≥5 cycles AND ≥25 league points","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return top 10% of robots with ≥5 cycles AND ≥25 league points"},{"ancestorTitles":["League Rebalancing Service","determinePromotions"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service determinePromotions should skip robots with <5 cycles in current league","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should skip robots with <5 cycles in current league"},{"ancestorTitles":["League Rebalancing Service","determinePromotions"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service determinePromotions should return empty array for champion tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array for champion tier"},{"ancestorTitles":["League Rebalancing Service","determinePromotions"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service determinePromotions should return empty array when no robots have ≥25 league points","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when no robots have ≥25 league points"},{"ancestorTitles":["League Rebalancing Service","determinePromotions"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service determinePromotions should return empty array when too few robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array when too few robots"},{"ancestorTitles":["League Rebalancing Service","determineDemotions"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service determineDemotions should return bottom 10% of robots with ≥5 cycles in current league","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return bottom 10% of robots with ≥5 cycles in current league"},{"ancestorTitles":["League Rebalancing Service","determineDemotions"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service determineDemotions should return empty array for bronze tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array for bronze tier"},{"ancestorTitles":["League Rebalancing Service","promoteRobot"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service promoteRobot should move robot to next tier and reset league points and cycles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should move robot to next tier and reset league points and cycles"},{"ancestorTitles":["League Rebalancing Service","promoteRobot"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service promoteRobot should throw error when trying to promote from champion","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error when trying to promote from champion"},{"ancestorTitles":["League Rebalancing Service","demoteRobot"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service demoteRobot should move robot to previous tier and reset league points","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should move robot to previous tier and reset league points"},{"ancestorTitles":["League Rebalancing Service","demoteRobot"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service demoteRobot should throw error when trying to demote from bronze","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error when trying to demote from bronze"},{"ancestorTitles":["League Rebalancing Service","rebalanceLeagues"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service rebalanceLeagues should process all tiers and return summary","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should process all tiers and return summary"},{"ancestorTitles":["League Rebalancing Service","rebalanceLeagues"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up in correct order\n→ 18   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n  52 afterEach(async () => {\n  53   // Clean up after each test to prevent pollution\n  54   // Only delete robots and their dependencies, keep testUser and practiceSword\n→ 55   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:5)"],"fullName":"League Rebalancing Service rebalanceLeagues should not promote or demote robots multiple times in same cycle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not promote or demote robots multiple times in same cycle"}],"endTime":1771861041097,"message":"  ● League Rebalancing Service › determinePromotions › should return top 10% of robots with ≥5 cycles AND ≥25 league points\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › determinePromotions › should return top 10% of robots with ≥5 cycles AND ≥25 league points\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › determinePromotions › should skip robots with <5 cycles in current league\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › determinePromotions › should skip robots with <5 cycles in current league\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › determinePromotions › should return empty array for champion tier\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › determinePromotions › should return empty array for champion tier\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › determinePromotions › should return empty array when no robots have ≥25 league points\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › determinePromotions › should return empty array when no robots have ≥25 league points\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › determinePromotions › should return empty array when too few robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › determinePromotions › should return empty array when too few robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › determineDemotions › should return bottom 10% of robots with ≥5 cycles in current league\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › determineDemotions › should return bottom 10% of robots with ≥5 cycles in current league\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › determineDemotions › should return empty array for bronze tier\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › determineDemotions › should return empty array for bronze tier\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › promoteRobot › should move robot to next tier and reset league points and cycles\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › promoteRobot › should move robot to next tier and reset league points and cycles\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › promoteRobot › should throw error when trying to promote from champion\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › promoteRobot › should throw error when trying to promote from champion\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › demoteRobot › should move robot to previous tier and reset league points\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › demoteRobot › should move robot to previous tier and reset league points\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › demoteRobot › should throw error when trying to demote from bronze\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › demoteRobot › should throw error when trying to demote from bronze\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › rebalanceLeagues › should process all tiers and return summary\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › rebalanceLeagues › should process all tiers and return summary\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n\n  ● League Rebalancing Service › rebalanceLeagues › should not promote or demote robots multiple times in same cycle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:18:33\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up in correct order\n    → 18   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up in correct order\n    > 18 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      19 |     await prisma.battleParticipant.deleteMany({});\n      20 |     await prisma.battle.deleteMany({});\n      21 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:18:5)\n\n  ● League Rebalancing Service › rebalanceLeagues › should not promote or demote robots multiple times in same cycle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts:55:33\n\n      52 afterEach(async () => {\n      53   // Clean up after each test to prevent pollution\n      54   // Only delete robots and their dependencies, keep testUser and practiceSword\n    → 55   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      53 |     // Clean up after each test to prevent pollution\n      54 |     // Only delete robots and their dependencies, keep testUser and practiceSword\n    > 55 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      56 |     await prisma.battleParticipant.deleteMany({});\n      57 |     await prisma.battle.deleteMany({});\n      58 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:55:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueRebalancingService.test.ts","startTime":1771861040968,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should update robot stance to offensive","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update robot stance to offensive"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should update robot stance to defensive","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update robot stance to defensive"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should handle case-insensitive stance input","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle case-insensitive stance input"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should reject invalid stance value","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject invalid stance value"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should reject missing stance value","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject missing stance value"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should reject non-string stance value","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-string stance value"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should return 404 for non-existent robot","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 for non-existent robot"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should return 403 for unauthorized user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 for unauthorized user"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/stance"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/stance should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should update yield threshold to 25","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update yield threshold to 25"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should accept 0% yield threshold","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept 0% yield threshold"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should accept 50% yield threshold","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should accept 50% yield threshold"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should handle decimal yield threshold by rounding","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle decimal yield threshold by rounding"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should reject yield threshold above 50","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject yield threshold above 50"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should reject negative yield threshold","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject negative yield threshold"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should reject non-numeric yield threshold","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject non-numeric yield threshold"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should reject missing yield threshold","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject missing yield threshold"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should return 404 for non-existent robot","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 for non-existent robot"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should return 403 for unauthorized user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 for unauthorized user"},{"ancestorTitles":["Stance and Yield Threshold API Endpoints","PATCH /api/robots/:id/yield-threshold"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts:17:5)"],"fullName":"Stance and Yield Threshold API Endpoints PATCH /api/robots/:id/yield-threshold should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"}],"endTime":1771861041170,"message":"  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should update robot stance to offensive\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should update robot stance to defensive\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should handle case-insensitive stance input\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject invalid stance value\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject missing stance value\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject non-string stance value\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 404 for non-existent robot\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 403 for unauthorized user\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should update yield threshold to 25\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should accept 0% yield threshold\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should accept 50% yield threshold\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should handle decimal yield threshold by rounding\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject yield threshold above 50\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject negative yield threshold\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject non-numeric yield threshold\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject missing yield threshold\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 404 for non-existent robot\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 403 for unauthorized user\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n\n  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |   beforeAll(async () => {\n      16 |     // Ensure database connection\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |   });\n      19 |\n      20 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYieldAPI.test.ts","startTime":1771861041100,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Facility Routes","GET /api/facility"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facility.test.ts:26:5)"],"fullName":"Facility Routes GET /api/facility should get user facilities with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get user facilities with auth"},{"ancestorTitles":["Facility Routes","GET /api/facility"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facility.test.ts:26:5)"],"fullName":"Facility Routes GET /api/facility should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Facility Routes","GET /api/facility"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facility.test.ts:26:5)"],"fullName":"Facility Routes GET /api/facility should return 403 with invalid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 with invalid token"},{"ancestorTitles":["Facility Routes","POST /api/facility/upgrade"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facility.test.ts:26:5)"],"fullName":"Facility Routes POST /api/facility/upgrade should return 400 without facility type","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 without facility type"},{"ancestorTitles":["Facility Routes","POST /api/facility/upgrade"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facility.test.ts:26:5)"],"fullName":"Facility Routes POST /api/facility/upgrade should return 400 with invalid facility type","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 with invalid facility type"},{"ancestorTitles":["Facility Routes","POST /api/facility/upgrade"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facility.test.ts:26:5)"],"fullName":"Facility Routes POST /api/facility/upgrade should handle upgrade attempt when at max level","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle upgrade attempt when at max level"},{"ancestorTitles":["Facility Routes","POST /api/facility/upgrade"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facility.test.ts:26:5)"],"fullName":"Facility Routes POST /api/facility/upgrade should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"}],"endTime":1771861041244,"message":"  ● Facility Routes › GET /api/facility › should get user facilities with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facility.test.ts:26:5)\n\n  ● Facility Routes › GET /api/facility › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facility.test.ts:26:5)\n\n  ● Facility Routes › GET /api/facility › should return 403 with invalid token\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facility.test.ts:26:5)\n\n  ● Facility Routes › POST /api/facility/upgrade › should return 400 without facility type\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facility.test.ts:26:5)\n\n  ● Facility Routes › POST /api/facility/upgrade › should return 400 with invalid facility type\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facility.test.ts:26:5)\n\n  ● Facility Routes › POST /api/facility/upgrade › should handle upgrade attempt when at max level\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facility.test.ts:26:5)\n\n  ● Facility Routes › POST /api/facility/upgrade › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facility.test.ts:26:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facility.test.ts","startTime":1771861041173,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Financial Report - Streaming Revenue Integration"],"duration":15,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:20:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27\n\n  22 \n  23 afterEach(async () => {\n  24   // Clean up test data between tests\n→ 25   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:5)"],"fullName":"Financial Report - Streaming Revenue Integration should include streaming revenue in financial report","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include streaming revenue in financial report"},{"ancestorTitles":["Financial Report - Streaming Revenue Integration"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:20:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27\n\n  22 \n  23 afterEach(async () => {\n  24   // Clean up test data between tests\n→ 25   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:5)"],"fullName":"Financial Report - Streaming Revenue Integration should show zero streaming revenue when no battles occurred","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should show zero streaming revenue when no battles occurred"},{"ancestorTitles":["Financial Report - Streaming Revenue Integration"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:20:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27\n\n  22 \n  23 afterEach(async () => {\n  24   // Clean up test data between tests\n→ 25   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:5)"],"fullName":"Financial Report - Streaming Revenue Integration should only count streaming revenue from user's own robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should only count streaming revenue from user's own robots"}],"coverage":{},"endTime":1771861048230,"message":"  ● Financial Report - Streaming Revenue Integration › should include streaming revenue in financial report\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)\n\n  ● Financial Report - Streaming Revenue Integration › should include streaming revenue in financial report\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27\n\n      22 \n      23 afterEach(async () => {\n      24   // Clean up test data between tests\n    → 25   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |   afterEach(async () => {\n      24 |     // Clean up test data between tests\n    > 25 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      26 |     await prisma.battleParticipant.deleteMany({});\n      27 |     await prisma.battle.deleteMany({});\n      28 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)\n\n  ● Financial Report - Streaming Revenue Integration › should show zero streaming revenue when no battles occurred\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)\n\n  ● Financial Report - Streaming Revenue Integration › should show zero streaming revenue when no battles occurred\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27\n\n      22 \n      23 afterEach(async () => {\n      24   // Clean up test data between tests\n    → 25   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |   afterEach(async () => {\n      24 |     // Clean up test data between tests\n    > 25 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      26 |     await prisma.battleParticipant.deleteMany({});\n      27 |     await prisma.battle.deleteMany({});\n      28 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)\n\n  ● Financial Report - Streaming Revenue Integration › should only count streaming revenue from user's own robots\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)\n\n  ● Financial Report - Streaming Revenue Integration › should only count streaming revenue from user's own robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27\n\n      22 \n      23 afterEach(async () => {\n      24   // Clean up test data between tests\n    → 25   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |   afterEach(async () => {\n      24 |     // Clean up test data between tests\n    > 25 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      26 |     await prisma.battleParticipant.deleteMany({});\n      27 |     await prisma.battle.deleteMany({});\n      28 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:42:27\n\n      39 \n      40 afterAll(async () => {\n      41   // Final cleanup\n    → 42   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      40 |   afterAll(async () => {\n      41 |     // Final cleanup\n    > 42 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      43 |     await prisma.battleParticipant.deleteMany({});\n      44 |     await prisma.battle.deleteMany({});\n      45 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:42:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Finances Routes","GET /api/finances/daily"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/daily should get daily financial report with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get daily financial report with auth"},{"ancestorTitles":["Finances Routes","GET /api/finances/daily"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/daily should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Finances Routes","GET /api/finances/summary"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/summary should get financial summary with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get financial summary with auth"},{"ancestorTitles":["Finances Routes","GET /api/finances/summary"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/summary should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Finances Routes","GET /api/finances/operating-costs"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/operating-costs should get operating costs with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get operating costs with auth"},{"ancestorTitles":["Finances Routes","GET /api/finances/operating-costs"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/operating-costs should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Finances Routes","GET /api/finances/revenue-streams"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/revenue-streams should get revenue streams with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get revenue streams with auth"},{"ancestorTitles":["Finances Routes","GET /api/finances/revenue-streams"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/revenue-streams should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Finances Routes","GET /api/finances/projections"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/projections should get financial projections with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get financial projections with auth"},{"ancestorTitles":["Finances Routes","GET /api/finances/projections"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/projections should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Finances Routes","GET /api/finances/per-robot"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/per-robot should get per-robot financial report with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get per-robot financial report with auth"},{"ancestorTitles":["Finances Routes","GET /api/finances/per-robot"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes GET /api/finances/per-robot should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Finances Routes","POST /api/finances/roi-calculator"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes POST /api/finances/roi-calculator should return 400 without required fields","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 without required fields"},{"ancestorTitles":["Finances Routes","POST /api/finances/roi-calculator"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes POST /api/finances/roi-calculator should calculate ROI with valid data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate ROI with valid data"},{"ancestorTitles":["Finances Routes","POST /api/finances/roi-calculator"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts:25:5)"],"fullName":"Finances Routes POST /api/finances/roi-calculator should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"}],"endTime":1771861041415,"message":"  ● Finances Routes › GET /api/finances/daily › should get daily financial report with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/daily › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/summary › should get financial summary with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/summary › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/operating-costs › should get operating costs with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/operating-costs › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/revenue-streams › should get revenue streams with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/revenue-streams › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/projections › should get financial projections with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/projections › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/per-robot › should get per-robot financial report with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › GET /api/finances/per-robot › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › POST /api/finances/roi-calculator › should return 400 without required fields\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › POST /api/finances/roi-calculator › should calculate ROI with valid data\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n\n  ● Finances Routes › POST /api/finances/roi-calculator › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |     \n      27 |     // Create test user for this test suite\n      28 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/finances.test.ts:25:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/finances.test.ts","startTime":1771861041322,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Weapon Inventory Routes","GET /api/weapon-inventory"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes GET /api/weapon-inventory should get user weapon inventory with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get user weapon inventory with auth"},{"ancestorTitles":["Weapon Inventory Routes","GET /api/weapon-inventory"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes GET /api/weapon-inventory should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Weapon Inventory Routes","POST /api/weapon-inventory/purchase"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes POST /api/weapon-inventory/purchase should return 400 without weapon ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 without weapon ID"},{"ancestorTitles":["Weapon Inventory Routes","POST /api/weapon-inventory/purchase"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes POST /api/weapon-inventory/purchase should return 400 with invalid weapon ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 with invalid weapon ID"},{"ancestorTitles":["Weapon Inventory Routes","POST /api/weapon-inventory/purchase"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes POST /api/weapon-inventory/purchase should return 404 with non-existent weapon ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 with non-existent weapon ID"},{"ancestorTitles":["Weapon Inventory Routes","POST /api/weapon-inventory/purchase"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes POST /api/weapon-inventory/purchase should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Weapon Inventory Routes","GET /api/weapon-inventory/storage-status"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes GET /api/weapon-inventory/storage-status should get storage status with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get storage status with auth"},{"ancestorTitles":["Weapon Inventory Routes","GET /api/weapon-inventory/storage-status"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes GET /api/weapon-inventory/storage-status should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Weapon Inventory Routes","GET /api/weapon-inventory/:id/available"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes GET /api/weapon-inventory/:id/available should return 404 for non-existent inventory item","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 for non-existent inventory item"},{"ancestorTitles":["Weapon Inventory Routes","GET /api/weapon-inventory/:id/available"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts:27:5)"],"fullName":"Weapon Inventory Routes GET /api/weapon-inventory/:id/available should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"}],"endTime":1771861041486,"message":"  ● Weapon Inventory Routes › GET /api/weapon-inventory › should get user weapon inventory with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › GET /api/weapon-inventory › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 400 without weapon ID\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 400 with invalid weapon ID\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 404 with non-existent weapon ID\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › GET /api/weapon-inventory/storage-status › should get storage status with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › GET /api/weapon-inventory/storage-status › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › GET /api/weapon-inventory/:id/available › should return 404 for non-existent inventory item\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n\n  ● Weapon Inventory Routes › GET /api/weapon-inventory/:id/available › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponInventory.test.ts","startTime":1771861041417,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Matchmaking Service","checkBattleReadiness"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service checkBattleReadiness should mark robot as ready when HP >= 75% and weapon equipped","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should mark robot as ready when HP >= 75% and weapon equipped"},{"ancestorTitles":["Matchmaking Service","checkBattleReadiness"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service checkBattleReadiness should mark robot as not ready when HP < 75%","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should mark robot as not ready when HP < 75%"},{"ancestorTitles":["Matchmaking Service","checkBattleReadiness"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service checkBattleReadiness should mark robot as not ready when HP is at or below yield threshold","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should mark robot as not ready when HP is at or below yield threshold"},{"ancestorTitles":["Matchmaking Service","checkBattleReadiness"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service checkBattleReadiness should mark robot as not ready when weapon not equipped","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should mark robot as not ready when weapon not equipped"},{"ancestorTitles":["Matchmaking Service","checkBattleReadiness"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service checkBattleReadiness should check dual wield loadout correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should check dual wield loadout correctly"},{"ancestorTitles":["Matchmaking Service","runMatchmakingForTier"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service runMatchmakingForTier should create matches for available robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create matches for available robots"},{"ancestorTitles":["Matchmaking Service","runMatchmakingForTier"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service runMatchmakingForTier should create bye-match for odd number of robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create bye-match for odd number of robots"},{"ancestorTitles":["Matchmaking Service","runMatchmakingForTier"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service runMatchmakingForTier should not create duplicate matches for already scheduled robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not create duplicate matches for already scheduled robots"},{"ancestorTitles":["Matchmaking Service","runMatchmakingForTier"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service runMatchmakingForTier should skip robots that are not battle-ready","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should skip robots that are not battle-ready"},{"ancestorTitles":["Matchmaking Service","runMatchmaking (all tiers)"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.scheduledMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n  18 \n  19 beforeAll(async () => {\n  20   // Clean up in correct order\n→ 21   await prisma.scheduledMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:5)"],"fullName":"Matchmaking Service runMatchmaking (all tiers) should run matchmaking across all tiers","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should run matchmaking across all tiers"}],"endTime":1771861041533,"message":"  ● Matchmaking Service › checkBattleReadiness › should mark robot as ready when HP >= 75% and weapon equipped\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP < 75%\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP is at or below yield threshold\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when weapon not equipped\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › checkBattleReadiness › should check dual wield loadout correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › runMatchmakingForTier › should create matches for available robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › runMatchmakingForTier › should create bye-match for odd number of robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › runMatchmakingForTier › should not create duplicate matches for already scheduled robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › runMatchmakingForTier › should skip robots that are not battle-ready\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n\n  ● Matchmaking Service › runMatchmaking (all tiers) › should run matchmaking across all tiers\n\n    PrismaClientInitializationError: \n    Invalid `prisma.scheduledMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33\n\n      18 \n      19 beforeAll(async () => {\n      20   // Clean up in correct order\n    → 21   await prisma.scheduledMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      19 |   beforeAll(async () => {\n      20 |     // Clean up in correct order\n    > 21 |     await prisma.scheduledMatch.deleteMany({});\n         |     ^\n      22 |     await prisma.battleParticipant.deleteMany({});\n      23 |     await prisma.battle.deleteMany({});\n      24 |     await prisma.tagTeamMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts","startTime":1771861041488,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Teams API Endpoints","POST /api/tag-teams"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints POST /api/tag-teams should create a tag team with valid robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a tag team with valid robots"},{"ancestorTitles":["Tag Teams API Endpoints","POST /api/tag-teams"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints POST /api/tag-teams should reject team creation without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject team creation without authentication"},{"ancestorTitles":["Tag Teams API Endpoints","POST /api/tag-teams"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints POST /api/tag-teams should reject team creation with missing robot IDs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject team creation with missing robot IDs"},{"ancestorTitles":["Tag Teams API Endpoints","POST /api/tag-teams"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints POST /api/tag-teams should reject team creation with same robot in both positions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject team creation with same robot in both positions"},{"ancestorTitles":["Tag Teams API Endpoints","POST /api/tag-teams"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints POST /api/tag-teams should reject duplicate team creation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject duplicate team creation"},{"ancestorTitles":["Tag Teams API Endpoints","GET /api/tag-teams"],"duration":9,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints GET /api/tag-teams should list all teams for the user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list all teams for the user"},{"ancestorTitles":["Tag Teams API Endpoints","GET /api/tag-teams"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints GET /api/tag-teams should include robot details and readiness status","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include robot details and readiness status"},{"ancestorTitles":["Tag Teams API Endpoints","GET /api/tag-teams"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints GET /api/tag-teams should reject request without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request without authentication"},{"ancestorTitles":["Tag Teams API Endpoints","GET /api/tag-teams/:id"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:42\n\n  242 \n  243 beforeAll(async () => {\n  244   // Get the team ID from the first team\n→ 245   const teams = await prisma.tagTeam.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:21)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints GET /api/tag-teams/:id should get team details by ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get team details by ID"},{"ancestorTitles":["Tag Teams API Endpoints","GET /api/tag-teams/:id"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:42\n\n  242 \n  243 beforeAll(async () => {\n  244   // Get the team ID from the first team\n→ 245   const teams = await prisma.tagTeam.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:21)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints GET /api/tag-teams/:id should reject request for non-existent team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request for non-existent team"},{"ancestorTitles":["Tag Teams API Endpoints","GET /api/tag-teams/:id"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:42\n\n  242 \n  243 beforeAll(async () => {\n  244   // Get the team ID from the first team\n→ 245   const teams = await prisma.tagTeam.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:21)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints GET /api/tag-teams/:id should reject request with invalid team ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request with invalid team ID"},{"ancestorTitles":["Tag Teams API Endpoints","DELETE /api/tag-teams/:id"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41\n\n  283 \n  284 beforeAll(async () => {\n  285   // Create a team to delete\n→ 286   const team = await prisma.tagTeam.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints DELETE /api/tag-teams/:id should disband a team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should disband a team"},{"ancestorTitles":["Tag Teams API Endpoints","DELETE /api/tag-teams/:id"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41\n\n  283 \n  284 beforeAll(async () => {\n  285   // Create a team to delete\n→ 286   const team = await prisma.tagTeam.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints DELETE /api/tag-teams/:id should reject request for non-existent team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request for non-existent team"},{"ancestorTitles":["Tag Teams API Endpoints","DELETE /api/tag-teams/:id"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n  21 \n  22 beforeAll(async () => {\n  23   // Create test user\n→ 24   const user = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:18)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41\n\n  283 \n  284 beforeAll(async () => {\n  285   // Create a team to delete\n→ 286   const team = await prisma.tagTeam.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:20)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n  121 \n  122 afterEach(async () => {\n  123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n→ 124   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:5)"],"fullName":"Tag Teams API Endpoints DELETE /api/tag-teams/:id should reject request with invalid team ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request with invalid team ID"}],"coverage":{},"endTime":1771861048230,"message":"  ● Tag Teams API Endpoints › POST /api/tag-teams › should create a tag team with valid robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should create a tag team with valid robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation without authentication\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation without authentication\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with missing robot IDs\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with missing robot IDs\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with same robot in both positions\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with same robot in both positions\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject duplicate team creation\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject duplicate team creation\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams › should list all teams for the user\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams › should list all teams for the user\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams › should include robot details and readiness status\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams › should include robot details and readiness status\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams › should reject request without authentication\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams › should reject request without authentication\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:42\n\n      242 \n      243 beforeAll(async () => {\n      244   // Get the team ID from the first team\n    → 245   const teams = await prisma.tagTeam.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      243 |     beforeAll(async () => {\n      244 |       // Get the team ID from the first team\n    > 245 |       const teams = await prisma.tagTeam.findMany({\n          |                     ^\n      246 |         where: { stableId: testUserId },\n      247 |       });\n      248 |       teamId = teams[0].id;\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:245:21)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:42\n\n      242 \n      243 beforeAll(async () => {\n      244   // Get the team ID from the first team\n    → 245   const teams = await prisma.tagTeam.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      243 |     beforeAll(async () => {\n      244 |       // Get the team ID from the first team\n    > 245 |       const teams = await prisma.tagTeam.findMany({\n          |                     ^\n      246 |         where: { stableId: testUserId },\n      247 |       });\n      248 |       teamId = teams[0].id;\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:245:21)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:245:42\n\n      242 \n      243 beforeAll(async () => {\n      244   // Get the team ID from the first team\n    → 245   const teams = await prisma.tagTeam.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      243 |     beforeAll(async () => {\n      244 |       // Get the team ID from the first team\n    > 245 |       const teams = await prisma.tagTeam.findMany({\n          |                     ^\n      246 |         where: { stableId: testUserId },\n      247 |       });\n      248 |       teamId = teams[0].id;\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:245:21)\n\n  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should disband a team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should disband a team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41\n\n      283 \n      284 beforeAll(async () => {\n      285   // Create a team to delete\n    → 286   const team = await prisma.tagTeam.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      284 |     beforeAll(async () => {\n      285 |       // Create a team to delete\n    > 286 |       const team = await prisma.tagTeam.create({\n          |                    ^\n      287 |         data: {\n      288 |           stableId: testUserId,\n      289 |           activeRobotId: robot2Id,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should disband a team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request for non-existent team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request for non-existent team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41\n\n      283 \n      284 beforeAll(async () => {\n      285   // Create a team to delete\n    → 286   const team = await prisma.tagTeam.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      284 |     beforeAll(async () => {\n      285 |       // Create a team to delete\n    > 286 |       const team = await prisma.tagTeam.create({\n          |                    ^\n      287 |         data: {\n      288 |           stableId: testUserId,\n      289 |           activeRobotId: robot2Id,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request for non-existent team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request with invalid team ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36\n\n      21 \n      22 beforeAll(async () => {\n      23   // Create test user\n    → 24   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      22 |   beforeAll(async () => {\n      23 |     // Create test user\n    > 24 |     const user = await prisma.user.create({\n         |                  ^\n      25 |       data: {\n      26 |         username: `tagteam_test_${Date.now()}`,\n      27 |         passwordHash: 'hashedpassword',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request with invalid team ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41\n\n      283 \n      284 beforeAll(async () => {\n      285   // Create a team to delete\n    → 286   const team = await prisma.tagTeam.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      284 |     beforeAll(async () => {\n      285 |       // Create a team to delete\n    > 286 |       const team = await prisma.tagTeam.create({\n          |                    ^\n      287 |         data: {\n      288 |           stableId: testUserId,\n      289 |           activeRobotId: robot2Id,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)\n\n  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request with invalid team ID\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26\n\n      121 \n      122 afterEach(async () => {\n      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    → 124   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   afterEach(async () => {\n      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)\n    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      125 |   });\n      126 |\n      127 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:129:26\n\n      126 \n      127 afterAll(async () => {\n      128   // Final cleanup\n    → 129   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      127 |   afterAll(async () => {\n      128 |     // Final cleanup\n    > 129 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });\n          |     ^\n      130 |     await prisma.weaponInventory.deleteMany({ where: { userId: testUserId } });\n      131 |     await prisma.robot.deleteMany({ where: { userId: testUserId } });\n      132 |     await prisma.user.delete({ where: { id: testUserId } });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeams.test.ts:129:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["TagTeamService","validateTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService validateTeam should validate a team with two ready robots from same stable","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate a team with two ready robots from same stable"},{"ancestorTitles":["TagTeamService","validateTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService validateTeam should reject robots from different stables","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject robots from different stables"},{"ancestorTitles":["TagTeamService","validateTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService validateTeam should reject team with unready robot (low HP)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject team with unready robot (low HP)"},{"ancestorTitles":["TagTeamService","validateTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService validateTeam should reject duplicate teams","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject duplicate teams"},{"ancestorTitles":["TagTeamService","validateTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService validateTeam should reject duplicate teams in reverse order","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject duplicate teams in reverse order"},{"ancestorTitles":["TagTeamService","validateTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService validateTeam should enforce roster limit (max teams = roster size / 2)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce roster limit (max teams = roster size / 2)"},{"ancestorTitles":["TagTeamService","createTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService createTeam should create a valid team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a valid team"},{"ancestorTitles":["TagTeamService","createTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService createTeam should place new teams in Bronze league with initial values","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should place new teams in Bronze league with initial values"},{"ancestorTitles":["TagTeamService","createTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService createTeam should return errors for invalid team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return errors for invalid team"},{"ancestorTitles":["TagTeamService","createTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService createTeam should reject team creation if user does not own robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject team creation if user does not own robots"},{"ancestorTitles":["TagTeamService","getTeamById"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService getTeamById should retrieve a team by ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should retrieve a team by ID"},{"ancestorTitles":["TagTeamService","getTeamById"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService getTeamById should include robot details in response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include robot details in response"},{"ancestorTitles":["TagTeamService","getTeamById"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService getTeamById should return null for non-existent team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return null for non-existent team"},{"ancestorTitles":["TagTeamService","getTeamsByStable"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService getTeamsByStable should retrieve all teams for a stable","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should retrieve all teams for a stable"},{"ancestorTitles":["TagTeamService","getTeamsByStable"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService getTeamsByStable should include robot details for all teams","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include robot details for all teams"},{"ancestorTitles":["TagTeamService","getTeamsByStable"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService getTeamsByStable should return empty array for stable with no teams","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return empty array for stable with no teams"},{"ancestorTitles":["TagTeamService","disbandTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService disbandTeam should disband a team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should disband a team"},{"ancestorTitles":["TagTeamService","disbandTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService disbandTeam should reject disbanding team from wrong stable","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject disbanding team from wrong stable"},{"ancestorTitles":["TagTeamService","disbandTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService disbandTeam should return false for non-existent team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return false for non-existent team"},{"ancestorTitles":["TagTeamService","disbandTeam"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:25:5)","PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:91:5)"],"fullName":"TagTeamService disbandTeam should make robots available for new teams after disbanding","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should make robots available for new teams after disbanding"}],"coverage":{},"endTime":1771861048230,"message":"  ● TagTeamService › validateTeam › should validate a team with two ready robots from same stable\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › validateTeam › should validate a team with two ready robots from same stable\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › validateTeam › should reject robots from different stables\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › validateTeam › should reject robots from different stables\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › validateTeam › should reject team with unready robot (low HP)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › validateTeam › should reject team with unready robot (low HP)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › validateTeam › should reject duplicate teams\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › validateTeam › should reject duplicate teams\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › validateTeam › should reject duplicate teams in reverse order\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › validateTeam › should reject duplicate teams in reverse order\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › validateTeam › should enforce roster limit (max teams = roster size / 2)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › validateTeam › should enforce roster limit (max teams = roster size / 2)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › createTeam › should create a valid team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › createTeam › should create a valid team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › createTeam › should place new teams in Bronze league with initial values\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › createTeam › should place new teams in Bronze league with initial values\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › createTeam › should return errors for invalid team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › createTeam › should return errors for invalid team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › createTeam › should reject team creation if user does not own robots\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › createTeam › should reject team creation if user does not own robots\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › getTeamById › should retrieve a team by ID\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › getTeamById › should retrieve a team by ID\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › getTeamById › should include robot details in response\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › getTeamById › should include robot details in response\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › getTeamById › should return null for non-existent team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › getTeamById › should return null for non-existent team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › getTeamsByStable › should retrieve all teams for a stable\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › getTeamsByStable › should retrieve all teams for a stable\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › getTeamsByStable › should include robot details for all teams\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › getTeamsByStable › should include robot details for all teams\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › getTeamsByStable › should return empty array for stable with no teams\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › getTeamsByStable › should return empty array for stable with no teams\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › disbandTeam › should disband a team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › disbandTeam › should disband a team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › disbandTeam › should reject disbanding team from wrong stable\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › disbandTeam › should reject disbanding team from wrong stable\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › disbandTeam › should return false for non-existent team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › disbandTeam › should return false for non-existent team\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n  ● TagTeamService › disbandTeam › should make robots available for new teams after disbanding\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |   });\n      27 |\n      28 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)\n\n  ● TagTeamService › disbandTeam › should make robots available for new teams after disbanding\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      89 |\n      90 |   beforeAll(async () => {\n    > 91 |     await prisma.$connect();\n         |     ^\n      92 |     \n      93 |     // Create test user\n      94 |     const testUser = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:226:26\n\n      223 \n      224 afterAll(async () => {\n      225   // Clean up test data\n    → 226   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      224 |   afterAll(async () => {\n      225 |     // Clean up test data\n    > 226 |     await prisma.tagTeam.deleteMany({\n          |     ^\n      227 |       where: {\n      228 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],\n      229 |       },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamService.test.ts:226:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team Streaming Revenue Integration"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamStreamingRevenue.test.ts:29:5)","PrismaClientInitializationError: \nInvalid `prisma.tagTeamMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamStreamingRevenue.test.ts:119:31\n\n  116 \n  117 afterEach(async () => {\n  118   // Clean up test data between tests (keep users and weapons from beforeAll)\n→ 119   await prisma.tagTeamMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamStreamingRevenue.test.ts:119:5)"],"fullName":"Tag Team Streaming Revenue Integration should calculate and award streaming revenue for Tag Team battles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate and award streaming revenue for Tag Team battles"}],"endTime":1771861041805,"message":"  ● Tag Team Streaming Revenue Integration › should calculate and award streaming revenue for Tag Team battles\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |\n      31 |     // Get a weapon for robots\n      32 |     weapon = await prisma.weapon.findFirst();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tagTeamStreamingRevenue.test.ts:29:5)\n\n  ● Tag Team Streaming Revenue Integration › should calculate and award streaming revenue for Tag Team battles\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeamMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamStreamingRevenue.test.ts:119:31\n\n      116 \n      117 afterEach(async () => {\n      118   // Clean up test data between tests (keep users and weapons from beforeAll)\n    → 119   await prisma.tagTeamMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      117 |   afterEach(async () => {\n      118 |     // Clean up test data between tests (keep users and weapons from beforeAll)\n    > 119 |     await prisma.tagTeamMatch.deleteMany({});\n          |     ^\n      120 |     await prisma.battleParticipant.deleteMany({});\n      121 |     await prisma.battle.deleteMany({});\n      122 |     await prisma.tagTeam.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamStreamingRevenue.test.ts:119:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamStreamingRevenue.test.ts","startTime":1771861041763,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 9: Streaming Studio Prestige Requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)"],"fullName":"Property 9: Streaming Studio Prestige Requirements Property 9: Prestige requirements enforced for all levels","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 9: Prestige requirements enforced for all levels"},{"ancestorTitles":["Property 9: Streaming Studio Prestige Requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)"],"fullName":"Property 9: Streaming Studio Prestige Requirements Property 9.1: Levels 1-3 require no prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 9.1: Levels 1-3 require no prestige"},{"ancestorTitles":["Property 9: Streaming Studio Prestige Requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)"],"fullName":"Property 9: Streaming Studio Prestige Requirements Property 9.2: Levels 4-10 enforce progressive prestige requirements","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 9.2: Levels 4-10 enforce progressive prestige requirements"},{"ancestorTitles":["Property 9: Streaming Studio Prestige Requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)"],"fullName":"Property 9: Streaming Studio Prestige Requirements Property 9.3: Prestige requirements match facility configuration","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 9.3: Prestige requirements match facility configuration"},{"ancestorTitles":["Property 9: Streaming Studio Prestige Requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)"],"fullName":"Property 9: Streaming Studio Prestige Requirements Property 9.4: Error messages contain required prestige information","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 9.4: Error messages contain required prestige information"},{"ancestorTitles":["Property 9: Streaming Studio Prestige Requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)"],"fullName":"Property 9: Streaming Studio Prestige Requirements Property 9.5: Prestige validation occurs regardless of currency","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 9.5: Prestige validation occurs regardless of currency"}],"endTime":1771861041892,"message":"  ● Property 9: Streaming Studio Prestige Requirements › Property 9: Prestige requirements enforced for all levels\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      39 |\n      40 |   beforeAll(async () => {\n    > 41 |     await prisma.$connect();\n         |     ^\n      42 |   });\n      43 |\n      44 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)\n\n  ● Property 9: Streaming Studio Prestige Requirements › Property 9.1: Levels 1-3 require no prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      39 |\n      40 |   beforeAll(async () => {\n    > 41 |     await prisma.$connect();\n         |     ^\n      42 |   });\n      43 |\n      44 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)\n\n  ● Property 9: Streaming Studio Prestige Requirements › Property 9.2: Levels 4-10 enforce progressive prestige requirements\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      39 |\n      40 |   beforeAll(async () => {\n    > 41 |     await prisma.$connect();\n         |     ^\n      42 |   });\n      43 |\n      44 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)\n\n  ● Property 9: Streaming Studio Prestige Requirements › Property 9.3: Prestige requirements match facility configuration\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      39 |\n      40 |   beforeAll(async () => {\n    > 41 |     await prisma.$connect();\n         |     ^\n      42 |   });\n      43 |\n      44 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)\n\n  ● Property 9: Streaming Studio Prestige Requirements › Property 9.4: Error messages contain required prestige information\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      39 |\n      40 |   beforeAll(async () => {\n    > 41 |     await prisma.$connect();\n         |     ^\n      42 |   });\n      43 |\n      44 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)\n\n  ● Property 9: Streaming Studio Prestige Requirements › Property 9.5: Prestige validation occurs regardless of currency\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      39 |\n      40 |   beforeAll(async () => {\n    > 41 |     await prisma.$connect();\n         |     ^\n      42 |   });\n      43 |\n      44 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeRequirements.property.test.ts:41:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeRequirements.property.test.ts","startTime":1771861041807,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team League Rebalancing Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)"],"fullName":"Tag Team League Rebalancing Integration Test should promote top 10% and demote bottom 10% with varying league points","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should promote top 10% and demote bottom 10% with varying league points"},{"ancestorTitles":["Tag Team League Rebalancing Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)"],"fullName":"Tag Team League Rebalancing Integration Test should not promote/demote teams with < 5 cycles in tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not promote/demote teams with < 5 cycles in tier"},{"ancestorTitles":["Tag Team League Rebalancing Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)"],"fullName":"Tag Team League Rebalancing Integration Test should handle demotion from silver to bronze","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle demotion from silver to bronze"},{"ancestorTitles":["Tag Team League Rebalancing Integration Test"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)"],"fullName":"Tag Team League Rebalancing Integration Test should handle minimum team count for rebalancing (< 10 teams)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle minimum team count for rebalancing (< 10 teams)"}],"coverage":{},"endTime":1771861048230,"message":"  ● Tag Team League Rebalancing Integration Test › should promote top 10% and demote bottom 10% with varying league points\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |\n      27 |     // Get a weapon for robots\n      28 |     const weapon = await prisma.weapon.findFirst();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)\n\n  ● Tag Team League Rebalancing Integration Test › should not promote/demote teams with < 5 cycles in tier\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |\n      27 |     // Get a weapon for robots\n      28 |     const weapon = await prisma.weapon.findFirst();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)\n\n  ● Tag Team League Rebalancing Integration Test › should handle demotion from silver to bronze\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |\n      27 |     // Get a weapon for robots\n      28 |     const weapon = await prisma.weapon.findFirst();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)\n\n  ● Tag Team League Rebalancing Integration Test › should handle minimum team count for rebalancing (< 10 teams)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |\n      24 |   beforeAll(async () => {\n    > 25 |     await prisma.$connect();\n         |     ^\n      26 |\n      27 |     // Get a weapon for robots\n      28 |     const weapon = await prisma.weapon.findFirst();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamLeagueRebalancing.test.ts:88:26\n\n      85 \n      86 afterAll(async () => {\n      87   // Clean up in correct dependency order\n    → 88   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      86 |   afterAll(async () => {\n      87 |     // Clean up in correct dependency order\n    > 88 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      89 |       where: {\n      90 |         id: { in: testTeams.map(t => t.id) },\n      91 |       },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:88:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamLeagueRebalancing.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tournament Streaming Revenue","Tournament Battle Streaming Revenue"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:17:5)","PrismaClientInitializationError: \nInvalid `prisma.tournamentMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34\n\n  80 \n  81 afterEach(async () => {\n  82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)\n→ 83   await prisma.tournamentMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:5)"],"fullName":"Tournament Streaming Revenue Tournament Battle Streaming Revenue should award streaming revenue to both participants in a tournament battle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should award streaming revenue to both participants in a tournament battle"},{"ancestorTitles":["Tournament Streaming Revenue","Tournament Battle Streaming Revenue"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:17:5)","PrismaClientInitializationError: \nInvalid `prisma.tournamentMatch.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34\n\n  80 \n  81 afterEach(async () => {\n  82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)\n→ 83   await prisma.tournamentMatch.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:5)"],"fullName":"Tournament Streaming Revenue Tournament Battle Streaming Revenue should not award streaming revenue for bye matches","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not award streaming revenue for bye matches"}],"coverage":{},"endTime":1771861048230,"message":"  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |\n      16 |   beforeAll(async () => {\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |\n      19 |     // Create cycle metadata\n      20 |     await prisma.cycleMetadata.upsert({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)\n\n  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tournamentMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34\n\n      80 \n      81 afterEach(async () => {\n      82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)\n    → 83   await prisma.tournamentMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      81 |   afterEach(async () => {\n      82 |     // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)\n    > 83 |     await prisma.tournamentMatch.deleteMany({});\n         |     ^\n      84 |     await prisma.battleParticipant.deleteMany({});\n      85 |     await prisma.battle.deleteMany({});\n      86 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:83:5)\n\n  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should not award streaming revenue for bye matches\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      15 |\n      16 |   beforeAll(async () => {\n    > 17 |     await prisma.$connect();\n         |     ^\n      18 |\n      19 |     // Create cycle metadata\n      20 |     await prisma.cycleMetadata.upsert({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)\n\n  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should not award streaming revenue for bye matches\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tournamentMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34\n\n      80 \n      81 afterEach(async () => {\n      82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)\n    → 83   await prisma.tournamentMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      81 |   afterEach(async () => {\n      82 |     // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)\n    > 83 |     await prisma.tournamentMatch.deleteMany({});\n         |     ^\n      84 |     await prisma.battleParticipant.deleteMany({});\n      85 |     await prisma.battle.deleteMany({});\n      86 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:83:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tournamentMatch.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:103:34\n\n      100 \n      101 afterAll(async () => {\n      102   // Final cleanup\n    → 103   await prisma.tournamentMatch.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      101 |   afterAll(async () => {\n      102 |     // Final cleanup\n    > 103 |     await prisma.tournamentMatch.deleteMany({});\n          |     ^\n      104 |     await prisma.battleParticipant.deleteMany({});\n      105 |     await prisma.battle.deleteMany({});\n      106 |     await prisma.robot.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:103:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Streaming Studio Prestige Validation","Levels 1-3: No prestige required"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Levels 1-3: No prestige required should allow upgrade to Level 1 with 0 prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrade to Level 1 with 0 prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Levels 1-3: No prestige required"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Levels 1-3: No prestige required should allow upgrade to Level 2 with 0 prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrade to Level 2 with 0 prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Levels 1-3: No prestige required"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Levels 1-3: No prestige required should allow upgrade to Level 3 with 0 prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrade to Level 3 with 0 prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Level 4: Requires 1,000 prestige"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Level 4: Requires 1,000 prestige should block upgrade to Level 4 with insufficient prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should block upgrade to Level 4 with insufficient prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Level 4: Requires 1,000 prestige"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Level 4: Requires 1,000 prestige should allow upgrade to Level 4 with exactly 1,000 prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrade to Level 4 with exactly 1,000 prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Level 4: Requires 1,000 prestige"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Level 4: Requires 1,000 prestige should allow upgrade to Level 4 with more than 1,000 prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrade to Level 4 with more than 1,000 prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Level 5: Requires 2,500 prestige"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Level 5: Requires 2,500 prestige should block upgrade to Level 5 with insufficient prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should block upgrade to Level 5 with insufficient prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Level 5: Requires 2,500 prestige"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Level 5: Requires 2,500 prestige should allow upgrade to Level 5 with sufficient prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrade to Level 5 with sufficient prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Higher levels: Progressive prestige requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Higher levels: Progressive prestige requirements should enforce 5,000 prestige for Level 6","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce 5,000 prestige for Level 6"},{"ancestorTitles":["Streaming Studio Prestige Validation","Higher levels: Progressive prestige requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Higher levels: Progressive prestige requirements should enforce 10,000 prestige for Level 7","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce 10,000 prestige for Level 7"},{"ancestorTitles":["Streaming Studio Prestige Validation","Higher levels: Progressive prestige requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Higher levels: Progressive prestige requirements should enforce 15,000 prestige for Level 8","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce 15,000 prestige for Level 8"},{"ancestorTitles":["Streaming Studio Prestige Validation","Higher levels: Progressive prestige requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Higher levels: Progressive prestige requirements should enforce 25,000 prestige for Level 9","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce 25,000 prestige for Level 9"},{"ancestorTitles":["Streaming Studio Prestige Validation","Higher levels: Progressive prestige requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Higher levels: Progressive prestige requirements should enforce 50,000 prestige for Level 10","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enforce 50,000 prestige for Level 10"},{"ancestorTitles":["Streaming Studio Prestige Validation","Higher levels: Progressive prestige requirements"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Higher levels: Progressive prestige requirements should allow upgrade to Level 10 with 50,000 prestige","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow upgrade to Level 10 with 50,000 prestige"},{"ancestorTitles":["Streaming Studio Prestige Validation","Error message format"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts:32:5)"],"fullName":"Streaming Studio Prestige Validation Error message format should display error message with required prestige amount","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should display error message with required prestige amount"}],"endTime":1771861042068,"message":"  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 1 with 0 prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 2 with 0 prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 3 with 0 prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should block upgrade to Level 4 with insufficient prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should allow upgrade to Level 4 with exactly 1,000 prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should allow upgrade to Level 4 with more than 1,000 prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Level 5: Requires 2,500 prestige › should block upgrade to Level 5 with insufficient prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Level 5: Requires 2,500 prestige › should allow upgrade to Level 5 with sufficient prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 5,000 prestige for Level 6\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 10,000 prestige for Level 7\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 15,000 prestige for Level 8\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 25,000 prestige for Level 9\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 50,000 prestige for Level 10\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should allow upgrade to Level 10 with 50,000 prestige\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n\n  ● Streaming Studio Prestige Validation › Error message format › should display error message with required prestige amount\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      30 |\n      31 |   beforeAll(async () => {\n    > 32 |     await prisma.$connect();\n         |     ^\n      33 |   });\n      34 |\n      35 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioPrestigeValidation.test.ts","startTime":1771861042002,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 15: Cycle CSV Contains Streaming Revenue Column"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37\n\n  92 \n  93 beforeAll(async () => {\n  94   // Create test users\n→ 95   const user1 = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:19)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27\n\n  129 \n  130 // Cleanup - delete in correct order to avoid foreign key constraints\n  131 // Clean up audit log entries for this test cycle\n→ 132 await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:5)"],"fullName":"Property 15: Cycle CSV Contains Streaming Revenue Column should include streaming_revenue column in CSV export","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include streaming_revenue column in CSV export"},{"ancestorTitles":["Property 15: Cycle CSV Contains Streaming Revenue Column"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37\n\n  92 \n  93 beforeAll(async () => {\n  94   // Create test users\n→ 95   const user1 = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:19)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27\n\n  129 \n  130 // Cleanup - delete in correct order to avoid foreign key constraints\n  131 // Clean up audit log entries for this test cycle\n→ 132 await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:5)"],"fullName":"Property 15: Cycle CSV Contains Streaming Revenue Column should show ₡0 for bye matches in CSV","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should show ₡0 for bye matches in CSV"},{"ancestorTitles":["Property 15: Cycle CSV Contains Streaming Revenue Column"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37\n\n  92 \n  93 beforeAll(async () => {\n  94   // Create test users\n→ 95   const user1 = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:19)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27\n\n  129 \n  130 // Cleanup - delete in correct order to avoid foreign key constraints\n  131 // Clean up audit log entries for this test cycle\n→ 132 await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:5)"],"fullName":"Property 15: Cycle CSV Contains Streaming Revenue Column should include streaming revenue for both winner and loser","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include streaming revenue for both winner and loser"}],"coverage":{},"endTime":1771861048230,"message":"  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming_revenue column in CSV export\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37\n\n      92 \n      93 beforeAll(async () => {\n      94   // Create test users\n    → 95   const user1 = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      93 |   beforeAll(async () => {\n      94 |     // Create test users\n    > 95 |     const user1 = await prisma.user.create({\n         |                   ^\n      96 |       data: {\n      97 |         username: `test_csv_user1_${Date.now()}`,\n      98 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)\n\n  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming_revenue column in CSV export\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27\n\n      129 \n      130 // Cleanup - delete in correct order to avoid foreign key constraints\n      131 // Clean up audit log entries for this test cycle\n    → 132 await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      130 |     // Cleanup - delete in correct order to avoid foreign key constraints\n      131 |     // Clean up audit log entries for this test cycle\n    > 132 |     await prisma.auditLog.deleteMany({\n          |     ^\n      133 |       where: {\n      134 |         cycleNumber: {\n      135 |           gte: testCycleNumber,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)\n\n  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should show ₡0 for bye matches in CSV\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37\n\n      92 \n      93 beforeAll(async () => {\n      94   // Create test users\n    → 95   const user1 = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      93 |   beforeAll(async () => {\n      94 |     // Create test users\n    > 95 |     const user1 = await prisma.user.create({\n         |                   ^\n      96 |       data: {\n      97 |         username: `test_csv_user1_${Date.now()}`,\n      98 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)\n\n  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should show ₡0 for bye matches in CSV\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27\n\n      129 \n      130 // Cleanup - delete in correct order to avoid foreign key constraints\n      131 // Clean up audit log entries for this test cycle\n    → 132 await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      130 |     // Cleanup - delete in correct order to avoid foreign key constraints\n      131 |     // Clean up audit log entries for this test cycle\n    > 132 |     await prisma.auditLog.deleteMany({\n          |     ^\n      133 |       where: {\n      134 |         cycleNumber: {\n      135 |           gte: testCycleNumber,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)\n\n  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming revenue for both winner and loser\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37\n\n      92 \n      93 beforeAll(async () => {\n      94   // Create test users\n    → 95   const user1 = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      93 |   beforeAll(async () => {\n      94 |     // Create test users\n    > 95 |     const user1 = await prisma.user.create({\n         |                   ^\n      96 |       data: {\n      97 |         username: `test_csv_user1_${Date.now()}`,\n      98 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)\n\n  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming revenue for both winner and loser\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27\n\n      129 \n      130 // Cleanup - delete in correct order to avoid foreign key constraints\n      131 // Clean up audit log entries for this test cycle\n    → 132 await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      130 |     // Cleanup - delete in correct order to avoid foreign key constraints\n      131 |     // Clean up audit log entries for this test cycle\n    > 132 |     await prisma.auditLog.deleteMany({\n          |     ^\n      133 |       where: {\n      134 |         cycleNumber: {\n      135 |           gte: testCycleNumber,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:185:23\n\n      182 \n      183 afterAll(async () => {\n      184   // Final cleanup of users\n    → 185   await prisma.user.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      183 |   afterAll(async () => {\n      184 |     // Final cleanup of users\n    > 185 |     await prisma.user.deleteMany({\n          |     ^\n      186 |       where: {\n      187 |         OR: [{ id: testUserId1 }, { id: testUserId2 }],\n      188 |       },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:185:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should require authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require authentication"},{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should require admin role","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should require admin role"},{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should return comprehensive robot statistics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return comprehensive robot statistics"},{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should include summary statistics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include summary statistics"},{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should calculate attribute statistics correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should calculate attribute statistics correctly"},{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should detect outliers correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect outliers correctly"},{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should provide statistics by league tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should provide statistics by league tier"},{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should include top and bottom performers","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include top and bottom performers"},{"ancestorTitles":["Admin Robot Statistics Endpoint","GET /api/admin/stats/robots"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts:27:5)"],"fullName":"Admin Robot Statistics Endpoint GET /api/admin/stats/robots should include win rate analysis","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include win rate analysis"}],"endTime":1771861042250,"message":"  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should require authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n\n  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should require admin role\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n\n  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should return comprehensive robot statistics\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n\n  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include summary statistics\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n\n  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should calculate attribute statistics correctly\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n\n  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should detect outliers correctly\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n\n  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should provide statistics by league tier\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n\n  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include top and bottom performers\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n\n  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include win rate analysis\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |\n      29 |     // Create admin user\n      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/adminRobotStats.test.ts","startTime":1771861042154,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Weapons Routes","GET /api/weapons"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weapons.test.ts:26:5)"],"fullName":"Weapons Routes GET /api/weapons should get all weapons with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get all weapons with auth"},{"ancestorTitles":["Weapons Routes","GET /api/weapons"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weapons.test.ts:26:5)"],"fullName":"Weapons Routes GET /api/weapons should return weapons sorted by cost","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return weapons sorted by cost"},{"ancestorTitles":["Weapons Routes","GET /api/weapons"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weapons.test.ts:26:5)"],"fullName":"Weapons Routes GET /api/weapons should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Weapons Routes","GET /api/weapons"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weapons.test.ts:26:5)"],"fullName":"Weapons Routes GET /api/weapons should return 403 with invalid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 with invalid token"}],"endTime":1771861042329,"message":"  ● Weapons Routes › GET /api/weapons › should get all weapons with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weapons.test.ts:26:5)\n\n  ● Weapons Routes › GET /api/weapons › should return weapons sorted by cost\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weapons.test.ts:26:5)\n\n  ● Weapons Routes › GET /api/weapons › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weapons.test.ts:26:5)\n\n  ● Weapons Routes › GET /api/weapons › should return 403 with invalid token\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/weapons.test.ts:26:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weapons.test.ts","startTime":1771861042253,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Leaderboards Routes","GET /api/leaderboards/fame"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts:20:5)"],"fullName":"Leaderboards Routes GET /api/leaderboards/fame should get fame leaderboard","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get fame leaderboard"},{"ancestorTitles":["Leaderboards Routes","GET /api/leaderboards/fame"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts:20:5)"],"fullName":"Leaderboards Routes GET /api/leaderboards/fame should support pagination","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support pagination"},{"ancestorTitles":["Leaderboards Routes","GET /api/leaderboards/fame"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts:20:5)"],"fullName":"Leaderboards Routes GET /api/leaderboards/fame should filter by league","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by league"},{"ancestorTitles":["Leaderboards Routes","GET /api/leaderboards/fame"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts:20:5)"],"fullName":"Leaderboards Routes GET /api/leaderboards/fame should filter by minimum battles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by minimum battles"},{"ancestorTitles":["Leaderboards Routes","GET /api/leaderboards/losses"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts:20:5)"],"fullName":"Leaderboards Routes GET /api/leaderboards/losses should get losses leaderboard","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get losses leaderboard"},{"ancestorTitles":["Leaderboards Routes","GET /api/leaderboards/losses"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts:20:5)"],"fullName":"Leaderboards Routes GET /api/leaderboards/losses should support pagination","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support pagination"},{"ancestorTitles":["Leaderboards Routes","GET /api/leaderboards/prestige"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts:20:5)"],"fullName":"Leaderboards Routes GET /api/leaderboards/prestige should get prestige leaderboard","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get prestige leaderboard"},{"ancestorTitles":["Leaderboards Routes","GET /api/leaderboards/prestige"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts:20:5)"],"fullName":"Leaderboards Routes GET /api/leaderboards/prestige should support pagination","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support pagination"}],"endTime":1771861042393,"message":"  ● Leaderboards Routes › GET /api/leaderboards/fame › should get fame leaderboard\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Leaderboards Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)\n\n  ● Leaderboards Routes › GET /api/leaderboards/fame › should support pagination\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Leaderboards Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)\n\n  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by league\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Leaderboards Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)\n\n  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by minimum battles\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Leaderboards Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)\n\n  ● Leaderboards Routes › GET /api/leaderboards/losses › should get losses leaderboard\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Leaderboards Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)\n\n  ● Leaderboards Routes › GET /api/leaderboards/losses › should support pagination\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Leaderboards Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)\n\n  ● Leaderboards Routes › GET /api/leaderboards/prestige › should get prestige leaderboard\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Leaderboards Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)\n\n  ● Leaderboards Routes › GET /api/leaderboards/prestige › should support pagination\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 | describe('Leaderboards Routes', () => {\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leaderboards.test.ts","startTime":1771861042331,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Battle Event Logging Integration"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:20:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:27\n\n   98 \n   99 afterEach(async () => {\n  100   // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)\n→ 101   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:5)"],"fullName":"Battle Event Logging Integration should log battle_complete event when a battle is processed","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log battle_complete event when a battle is processed"},{"ancestorTitles":["Battle Event Logging Integration"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:20:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:27\n\n   98 \n   99 afterEach(async () => {\n  100   // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)\n→ 101   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:5)"],"fullName":"Battle Event Logging Integration should maintain Battle table records alongside event logs","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should maintain Battle table records alongside event logs"}],"coverage":{},"endTime":1771861048230,"message":"  ● Battle Event Logging Integration › should log battle_complete event when a battle is processed\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |\n      22 |     // Create cycle metadata if it doesn't exist\n      23 |     await prisma.cycleMetadata.upsert({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/battleEventLogging.test.ts:20:5)\n\n  ● Battle Event Logging Integration › should log battle_complete event when a battle is processed\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:27\n\n       98 \n       99 afterEach(async () => {\n      100   // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)\n    → 101   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n       99 |   afterEach(async () => {\n      100 |     // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)\n    > 101 |     await prisma.auditLog.deleteMany({});\n          |     ^\n      102 |     await prisma.battleParticipant.deleteMany({});\n      103 |     await prisma.battle.deleteMany({});\n      104 |   });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleEventLogging.test.ts:101:5)\n\n  ● Battle Event Logging Integration › should maintain Battle table records alongside event logs\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |\n      19 |   beforeAll(async () => {\n    > 20 |     await prisma.$connect();\n         |     ^\n      21 |\n      22 |     // Create cycle metadata if it doesn't exist\n      23 |     await prisma.cycleMetadata.upsert({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/battleEventLogging.test.ts:20:5)\n\n  ● Battle Event Logging Integration › should maintain Battle table records alongside event logs\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:27\n\n       98 \n       99 afterEach(async () => {\n      100   // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)\n    → 101   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n       99 |   afterEach(async () => {\n      100 |     // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)\n    > 101 |     await prisma.auditLog.deleteMany({});\n          |     ^\n      102 |     await prisma.battleParticipant.deleteMany({});\n      103 |     await prisma.battle.deleteMany({});\n      104 |   });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleEventLogging.test.ts:101:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:108:27\n\n      105 \n      106 afterAll(async () => {\n      107   // Final cleanup\n    → 108   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      106 |   afterAll(async () => {\n      107 |     // Final cleanup\n    > 108 |     await prisma.auditLog.deleteMany({});\n          |     ^\n      109 |     await prisma.battleParticipant.deleteMany({});\n      110 |     await prisma.battle.deleteMany({});\n      111 |     await prisma.scheduledMatch.deleteMany({});\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/battleEventLogging.test.ts:108:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Matches Routes","GET /api/matches/upcoming"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/upcoming should get upcoming matches with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get upcoming matches with auth"},{"ancestorTitles":["Matches Routes","GET /api/matches/upcoming"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/upcoming should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Matches Routes","GET /api/matches/upcoming"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/upcoming should return 403 with invalid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 with invalid token"},{"ancestorTitles":["Matches Routes","GET /api/matches/history"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/history should get match history with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get match history with auth"},{"ancestorTitles":["Matches Routes","GET /api/matches/history"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/history should support pagination","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support pagination"},{"ancestorTitles":["Matches Routes","GET /api/matches/history"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/history should filter by robot ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should filter by robot ID"},{"ancestorTitles":["Matches Routes","GET /api/matches/history"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/history should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Matches Routes","GET /api/matches/battles/:id/log"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/battles/:id/log should return 401 without authentication","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 401 without authentication"},{"ancestorTitles":["Matches Routes","GET /api/matches/battles/:id/log"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/battles/:id/log should return 403 with invalid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 403 with invalid token"},{"ancestorTitles":["Matches Routes","GET /api/matches/battles/:id/log"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts:27:5)"],"fullName":"Matches Routes GET /api/matches/battles/:id/log should handle non-existent battle ID with auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle non-existent battle ID with auth"}],"endTime":1771861042515,"message":"  ● Matches Routes › GET /api/matches/upcoming › should get upcoming matches with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/upcoming › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/upcoming › should return 403 with invalid token\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/history › should get match history with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/history › should support pagination\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/history › should filter by robot ID\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/history › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/battles/:id/log › should return 401 without authentication\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/battles/:id/log › should return 403 with invalid token\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n\n  ● Matches Routes › GET /api/matches/battles/:id/log › should handle non-existent battle ID with auth\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |\n      26 |   beforeAll(async () => {\n    > 27 |     await prisma.$connect();\n         |     ^\n      28 |     \n      29 |     // Create test user\n      30 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/matches.test.ts:27:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matches.test.ts","startTime":1771861042450,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team Database Schema Verification","TagTeam Model"],"duration":10,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:13:23)"],"fullName":"Tag Team Database Schema Verification TagTeam Model should have all required fields","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have all required fields"},{"ancestorTitles":["Tag Team Database Schema Verification","TagTeam Model"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:39:23)"],"fullName":"Tag Team Database Schema Verification TagTeam Model should have all required indexes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have all required indexes"},{"ancestorTitles":["Tag Team Database Schema Verification","TagTeam Model"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:58:23)"],"fullName":"Tag Team Database Schema Verification TagTeam Model should have unique constraint on robot pair","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have unique constraint on robot pair"},{"ancestorTitles":["Tag Team Database Schema Verification","TagTeam Model"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:70:27)"],"fullName":"Tag Team Database Schema Verification TagTeam Model should have check constraint for different robots","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have check constraint for different robots"},{"ancestorTitles":["Tag Team Database Schema Verification","TagTeamMatch Model"],"duration":15,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:84:23)"],"fullName":"Tag Team Database Schema Verification TagTeamMatch Model should have all required fields","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have all required fields"},{"ancestorTitles":["Tag Team Database Schema Verification","TagTeamMatch Model"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:105:23)"],"fullName":"Tag Team Database Schema Verification TagTeamMatch Model should have all required indexes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have all required indexes"},{"ancestorTitles":["Tag Team Database Schema Verification","Battle Model Extensions"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:124:23)"],"fullName":"Tag Team Database Schema Verification Battle Model Extensions should have tag team fields","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have tag team fields"},{"ancestorTitles":["Tag Team Database Schema Verification","Battle Model Extensions"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:152:23)"],"fullName":"Tag Team Database Schema Verification Battle Model Extensions should have battle_type index","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have battle_type index"},{"ancestorTitles":["Tag Team Database Schema Verification","Robot Model Extensions"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:165:23)"],"fullName":"Tag Team Database Schema Verification Robot Model Extensions should have tag team statistics fields","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have tag team statistics fields"},{"ancestorTitles":["Tag Team Database Schema Verification","Foreign Key Constraints"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:198:27)"],"fullName":"Tag Team Database Schema Verification Foreign Key Constraints should have all TagTeam foreign keys","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have all TagTeam foreign keys"},{"ancestorTitles":["Tag Team Database Schema Verification","Foreign Key Constraints"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.$queryRaw()` invocation:\n\n\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts:221:27)"],"fullName":"Tag Team Database Schema Verification Foreign Key Constraints should have all TagTeamMatch foreign keys","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have all TagTeamMatch foreign keys"}],"endTime":1771861042630,"message":"  ● Tag Team Database Schema Verification › TagTeam Model › should have all required fields\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      11 |     it('should have all required fields', async () => {\n      12 |       // Query the information schema to verify table structure\n    > 13 |       const columns = await prisma.$queryRaw<any[]>`\n         |                       ^\n      14 |         SELECT column_name, data_type, is_nullable, column_default\n      15 |         FROM information_schema.columns\n      16 |         WHERE table_name = 'tag_teams'\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:13:23)\n\n  ● Tag Team Database Schema Verification › TagTeam Model › should have all required indexes\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      37 |\n      38 |     it('should have all required indexes', async () => {\n    > 39 |       const indexes = await prisma.$queryRaw<any[]>`\n         |                       ^\n      40 |         SELECT indexname, indexdef\n      41 |         FROM pg_indexes\n      42 |         WHERE tablename = 'tag_teams';\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:39:23)\n\n  ● Tag Team Database Schema Verification › TagTeam Model › should have unique constraint on robot pair\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |     it('should have unique constraint on robot pair', async () => {\n      57 |       // The unique constraint is implemented as a unique index\n    > 58 |       const indexes = await prisma.$queryRaw<any[]>`\n         |                       ^\n      59 |         SELECT indexname, indexdef\n      60 |         FROM pg_indexes\n      61 |         WHERE tablename = 'tag_teams'\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:58:23)\n\n  ● Tag Team Database Schema Verification › TagTeam Model › should have check constraint for different robots\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      68 |\n      69 |     it('should have check constraint for different robots', async () => {\n    > 70 |       const constraints = await prisma.$queryRaw<any[]>`\n         |                           ^\n      71 |         SELECT conname, contype\n      72 |         FROM pg_constraint\n      73 |         WHERE conrelid = 'tag_teams'::regclass\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:70:27)\n\n  ● Tag Team Database Schema Verification › TagTeamMatch Model › should have all required fields\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      82 |   describe('TagTeamMatch Model', () => {\n      83 |     it('should have all required fields', async () => {\n    > 84 |       const columns = await prisma.$queryRaw<any[]>`\n         |                       ^\n      85 |         SELECT column_name, data_type, is_nullable, column_default\n      86 |         FROM information_schema.columns\n      87 |         WHERE table_name = 'tag_team_matches'\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:84:23)\n\n  ● Tag Team Database Schema Verification › TagTeamMatch Model › should have all required indexes\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      103 |\n      104 |     it('should have all required indexes', async () => {\n    > 105 |       const indexes = await prisma.$queryRaw<any[]>`\n          |                       ^\n      106 |         SELECT indexname, indexdef\n      107 |         FROM pg_indexes\n      108 |         WHERE tablename = 'tag_team_matches';\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:105:23)\n\n  ● Tag Team Database Schema Verification › Battle Model Extensions › should have tag team fields\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      122 |   describe('Battle Model Extensions', () => {\n      123 |     it('should have tag team fields', async () => {\n    > 124 |       const columns = await prisma.$queryRaw<any[]>`\n          |                       ^\n      125 |         SELECT column_name, data_type, is_nullable\n      126 |         FROM information_schema.columns\n      127 |         WHERE table_name = 'battles'\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:124:23)\n\n  ● Tag Team Database Schema Verification › Battle Model Extensions › should have battle_type index\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      150 |\n      151 |     it('should have battle_type index', async () => {\n    > 152 |       const indexes = await prisma.$queryRaw<any[]>`\n          |                       ^\n      153 |         SELECT indexname, indexdef\n      154 |         FROM pg_indexes\n      155 |         WHERE tablename = 'battles'\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:152:23)\n\n  ● Tag Team Database Schema Verification › Robot Model Extensions › should have tag team statistics fields\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      163 |   describe('Robot Model Extensions', () => {\n      164 |     it('should have tag team statistics fields', async () => {\n    > 165 |       const columns = await prisma.$queryRaw<any[]>`\n          |                       ^\n      166 |         SELECT column_name, data_type, is_nullable, column_default\n      167 |         FROM information_schema.columns\n      168 |         WHERE table_name = 'robots'\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:165:23)\n\n  ● Tag Team Database Schema Verification › Foreign Key Constraints › should have all TagTeam foreign keys\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      196 |   describe('Foreign Key Constraints', () => {\n      197 |     it('should have all TagTeam foreign keys', async () => {\n    > 198 |       const foreignKeys = await prisma.$queryRaw<any[]>`\n          |                           ^\n      199 |         SELECT\n      200 |           tc.constraint_name,\n      201 |           kcu.column_name,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:198:27)\n\n  ● Tag Team Database Schema Verification › Foreign Key Constraints › should have all TagTeamMatch foreign keys\n\n    PrismaClientInitializationError: \n    Invalid `prisma.$queryRaw()` invocation:\n\n\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      219 |\n      220 |     it('should have all TagTeamMatch foreign keys', async () => {\n    > 221 |       const foreignKeys = await prisma.$queryRaw<any[]>`\n          |                           ^\n      222 |         SELECT\n      223 |           tc.constraint_name,\n      224 |           kcu.column_name,\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:221:27)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamDatabaseSchema.test.ts","startTime":1771861042517,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Leagues Routes","GET /api/leagues/:tier/standings"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagues.test.ts:26:5)"],"fullName":"Leagues Routes GET /api/leagues/:tier/standings should get bronze league standings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get bronze league standings"},{"ancestorTitles":["Leagues Routes","GET /api/leagues/:tier/standings"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagues.test.ts:26:5)"],"fullName":"Leagues Routes GET /api/leagues/:tier/standings should get silver league standings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get silver league standings"},{"ancestorTitles":["Leagues Routes","GET /api/leagues/:tier/standings"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagues.test.ts:26:5)"],"fullName":"Leagues Routes GET /api/leagues/:tier/standings should return 400 for invalid tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 for invalid tier"},{"ancestorTitles":["Leagues Routes","GET /api/leagues/:tier/standings"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagues.test.ts:26:5)"],"fullName":"Leagues Routes GET /api/leagues/:tier/standings should support pagination","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should support pagination"},{"ancestorTitles":["Leagues Routes","GET /api/leagues/:tier/instances"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagues.test.ts:26:5)"],"fullName":"Leagues Routes GET /api/leagues/:tier/instances should get bronze league instances","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get bronze league instances"},{"ancestorTitles":["Leagues Routes","GET /api/leagues/:tier/instances"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagues.test.ts:26:5)"],"fullName":"Leagues Routes GET /api/leagues/:tier/instances should return 400 for invalid tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 for invalid tier"}],"endTime":1771861042703,"message":"  ● Leagues Routes › GET /api/leagues/:tier/standings › should get bronze league standings\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leagues.test.ts:26:5)\n\n  ● Leagues Routes › GET /api/leagues/:tier/standings › should get silver league standings\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leagues.test.ts:26:5)\n\n  ● Leagues Routes › GET /api/leagues/:tier/standings › should return 400 for invalid tier\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leagues.test.ts:26:5)\n\n  ● Leagues Routes › GET /api/leagues/:tier/standings › should support pagination\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leagues.test.ts:26:5)\n\n  ● Leagues Routes › GET /api/leagues/:tier/instances › should get bronze league instances\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leagues.test.ts:26:5)\n\n  ● Leagues Routes › GET /api/leagues/:tier/instances › should return 400 for invalid tier\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      24 |\n      25 |   beforeAll(async () => {\n    > 26 |     await prisma.$connect();\n         |     ^\n      27 |     \n      28 |     // Create test user\n      29 |     testUser = await createTestUser();\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/leagues.test.ts:26:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagues.test.ts","startTime":1771861042634,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team League Standings Property Tests"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40\n\n  22 \n  23 beforeAll(async () => {\n  24   // Create test user\n→ 25   const testUser = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:22)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up teams and robots after each test\n→ 58   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:5)"],"fullName":"Tag Team League Standings Property Tests should maintain independent 1v1 and tag team league standings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should maintain independent 1v1 and tag team league standings"},{"ancestorTitles":["Tag Team League Standings Property Tests"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40\n\n  22 \n  23 beforeAll(async () => {\n  24   // Create test user\n→ 25   const testUser = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:22)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up teams and robots after each test\n→ 58   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:5)"],"fullName":"Tag Team League Standings Property Tests should not affect robot 1v1 standings when tag team league changes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not affect robot 1v1 standings when tag team league changes"},{"ancestorTitles":["Tag Team League Standings Property Tests"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40\n\n  22 \n  23 beforeAll(async () => {\n  24   // Create test user\n→ 25   const testUser = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:22)","PrismaClientInitializationError: \nInvalid `prisma.tagTeam.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26\n\n  55 \n  56 afterEach(async () => {\n  57   // Clean up teams and robots after each test\n→ 58   await prisma.tagTeam.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:5)"],"fullName":"Tag Team League Standings Property Tests should allow robots with different 1v1 leagues to be in the same tag team","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow robots with different 1v1 leagues to be in the same tag team"}],"coverage":{},"endTime":1771861048230,"message":"  ● Tag Team League Standings Property Tests › should maintain independent 1v1 and tag team league standings\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40\n\n      22 \n      23 beforeAll(async () => {\n      24   // Create test user\n    → 25   const testUser = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |   beforeAll(async () => {\n      24 |     // Create test user\n    > 25 |     const testUser = await prisma.user.create({\n         |                      ^\n      26 |       data: {\n      27 |         username: `pbt_standings_user_${Date.now()}`,\n      28 |         passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)\n\n  ● Tag Team League Standings Property Tests › should maintain independent 1v1 and tag team league standings\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up teams and robots after each test\n    → 58   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up teams and robots after each test\n    > 58 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      59 |       where: { stableId: testUserId },\n      60 |     });\n      61 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)\n\n  ● Tag Team League Standings Property Tests › should not affect robot 1v1 standings when tag team league changes\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40\n\n      22 \n      23 beforeAll(async () => {\n      24   // Create test user\n    → 25   const testUser = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |   beforeAll(async () => {\n      24 |     // Create test user\n    > 25 |     const testUser = await prisma.user.create({\n         |                      ^\n      26 |       data: {\n      27 |         username: `pbt_standings_user_${Date.now()}`,\n      28 |         passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)\n\n  ● Tag Team League Standings Property Tests › should not affect robot 1v1 standings when tag team league changes\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up teams and robots after each test\n    → 58   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up teams and robots after each test\n    > 58 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      59 |       where: { stableId: testUserId },\n      60 |     });\n      61 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)\n\n  ● Tag Team League Standings Property Tests › should allow robots with different 1v1 leagues to be in the same tag team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40\n\n      22 \n      23 beforeAll(async () => {\n      24   // Create test user\n    → 25   const testUser = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      23 |   beforeAll(async () => {\n      24 |     // Create test user\n    > 25 |     const testUser = await prisma.user.create({\n         |                      ^\n      26 |       data: {\n      27 |         username: `pbt_standings_user_${Date.now()}`,\n      28 |         passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)\n\n  ● Tag Team League Standings Property Tests › should allow robots with different 1v1 leagues to be in the same tag team\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26\n\n      55 \n      56 afterEach(async () => {\n      57   // Clean up teams and robots after each test\n    → 58   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      56 |   afterEach(async () => {\n      57 |     // Clean up teams and robots after each test\n    > 58 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      59 |       where: { stableId: testUserId },\n      60 |     });\n      61 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.tagTeam.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:41:26\n\n      38 \n      39 afterAll(async () => {\n      40   // Clean up test data\n    → 41   await prisma.tagTeam.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      39 |   afterAll(async () => {\n      40 |     // Clean up test data\n    > 41 |     await prisma.tagTeam.deleteMany({\n         |     ^\n      42 |       where: { stableId: testUserId },\n      43 |     });\n      44 |     await prisma.robot.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:41:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should update stable name successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update stable name successfully"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should update profile visibility successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update profile visibility successfully"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should update notification preferences successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update notification preferences successfully"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should update theme preference successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update theme preference successfully"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should update multiple fields at once","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update multiple fields at once"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should change password successfully with correct current password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should change password successfully with correct current password"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject password change with incorrect current password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject password change with incorrect current password"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject password change without current password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject password change without current password"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject stable name that is too short","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject stable name that is too short"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject stable name that is too long","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject stable name that is too long"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject stable name with invalid characters","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject stable name with invalid characters"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject stable name with profanity","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject stable name with profanity"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject duplicate stable name","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject duplicate stable name"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject weak password (too short)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject weak password (too short)"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject weak password (no uppercase)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject weak password (no uppercase)"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject weak password (no lowercase)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject weak password (no lowercase)"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject weak password (no number)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject weak password (no number)"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject invalid profile visibility value","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject invalid profile visibility value"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject invalid theme preference value","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject invalid theme preference value"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject request without authentication token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request without authentication token"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should reject request with invalid authentication token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reject request with invalid authentication token"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should preserve unchanged fields when updating partial data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should preserve unchanged fields when updating partial data"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should return all profile fields in response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return all profile fields in response"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should have default visibility set to public for new users","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should have default visibility set to public for new users"},{"ancestorTitles":["Profile Update Endpoint","PUT /api/user/profile"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts:29:5)"],"fullName":"Profile Update Endpoint PUT /api/user/profile should return 400 with validation errors for multiple invalid fields","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 with validation errors for multiple invalid fields"}],"endTime":1771861042856,"message":"  ● Profile Update Endpoint › PUT /api/user/profile › should update stable name successfully\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should update profile visibility successfully\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should update notification preferences successfully\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should update theme preference successfully\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should update multiple fields at once\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should change password successfully with correct current password\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject password change with incorrect current password\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject password change without current password\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name that is too short\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name that is too long\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name with invalid characters\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name with profanity\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject duplicate stable name\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (too short)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no uppercase)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no lowercase)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no number)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject invalid profile visibility value\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject invalid theme preference value\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject request without authentication token\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should reject request with invalid authentication token\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should preserve unchanged fields when updating partial data\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should return all profile fields in response\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should have default visibility set to public for new users\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n\n  ● Profile Update Endpoint › PUT /api/user/profile › should return 400 with validation errors for multiple invalid fields\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      27 |\n      28 |   beforeAll(async () => {\n    > 29 |     await prisma.$connect();\n         |     ^\n      30 |     \n      31 |     // Create a test user\n      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.test.ts","startTime":1771861042779,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["EventLogger Integration"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:27\n\n  12 \n  13 beforeEach(async () => {\n  14   // Clean up audit logs before each test\n→ 15   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:5)"],"fullName":"EventLogger Integration should successfully log events to the database","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should successfully log events to the database"},{"ancestorTitles":["EventLogger Integration"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:27\n\n  12 \n  13 beforeEach(async () => {\n  14   // Clean up audit logs before each test\n→ 15   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:5)"],"fullName":"EventLogger Integration should handle batch logging efficiently","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle batch logging efficiently"}],"endTime":1771861042892,"message":"  ● EventLogger Integration › should successfully log events to the database\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:27\n\n      12 \n      13 beforeEach(async () => {\n      14   // Clean up audit logs before each test\n    → 15   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeEach(async () => {\n      14 |     // Clean up audit logs before each test\n    > 15 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.integration.test.ts:15:5)\n\n  ● EventLogger Integration › should handle batch logging efficiently\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:27\n\n      12 \n      13 beforeEach(async () => {\n      14   // Clean up audit logs before each test\n    → 15   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |   beforeEach(async () => {\n      14 |     // Clean up audit logs before each test\n    > 15 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/eventLogger.integration.test.ts:15:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts","startTime":1771861042858,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Two-Robot Specialist Tag Team Generation"],"duration":12,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:13:5)","PrismaClientInitializationError: \nInvalid `prisma.user.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46\n\n  24 \n  25 afterEach(async () => {\n  26   // Clean up archetype users and their data after each test\n→ 27   const archetypeUsers = await prisma.user.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:28)"],"fullName":"Two-Robot Specialist Tag Team Generation should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)"},{"ancestorTitles":["Two-Robot Specialist Tag Team Generation"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:13:5)","PrismaClientInitializationError: \nInvalid `prisma.user.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46\n\n  24 \n  25 afterEach(async () => {\n  26   // Clean up archetype users and their data after each test\n→ 27   const archetypeUsers = await prisma.user.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:28)"],"fullName":"Two-Robot Specialist Tag Team Generation should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)"},{"ancestorTitles":["Two-Robot Specialist Tag Team Generation"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:13:5)","PrismaClientInitializationError: \nInvalid `prisma.user.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46\n\n  24 \n  25 afterEach(async () => {\n  26   // Clean up archetype users and their data after each test\n→ 27   const archetypeUsers = await prisma.user.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:28)"],"fullName":"Two-Robot Specialist Tag Team Generation should not create tag teams for single-robot archetypes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not create tag teams for single-robot archetypes"},{"ancestorTitles":["Two-Robot Specialist Tag Team Generation"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:13:5)","PrismaClientInitializationError: \nInvalid `prisma.user.findMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46\n\n  24 \n  25 afterEach(async () => {\n  26   // Clean up archetype users and their data after each test\n→ 27   const archetypeUsers = await prisma.user.findMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:28)"],"fullName":"Two-Robot Specialist Tag Team Generation should create tag teams with correct robot assignments","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create tag teams with correct robot assignments"}],"endTime":1771861042962,"message":"  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      11 | describe('Two-Robot Specialist Tag Team Generation', () => {\n      12 |   beforeAll(async () => {\n    > 13 |     await prisma.$connect();\n         |     ^\n      14 |     \n      15 |     // Ensure weapons exist\n      16 |     const practiceSword = await prisma.weapon.findFirst({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)\n\n  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46\n\n      24 \n      25 afterEach(async () => {\n      26   // Clean up archetype users and their data after each test\n    → 27   const archetypeUsers = await prisma.user.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |   afterEach(async () => {\n      26 |     // Clean up archetype users and their data after each test\n    > 27 |     const archetypeUsers = await prisma.user.findMany({\n         |                            ^\n      28 |       where: { username: { startsWith: 'archetype_' } },\n      29 |       select: { id: true },\n      30 |     });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)\n\n  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      11 | describe('Two-Robot Specialist Tag Team Generation', () => {\n      12 |   beforeAll(async () => {\n    > 13 |     await prisma.$connect();\n         |     ^\n      14 |     \n      15 |     // Ensure weapons exist\n      16 |     const practiceSword = await prisma.weapon.findFirst({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)\n\n  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46\n\n      24 \n      25 afterEach(async () => {\n      26   // Clean up archetype users and their data after each test\n    → 27   const archetypeUsers = await prisma.user.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |   afterEach(async () => {\n      26 |     // Clean up archetype users and their data after each test\n    > 27 |     const archetypeUsers = await prisma.user.findMany({\n         |                            ^\n      28 |       where: { username: { startsWith: 'archetype_' } },\n      29 |       select: { id: true },\n      30 |     });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)\n\n  ● Two-Robot Specialist Tag Team Generation › should not create tag teams for single-robot archetypes\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      11 | describe('Two-Robot Specialist Tag Team Generation', () => {\n      12 |   beforeAll(async () => {\n    > 13 |     await prisma.$connect();\n         |     ^\n      14 |     \n      15 |     // Ensure weapons exist\n      16 |     const practiceSword = await prisma.weapon.findFirst({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)\n\n  ● Two-Robot Specialist Tag Team Generation › should not create tag teams for single-robot archetypes\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46\n\n      24 \n      25 afterEach(async () => {\n      26   // Clean up archetype users and their data after each test\n    → 27   const archetypeUsers = await prisma.user.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |   afterEach(async () => {\n      26 |     // Clean up archetype users and their data after each test\n    > 27 |     const archetypeUsers = await prisma.user.findMany({\n         |                            ^\n      28 |       where: { username: { startsWith: 'archetype_' } },\n      29 |       select: { id: true },\n      30 |     });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)\n\n  ● Two-Robot Specialist Tag Team Generation › should create tag teams with correct robot assignments\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      11 | describe('Two-Robot Specialist Tag Team Generation', () => {\n      12 |   beforeAll(async () => {\n    > 13 |     await prisma.$connect();\n         |     ^\n      14 |     \n      15 |     // Ensure weapons exist\n      16 |     const practiceSword = await prisma.weapon.findFirst({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)\n\n  ● Two-Robot Specialist Tag Team Generation › should create tag teams with correct robot assignments\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.findMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46\n\n      24 \n      25 afterEach(async () => {\n      26   // Clean up archetype users and their data after each test\n    → 27   const archetypeUsers = await prisma.user.findMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      25 |   afterEach(async () => {\n      26 |     // Clean up archetype users and their data after each test\n    > 27 |     const archetypeUsers = await prisma.user.findMany({\n         |                            ^\n      28 |       where: { username: { startsWith: 'archetype_' } },\n      29 |       select: { id: true },\n      30 |     });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts","startTime":1771861042895,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["DataIntegrityService","validateCycleIntegrity"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService validateCycleIntegrity should pass validation for a complete, valid cycle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should pass validation for a complete, valid cycle"},{"ancestorTitles":["DataIntegrityService","validateCycleIntegrity"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService validateCycleIntegrity should detect missing cycle_start event","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect missing cycle_start event"},{"ancestorTitles":["DataIntegrityService","validateCycleIntegrity"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService validateCycleIntegrity should detect missing cycle_complete event","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect missing cycle_complete event"},{"ancestorTitles":["DataIntegrityService","validateCycleIntegrity"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService validateCycleIntegrity should detect incomplete cycle steps","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect incomplete cycle steps"},{"ancestorTitles":["DataIntegrityService","checkSequenceNumbers"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService checkSequenceNumbers should detect sequence number gaps","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect sequence number gaps"},{"ancestorTitles":["DataIntegrityService","checkSequenceNumbers"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService checkSequenceNumbers should pass with continuous sequence numbers","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should pass with continuous sequence numbers"},{"ancestorTitles":["DataIntegrityService","checkCreditConsistency"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService checkCreditConsistency should detect credit sum mismatch","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect credit sum mismatch"},{"ancestorTitles":["DataIntegrityService","checkCreditConsistency"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService checkCreditConsistency should pass with matching credit sums","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should pass with matching credit sums"},{"ancestorTitles":["DataIntegrityService","checkCreditConsistency"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService checkCreditConsistency should allow 1 credit tolerance for rounding","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow 1 credit tolerance for rounding"},{"ancestorTitles":["DataIntegrityService","validateCycleRange"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService validateCycleRange should validate multiple cycles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should validate multiple cycles"},{"ancestorTitles":["DataIntegrityService","getIntegritySummary"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts:15:5)"],"fullName":"DataIntegrityService getIntegritySummary should provide summary of integrity issues","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should provide summary of integrity issues"}],"endTime":1771861043006,"message":"  ● DataIntegrityService › validateCycleIntegrity › should pass validation for a complete, valid cycle\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › validateCycleIntegrity › should detect missing cycle_start event\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › validateCycleIntegrity › should detect missing cycle_complete event\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › validateCycleIntegrity › should detect incomplete cycle steps\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › checkSequenceNumbers › should detect sequence number gaps\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › checkSequenceNumbers › should pass with continuous sequence numbers\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › checkCreditConsistency › should detect credit sum mismatch\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › checkCreditConsistency › should pass with matching credit sums\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › checkCreditConsistency › should allow 1 credit tolerance for rounding\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › validateCycleRange › should validate multiple cycles\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n\n  ● DataIntegrityService › getIntegritySummary › should provide summary of integrity issues\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      13 |\n      14 |   beforeAll(async () => {\n    > 15 |     await prisma.$connect();\n         |     ^\n      16 |   });\n      17 |\n      18 |   afterAll(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/dataIntegrityService.test.ts","startTime":1771861042964,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["CycleSnapshotService"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up any existing test data\n→ 18   await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:5)"],"fullName":"CycleSnapshotService should create a cycle snapshot with cycle start and complete events","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a cycle snapshot with cycle start and complete events"},{"ancestorTitles":["CycleSnapshotService"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up any existing test data\n→ 18   await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:5)"],"fullName":"CycleSnapshotService should retrieve a snapshot by cycle number","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should retrieve a snapshot by cycle number"},{"ancestorTitles":["CycleSnapshotService"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up any existing test data\n→ 18   await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:5)"],"fullName":"CycleSnapshotService should return null for non-existent snapshot","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return null for non-existent snapshot"},{"ancestorTitles":["CycleSnapshotService"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up any existing test data\n→ 18   await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:5)"],"fullName":"CycleSnapshotService should retrieve snapshots for a range of cycles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should retrieve snapshots for a range of cycles"},{"ancestorTitles":["CycleSnapshotService"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up any existing test data\n→ 18   await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:5)"],"fullName":"CycleSnapshotService should throw error if cycle is incomplete (missing start event)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error if cycle is incomplete (missing start event)"},{"ancestorTitles":["CycleSnapshotService"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up any existing test data\n→ 18   await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:5)"],"fullName":"CycleSnapshotService should throw error if cycle is incomplete (missing complete event)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error if cycle is incomplete (missing complete event)"},{"ancestorTitles":["CycleSnapshotService"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.cycleSnapshot.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n  15 \n  16 beforeAll(async () => {\n  17   // Clean up any existing test data\n→ 18   await prisma.cycleSnapshot.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:5)"],"fullName":"CycleSnapshotService should aggregate step durations from cycle step events","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should aggregate step durations from cycle step events"}],"coverage":{},"endTime":1771861048230,"message":"  ● CycleSnapshotService › should create a cycle snapshot with cycle start and complete events\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up any existing test data\n    → 18   await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up any existing test data\n    > 18 |     await prisma.cycleSnapshot.deleteMany({\n         |     ^\n      19 |       where: { cycleNumber: testCycleNumber },\n      20 |     });\n      21 |     await prisma.auditLog.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)\n\n  ● CycleSnapshotService › should retrieve a snapshot by cycle number\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up any existing test data\n    → 18   await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up any existing test data\n    > 18 |     await prisma.cycleSnapshot.deleteMany({\n         |     ^\n      19 |       where: { cycleNumber: testCycleNumber },\n      20 |     });\n      21 |     await prisma.auditLog.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)\n\n  ● CycleSnapshotService › should return null for non-existent snapshot\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up any existing test data\n    → 18   await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up any existing test data\n    > 18 |     await prisma.cycleSnapshot.deleteMany({\n         |     ^\n      19 |       where: { cycleNumber: testCycleNumber },\n      20 |     });\n      21 |     await prisma.auditLog.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)\n\n  ● CycleSnapshotService › should retrieve snapshots for a range of cycles\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up any existing test data\n    → 18   await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up any existing test data\n    > 18 |     await prisma.cycleSnapshot.deleteMany({\n         |     ^\n      19 |       where: { cycleNumber: testCycleNumber },\n      20 |     });\n      21 |     await prisma.auditLog.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)\n\n  ● CycleSnapshotService › should throw error if cycle is incomplete (missing start event)\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up any existing test data\n    → 18   await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up any existing test data\n    > 18 |     await prisma.cycleSnapshot.deleteMany({\n         |     ^\n      19 |       where: { cycleNumber: testCycleNumber },\n      20 |     });\n      21 |     await prisma.auditLog.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)\n\n  ● CycleSnapshotService › should throw error if cycle is incomplete (missing complete event)\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up any existing test data\n    → 18   await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up any existing test data\n    > 18 |     await prisma.cycleSnapshot.deleteMany({\n         |     ^\n      19 |       where: { cycleNumber: testCycleNumber },\n      20 |     });\n      21 |     await prisma.auditLog.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)\n\n  ● CycleSnapshotService › should aggregate step durations from cycle step events\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32\n\n      15 \n      16 beforeAll(async () => {\n      17   // Clean up any existing test data\n    → 18   await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |   beforeAll(async () => {\n      17 |     // Clean up any existing test data\n    > 18 |     await prisma.cycleSnapshot.deleteMany({\n         |     ^\n      19 |       where: { cycleNumber: testCycleNumber },\n      20 |     });\n      21 |     await prisma.auditLog.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:28:32\n\n      25 \n      26 afterAll(async () => {\n      27   // Clean up test data\n    → 28   await prisma.cycleSnapshot.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      26 |   afterAll(async () => {\n      27 |     // Clean up test data\n    > 28 |     await prisma.cycleSnapshot.deleteMany({\n         |     ^\n      29 |       where: { cycleNumber: testCycleNumber },\n      30 |     });\n      31 |     await prisma.auditLog.deleteMany({\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:28:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Repair Bay has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Repair Bay has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Training Facility has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Training Facility has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Weapons Workshop has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Weapons Workshop has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Research Lab has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Research Lab has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Medical Bay has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Medical Bay has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Roster Expansion has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Roster Expansion has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Coaching Staff has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Coaching Staff has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Booking Office has prestige requirements for all levels","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Booking Office has prestige requirements for all levels"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Combat Training Academy has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Combat Training Academy has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Defense Training Academy has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Defense Training Academy has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Mobility Training Academy has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Mobility Training Academy has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements AI Training Academy has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"AI Training Academy has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(received).toBeDefined()\n\nReceived: undefined","pass":false}}],"failureMessages":["Error: expect(received).toBeDefined()\n\nReceived: undefined\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/prestigeGates.test.ts:91:22)\n    at Promise.then.completed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Prestige Gates Facility Config Prestige Requirements Income Generator has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Income Generator has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Storage Facility has no prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Storage Facility has no prestige requirements"},{"ancestorTitles":["Prestige Gates","Facility Config Prestige Requirements"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Facility Config Prestige Requirements Streaming Studio has correct prestige requirements","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"Streaming Studio has correct prestige requirements"},{"ancestorTitles":["Prestige Gates","Prestige Requirement Validation Logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Prestige Requirement Validation Logic should identify when prestige requirement exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should identify when prestige requirement exists"},{"ancestorTitles":["Prestige Gates","Prestige Requirement Validation Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Prestige Requirement Validation Logic should identify when no prestige requirement exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should identify when no prestige requirement exists"},{"ancestorTitles":["Prestige Gates","Prestige Requirement Validation Logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Prestige Requirement Validation Logic should handle facilities without prestigeRequirements field","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle facilities without prestigeRequirements field"},{"ancestorTitles":["Prestige Gates","Prestige Requirement Validation Logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Prestige Requirement Validation Logic should correctly validate user has sufficient prestige","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should correctly validate user has sufficient prestige"},{"ancestorTitles":["Prestige Gates","Prestige Requirement Validation Logic"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Prestige Requirement Validation Logic should correctly validate user has insufficient prestige","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should correctly validate user has insufficient prestige"},{"ancestorTitles":["Prestige Gates","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Edge Cases should handle level 1 upgrades (always no prestige requirement)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle level 1 upgrades (always no prestige requirement)"},{"ancestorTitles":["Prestige Gates","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Edge Cases should handle max level facilities","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle max level facilities"},{"ancestorTitles":["Prestige Gates","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Prestige Gates Edge Cases should handle roster expansion with 9 levels","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle roster expansion with 9 levels"}],"endTime":1771861043087,"message":"  ● Prestige Gates › Facility Config Prestige Requirements › Income Generator has correct prestige requirements\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      89 |     test('Income Generator has correct prestige requirements', () => {\n      90 |       const config = getFacilityConfig('income_generator');\n    > 91 |       expect(config).toBeDefined();\n         |                      ^\n      92 |       expect(config?.prestigeRequirements).toEqual([0, 0, 0, 3000, 0, 0, 7500, 0, 15000, 0]);\n      93 |     });\n      94 |\n\n      at Object.<anonymous> (tests/prestigeGates.test.ts:91:22)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/prestigeGates.test.ts","startTime":1771861043057,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team League Rebalancing - Property Tests","Property 20: Tier Change Resets"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n  19 \n  20 beforeAll(async () => {\n  21   // Create a test stable\n→ 22   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:20)"],"fullName":"Tag Team League Rebalancing - Property Tests Property 20: Tier Change Resets promotion resets league points and cycles to 0","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"promotion resets league points and cycles to 0"},{"ancestorTitles":["Tag Team League Rebalancing - Property Tests","Property 20: Tier Change Resets"],"duration":1,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n  19 \n  20 beforeAll(async () => {\n  21   // Create a test stable\n→ 22   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:20)"],"fullName":"Tag Team League Rebalancing - Property Tests Property 20: Tier Change Resets demotion resets league points and cycles to 0","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"demotion resets league points and cycles to 0"},{"ancestorTitles":["Tag Team League Rebalancing - Property Tests","Property 20: Tier Change Resets"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n  19 \n  20 beforeAll(async () => {\n  21   // Create a test stable\n→ 22   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:20)"],"fullName":"Tag Team League Rebalancing - Property Tests Property 20: Tier Change Resets tier change resets work across all valid tier transitions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"tier change resets work across all valid tier transitions"},{"ancestorTitles":["Tag Team League Rebalancing - Property Tests","Property 20: Tier Change Resets"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n  19 \n  20 beforeAll(async () => {\n  21   // Create a test stable\n→ 22   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:20)"],"fullName":"Tag Team League Rebalancing - Property Tests Property 20: Tier Change Resets reset applies regardless of initial values magnitude","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"reset applies regardless of initial values magnitude"},{"ancestorTitles":["Tag Team League Rebalancing - Property Tests","Property 20: Tier Change Resets"],"duration":0,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n  19 \n  20 beforeAll(async () => {\n  21   // Create a test stable\n→ 22   const stable = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:20)"],"fullName":"Tag Team League Rebalancing - Property Tests Property 20: Tier Change Resets reset applies even when initial values are already 0","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"reset applies even when initial values are already 0"}],"endTime":1771861043138,"message":"  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › promotion resets league points and cycles to 0\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n      19 \n      20 beforeAll(async () => {\n      21   // Create a test stable\n    → 22   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |   beforeAll(async () => {\n      21 |     // Create a test stable\n    > 22 |     const stable = await prisma.user.create({\n         |                    ^\n      23 |       data: {\n      24 |         username: `pbt_rebalance_${Date.now()}`,\n      25 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)\n\n  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › demotion resets league points and cycles to 0\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n      19 \n      20 beforeAll(async () => {\n      21   // Create a test stable\n    → 22   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |   beforeAll(async () => {\n      21 |     // Create a test stable\n    > 22 |     const stable = await prisma.user.create({\n         |                    ^\n      23 |       data: {\n      24 |         username: `pbt_rebalance_${Date.now()}`,\n      25 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)\n\n  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › tier change resets work across all valid tier transitions\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n      19 \n      20 beforeAll(async () => {\n      21   // Create a test stable\n    → 22   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |   beforeAll(async () => {\n      21 |     // Create a test stable\n    > 22 |     const stable = await prisma.user.create({\n         |                    ^\n      23 |       data: {\n      24 |         username: `pbt_rebalance_${Date.now()}`,\n      25 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)\n\n  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › reset applies regardless of initial values magnitude\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n      19 \n      20 beforeAll(async () => {\n      21   // Create a test stable\n    → 22   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |   beforeAll(async () => {\n      21 |     // Create a test stable\n    > 22 |     const stable = await prisma.user.create({\n         |                    ^\n      23 |       data: {\n      24 |         username: `pbt_rebalance_${Date.now()}`,\n      25 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)\n\n  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › reset applies even when initial values are already 0\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38\n\n      19 \n      20 beforeAll(async () => {\n      21   // Create a test stable\n    → 22   const stable = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |   beforeAll(async () => {\n      21 |     // Create a test stable\n    > 22 |     const stable = await prisma.user.create({\n         |                    ^\n      23 |       data: {\n      24 |         username: `pbt_rebalance_${Date.now()}`,\n      25 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts","startTime":1771861043089,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 18: Income Generator No Longer Provides Streaming Revenue"],"duration":11,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:22:5)","PrismaClientInitializationError: \nInvalid `prisma.facility.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n  35 \n  36 afterEach(async () => {\n  37   // Clean up facilities after each test\n→ 38   await prisma.facility.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:5)"],"fullName":"Property 18: Income Generator No Longer Provides Streaming Revenue Property 18: Income Generator provides only merchandising, no streaming","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 18: Income Generator provides only merchandising, no streaming"},{"ancestorTitles":["Property 18: Income Generator No Longer Provides Streaming Revenue"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:22:5)","PrismaClientInitializationError: \nInvalid `prisma.facility.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n  35 \n  36 afterEach(async () => {\n  37   // Clean up facilities after each test\n→ 38   await prisma.facility.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:5)"],"fullName":"Property 18: Income Generator No Longer Provides Streaming Revenue Property 18.1: No Income Generator means no passive income","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 18.1: No Income Generator means no passive income"},{"ancestorTitles":["Property 18: Income Generator No Longer Provides Streaming Revenue"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:22:5)","PrismaClientInitializationError: \nInvalid `prisma.facility.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n  35 \n  36 afterEach(async () => {\n  37   // Clean up facilities after each test\n→ 38   await prisma.facility.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:5)"],"fullName":"Property 18: Income Generator No Longer Provides Streaming Revenue Property 18.2: Passive income is independent of robot stats","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 18.2: Passive income is independent of robot stats"},{"ancestorTitles":["Property 18: Income Generator No Longer Provides Streaming Revenue"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:22:5)","PrismaClientInitializationError: \nInvalid `prisma.facility.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n  35 \n  36 afterEach(async () => {\n  37   // Clean up facilities after each test\n→ 38   await prisma.facility.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:5)"],"fullName":"Property 18: Income Generator No Longer Provides Streaming Revenue Property 18.3: Merchandising scales with prestige only","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 18.3: Merchandising scales with prestige only"},{"ancestorTitles":["Property 18: Income Generator No Longer Provides Streaming Revenue"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:22:5)","PrismaClientInitializationError: \nInvalid `prisma.facility.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n  35 \n  36 afterEach(async () => {\n  37   // Clean up facilities after each test\n→ 38   await prisma.facility.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:5)"],"fullName":"Property 18: Income Generator No Longer Provides Streaming Revenue Property 18.4: All Income Generator levels provide only merchandising","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"Property 18.4: All Income Generator levels provide only merchandising"}],"coverage":{},"endTime":1771861048230,"message":"  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18: Income Generator provides only merchandising, no streaming\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     await prisma.$connect();\n         |     ^\n      23 |     \n      24 |     // Create a test user for all tests\n      25 |     const user = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:22:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18: Income Generator provides only merchandising, no streaming\n\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n      35 \n      36 afterEach(async () => {\n      37   // Clean up facilities after each test\n    → 38   await prisma.facility.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      36 |   afterEach(async () => {\n      37 |     // Clean up facilities after each test\n    > 38 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });\n         |     ^\n      39 |   });\n      40 |\n      41 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:38:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.1: No Income Generator means no passive income\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     await prisma.$connect();\n         |     ^\n      23 |     \n      24 |     // Create a test user for all tests\n      25 |     const user = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:22:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.1: No Income Generator means no passive income\n\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n      35 \n      36 afterEach(async () => {\n      37   // Clean up facilities after each test\n    → 38   await prisma.facility.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      36 |   afterEach(async () => {\n      37 |     // Clean up facilities after each test\n    > 38 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });\n         |     ^\n      39 |   });\n      40 |\n      41 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:38:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.2: Passive income is independent of robot stats\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     await prisma.$connect();\n         |     ^\n      23 |     \n      24 |     // Create a test user for all tests\n      25 |     const user = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:22:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.2: Passive income is independent of robot stats\n\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n      35 \n      36 afterEach(async () => {\n      37   // Clean up facilities after each test\n    → 38   await prisma.facility.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      36 |   afterEach(async () => {\n      37 |     // Clean up facilities after each test\n    > 38 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });\n         |     ^\n      39 |   });\n      40 |\n      41 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:38:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.3: Merchandising scales with prestige only\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     await prisma.$connect();\n         |     ^\n      23 |     \n      24 |     // Create a test user for all tests\n      25 |     const user = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:22:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.3: Merchandising scales with prestige only\n\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n      35 \n      36 afterEach(async () => {\n      37   // Clean up facilities after each test\n    → 38   await prisma.facility.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      36 |   afterEach(async () => {\n      37 |     // Clean up facilities after each test\n    > 38 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });\n         |     ^\n      39 |   });\n      40 |\n      41 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:38:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.4: All Income Generator levels provide only merchandising\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      20 |\n      21 |   beforeAll(async () => {\n    > 22 |     await prisma.$connect();\n         |     ^\n      23 |     \n      24 |     // Create a test user for all tests\n      25 |     const user = await prisma.user.create({\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:22:5)\n\n  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.4: All Income Generator levels provide only merchandising\n\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:38:27\n\n      35 \n      36 afterEach(async () => {\n      37   // Clean up facilities after each test\n    → 38   await prisma.facility.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      36 |   afterEach(async () => {\n      37 |     // Clean up facilities after each test\n    > 38 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });\n         |     ^\n      39 |   });\n      40 |\n      41 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:38:5)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.facility.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts:43:27\n\n      40 \n      41 afterAll(async () => {\n      42   // Clean up test data\n    → 43   await prisma.facility.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      41 |   afterAll(async () => {\n      42 |     // Clean up test data\n    > 43 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });\n         |     ^\n      44 |     await prisma.user.delete({ where: { id: testUserId } });\n      45 |     await prisma.$disconnect();\n      46 |   });\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:43:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/incomeGeneratorNoStreaming.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 16: Cycle Summary Includes Total Streaming Revenue"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:37\n\n  91 \n  92 beforeAll(async () => {\n  93   // Create test users\n→ 94   const user1 = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:19)","PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.findUnique()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:49\n\n  114 \n  115 afterEach(async () => {\n  116   // Get current cycle number for clearing cache\n→ 117   const metadata = await prisma.cycleMetadata.findUnique(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:22)"],"fullName":"Property 16: Cycle Summary Includes Total Streaming Revenue should include totalStreamingRevenue property in battle execution summary","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include totalStreamingRevenue property in battle execution summary"},{"ancestorTitles":["Property 16: Cycle Summary Includes Total Streaming Revenue"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.user.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:37\n\n  91 \n  92 beforeAll(async () => {\n  93   // Create test users\n→ 94   const user1 = await prisma.user.create(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:19)","PrismaClientInitializationError: \nInvalid `prisma.cycleMetadata.findUnique()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:49\n\n  114 \n  115 afterEach(async () => {\n  116   // Get current cycle number for clearing cache\n→ 117   const metadata = await prisma.cycleMetadata.findUnique(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:22)"],"fullName":"Property 16: Cycle Summary Includes Total Streaming Revenue should show ₡0 streaming revenue when no battles occurred","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should show ₡0 streaming revenue when no battles occurred"}],"coverage":{},"endTime":1771861048230,"message":"  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should include totalStreamingRevenue property in battle execution summary\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:37\n\n      91 \n      92 beforeAll(async () => {\n      93   // Create test users\n    → 94   const user1 = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      92 |   beforeAll(async () => {\n      93 |     // Create test users\n    > 94 |     const user1 = await prisma.user.create({\n         |                   ^\n      95 |       data: {\n      96 |         username: `test_cycle_summary_user1_${Date.now()}`,\n      97 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:94:19)\n\n  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should include totalStreamingRevenue property in battle execution summary\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.findUnique()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:49\n\n      114 \n      115 afterEach(async () => {\n      116   // Get current cycle number for clearing cache\n    → 117   const metadata = await prisma.cycleMetadata.findUnique(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      115 |   afterEach(async () => {\n      116 |     // Get current cycle number for clearing cache\n    > 117 |     const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });\n          |                      ^\n      118 |     const cycleNumber = metadata?.totalCycles || 0;\n      119 |     clearSequenceCache(cycleNumber);\n      120 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:117:22)\n\n  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should show ₡0 streaming revenue when no battles occurred\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:37\n\n      91 \n      92 beforeAll(async () => {\n      93   // Create test users\n    → 94   const user1 = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      92 |   beforeAll(async () => {\n      93 |     // Create test users\n    > 94 |     const user1 = await prisma.user.create({\n         |                   ^\n      95 |       data: {\n      96 |         username: `test_cycle_summary_user1_${Date.now()}`,\n      97 |         passwordHash: 'test',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:94:19)\n\n  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should show ₡0 streaming revenue when no battles occurred\n\n    PrismaClientInitializationError: \n    Invalid `prisma.cycleMetadata.findUnique()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:49\n\n      114 \n      115 afterEach(async () => {\n      116   // Get current cycle number for clearing cache\n    → 117   const metadata = await prisma.cycleMetadata.findUnique(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      115 |   afterEach(async () => {\n      116 |     // Get current cycle number for clearing cache\n    > 117 |     const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });\n          |                      ^\n      118 |     const cycleNumber = metadata?.totalCycles || 0;\n      119 |     clearSequenceCache(cycleNumber);\n      120 |\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:117:22)\n\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: \n    Invalid `prisma.user.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:167:23\n\n      164 \n      165 afterAll(async () => {\n      166   // Final cleanup of users\n    → 167   await prisma.user.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      165 |   afterAll(async () => {\n      166 |     // Final cleanup of users\n    > 167 |     await prisma.user.deleteMany({\n          |     ^\n      168 |       where: {\n      169 |         OR: [{ id: testUserId1 }, { id: testUserId2 }],\n      170 |       },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:167:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["CombatMessageGenerator","generateBattleStart"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateBattleStart should generate battle start message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate battle start message"},{"ancestorTitles":["CombatMessageGenerator","generateAttack"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateAttack should generate hit message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate hit message"},{"ancestorTitles":["CombatMessageGenerator","generateAttack"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateAttack should generate critical hit message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate critical hit message"},{"ancestorTitles":["CombatMessageGenerator","generateAttack"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateAttack should generate miss message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate miss message"},{"ancestorTitles":["CombatMessageGenerator","generateBattleEnd"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateBattleEnd should generate dominant victory message","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should generate dominant victory message"},{"ancestorTitles":["CombatMessageGenerator","generateBattleEnd"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateBattleEnd should generate close victory message","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should generate close victory message"},{"ancestorTitles":["CombatMessageGenerator","generateELOChange"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateELOChange should generate ELO gain message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate ELO gain message"},{"ancestorTitles":["CombatMessageGenerator","generateELOChange"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateELOChange should generate ELO loss message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate ELO loss message"},{"ancestorTitles":["CombatMessageGenerator","generateBattleLog"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateBattleLog should generate complete battle log","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should generate complete battle log"},{"ancestorTitles":["CombatMessageGenerator","generateBattleLog"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateBattleLog should include timestamps in correct order","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"should include timestamps in correct order"},{"ancestorTitles":["CombatMessageGenerator","generateTagOut"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateTagOut should generate tag-out yield message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate tag-out yield message"},{"ancestorTitles":["CombatMessageGenerator","generateTagOut"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateTagOut should generate tag-out destruction message","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should generate tag-out destruction message"},{"ancestorTitles":["CombatMessageGenerator","generateTagOut"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateTagOut should use different messages for yield vs destruction","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should use different messages for yield vs destruction"},{"ancestorTitles":["CombatMessageGenerator","generateTagIn"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateTagIn should generate tag-in message","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should generate tag-in message"},{"ancestorTitles":["CombatMessageGenerator","generateTagIn"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"CombatMessageGenerator generateTagIn should include robot name and team context","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should include robot name and team context"}],"endTime":1771861043325,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/combatMessageGenerator.test.ts","startTime":1771861043304,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 1: Multi-Robot Discount Formula with Cap"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 1: Multi-Robot Discount Formula with Cap discount is calculated correctly and never exceeds 90%","invocations":1,"location":null,"numPassingAsserts":300,"retryReasons":[],"status":"passed","title":"discount is calculated correctly and never exceeds 90%"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 1: Multi-Robot Discount Formula with Cap"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 1: Multi-Robot Discount Formula with Cap discount formula produces correct percentage for all valid inputs","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"discount formula produces correct percentage for all valid inputs"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 1: Multi-Robot Discount Formula with Cap"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 1: Multi-Robot Discount Formula with Cap repair cost decreases as discount increases","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"repair cost decreases as discount increases"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 1: Multi-Robot Discount Formula with Cap"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 1: Multi-Robot Discount Formula with Cap 90% cap is reached at expected combinations","invocations":1,"location":null,"numPassingAsserts":22,"retryReasons":[],"status":"passed","title":"90% cap is reached at expected combinations"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 3: Medical Bay Reduction Preserved"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 3: Medical Bay Reduction Preserved Medical Bay reduces destruction multiplier for destroyed robots","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"Medical Bay reduces destruction multiplier for destroyed robots"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 3: Medical Bay Reduction Preserved"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 3: Medical Bay Reduction Preserved Medical Bay reduction only applies to destroyed robots (HP = 0)","invocations":1,"location":null,"numPassingAsserts":300,"retryReasons":[],"status":"passed","title":"Medical Bay reduction only applies to destroyed robots (HP = 0)"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 3: Medical Bay Reduction Preserved"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 3: Medical Bay Reduction Preserved Medical Bay reduction scales linearly with level","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"Medical Bay reduction scales linearly with level"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 3: Medical Bay Reduction Preserved"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 3: Medical Bay Reduction Preserved Medical Bay at level 10 reduces destruction multiplier to 0","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Medical Bay at level 10 reduces destruction multiplier to 0"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 4: Attribute-Sum Formula Consistency"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 4: Attribute-Sum Formula Consistency base repair cost follows attribute-sum formula","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"base repair cost follows attribute-sum formula"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 4: Attribute-Sum Formula Consistency"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 4: Attribute-Sum Formula Consistency multiplier is 2.0 for destroyed robots (HP = 0)","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"multiplier is 2.0 for destroyed robots (HP = 0)"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 4: Attribute-Sum Formula Consistency"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 4: Attribute-Sum Formula Consistency multiplier is 1.5 for heavily damaged robots (HP < 10%)","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"multiplier is 1.5 for heavily damaged robots (HP < 10%)"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 4: Attribute-Sum Formula Consistency"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 4: Attribute-Sum Formula Consistency multiplier is 1.0 for normal damage (HP >= 10%)","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"multiplier is 1.0 for normal damage (HP >= 10%)"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 4: Attribute-Sum Formula Consistency"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 4: Attribute-Sum Formula Consistency repair cost scales linearly with sumOfAllAttributes","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"repair cost scales linearly with sumOfAllAttributes"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 4: Attribute-Sum Formula Consistency"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 4: Attribute-Sum Formula Consistency repair cost scales linearly with damagePercent","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"repair cost scales linearly with damagePercent"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 4: Attribute-Sum Formula Consistency"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 4: Attribute-Sum Formula Consistency zero damage results in zero repair cost","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"zero damage results in zero repair cost"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 4: Attribute-Sum Formula Consistency"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 4: Attribute-Sum Formula Consistency 100% damage with 1.0x multiplier equals base repair cost before discount","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"100% damage with 1.0x multiplier equals base repair cost before discount"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 2: Robot Count Includes All Robots"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 2: Robot Count Includes All Robots robot count includes all robots regardless of HP status","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"robot count includes all robots regardless of HP status"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 2: Robot Count Includes All Robots"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 2: Robot Count Includes All Robots robot count excludes \"Bye Robot\" system robot","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"robot count excludes \"Bye Robot\" system robot"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 2: Robot Count Includes All Robots"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 2: Robot Count Includes All Robots robot count includes destroyed robots (HP = 0)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"robot count includes destroyed robots (HP = 0)"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 2: Robot Count Includes All Robots"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 2: Robot Count Includes All Robots robot count includes damaged robots (0 < HP < maxHP)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"robot count includes damaged robots (0 < HP < maxHP)"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 2: Robot Count Includes All Robots"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 2: Robot Count Includes All Robots robot count affects repair cost calculation correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"robot count affects repair cost calculation correctly"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 2: Robot Count Includes All Robots"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 2: Robot Count Includes All Robots empty stable (0 robots) results in no multi-robot bonus","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"empty stable (0 robots) results in no multi-robot bonus"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 5: Repair Cost Consistency Across Battle Types"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 5: Repair Cost Consistency Across Battle Types repair costs are identical for same damage across all battle types","invocations":1,"location":null,"numPassingAsserts":700,"retryReasons":[],"status":"passed","title":"repair costs are identical for same damage across all battle types"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 5: Repair Cost Consistency Across Battle Types"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 5: Repair Cost Consistency Across Battle Types repair costs remain consistent with varying facility levels","invocations":1,"location":null,"numPassingAsserts":500,"retryReasons":[],"status":"passed","title":"repair costs remain consistent with varying facility levels"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 5: Repair Cost Consistency Across Battle Types"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 5: Repair Cost Consistency Across Battle Types repair costs are deterministic for same inputs","invocations":1,"location":null,"numPassingAsserts":1000,"retryReasons":[],"status":"passed","title":"repair costs are deterministic for same inputs"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 5: Repair Cost Consistency Across Battle Types"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 5: Repair Cost Consistency Across Battle Types repair costs are consistent regardless of call order","invocations":1,"location":null,"numPassingAsserts":154,"retryReasons":[],"status":"passed","title":"repair costs are consistent regardless of call order"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 5: Repair Cost Consistency Across Battle Types"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 5: Repair Cost Consistency Across Battle Types repair costs scale consistently across battle types with robot count","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"repair costs scale consistently across battle types with robot count"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 5: Repair Cost Consistency Across Battle Types"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 5: Repair Cost Consistency Across Battle Types repair costs handle edge cases consistently across battle types","invocations":1,"location":null,"numPassingAsserts":300,"retryReasons":[],"status":"passed","title":"repair costs handle edge cases consistently across battle types"},{"ancestorTitles":["Repair Cost Multi-Robot Discount - Property Tests","Property 5: Repair Cost Consistency Across Battle Types"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Repair Cost Multi-Robot Discount - Property Tests Property 5: Repair Cost Consistency Across Battle Types repair costs with Medical Bay are consistent across battle types","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"repair costs with Medical Bay are consistent across battle types"}],"coverage":{},"endTime":1771861048230,"message":"\n\n  ● Test suite failed to run\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Cycle Execution Timing","logCycleStart"],"duration":12,"failureDetails":[{},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 266515419, path: \"0:0\", endOnFailure: true }\nCounterexample: [1]\nShrunk 1 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing logCycleStart should log cycle start with manual trigger type","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log cycle start with manual trigger type"},{"ancestorTitles":["Cycle Execution Timing","logCycleStart"],"duration":6,"failureDetails":[{},{},{},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 1567713715, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [[0]]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)","Error: Property failed after 1 tests\n{ seed: -454322195, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [1,1]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)","Error: Property failed after 1 tests\n{ seed: 1164045770, path: \"0:0:0\", endOnFailure: true }\nCounterexample: [1,1]\nShrunk 2 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing logCycleStart should log cycle start with scheduled trigger type","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log cycle start with scheduled trigger type"},{"ancestorTitles":["Cycle Execution Timing","logCycleStepComplete"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing logCycleStepComplete should log cycle step completion with duration","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log cycle step completion with duration"},{"ancestorTitles":["Cycle Execution Timing","logCycleStepComplete"],"duration":7,"failureDetails":[{},{},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 419091586, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [1,1,1000,50,10]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)","Error: Property failed after 1 tests\n{ seed: 1432386280, path: \"0:0:0:0:0\", endOnFailure: true }\nCounterexample: [1,1000,50,10]\nShrunk 4 time(s)\n\nHint: Enable verbose mode in order to have the list of all failing values encountered during the run\n    at buildError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n    at asyncThrowIfFailed (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing logCycleStepComplete should log multiple cycle steps in sequence","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log multiple cycle steps in sequence"},{"ancestorTitles":["Cycle Execution Timing","logCycleStepComplete"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing logCycleStepComplete should handle empty summary object","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle empty summary object"},{"ancestorTitles":["Cycle Execution Timing","logCycleComplete"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing logCycleComplete should log cycle completion with total duration","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log cycle completion with total duration"},{"ancestorTitles":["Cycle Execution Timing","Complete cycle timing flow"],"duration":6,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing Complete cycle timing flow should log complete cycle with start, steps, and complete events","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log complete cycle with start, steps, and complete events"},{"ancestorTitles":["Cycle Execution Timing","Complete cycle timing flow"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing Complete cycle timing flow should maintain sequence number ordering within cycle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should maintain sequence number ordering within cycle"},{"ancestorTitles":["Cycle Execution Timing","Step duration recording"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing Step duration recording should record accurate step durations","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should record accurate step durations"},{"ancestorTitles":["Cycle Execution Timing","Step duration recording"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing Step duration recording should sum step durations approximately equal to total cycle duration","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should sum step durations approximately equal to total cycle duration"},{"ancestorTitles":["Cycle Execution Timing","Trigger type recording"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing Trigger type recording should record manual trigger type correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should record manual trigger type correctly"},{"ancestorTitles":["Cycle Execution Timing","Trigger type recording"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n  17 \n  18 beforeEach(async () => {\n  19   // Clean up audit logs\n→ 20   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:5)"],"fullName":"Cycle Execution Timing Trigger type recording should record scheduled trigger type correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should record scheduled trigger type correctly"}],"endTime":1771861043627,"message":"  ● Cycle Execution Timing › logCycleStart › should log cycle start with manual trigger type\n\n    Property failed after 1 tests\n    { seed: 266515419, path: \"0:0\", endOnFailure: true }\n    Counterexample: [1]\n    Shrunk 1 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts:763:44\n\n      760 fc.integer({ min: 1, max: 10 }), // number of regular robots\n      761 async (numRobots) => {\n      762   // Create test user for this iteration\n    → 763   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      761 |           async (numRobots) => {\n      762 |             // Create test user for this iteration\n    > 763 |             const user = await prisma.user.create({\n          |                          ^\n      764 |               data: {\n      765 |                 username: `rc_test_${Date.now()}_${Math.floor(Math.random() * 1000000)}`,\n      766 |                 passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/repairCostMultiRobot.property.test.ts:763:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n\n  ● Cycle Execution Timing › logCycleStart › should log cycle start with manual trigger type\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › logCycleStart › should log cycle start with scheduled trigger type\n\n    Property failed after 1 tests\n    { seed: 1567713715, path: \"0:0:0\", endOnFailure: true }\n    Counterexample: [[0]]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts:712:44\n\n      709 fc.array(fc.integer({ min: 0, max: 100 }), { minLength: 1, maxLength: 10 }), // robot HP percentages\n      710 async (robotHPs) => {\n      711   // Create test user for this iteration\n    → 712   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      710 |           async (robotHPs) => {\n      711 |             // Create test user for this iteration\n    > 712 |             const user = await prisma.user.create({\n          |                          ^\n      713 |               data: {\n      714 |                 username: `rc_test_${Date.now()}_${Math.floor(Math.random() * 1000000)}`,\n      715 |                 passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/repairCostMultiRobot.property.test.ts:712:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n\n  ● Cycle Execution Timing › logCycleStart › should log cycle start with scheduled trigger type\n\n    Property failed after 1 tests\n    { seed: -454322195, path: \"0:0:0\", endOnFailure: true }\n    Counterexample: [1,1]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts:824:44\n\n      821 fc.integer({ min: 1, max: 5 }), // number of destroyed robots\n      822 async (numHealthy, numDestroyed) => {\n      823   // Create test user for this iteration\n    → 824   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      822 |           async (numHealthy, numDestroyed) => {\n      823 |             // Create test user for this iteration\n    > 824 |             const user = await prisma.user.create({\n          |                          ^\n      825 |               data: {\n      826 |                 username: `rc_test_${Date.now()}_${Math.floor(Math.random() * 1000000)}`,\n      827 |                 passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/repairCostMultiRobot.property.test.ts:824:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n\n  ● Cycle Execution Timing › logCycleStart › should log cycle start with scheduled trigger type\n\n    Property failed after 1 tests\n    { seed: 1164045770, path: \"0:0:0\", endOnFailure: true }\n    Counterexample: [1,1]\n    Shrunk 2 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts:887:44\n\n      884 fc.integer({ min: 1, max: 5 }), // number of damaged robots\n      885 async (numHealthy, numDamaged) => {\n      886   // Create test user for this iteration\n    → 887   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      885 |           async (numHealthy, numDamaged) => {\n      886 |             // Create test user for this iteration\n    > 887 |             const user = await prisma.user.create({\n          |                          ^\n      888 |               data: {\n      889 |                 username: `rc_test_${Date.now()}_${Math.floor(Math.random() * 1000000)}`,\n      890 |                 passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/repairCostMultiRobot.property.test.ts:887:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n\n  ● Cycle Execution Timing › logCycleStart › should log cycle start with scheduled trigger type\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › logCycleStepComplete › should log cycle step completion with duration\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › logCycleStepComplete › should log multiple cycle steps in sequence\n\n    Property failed after 1 tests\n    { seed: 419091586, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [1,1,1000,50,10]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts:953:44\n\n      950 fc.integer({ min: 10, max: 100 }), // hpPercent\n      951 async (numRobots, repairBayLevel, sumOfAllAttributes, damagePercent, hpPercent) => {\n      952   // Create test user for this iteration\n    → 953   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      951 |           async (numRobots, repairBayLevel, sumOfAllAttributes, damagePercent, hpPercent) => {\n      952 |             // Create test user for this iteration\n    > 953 |             const user = await prisma.user.create({\n          |                          ^\n      954 |               data: {\n      955 |                 username: `rc_test_${Date.now()}_${Math.floor(Math.random() * 1000000)}`,\n      956 |                 passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/repairCostMultiRobot.property.test.ts:953:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n\n  ● Cycle Execution Timing › logCycleStepComplete › should log multiple cycle steps in sequence\n\n    Property failed after 1 tests\n    { seed: 1432386280, path: \"0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [1,1000,50,10]\n    Shrunk 4 time(s)\n\n    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run\n\n      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)\n      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)\n\n    Cause:\n    PrismaClientInitializationError: \n    Invalid `prisma.user.create()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.property.test.ts:1025:44\n\n      1022 fc.integer({ min: 10, max: 100 }), // hpPercent\n      1023 async (repairBayLevel, sumOfAllAttributes, damagePercent, hpPercent) => {\n      1024   // Create test user for this iteration\n    → 1025   const user = await prisma.user.create(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      1023 |           async (repairBayLevel, sumOfAllAttributes, damagePercent, hpPercent) => {\n      1024 |             // Create test user for this iteration\n    > 1025 |             const user = await prisma.user.create({\n           |                          ^\n      1026 |               data: {\n      1027 |                 username: `rc_test_${Date.now()}_${Math.floor(Math.random() * 1000000)}`,\n      1028 |                 passwordHash: 'test_hash',\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at tests/repairCostMultiRobot.property.test.ts:1025:26\n      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)\n      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)\n\n  ● Cycle Execution Timing › logCycleStepComplete › should log multiple cycle steps in sequence\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › logCycleStepComplete › should handle empty summary object\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › logCycleComplete › should log cycle completion with total duration\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › Complete cycle timing flow › should log complete cycle with start, steps, and complete events\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › Complete cycle timing flow › should maintain sequence number ordering within cycle\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › Step duration recording › should record accurate step durations\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › Step duration recording › should sum step durations approximately equal to total cycle duration\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › Trigger type recording › should record manual trigger type correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n\n  ● Cycle Execution Timing › Trigger type recording › should record scheduled trigger type correctly\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27\n\n      17 \n      18 beforeEach(async () => {\n      19   // Clean up audit logs\n    → 20   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      18 |   beforeEach(async () => {\n      19 |     // Clean up audit logs\n    > 20 |     await prisma.auditLog.deleteMany({});\n         |     ^\n      21 |   });\n      22 |\n      23 |   afterAll(async () => {\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts","startTime":1771861043528,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 8: Tag-Out Trigger Conditions"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 8: Tag-Out Trigger Conditions tag-out triggers when HP reaches yield threshold or drops to 0","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag-out triggers when HP reaches yield threshold or drops to 0"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 8: Tag-Out Trigger Conditions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 8: Tag-Out Trigger Conditions tag-out always triggers when HP is 0","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag-out always triggers when HP is 0"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 8: Tag-Out Trigger Conditions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 8: Tag-Out Trigger Conditions tag-out triggers when HP equals yield threshold","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag-out triggers when HP equals yield threshold"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 9: Reserve Robot Initial State"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 9: Reserve Robot Initial State reserve robot starts with full HP when activated","invocations":1,"location":null,"numPassingAsserts":80,"retryReasons":[],"status":"passed","title":"reserve robot starts with full HP when activated"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 9: Reserve Robot Initial State"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 9: Reserve Robot Initial State reserve robot HP is exactly 100% of maxHP","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"reserve robot HP is exactly 100% of maxHP"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 10: Team Defeat Condition"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 10: Team Defeat Condition team loses when both robots are down","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"team loses when both robots are down"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 10: Team Defeat Condition"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 10: Team Defeat Condition no winner when both teams have robots up","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"no winner when both teams have robots up"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 10: Team Defeat Condition"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 10: Team Defeat Condition winner declared when opposing team has both robots down","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"winner declared when opposing team has both robots down"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 11: Battle Timeout Draw"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 11: Battle Timeout Draw battle ends in draw when time limit exceeded","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"battle ends in draw when time limit exceeded"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 11: Battle Timeout Draw"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 11: Battle Timeout Draw battle does not timeout before time limit","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"battle does not timeout before time limit"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 11: Battle Timeout Draw"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 11: Battle Timeout Draw timeout draw overrides robot HP states","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"timeout draw overrides robot HP states"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 12: Tag Team Reward Multiplier"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 12: Tag Team Reward Multiplier tag team rewards are exactly 2x standard league rewards","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag team rewards are exactly 2x standard league rewards"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 12: Tag Team Reward Multiplier"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 12: Tag Team Reward Multiplier tag team win rewards are 2x standard win rewards","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag team win rewards are 2x standard win rewards"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 12: Tag Team Reward Multiplier"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 12: Tag Team Reward Multiplier tag team loss rewards are 2x standard loss rewards","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag team loss rewards are 2x standard loss rewards"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 12: Tag Team Reward Multiplier"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 12: Tag Team Reward Multiplier tag team draw rewards are 2x standard draw rewards","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag team draw rewards are 2x standard draw rewards"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 13: Repair Cost Calculation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 13: Repair Cost Calculation repair cost is based on damage taken","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"repair cost is based on damage taken"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 13: Repair Cost Calculation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 13: Repair Cost Calculation destroyed robots have 2x repair cost multiplier","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"destroyed robots have 2x repair cost multiplier"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 13: Repair Cost Calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 13: Repair Cost Calculation repair bay discount is applied correctly","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"repair bay discount is applied correctly"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 13: Repair Cost Calculation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 13: Repair Cost Calculation destruction multiplier and discount both apply","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"destruction multiplier and discount both apply"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 14: Four-Robot ELO Updates"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 14: Four-Robot ELO Updates ELO changes use K=32 formula","invocations":1,"location":null,"numPassingAsserts":60,"retryReasons":[],"status":"passed","title":"ELO changes use K=32 formula"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 14: Four-Robot ELO Updates"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 14: Four-Robot ELO Updates equal ELO teams have symmetric ELO changes","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"equal ELO teams have symmetric ELO changes"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 14: Four-Robot ELO Updates"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 14: Four-Robot ELO Updates draw results in ELO changes for both teams","invocations":1,"location":null,"numPassingAsserts":19,"retryReasons":[],"status":"passed","title":"draw results in ELO changes for both teams"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 14: Four-Robot ELO Updates"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 14: Four-Robot ELO Updates underdog wins get larger ELO gains","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"underdog wins get larger ELO gains"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 15: Tag Team League Point Awards"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 15: Tag Team League Point Awards winners receive +3 league points","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"winners receive +3 league points"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 15: Tag Team League Point Awards"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 15: Tag Team League Point Awards losers receive -1 league points","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"losers receive -1 league points"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 15: Tag Team League Point Awards"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 15: Tag Team League Point Awards draws award +1 league points","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"draws award +1 league points"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 15: Tag Team League Point Awards"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 15: Tag Team League Point Awards league points are always -1, 1, or 3","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"league points are always -1, 1, or 3"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 16: League Point Separation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 16: League Point Separation tag team and 1v1 league points are independent","invocations":1,"location":null,"numPassingAsserts":35,"retryReasons":[],"status":"passed","title":"tag team and 1v1 league points are independent"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 17: Shared ELO Rating"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 17: Shared ELO Rating tag team ELO changes affect the same ELO rating","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"tag team ELO changes affect the same ELO rating"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 27: Prestige Award Calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 27: Prestige Award Calculation tag team prestige is 1.6x standard prestige","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag team prestige is 1.6x standard prestige"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 27: Prestige Award Calculation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 27: Prestige Award Calculation no prestige for draws","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"no prestige for draws"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 27: Prestige Award Calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 27: Prestige Award Calculation no prestige for losses","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"no prestige for losses"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 27: Prestige Award Calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 27: Prestige Award Calculation prestige values match specification","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"prestige values match specification"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 28: Contribution-Based Fame"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 28: Contribution-Based Fame fame increases with damage dealt","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"fame increases with damage dealt"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 28: Contribution-Based Fame"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 28: Contribution-Based Fame fame increases with survival time","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"fame increases with survival time"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 28: Contribution-Based Fame"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 28: Contribution-Based Fame winners get more fame than losers","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"winners get more fame than losers"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 28: Contribution-Based Fame"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 28: Contribution-Based Fame no fame for draws","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"no fame for draws"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 19: League Rebalancing Percentages"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 19: League Rebalancing Percentages promotion count is exactly 10% (floor) of eligible teams","invocations":1,"location":null,"numPassingAsserts":60,"retryReasons":[],"status":"passed","title":"promotion count is exactly 10% (floor) of eligible teams"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 19: League Rebalancing Percentages"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 19: League Rebalancing Percentages demotion count is exactly 10% (floor) of eligible teams","invocations":1,"location":null,"numPassingAsserts":60,"retryReasons":[],"status":"passed","title":"demotion count is exactly 10% (floor) of eligible teams"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 19: League Rebalancing Percentages"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 19: League Rebalancing Percentages 10% calculation is consistent across various team counts","invocations":1,"location":null,"numPassingAsserts":22,"retryReasons":[],"status":"passed","title":"10% calculation is consistent across various team counts"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 19: League Rebalancing Percentages"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 19: League Rebalancing Percentages floor operation ensures integer team counts","invocations":1,"location":null,"numPassingAsserts":60,"retryReasons":[],"status":"passed","title":"floor operation ensures integer team counts"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 19: League Rebalancing Percentages"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 19: League Rebalancing Percentages percentage holds for edge cases","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"percentage holds for edge cases"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 19: League Rebalancing Percentages"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 19: League Rebalancing Percentages rebalancing skips tiers with fewer than 10 teams","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"rebalancing skips tiers with fewer than 10 teams"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 29: Tag Team Statistics Tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 29: Tag Team Statistics Tracking statistics increment correctly for wins","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"statistics increment correctly for wins"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 29: Tag Team Statistics Tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 29: Tag Team Statistics Tracking statistics increment correctly for losses","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"statistics increment correctly for losses"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 29: Tag Team Statistics Tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 29: Tag Team Statistics Tracking statistics increment correctly for draws","invocations":1,"location":null,"numPassingAsserts":40,"retryReasons":[],"status":"passed","title":"statistics increment correctly for draws"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 29: Tag Team Statistics Tracking"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 29: Tag Team Statistics Tracking tag-in counter increments for reserve robots","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag-in counter increments for reserve robots"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 29: Tag Team Statistics Tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 29: Tag Team Statistics Tracking tag-out counter increments for active robots","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"tag-out counter increments for active robots"},{"ancestorTitles":["Tag Team Battle Orchestrator - Property Tests","Property 29: Tag Team Statistics Tracking"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Tag Team Battle Orchestrator - Property Tests Property 29: Tag Team Statistics Tracking total battles equals wins + losses + draws","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"status":"passed","title":"total battles equals wins + losses + draws"}],"endTime":1771861043719,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamBattleOrchestrator.property.test.ts","startTime":1771861043630,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Validation Service - Property Tests","Property 1: Valid stable names are accepted"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 1: Valid stable names are accepted accepts all valid stable names","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"accepts all valid stable names"},{"ancestorTitles":["Validation Service - Property Tests","Property 1: Valid stable names are accepted"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 1: Valid stable names are accepted rejects stable names that are too short","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"rejects stable names that are too short"},{"ancestorTitles":["Validation Service - Property Tests","Property 1: Valid stable names are accepted"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 1: Valid stable names are accepted rejects stable names that are too long","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"rejects stable names that are too long"},{"ancestorTitles":["Validation Service - Property Tests","Property 1: Valid stable names are accepted"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 1: Valid stable names are accepted rejects stable names with invalid characters","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"rejects stable names with invalid characters"},{"ancestorTitles":["Validation Service - Property Tests","Property 4: Password validation enforces all strength requirements"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 4: Password validation enforces all strength requirements accepts all valid passwords","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"accepts all valid passwords"},{"ancestorTitles":["Validation Service - Property Tests","Property 4: Password validation enforces all strength requirements"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 4: Password validation enforces all strength requirements rejects passwords that are too short","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"rejects passwords that are too short"},{"ancestorTitles":["Validation Service - Property Tests","Property 4: Password validation enforces all strength requirements"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 4: Password validation enforces all strength requirements rejects passwords without uppercase letters","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"rejects passwords without uppercase letters"},{"ancestorTitles":["Validation Service - Property Tests","Property 4: Password validation enforces all strength requirements"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 4: Password validation enforces all strength requirements rejects passwords without lowercase letters","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"rejects passwords without lowercase letters"},{"ancestorTitles":["Validation Service - Property Tests","Property 4: Password validation enforces all strength requirements"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Validation Service - Property Tests Property 4: Password validation enforces all strength requirements rejects passwords without numbers","invocations":1,"location":null,"numPassingAsserts":200,"retryReasons":[],"status":"passed","title":"rejects passwords without numbers"}],"endTime":1771861043810,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/validation.property.test.ts","startTime":1771861043721,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Facility Transaction Logging"],"duration":8,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up test data after each test\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:5)"],"fullName":"Facility Transaction Logging should log facility_purchase event when purchasing a new facility","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log facility_purchase event when purchasing a new facility"},{"ancestorTitles":["Facility Transaction Logging"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up test data after each test\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:5)"],"fullName":"Facility Transaction Logging should log facility_upgrade event when upgrading an existing facility","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log facility_upgrade event when upgrading an existing facility"},{"ancestorTitles":["Facility Transaction Logging"],"duration":4,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up test data after each test\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:5)"],"fullName":"Facility Transaction Logging should include all required fields in the event payload","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include all required fields in the event payload"},{"ancestorTitles":["Facility Transaction Logging"],"duration":7,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up test data after each test\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:5)"],"fullName":"Facility Transaction Logging should log events with correct cycle number","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should log events with correct cycle number"},{"ancestorTitles":["Facility Transaction Logging"],"duration":5,"failureDetails":[{"name":"PrismaClientInitializationError","clientVersion":"5.22.0","errorCode":"P2037"},{"name":"PrismaClientInitializationError","clientVersion":"5.22.0"}],"failureMessages":["PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n    at t (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:112:2488)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:18:5)","PrismaClientInitializationError: \nInvalid `prisma.auditLog.deleteMany()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n  20 \n  21 afterEach(async () => {\n  22   // Clean up test data after each test\n→ 23   await prisma.auditLog.deleteMany(\nToo many database connections opened: FATAL: sorry, too many clients already\n    at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at Object.<anonymous> (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:5)"],"fullName":"Facility Transaction Logging should distinguish between purchase and upgrade events","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should distinguish between purchase and upgrade events"}],"endTime":1771861043870,"message":"  ● Facility Transaction Logging › should log facility_purchase event when purchasing a new facility\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |\n      17 |   beforeAll(async () => {\n    > 18 |     await prisma.$connect();\n         |     ^\n      19 |   });\n      20 |\n      21 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)\n\n  ● Facility Transaction Logging › should log facility_purchase event when purchasing a new facility\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up test data after each test\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up test data after each test\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: {\n      25 |         userId: testUserId,\n      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)\n\n  ● Facility Transaction Logging › should log facility_upgrade event when upgrading an existing facility\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |\n      17 |   beforeAll(async () => {\n    > 18 |     await prisma.$connect();\n         |     ^\n      19 |   });\n      20 |\n      21 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)\n\n  ● Facility Transaction Logging › should log facility_upgrade event when upgrading an existing facility\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up test data after each test\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up test data after each test\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: {\n      25 |         userId: testUserId,\n      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)\n\n  ● Facility Transaction Logging › should include all required fields in the event payload\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |\n      17 |   beforeAll(async () => {\n    > 18 |     await prisma.$connect();\n         |     ^\n      19 |   });\n      20 |\n      21 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)\n\n  ● Facility Transaction Logging › should include all required fields in the event payload\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up test data after each test\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up test data after each test\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: {\n      25 |         userId: testUserId,\n      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)\n\n  ● Facility Transaction Logging › should log events with correct cycle number\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |\n      17 |   beforeAll(async () => {\n    > 18 |     await prisma.$connect();\n         |     ^\n      19 |   });\n      20 |\n      21 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)\n\n  ● Facility Transaction Logging › should log events with correct cycle number\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up test data after each test\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up test data after each test\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: {\n      25 |         userId: testUserId,\n      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)\n\n  ● Facility Transaction Logging › should distinguish between purchase and upgrade events\n\n    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already\n\n      16 |\n      17 |   beforeAll(async () => {\n    > 18 |     await prisma.$connect();\n         |     ^\n      19 |   });\n      20 |\n      21 |   afterEach(async () => {\n\n      at t (node_modules/@prisma/client/runtime/library.js:112:2488)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)\n\n  ● Facility Transaction Logging › should distinguish between purchase and upgrade events\n\n    PrismaClientInitializationError: \n    Invalid `prisma.auditLog.deleteMany()` invocation in\n    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27\n\n      20 \n      21 afterEach(async () => {\n      22   // Clean up test data after each test\n    → 23   await prisma.auditLog.deleteMany(\n    Too many database connections opened: FATAL: sorry, too many clients already\n\n      21 |   afterEach(async () => {\n      22 |     // Clean up test data after each test\n    > 23 |     await prisma.auditLog.deleteMany({\n         |     ^\n      24 |       where: {\n      25 |         userId: testUserId,\n      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },\n\n      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)\n      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)\n      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)\n      at l (node_modules/@prisma/client/runtime/library.js:130:9633)\n      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts","startTime":1771861043812,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 8: Streaming Studio Operating Cost Formula"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Property 8: Streaming Studio Operating Cost Formula Property 8: Operating cost equals level × 100","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 8: Operating cost equals level × 100"},{"ancestorTitles":["Property 8: Streaming Studio Operating Cost Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Property 8: Streaming Studio Operating Cost Formula Property 8.1: Level 0 has zero operating cost","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"Property 8.1: Level 0 has zero operating cost"},{"ancestorTitles":["Property 8: Streaming Studio Operating Cost Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Property 8: Streaming Studio Operating Cost Formula Property 8.2: Specific level examples","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"Property 8.2: Specific level examples"},{"ancestorTitles":["Property 8: Streaming Studio Operating Cost Formula"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Property 8: Streaming Studio Operating Cost Formula Property 8.3: Operating cost increases linearly","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 8.3: Operating cost increases linearly"},{"ancestorTitles":["Property 8: Streaming Studio Operating Cost Formula"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Property 8: Streaming Studio Operating Cost Formula Property 8.4: Higher levels have higher operating costs","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 8.4: Higher levels have higher operating costs"},{"ancestorTitles":["Property 8: Streaming Studio Operating Cost Formula"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Property 8: Streaming Studio Operating Cost Formula Property 8.5: Each level adds exactly ₡100","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 8.5: Each level adds exactly ₡100"},{"ancestorTitles":["Property 8: Streaming Studio Operating Cost Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Property 8: Streaming Studio Operating Cost Formula Property 8.6: Formula consistency for all levels","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"status":"passed","title":"Property 8.6: Formula consistency for all levels"}],"endTime":1771861043918,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioOperatingCost.property.test.ts","startTime":1771861043873,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Property 7: Streaming Studio Upgrade Cost Formula"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Property 7: Streaming Studio Upgrade Cost Formula Property 7: Upgrade cost formula correctness","invocations":1,"location":null,"numPassingAsserts":400,"retryReasons":[],"status":"passed","title":"Property 7: Upgrade cost formula correctness"},{"ancestorTitles":["Property 7: Streaming Studio Upgrade Cost Formula"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Property 7: Streaming Studio Upgrade Cost Formula Property 7.1: Upgrade costs increase with each level","invocations":1,"location":null,"numPassingAsserts":100,"retryReasons":[],"status":"passed","title":"Property 7.1: Upgrade costs increase with each level"},{"ancestorTitles":["Property 7: Streaming Studio Upgrade Cost Formula"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Property 7: Streaming Studio Upgrade Cost Formula Property 7.2: Specific upgrade costs match requirements","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Property 7.2: Specific upgrade costs match requirements"},{"ancestorTitles":["Property 7: Streaming Studio Upgrade Cost Formula"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Property 7: Streaming Studio Upgrade Cost Formula Property 7.3: Total investment formula correctness","invocations":1,"location":null,"numPassingAsserts":50,"retryReasons":[],"status":"passed","title":"Property 7.3: Total investment formula correctness"},{"ancestorTitles":["Property 7: Streaming Studio Upgrade Cost Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Property 7: Streaming Studio Upgrade Cost Formula Property 7.4: No upgrade cost at max level","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"Property 7.4: No upgrade cost at max level"},{"ancestorTitles":["Property 7: Streaming Studio Upgrade Cost Formula"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"Property 7: Streaming Studio Upgrade Cost Formula Property 7.5: Upgrade cost is deterministic based on level only","invocations":1,"location":null,"numPassingAsserts":150,"retryReasons":[],"status":"passed","title":"Property 7.5: Upgrade cost is deterministic based on level only"},{"ancestorTitles":["Property 7: Streaming Studio Upgrade Cost Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Property 7: Streaming Studio Upgrade Cost Formula Property 7.6: Costs array has correct structure","invocations":1,"location":null,"numPassingAsserts":31,"retryReasons":[],"status":"passed","title":"Property 7.6: Costs array has correct structure"},{"ancestorTitles":["Property 7: Streaming Studio Upgrade Cost Formula"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Property 7: Streaming Studio Upgrade Cost Formula Property 7.7: Cost difference between levels is constant","invocations":1,"location":null,"numPassingAsserts":150,"retryReasons":[],"status":"passed","title":"Property 7.7: Cost difference between levels is constant"}],"endTime":1771861043971,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/streamingStudioUpgradeCosts.property.test.ts","startTime":1771861043922,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Economy Calculations","Facility Operating Costs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Facility Operating Costs should calculate Repair Bay operating costs correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should calculate Repair Bay operating costs correctly"},{"ancestorTitles":["Economy Calculations","Facility Operating Costs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Facility Operating Costs should calculate Training Facility operating costs correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should calculate Training Facility operating costs correctly"},{"ancestorTitles":["Economy Calculations","Facility Operating Costs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Facility Operating Costs should calculate Merchandising Hub operating costs correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should calculate Merchandising Hub operating costs correctly"},{"ancestorTitles":["Economy Calculations","Facility Operating Costs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Facility Operating Costs should calculate Streaming Studio operating costs correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should calculate Streaming Studio operating costs correctly"},{"ancestorTitles":["Economy Calculations","Facility Operating Costs"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Facility Operating Costs should return 0 for facilities with no operating cost","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 0 for facilities with no operating cost"},{"ancestorTitles":["Economy Calculations","Prestige Multipliers"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Prestige Multipliers should return 1.0 for prestige below 5000","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 1.0 for prestige below 5000"},{"ancestorTitles":["Economy Calculations","Prestige Multipliers"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Prestige Multipliers should return correct multipliers for prestige tiers","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return correct multipliers for prestige tiers"},{"ancestorTitles":["Economy Calculations","Prestige Multipliers"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Prestige Multipliers should return highest multiplier for prestige over 50000","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return highest multiplier for prestige over 50000"},{"ancestorTitles":["Economy Calculations","Battle Winnings"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Battle Winnings should calculate battle winnings with no prestige bonus","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should calculate battle winnings with no prestige bonus"},{"ancestorTitles":["Economy Calculations","Battle Winnings"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Battle Winnings should calculate battle winnings with prestige bonuses","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should calculate battle winnings with prestige bonuses"},{"ancestorTitles":["Economy Calculations","League Rewards"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations League Rewards should return correct base rewards for each league","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should return correct base rewards for each league"},{"ancestorTitles":["Economy Calculations","League Rewards"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations League Rewards should return participation rewards (30% of league base)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return participation rewards (30% of league base)"},{"ancestorTitles":["Economy Calculations","Merchandising Income"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Merchandising Income should return 0 when Income Generator not purchased","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 0 when Income Generator not purchased"},{"ancestorTitles":["Economy Calculations","Merchandising Income"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Merchandising Income should calculate base merchandising income at level 1","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate base merchandising income at level 1"},{"ancestorTitles":["Economy Calculations","Merchandising Income"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Merchandising Income should scale merchandising with prestige","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should scale merchandising with prestige"},{"ancestorTitles":["Economy Calculations","Financial Health"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Financial Health should return critical for balance < 50K","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return critical for balance < 50K"},{"ancestorTitles":["Economy Calculations","Financial Health"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Financial Health should return warning for balance < 100K","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return warning for balance < 100K"},{"ancestorTitles":["Economy Calculations","Financial Health"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Financial Health should return stable/warning for moderate balance or negative income","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return stable/warning for moderate balance or negative income"},{"ancestorTitles":["Economy Calculations","Financial Health"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Financial Health should return good for balance >= 500K with positive income","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return good for balance >= 500K with positive income"},{"ancestorTitles":["Economy Calculations","Financial Health"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Financial Health should return excellent for balance >= 1M with positive income","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return excellent for balance >= 1M with positive income"},{"ancestorTitles":["Economy Calculations","Passive Income Calculations (Requirements 13.1-13.8)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Passive Income Calculations (Requirements 13.1-13.8) should only include merchandising income from Income Generator","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should only include merchandising income from Income Generator"},{"ancestorTitles":["Economy Calculations","Passive Income Calculations (Requirements 13.1-13.8)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Passive Income Calculations (Requirements 13.1-13.8) should not include streaming revenue in merchandising calculation","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not include streaming revenue in merchandising calculation"},{"ancestorTitles":["Economy Calculations","Passive Income Calculations (Requirements 13.1-13.8)"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Economy Calculations Passive Income Calculations (Requirements 13.1-13.8) should return 0 merchandising when Income Generator not purchased","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 0 merchandising when Income Generator not purchased"}],"endTime":1771861043999,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/economyCalculations.test.ts","startTime":1771861043973,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Weapon Validation","isWeaponCompatibleWithLoadout"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation isWeaponCompatibleWithLoadout should allow weapons with loadoutType \"any\" for all loadouts","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should allow weapons with loadoutType \"any\" for all loadouts"},{"ancestorTitles":["Weapon Validation","isWeaponCompatibleWithLoadout"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation isWeaponCompatibleWithLoadout should only allow specific loadout when weapon specifies it","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should only allow specific loadout when weapon specifies it"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - Shield weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - Shield weapons should prevent shields in main slot","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should prevent shields in main slot"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - Shield weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - Shield weapons should allow shields in offhand with weapon_shield loadout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow shields in offhand with weapon_shield loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - Shield weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - Shield weapons should prevent shields without weapon_shield loadout","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should prevent shields without weapon_shield loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - Two-handed weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - Two-handed weapons should prevent two-handed in offhand slot","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should prevent two-handed in offhand slot"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - Two-handed weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - Two-handed weapons should allow two-handed in main slot with two_handed loadout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow two-handed in main slot with two_handed loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - Two-handed weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - Two-handed weapons should prevent two-handed without two_handed loadout","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should prevent two-handed without two_handed loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - One-handed weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - One-handed weapons should allow one-handed in main slot for single loadout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow one-handed in main slot for single loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - One-handed weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - One-handed weapons should allow one-handed in main slot for weapon_shield loadout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow one-handed in main slot for weapon_shield loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - One-handed weapons"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - One-handed weapons should allow one-handed in main slot for dual_wield loadout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow one-handed in main slot for dual_wield loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - One-handed weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - One-handed weapons should prevent one-handed in main slot for two_handed loadout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should prevent one-handed in main slot for two_handed loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - One-handed weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - One-handed weapons should allow one-handed in offhand for dual_wield loadout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow one-handed in offhand for dual_wield loadout"},{"ancestorTitles":["Weapon Validation","canEquipToSlot - One-handed weapons"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canEquipToSlot - One-handed weapons should prevent one-handed in offhand without dual_wield loadout","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should prevent one-handed in offhand without dual_wield loadout"},{"ancestorTitles":["Weapon Validation","validateOffhandEquipment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation validateOffhandEquipment should require main weapon for shield","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require main weapon for shield"},{"ancestorTitles":["Weapon Validation","validateOffhandEquipment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation validateOffhandEquipment should allow shield with main weapon and correct loadout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow shield with main weapon and correct loadout"},{"ancestorTitles":["Weapon Validation","validateOffhandEquipment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation validateOffhandEquipment should require main weapon for dual_wield offhand","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require main weapon for dual_wield offhand"},{"ancestorTitles":["Weapon Validation","getValidLoadoutsForWeapon"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation getValidLoadoutsForWeapon should return correct loadouts for one-handed weapon in main slot","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return correct loadouts for one-handed weapon in main slot"},{"ancestorTitles":["Weapon Validation","getValidLoadoutsForWeapon"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation getValidLoadoutsForWeapon should return only dual_wield for one-handed weapon in offhand","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return only dual_wield for one-handed weapon in offhand"},{"ancestorTitles":["Weapon Validation","getValidLoadoutsForWeapon"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation getValidLoadoutsForWeapon should return only two_handed for two-handed weapon in main","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return only two_handed for two-handed weapon in main"},{"ancestorTitles":["Weapon Validation","getValidLoadoutsForWeapon"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation getValidLoadoutsForWeapon should return only weapon_shield for shield in offhand","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return only weapon_shield for shield in offhand"},{"ancestorTitles":["Weapon Validation","canChangeLoadout"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canChangeLoadout should allow loadout change when no weapons equipped","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow loadout change when no weapons equipped"},{"ancestorTitles":["Weapon Validation","canChangeLoadout"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canChangeLoadout should allow compatible loadout change","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow compatible loadout change"},{"ancestorTitles":["Weapon Validation","canChangeLoadout"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canChangeLoadout should prevent incompatible loadout change - two-handed with dual weapons","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should prevent incompatible loadout change - two-handed with dual weapons"},{"ancestorTitles":["Weapon Validation","canChangeLoadout"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation canChangeLoadout should identify conflicting weapons","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should identify conflicting weapons"},{"ancestorTitles":["Weapon Validation","isSlotAvailable"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation isSlotAvailable should always allow main slot","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should always allow main slot"},{"ancestorTitles":["Weapon Validation","isSlotAvailable"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Weapon Validation isSlotAvailable should allow offhand only for weapon_shield and dual_wield","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should allow offhand only for weapon_shield and dual_wield"}],"endTime":1771861044022,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/weaponValidation.test.ts","startTime":1771861044001,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Storage Calculations","calculateStorageCapacity"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations calculateStorageCapacity should return base capacity of 5 at level 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return base capacity of 5 at level 0"},{"ancestorTitles":["Storage Calculations","calculateStorageCapacity"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations calculateStorageCapacity should calculate capacity correctly for level 1","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate capacity correctly for level 1"},{"ancestorTitles":["Storage Calculations","calculateStorageCapacity"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations calculateStorageCapacity should calculate capacity correctly for level 5","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate capacity correctly for level 5"},{"ancestorTitles":["Storage Calculations","calculateStorageCapacity"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations calculateStorageCapacity should calculate max capacity correctly for level 10","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate max capacity correctly for level 10"},{"ancestorTitles":["Storage Calculations","hasStorageSpace"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations hasStorageSpace should return true when below capacity","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return true when below capacity"},{"ancestorTitles":["Storage Calculations","hasStorageSpace"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations hasStorageSpace should return false when at capacity","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false when at capacity"},{"ancestorTitles":["Storage Calculations","hasStorageSpace"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations hasStorageSpace should return false when over capacity","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false when over capacity"},{"ancestorTitles":["Storage Calculations","getStorageStatus"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations getStorageStatus should return correct status when empty","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should return correct status when empty"},{"ancestorTitles":["Storage Calculations","getStorageStatus"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations getStorageStatus should return correct status when partially full","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should return correct status when partially full"},{"ancestorTitles":["Storage Calculations","getStorageStatus"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations getStorageStatus should return correct status when full","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should return correct status when full"},{"ancestorTitles":["Storage Calculations","getStorageStatus"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations getStorageStatus should handle over-capacity correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle over-capacity correctly"},{"ancestorTitles":["Storage Calculations","getStorageStatus"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Storage Calculations getStorageStatus should calculate percentage correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should calculate percentage correctly"}],"endTime":1771861044040,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/storageCalculations.test.ts","startTime":1771861044024,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Backward Compatibility"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Backward Compatibility should default activeRobotCount to 0 when not provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should default activeRobotCount to 0 when not provided"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Backward Compatibility"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Backward Compatibility should work with all parameters omitted except required ones","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should work with all parameters omitted except required ones"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Multi-Robot Discount Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Multi-Robot Discount Formula should calculate 9% discount for Level 1 Repair Bay with 4 robots","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate 9% discount for Level 1 Repair Bay with 4 robots"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Multi-Robot Discount Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Multi-Robot Discount Formula should calculate 21% discount for Level 3 Repair Bay with 2 robots","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate 21% discount for Level 3 Repair Bay with 2 robots"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Multi-Robot Discount Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Multi-Robot Discount Formula should calculate 60% discount for Level 5 Repair Bay with 7 robots","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate 60% discount for Level 5 Repair Bay with 7 robots"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Multi-Robot Discount Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Multi-Robot Discount Formula should cap discount at 90% for Level 10 Repair Bay with 10 robots","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should cap discount at 90% for Level 10 Repair Bay with 10 robots"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Multi-Robot Discount Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Multi-Robot Discount Formula should cap discount at 90% for Level 6 Repair Bay with 10 robots","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should cap discount at 90% for Level 6 Repair Bay with 10 robots"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Medical Bay Integration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Medical Bay Integration should apply Medical Bay reduction with multi-robot discount","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should apply Medical Bay reduction with multi-robot discount"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Medical Bay Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Medical Bay Integration should preserve Medical Bay logic for destroyed robots","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should preserve Medical Bay logic for destroyed robots"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Edge Cases should handle 0 robots (backward compatible)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle 0 robots (backward compatible)"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Edge Cases should handle 0 repair bay level","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle 0 repair bay level"},{"ancestorTitles":["calculateRepairCost - Multi-Robot Discount","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"calculateRepairCost - Multi-Robot Discount Edge Cases should apply discount after damage multipliers","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should apply discount after damage multipliers"}],"endTime":1771861044060,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/repairCostMultiRobot.test.ts","startTime":1771861044044,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Mitigation Formula"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Mitigation Formula should calculate correct mitigation percentage for various dampener values","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should calculate correct mitigation percentage for various dampener values"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Mitigation Formula"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Mitigation Formula should calculate correct damage multiplier from mitigation","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should calculate correct damage multiplier from mitigation"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Damage Reduction Examples"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Damage Reduction Examples should reduce 100 damage with 10 dampeners (2% reduction)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reduce 100 damage with 10 dampeners (2% reduction)"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Damage Reduction Examples"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Damage Reduction Examples should reduce 100 damage with 25 dampeners (5% reduction)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reduce 100 damage with 25 dampeners (5% reduction)"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Damage Reduction Examples"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Damage Reduction Examples should reduce 100 damage with 50 dampeners (10% reduction)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reduce 100 damage with 50 dampeners (10% reduction)"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Damage Reduction Examples"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Damage Reduction Examples should cap reduction at 15% for 75+ dampeners","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should cap reduction at 15% for 75+ dampeners"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Combined Crit and Mitigation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Combined Crit and Mitigation should apply both crit reduction AND pre-shield mitigation on crits","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should apply both crit reduction AND pre-shield mitigation on crits"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Combined Crit and Mitigation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Combined Crit and Mitigation should apply mitigation even when crit multiplier is floored at 1.2","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should apply mitigation even when crit multiplier is floored at 1.2"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Edge Cases should handle 0 dampeners (no mitigation)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle 0 dampeners (no mitigation)"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Edge Cases should handle fractional dampener values","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle fractional dampener values"},{"ancestorTitles":["Damage Dampeners - Pre-Shield Mitigation","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Pre-Shield Mitigation Edge Cases should apply mitigation before shield, after crit","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should apply mitigation before shield, after crit"},{"ancestorTitles":["Damage Dampeners - Integration Verification"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Integration Verification should demonstrate dampeners now provide value on every hit","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should demonstrate dampeners now provide value on every hit"},{"ancestorTitles":["Damage Dampeners - Integration Verification"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Damage Dampeners - Integration Verification should demonstrate cap prevents dampeners from being overpowered","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should demonstrate cap prevents dampeners from being overpowered"}],"endTime":1771861044083,"message":"","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/damageDampeners.test.ts","startTime":1771861044062,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/integration/tagTeamCompleteCycle.test.ts\u001b[0m:\u001b[93m300\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2552: \u001b[0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?\n\n    \u001b[7m300\u001b[0m         robot1Id: { in: testRobots.map(r => r.id) },\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/tagTeamCompleteCycle.test.ts\u001b[0m:\u001b[93m25\u001b[0m:\u001b[93m7\u001b[0m\n        \u001b[7m25\u001b[0m   let testRobotIds: number[] = [];\n        \u001b[7m  \u001b[0m \u001b[96m      ~~~~~~~~~~~~\u001b[0m\n        'testRobotIds' is declared here.\n    \u001b[96mtests/integration/tagTeamCompleteCycle.test.ts\u001b[0m:\u001b[93m300\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'r' implicitly has an 'any' type.\n\n    \u001b[7m300\u001b[0m         robot1Id: { in: testRobots.map(r => r.id) },\n    \u001b[7m   \u001b[0m \u001b[91m                                       ~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamCompleteCycle.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/integration/tagTeamByeHandling.test.ts\u001b[0m:\u001b[93m245\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2552: \u001b[0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?\n\n    \u001b[7m245\u001b[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/tagTeamByeHandling.test.ts\u001b[0m:\u001b[93m24\u001b[0m:\u001b[93m7\u001b[0m\n        \u001b[7m24\u001b[0m   let testRobotIds: number[] = [];\n        \u001b[7m  \u001b[0m \u001b[96m      ~~~~~~~~~~~~\u001b[0m\n        'testRobotIds' is declared here.\n    \u001b[96mtests/integration/tagTeamByeHandling.test.ts\u001b[0m:\u001b[93m245\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'r' implicitly has an 'any' type.\n\n    \u001b[7m245\u001b[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);\n    \u001b[7m   \u001b[0m \u001b[91m                                          ~\u001b[0m\n    \u001b[96mtests/integration/tagTeamByeHandling.test.ts\u001b[0m:\u001b[93m257\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2552: \u001b[0mCannot find name 'testUsers'. Did you mean 'testUserIds'?\n\n    \u001b[7m257\u001b[0m     const originalUser = testUsers.find(u => u.id === user!.id);\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/tagTeamByeHandling.test.ts\u001b[0m:\u001b[93m23\u001b[0m:\u001b[93m7\u001b[0m\n        \u001b[7m23\u001b[0m   let testUserIds: number[] = [];\n        \u001b[7m  \u001b[0m \u001b[96m      ~~~~~~~~~~~\u001b[0m\n        'testUserIds' is declared here.\n    \u001b[96mtests/integration/tagTeamByeHandling.test.ts\u001b[0m:\u001b[93m257\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'u' implicitly has an 'any' type.\n\n    \u001b[7m257\u001b[0m     const originalUser = testUsers.find(u => u.id === user!.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                        ~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamByeHandling.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m40\u001b[0m:\u001b[93m18\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'robot' does not exist in type 'WeaponInventoryWhereInput'.\n\n    \u001b[7m40\u001b[0m         where: { robot: { id: { in: testRobotIds } } },\n    \u001b[7m  \u001b[0m \u001b[91m                 ~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m148\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m148\u001b[0m           loadoutType: 'single',\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m149\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'mainWeaponId'.\n\n    \u001b[7m149\u001b[0m           mainWeaponId: weaponInv.id,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m149\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'weaponInv'.\n\n    \u001b[7m149\u001b[0m           mainWeaponId: weaponInv.id,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m150\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'currentLeague'.\n\n    \u001b[7m150\u001b[0m           currentLeague: 'bronze',\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m150\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m150\u001b[0m           currentLeague: 'bronze',\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m151\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'leagueId'.\n\n    \u001b[7m151\u001b[0m           leagueId: 'bronze_1',\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m151\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m151\u001b[0m           leagueId: 'bronze_1',\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m152\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'leaguePoints'.\n\n    \u001b[7m152\u001b[0m           leaguePoints: 0,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m152\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m152\u001b[0m           leaguePoints: 0,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m153\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'cyclesInCurrentLeague'.\n\n    \u001b[7m153\u001b[0m           cyclesInCurrentLeague: 0,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m153\u001b[0m:\u001b[93m34\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m153\u001b[0m           cyclesInCurrentLeague: 0,\n    \u001b[7m   \u001b[0m \u001b[91m                                 ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m155\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'combatPower'.\n\n    \u001b[7m155\u001b[0m           combatPower: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m155\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m155\u001b[0m           combatPower: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m156\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'targetingSystems'.\n\n    \u001b[7m156\u001b[0m           targetingSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m156\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m156\u001b[0m           targetingSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m157\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'criticalSystems'.\n\n    \u001b[7m157\u001b[0m           criticalSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m157\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m157\u001b[0m           criticalSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                           ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m158\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'penetration'.\n\n    \u001b[7m158\u001b[0m           penetration: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m158\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m158\u001b[0m           penetration: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'weaponControl'.\n\n    \u001b[7m159\u001b[0m           weaponControl: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m159\u001b[0m           weaponControl: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m160\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'attackSpeed'.\n\n    \u001b[7m160\u001b[0m           attackSpeed: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m160\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m160\u001b[0m           attackSpeed: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m161\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'armorPlating'.\n\n    \u001b[7m161\u001b[0m           armorPlating: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m161\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m161\u001b[0m           armorPlating: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m162\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'shieldCapacity'.\n\n    \u001b[7m162\u001b[0m           shieldCapacity: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m162\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m162\u001b[0m           shieldCapacity: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m163\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'evasionThrusters'.\n\n    \u001b[7m163\u001b[0m           evasionThrusters: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m163\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m163\u001b[0m           evasionThrusters: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m164\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'damageDampeners'.\n\n    \u001b[7m164\u001b[0m           damageDampeners: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m164\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m164\u001b[0m           damageDampeners: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                           ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m165\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'counterProtocols'.\n\n    \u001b[7m165\u001b[0m           counterProtocols: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m165\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m165\u001b[0m           counterProtocols: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m166\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'hullIntegrity'.\n\n    \u001b[7m166\u001b[0m           hullIntegrity: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m166\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m166\u001b[0m           hullIntegrity: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m167\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'servoMotors'.\n\n    \u001b[7m167\u001b[0m           servoMotors: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m167\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m167\u001b[0m           servoMotors: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m168\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'gyroStabilizers'.\n\n    \u001b[7m168\u001b[0m           gyroStabilizers: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m168\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m168\u001b[0m           gyroStabilizers: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                           ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m169\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'hydraulicSystems'.\n\n    \u001b[7m169\u001b[0m           hydraulicSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m169\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m169\u001b[0m           hydraulicSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m170\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'powerCore'.\n\n    \u001b[7m170\u001b[0m           powerCore: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m170\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m170\u001b[0m           powerCore: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                     ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m171\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'combatAlgorithms'.\n\n    \u001b[7m171\u001b[0m           combatAlgorithms: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m171\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m171\u001b[0m           combatAlgorithms: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m172\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'threatAnalysis'.\n\n    \u001b[7m172\u001b[0m           threatAnalysis: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m172\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m172\u001b[0m           threatAnalysis: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m173\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'adaptiveAI'.\n\n    \u001b[7m173\u001b[0m           adaptiveAI: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m173\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m173\u001b[0m           adaptiveAI: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m174\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'logicCores'.\n\n    \u001b[7m174\u001b[0m           logicCores: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m174\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m174\u001b[0m           logicCores: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m175\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'syncProtocols'.\n\n    \u001b[7m175\u001b[0m           syncProtocols: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m175\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m175\u001b[0m           syncProtocols: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m176\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'supportSystems'.\n\n    \u001b[7m176\u001b[0m           supportSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m176\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m176\u001b[0m           supportSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m177\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'formationTactics'.\n\n    \u001b[7m177\u001b[0m           formationTactics: 10,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m177\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2695: \u001b[0mLeft side of comma operator is unused and has no side effects.\n\n    \u001b[7m177\u001b[0m           formationTactics: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m180\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m180\u001b[0m       testRobots.push(robot);\n    \u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m180\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2448: \u001b[0mBlock-scoped variable 'robot' used before its declaration.\n\n    \u001b[7m180\u001b[0m       testRobots.push(robot);\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m212\u001b[0m:\u001b[93m11\u001b[0m\n        \u001b[7m212\u001b[0m     const robot = testRobots[0];\n        \u001b[7m   \u001b[0m \u001b[96m          ~~~~~\u001b[0m\n        'robot' is declared here.\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m181\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobotIds'.\n\n    \u001b[7m181\u001b[0m       testRobotIds.push(robot.id);\n    \u001b[7m   \u001b[0m \u001b[91m      ~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m181\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2448: \u001b[0mBlock-scoped variable 'robot' used before its declaration.\n\n    \u001b[7m181\u001b[0m       testRobotIds.push(robot.id);\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m212\u001b[0m:\u001b[93m11\u001b[0m\n        \u001b[7m212\u001b[0m     const robot = testRobots[0];\n        \u001b[7m   \u001b[0m \u001b[96m          ~~~~~\u001b[0m\n        'robot' is declared here.\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m187\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m187\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m194\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m194\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m202\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m212\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m212\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m254\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m254\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m261\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m261\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m269\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m269\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m275\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m275\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m321\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m321\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m328\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m328\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m336\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m336\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m342\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m342\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m384\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m384\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m389\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m389\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m441\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m441\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m480\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m480\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m496\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m496\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m529\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m529\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m535\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m535\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m542\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m542\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m549\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m549\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m608\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m608\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m614\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m614\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m621\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m621\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m628\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m628\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m685\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m685\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m691\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m691\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m698\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m698\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m706\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m706\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m772\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m772\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m778\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m778\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m785\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m785\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m792\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m792\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m836\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testRobots'.\n\n    \u001b[7m836\u001b[0m     const robot = testRobots[0];\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m842\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUser'.\n\n    \u001b[7m842\u001b[0m         userId: testUser.id,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m149\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m149\u001b[0m           mainWeaponId: weaponInv.id,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m150\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m150\u001b[0m           currentLeague: 'bronze',\n    \u001b[7m   \u001b[0m \u001b[91m                       ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m151\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m151\u001b[0m           leagueId: 'bronze_1',\n    \u001b[7m   \u001b[0m \u001b[91m                  ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m152\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m152\u001b[0m           leaguePoints: 0,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m153\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m153\u001b[0m           cyclesInCurrentLeague: 0,\n    \u001b[7m   \u001b[0m \u001b[91m                               ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m155\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m155\u001b[0m           combatPower: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                     ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m156\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m156\u001b[0m           targetingSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m157\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m157\u001b[0m           criticalSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m158\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m158\u001b[0m           penetration: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                     ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m159\u001b[0m           weaponControl: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                       ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m160\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m160\u001b[0m           attackSpeed: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                     ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m161\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m161\u001b[0m           armorPlating: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m162\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m162\u001b[0m           shieldCapacity: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m163\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m163\u001b[0m           evasionThrusters: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m164\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m164\u001b[0m           damageDampeners: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m165\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m165\u001b[0m           counterProtocols: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m166\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m166\u001b[0m           hullIntegrity: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                       ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m167\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m167\u001b[0m           servoMotors: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                     ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m168\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m168\u001b[0m           gyroStabilizers: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m169\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m169\u001b[0m           hydraulicSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m170\u001b[0m:\u001b[93m20\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m170\u001b[0m           powerCore: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                   ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m171\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m171\u001b[0m           combatAlgorithms: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m172\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m172\u001b[0m           threatAnalysis: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m173\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m173\u001b[0m           adaptiveAI: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                    ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m174\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m174\u001b[0m           logicCores: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                    ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m175\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m175\u001b[0m           syncProtocols: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                       ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m176\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m176\u001b[0m           supportSystems: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m177\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m';' expected.\n\n    \u001b[7m177\u001b[0m           formationTactics: 10,\n    \u001b[7m   \u001b[0m \u001b[91m                          ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m178\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1109: \u001b[0mExpression expected.\n\n    \u001b[7m178\u001b[0m         },\n    \u001b[7m   \u001b[0m \u001b[91m        ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m179\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1135: \u001b[0mArgument expression expected.\n\n    \u001b[7m179\u001b[0m       });\n    \u001b[7m   \u001b[0m \u001b[91m      ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m182\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m182\u001b[0m     }\n    \u001b[7m   \u001b[0m \u001b[91m    ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m248\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m248\u001b[0m   });\n    \u001b[7m   \u001b[0m \u001b[91m  ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m248\u001b[0m:\u001b[93m4\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m248\u001b[0m   });\n    \u001b[7m   \u001b[0m \u001b[91m   ~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m894\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m894\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m~\u001b[0m\n    \u001b[96mtests/integration/repairCostConsistency.test.ts\u001b[0m:\u001b[93m894\u001b[0m:\u001b[93m2\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m894\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m ~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/repairCostConsistency.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m148\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m148\u001b[0m       const result = await generateBattleReadyUsers(5, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m166\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m166\u001b[0m       await generateBattleReadyUsers(3, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m181\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m181\u001b[0m       await generateBattleReadyUsers(1, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m208\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m208\u001b[0m       await generateBattleReadyUsers(2, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m229\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m229\u001b[0m       await generateBattleReadyUsers(1, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m247\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m247\u001b[0m       await generateBattleReadyUsers(3, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m263\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m263\u001b[0m       await generateBattleReadyUsers(5, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m301\u001b[0m:\u001b[93m41\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m301\u001b[0m       await generateBattleReadyUsers(3, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                        ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m327\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m327\u001b[0m       const result = await generateBattleReadyUsers(3, cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m351\u001b[0m:\u001b[93m5\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1005: \u001b[0m',' expected.\n\n    \u001b[7m351\u001b[0m     });\n    \u001b[7m   \u001b[0m \u001b[91m    ~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m421\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m421\u001b[0m   });\n    \u001b[7m   \u001b[0m \u001b[91m  ~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m421\u001b[0m:\u001b[93m4\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m421\u001b[0m   });\n    \u001b[7m   \u001b[0m \u001b[91m   ~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m422\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m422\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m~\u001b[0m\n    \u001b[96mtests/userGeneration.test.ts\u001b[0m:\u001b[93m422\u001b[0m:\u001b[93m2\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m422\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m ~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/userGeneration.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m12\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../src/services/trendAnalysisService' or its corresponding type declarations.\n\n    \u001b[7m12\u001b[0m import { trendAnalysisService } from '../src/services/trendAnalysisService';\n    \u001b[7m  \u001b[0m \u001b[91m                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m192\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'd' implicitly has an 'any' type.\n\n    \u001b[7m192\u001b[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);\n    \u001b[7m   \u001b[0m \u001b[91m                                                          ~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m192\u001b[0m:\u001b[93m85\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'a' implicitly has an 'any' type.\n\n    \u001b[7m192\u001b[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);\n    \u001b[7m   \u001b[0m \u001b[91m                                                                                    ~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m192\u001b[0m:\u001b[93m88\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'b' implicitly has an 'any' type.\n\n    \u001b[7m192\u001b[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);\n    \u001b[7m   \u001b[0m \u001b[91m                                                                                       ~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m203\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'd' implicitly has an 'any' type.\n\n    \u001b[7m203\u001b[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);\n    \u001b[7m   \u001b[0m \u001b[91m                                                    ~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m260\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.\n\n    \u001b[7m260\u001b[0m                   user: { connect: { id: user.id } },\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m318\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'd' implicitly has an 'any' type.\n\n    \u001b[7m318\u001b[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);\n    \u001b[7m   \u001b[0m \u001b[91m                                                          ~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m318\u001b[0m:\u001b[93m85\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'a' implicitly has an 'any' type.\n\n    \u001b[7m318\u001b[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);\n    \u001b[7m   \u001b[0m \u001b[91m                                                                                    ~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m318\u001b[0m:\u001b[93m88\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'b' implicitly has an 'any' type.\n\n    \u001b[7m318\u001b[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);\n    \u001b[7m   \u001b[0m \u001b[91m                                                                                       ~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m329\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'd' implicitly has an 'any' type.\n\n    \u001b[7m329\u001b[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);\n    \u001b[7m   \u001b[0m \u001b[91m                                                    ~\u001b[0m\n    \u001b[96mtests/trendAnalysis.property.test.ts\u001b[0m:\u001b[93m419\u001b[0m:\u001b[93m59\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7006: \u001b[0mParameter 'd' implicitly has an 'any' type.\n\n    \u001b[7m419\u001b[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber);\n    \u001b[7m   \u001b[0m \u001b[91m                                                          ~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/trendAnalysis.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/tagTeamModelIntegration.test.ts\u001b[0m:\u001b[93m307\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18047: \u001b[0m'match.team2' is possibly 'null'.\n\n    \u001b[7m307\u001b[0m       expect(match?.team2.activeRobot.id).toBe(testRobot3Id);\n    \u001b[7m   \u001b[0m \u001b[91m             ~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamModelIntegration.test.ts\u001b[0m:\u001b[93m308\u001b[0m:\u001b[93m14\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18047: \u001b[0m'match.team2' is possibly 'null'.\n\n    \u001b[7m308\u001b[0m       expect(match?.team2.reserveRobot.id).toBe(testRobot4Id);\n    \u001b[7m   \u001b[0m \u001b[91m             ~~~~~~~~~~~~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamModelIntegration.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m65\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.\n\n    \u001b[7m65\u001b[0m           { userId: testUserId1 },\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m66\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.\n\n    \u001b[7m66\u001b[0m           { userId: testUserId2 },\n    \u001b[7m  \u001b[0m \u001b[91m            ~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m125\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.\n\n    \u001b[7m125\u001b[0m           { userId: testUserId1 },\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m125\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m125\u001b[0m           { userId: testUserId1 },\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m126\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.\n\n    \u001b[7m126\u001b[0m           { userId: testUserId2 },\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m126\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m126\u001b[0m           { userId: testUserId2 },\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m133\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m133\u001b[0m           { team1: { stableId: testUserId1 } },\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m134\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m134\u001b[0m           { team1: { stableId: testUserId2 } },\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m135\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m135\u001b[0m           { team2: { stableId: testUserId1 } },\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m136\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m136\u001b[0m           { team2: { stableId: testUserId2 } },\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m143\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m143\u001b[0m           { stableId: testUserId1 },\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m144\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m144\u001b[0m           { stableId: testUserId2 },\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m151\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m151\u001b[0m           { userId: testUserId1 },\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m152\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m152\u001b[0m           { userId: testUserId2 },\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m159\u001b[0m           { userId: testUserId1 },\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m160\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m160\u001b[0m           { userId: testUserId2 },\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m186\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m186\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m186\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m186\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m189\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m189\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m189\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m189\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m192\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m192\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m192\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m192\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m195\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m195\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m195\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m195\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m201\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m201\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m216\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m216\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m232\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m232\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m247\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m247\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m261\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m261\u001b[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m262\u001b[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m337\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m337\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m337\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m337\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m340\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m340\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m340\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m340\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m343\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m343\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m343\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m343\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m346\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m346\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m346\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m346\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m352\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m352\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m367\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m367\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m382\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m382\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m397\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m397\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m411\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m411\u001b[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m412\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m412\u001b[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m492\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m492\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m492\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m492\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m495\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m495\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m495\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m495\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m498\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m498\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m498\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m498\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m501\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m501\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m501\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m501\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m507\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m507\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m522\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m522\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m537\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m537\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m552\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m552\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m566\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m566\u001b[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m567\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m567\u001b[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m648\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m648\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m648\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m648\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m651\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m651\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m651\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m651\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m654\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m654\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m654\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m654\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m657\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m657\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m657\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m657\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m663\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m663\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m678\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m678\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m693\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m693\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m708\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m708\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m722\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m722\u001b[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m723\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m723\u001b[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m803\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m803\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m803\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m803\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m806\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m806\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m806\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m806\u001b[0m             data: { userId: testUserId1, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m809\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m809\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m809\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m809\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m812\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m812\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m812\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18004: \u001b[0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.\n\n    \u001b[7m812\u001b[0m             data: { userId: testUserId2, weaponId },\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m818\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m818\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m833\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m833\u001b[0m               userId: testUserId1,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m848\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m848\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m863\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m863\u001b[0m               userId: testUserId2,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m877\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId1'.\n\n    \u001b[7m877\u001b[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m878\u001b[0m:\u001b[93m48\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2304: \u001b[0mCannot find name 'testUserId2'.\n\n    \u001b[7m878\u001b[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);\n    \u001b[7m   \u001b[0m \u001b[91m                                               ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m944\u001b[0m:\u001b[93m1\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m944\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m~\u001b[0m\n    \u001b[96mtests/tagTeamBattleLogCompleteness.property.test.ts\u001b[0m:\u001b[93m944\u001b[0m:\u001b[93m2\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS1128: \u001b[0mDeclaration or statement expected.\n\n    \u001b[7m944\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m ~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamBattleLogCompleteness.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/stanceAndYield.test.ts\u001b[0m:\u001b[93m13\u001b[0m:\u001b[93m65\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.\n      Types of property 'totalTagTeamBattles' are incompatible.\n        Type 'number | undefined' is not assignable to type 'number'.\n          Type 'undefined' is not assignable to type 'number'.\n\n    \u001b[7m 13\u001b[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({\n    \u001b[7m   \u001b[0m \u001b[91m                                                                ~\u001b[0m\n    \u001b[7m 14\u001b[0m   id: 1,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~\u001b[0m\n    \u001b[7m...\u001b[0m \n    \u001b[7m 71\u001b[0m   ...overrides,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m 72\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/stanceAndYield.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/robotStatsView.test.ts\u001b[0m:\u001b[93m79\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m79\u001b[0m           userId: testUserId,\n    \u001b[7m  \u001b[0m \u001b[91m          ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/robotStatsView.test.ts\u001b[0m:\u001b[93m113\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m113\u001b[0m         userId: testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotStatsView.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/robotCalculations.test.ts\u001b[0m:\u001b[93m12\u001b[0m:\u001b[93m65\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.\n      Types of property 'totalTagTeamBattles' are incompatible.\n        Type 'number | undefined' is not assignable to type 'number'.\n          Type 'undefined' is not assignable to type 'number'.\n\n    \u001b[7m 12\u001b[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({\n    \u001b[7m   \u001b[0m \u001b[91m                                                                ~\u001b[0m\n    \u001b[7m 13\u001b[0m   id: 1,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~\u001b[0m\n    \u001b[7m...\u001b[0m \n    \u001b[7m 70\u001b[0m   ...overrides,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m 71\u001b[0m });\n    \u001b[7m   \u001b[0m \u001b[91m~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/robotCalculations.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/profileUpdate.property.test.ts\u001b[0m:\u001b[93m491\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7053: \u001b[0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: \"public\" | \"private\" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: \"dark\" | ... 2 more ... | undefined; }'.\n      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: \"public\" | \"private\" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: \"dark\" | ... 2 more ... | undefined; }'.\n\n    \u001b[7m491\u001b[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);\n    \u001b[7m   \u001b[0m \u001b[91m                                          ~~~~~~~~\u001b[0m\n    \u001b[96mtests/profileUpdate.property.test.ts\u001b[0m:\u001b[93m518\u001b[0m:\u001b[93m43\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS7053: \u001b[0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: \"public\" | \"private\" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: \"dark\" | ... 2 more ... | undefined; }'.\n      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: \"public\" | \"private\" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: \"dark\" | ... 2 more ... | undefined; }'.\n\n    \u001b[7m518\u001b[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);\n    \u001b[7m   \u001b[0m \u001b[91m                                          ~~~~~~~~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileUpdate.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/profileApiResponse.property.test.ts\u001b[0m:\u001b[93m66\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'totalBattles' does not exist in type '(Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput)'.\n\n    \u001b[7m66\u001b[0m                 totalBattles: userProfile.totalBattles,\n    \u001b[7m  \u001b[0m \u001b[91m                ~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m3397\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m3397\u001b[0m     data: XOR<UserCreateInput, UserUncheckedCreateInput>\n        \u001b[7m    \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: UserSelect<DefaultArgs> | null | undefined; include?: UserInclude<DefaultArgs> | null | undefined; data: (Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput); }'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/profileApiResponse.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/multiMatchScheduling.property.test.ts\u001b[0m:\u001b[93m226\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'number | null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.\n      Type 'null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.\n\n    \u001b[7m226\u001b[0m                 where: { id: match.team2Id },\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m22658\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m22658\u001b[0m     id?: number\n        \u001b[7m     \u001b[0m \u001b[96m    ~~\u001b[0m\n        The expected type comes from property 'id' which is declared here on type 'TagTeamWhereUniqueInput'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/multiMatchScheduling.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/migrateBattlesToEvents.test.ts\u001b[0m:\u001b[93m8\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2307: \u001b[0mCannot find module '../src/scripts/migrateBattlesToEvents' or its corresponding type declarations.\n\n    \u001b[7m8\u001b[0m import { migrateBattlesToEvents, verifyMigration } from '../src/scripts/migrateBattlesToEvents';\n    \u001b[7m \u001b[0m \u001b[91m                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/migrateBattlesToEvents.test.ts\u001b[0m:\u001b[93m111\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot1DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.\n\n    \u001b[7m111\u001b[0m       robot1DamageDealt: battle.robot1DamageDealt,\n    \u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/migrateBattlesToEvents.test.ts\u001b[0m:\u001b[93m112\u001b[0m:\u001b[93m33\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot2DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.\n\n    \u001b[7m112\u001b[0m       robot2DamageDealt: battle.robot2DamageDealt,\n    \u001b[7m   \u001b[0m \u001b[91m                                ~~~~~~~~~~~~~~~~~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/migrateBattlesToEvents.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/metricProgression.property.test.ts\u001b[0m:\u001b[93m131\u001b[0m:\u001b[93m42\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot1FameAwarded' does not exist on type '{ robot2Id: number; robot1Id: number; id: number; createdAt: Date; winnerId: number | null; battleType: string; leagueType: string; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m131\u001b[0m               const fameAwarded = battle.robot1FameAwarded;\n    \u001b[7m   \u001b[0m \u001b[91m                                         ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/metricProgression.property.test.ts\u001b[0m:\u001b[93m343\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m343\u001b[0m                 userId,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/metricProgression.property.test.ts\u001b[0m:\u001b[93m590\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m590\u001b[0m         userId,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/metricProgression.property.test.ts\u001b[0m:\u001b[93m644\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m644\u001b[0m         userId,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/metricProgression.property.test.ts\u001b[0m:\u001b[93m698\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m698\u001b[0m         userId,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/metricProgression.property.test.ts\u001b[0m:\u001b[93m752\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m752\u001b[0m         userId,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/metricProgression.property.test.ts\u001b[0m:\u001b[93m806\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m806\u001b[0m         userId,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/metricProgression.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/matchListInclusion.property.test.ts\u001b[0m:\u001b[93m298\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m298\u001b[0m                 userId: testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/matchListInclusion.property.test.ts\u001b[0m:\u001b[93m333\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m333\u001b[0m                 userId: testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchListInclusion.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/integration.test.ts\u001b[0m:\u001b[93m159\u001b[0m:\u001b[93m22\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'null' is not assignable to type 'InputJsonValue | FieldRef<\"Battle\", \"Json\"> | JsonNullValueFilter | undefined'.\n\n    \u001b[7m159\u001b[0m         battleLog: { not: null },\n    \u001b[7m   \u001b[0m \u001b[91m                     ~~~\u001b[0m\n    \u001b[96mtests/integration.test.ts\u001b[0m:\u001b[93m268\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'null' is not assignable to type 'number | IntFilter<\"Battle\"> | undefined'.\n\n    \u001b[7m268\u001b[0m           { robot1Id: null },\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m21904\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m21904\u001b[0m     robot1Id?: IntFilter<\"Battle\"> | number\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~~~~~\u001b[0m\n        The expected type comes from property 'robot1Id' which is declared here on type 'BattleWhereInput'\n    \u001b[96mtests/integration.test.ts\u001b[0m:\u001b[93m269\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'null' is not assignable to type 'number | IntFilter<\"Battle\"> | undefined'.\n\n    \u001b[7m269\u001b[0m           { robot2Id: null },\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m21905\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m21905\u001b[0m     robot2Id?: IntFilter<\"Battle\"> | number\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~~~~~\u001b[0m\n        The expected type comes from property 'robot2Id' which is declared here on type 'BattleWhereInput'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m53\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m53\u001b[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });\n    \u001b[7m  \u001b[0m \u001b[91m                                                              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m54\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m54\u001b[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });\n    \u001b[7m  \u001b[0m \u001b[91m                                                              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m59\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m59\u001b[0m               userId: testUserId,\n    \u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m73\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m73\u001b[0m               testUserId,\n    \u001b[7m  \u001b[0m \u001b[91m              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m89\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m89\u001b[0m               testUserId,\n    \u001b[7m  \u001b[0m \u001b[91m              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m99\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m99\u001b[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [\n    \u001b[7m  \u001b[0m \u001b[91m                                                       ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m113\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m113\u001b[0m             testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m150\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m150\u001b[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });\n    \u001b[7m   \u001b[0m \u001b[91m                                                              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m151\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m151\u001b[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });\n    \u001b[7m   \u001b[0m \u001b[91m                                                              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m156\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m156\u001b[0m               userId: testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m170\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m170\u001b[0m               testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m197\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m197\u001b[0m                 userId: testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m198\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testRobotId' is used before being assigned.\n\n    \u001b[7m198\u001b[0m                 robotId: testRobotId,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m208\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m208\u001b[0m             await eventLogger.logOperatingCosts(i, testUserId, [\n    \u001b[7m   \u001b[0m \u001b[91m                                                   ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m222\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m222\u001b[0m             testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m256\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m256\u001b[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });\n    \u001b[7m   \u001b[0m \u001b[91m                                                              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m257\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m257\u001b[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });\n    \u001b[7m   \u001b[0m \u001b[91m                                                              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m262\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m262\u001b[0m               userId: testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m                      ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m276\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m276\u001b[0m               testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m303\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m303\u001b[0m                 userId: testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m304\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testRobotId' is used before being assigned.\n\n    \u001b[7m304\u001b[0m                 robotId: testRobotId,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m316\u001b[0m:\u001b[93m52\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m316\u001b[0m             await eventLogger.logOperatingCosts(i, testUserId, [\n    \u001b[7m   \u001b[0m \u001b[91m                                                   ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m330\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m330\u001b[0m             testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m366\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m366\u001b[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });\n    \u001b[7m   \u001b[0m \u001b[91m                                                              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m367\u001b[0m:\u001b[93m63\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m367\u001b[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });\n    \u001b[7m   \u001b[0m \u001b[91m                                                              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m372\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m372\u001b[0m               { userId: testUserId, facilityType: 'income_generator', level: 1 },\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m373\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m373\u001b[0m               { userId: testUserId, facilityType: 'repair_bay', level: 1 },\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m380\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m380\u001b[0m             testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m389\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m389\u001b[0m             testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m407\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m407\u001b[0m               testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m              ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m428\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m428\u001b[0m                 userId: testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m                        ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m429\u001b[0m:\u001b[93m26\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testRobotId' is used before being assigned.\n\n    \u001b[7m429\u001b[0m                 robotId: testRobotId,\n    \u001b[7m   \u001b[0m \u001b[91m                         ~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m439\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m439\u001b[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [\n    \u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m455\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m455\u001b[0m             testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/facilityROI.property.test.ts\u001b[0m:\u001b[93m459\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2454: \u001b[0mVariable 'testUserId' is used before being assigned.\n\n    \u001b[7m459\u001b[0m             testUserId,\n    \u001b[7m   \u001b[0m \u001b[91m            ~~~~~~~~~~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityROI.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/eventLogger.property.test.ts\u001b[0m:\u001b[93m92\u001b[0m:\u001b[93m15\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to parameter of type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }[]'.\n      Type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }'.\n        Types of property 'userId' are incompatible.\n          Type 'number | null' is not assignable to type 'number | undefined'.\n            Type 'null' is not assignable to type 'number | undefined'.\n\n    \u001b[7m 92\u001b[0m               events.map(e => ({\n    \u001b[7m   \u001b[0m \u001b[91m              ~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m 93\u001b[0m                 eventType: e.eventType,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m...\u001b[0m \n    \u001b[7m 96\u001b[0m                 robotId: e.robotId,\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[7m 97\u001b[0m               }))\n    \u001b[7m   \u001b[0m \u001b[91m~~~~~~~~~~~~~~~~~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/eloProgression.property.test.ts\u001b[0m:\u001b[93m161\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m161\u001b[0m                   userId,\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/eloProgression.property.test.ts\u001b[0m:\u001b[93m351\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m351\u001b[0m                   userId,\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/eloProgression.property.test.ts\u001b[0m:\u001b[93m529\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m529\u001b[0m                   userId,\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/eloProgression.property.test.ts\u001b[0m:\u001b[93m684\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m684\u001b[0m                 userId,\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eloProgression.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m282\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.\n\n    \u001b[7m282\u001b[0m                   user: { connect: { id: user.id } },\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m359\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m359\u001b[0m               robot1Metric.damageDealt += createdBattle.robot1DamageDealt;\n    \u001b[7m   \u001b[0m \u001b[91m                                                        ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m360\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m360\u001b[0m               robot1Metric.damageReceived += createdBattle.robot2DamageDealt;\n    \u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m362\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot1FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m362\u001b[0m               robot1Metric.fameChange += createdBattle.robot1FameAwarded;\n    \u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m381\u001b[0m:\u001b[93m57\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m381\u001b[0m               robot2Metric.damageDealt += createdBattle.robot2DamageDealt;\n    \u001b[7m   \u001b[0m \u001b[91m                                                        ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m382\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m382\u001b[0m               robot2Metric.damageReceived += createdBattle.robot1DamageDealt;\n    \u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m384\u001b[0m:\u001b[93m56\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot2FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m384\u001b[0m               robot2Metric.fameChange += createdBattle.robot2FameAwarded;\n    \u001b[7m   \u001b[0m \u001b[91m                                                       ~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m528\u001b[0m:\u001b[93m19\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.\n\n    \u001b[7m528\u001b[0m                   user: { connect: { id: user.id } },\n    \u001b[7m   \u001b[0m \u001b[91m                  ~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m592\u001b[0m:\u001b[93m40\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m592\u001b[0m               actualUserIds.add(battle.userId);\n    \u001b[7m   \u001b[0m \u001b[91m                                       ~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m594\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m594\u001b[0m               if (!expectedStableMetrics.has(battle.userId)) {\n    \u001b[7m   \u001b[0m \u001b[91m                                                    ~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m595\u001b[0m:\u001b[93m50\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m595\u001b[0m                 expectedStableMetrics.set(battle.userId, {\n    \u001b[7m   \u001b[0m \u001b[91m                                                 ~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m602\u001b[0m:\u001b[93m64\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m602\u001b[0m               const metrics = expectedStableMetrics.get(battle.userId)!;\n    \u001b[7m   \u001b[0m \u001b[91m                                                               ~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m605\u001b[0m:\u001b[93m53\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot1PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m605\u001b[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;\n    \u001b[7m   \u001b[0m \u001b[91m                                                    ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m605\u001b[0m:\u001b[93m84\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot2PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m605\u001b[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;\n    \u001b[7m   \u001b[0m \u001b[91m                                                                                   ~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m606\u001b[0m:\u001b[93m51\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot1RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m606\u001b[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);\n    \u001b[7m   \u001b[0m \u001b[91m                                                  ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m606\u001b[0m:\u001b[93m84\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'robot2RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.\n\n    \u001b[7m606\u001b[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);\n    \u001b[7m   \u001b[0m \u001b[91m                                                                                   ~~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/cycleSnapshot.property.test.ts\u001b[0m:\u001b[93m659\u001b[0m:\u001b[93m17\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.\n\n    \u001b[7m659\u001b[0m                 user: { connect: { id: user.id } },\n    \u001b[7m   \u001b[0m \u001b[91m                ~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshot.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/byeTeamBattles.property.test.ts\u001b[0m:\u001b[93m16\u001b[0m:\u001b[93m3\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.\n      Types of property 'imageUrl' are incompatible.\n        Type 'string | null | undefined' is not assignable to type 'string | null'.\n          Type 'undefined' is not assignable to type 'string | null'.\n\n    \u001b[7m16\u001b[0m   return {\n    \u001b[7m  \u001b[0m \u001b[91m  ~~~~~~\u001b[0m\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/byeTeamBattles.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/battleLogStreamingRevenue.property.test.ts\u001b[0m:\u001b[93m111\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m111\u001b[0m       userId,\n    \u001b[7m   \u001b[0m \u001b[91m      ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleLogStreamingRevenue.property.test.ts","startTime":1771861048230,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1771861048230,"message":"  ● Test suite failed to run\n\n    \u001b[96mtests/analyticsApi.test.ts\u001b[0m:\u001b[93m228\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.\n      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.\n\n    \u001b[7m228\u001b[0m           stableMetrics: snapshot.stableMetrics,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m24461\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m24461\u001b[0m     stableMetrics: JsonNullValueInput | InputJsonValue\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~~~~~~~~~~\u001b[0m\n        The expected type comes from property 'stableMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'\n    \u001b[96mtests/analyticsApi.test.ts\u001b[0m:\u001b[93m229\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.\n      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.\n\n    \u001b[7m229\u001b[0m           robotMetrics: snapshot.robotMetrics,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m24462\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m24462\u001b[0m     robotMetrics: JsonNullValueInput | InputJsonValue\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~~~~~~~~~\u001b[0m\n        The expected type comes from property 'robotMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'\n    \u001b[96mtests/analyticsApi.test.ts\u001b[0m:\u001b[93m230\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.\n      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.\n\n    \u001b[7m230\u001b[0m           stepDurations: snapshot.stepDurations,\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m24463\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m24463\u001b[0m     stepDurations: JsonNullValueInput | InputJsonValue\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~~~~~~~~~~\u001b[0m\n        The expected type comes from property 'stepDurations' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'\n    \u001b[96mtests/analyticsApi.test.ts\u001b[0m:\u001b[93m1220\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m1220\u001b[0m           userId: testUserId,\n    \u001b[7m    \u001b[0m \u001b[91m          ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/analyticsApi.test.ts\u001b[0m:\u001b[93m1724\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m1724\u001b[0m             userId: testUserId,\n    \u001b[7m    \u001b[0m \u001b[91m            ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/analyticsApi.test.ts\u001b[0m:\u001b[93m2068\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m2068\u001b[0m         userId: testUserId,\n    \u001b[7m    \u001b[0m \u001b[91m        ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n    \u001b[96mtests/analyticsApi.test.ts\u001b[0m:\u001b[93m2211\u001b[0m:\u001b[93m13\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.\n\n    \u001b[7m2211\u001b[0m             userId: testUserId,\n    \u001b[7m    \u001b[0m \u001b[91m            ~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m11734\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m11734\u001b[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'\n","name":"/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/analyticsApi.test.ts","startTime":1771861048230,"status":"failed","summary":""}],"wasInterrupted":false}
