
> armoured-souls-backend@0.1.0 test
> jest --maxWorkers=1

FAIL tests/performanceDegradation.property.test.ts (20.381 s)
  ● Property 16: Performance Degradation Detection › Property 16.1: Degradation detected when recent average > 150% of baseline

    Property failed after 1 tests
    { seed: 1574437034, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [100,1.5099999904632568,"step_a"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:62:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:39:5)

  ● Property 16: Performance Degradation Detection › Property 16.2: No degradation when recent average <= 150% of baseline

    Property failed after 2 tests
    { seed: -1685842725, path: "1:0:1:0:1:0:1:0:0:2:0:1:0:1:0:2", endOnFailure: true }
    Counterexample: [100,0.6066201329231262,"step_x"]
    Shrunk 15 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:108:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:85:5)

  ● Property 16: Performance Degradation Detection › Property 16.3: Degradation severity correctly classified (warning vs critical)

    Property failed after 1 tests
    { seed: 1269604275, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [100,1.5099999904632568,"step_1"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:149:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:125:5)

  ● Property 16: Performance Degradation Detection › Property 16.4: Multiple steps monitored independently

    Property failed after 1 tests
    { seed: -666857945, path: "0:1:0:1:0", endOnFailure: true }
    Counterexample: [[{"stepName":"step_a","baselineDuration":100,"isDegraded":true},{"stepName":"step_a","baselineDuration":100,"isDegraded":false}]]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/performanceDegradation.property.test.ts:200:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:172:5)

  ● Property 16: Performance Degradation Detection › Property 16.5: Detection consistent across different baseline sizes

    Property failed after 2 tests
    { seed: -236302493, path: "1:0:2:0:1:0", endOnFailure: true }
    Counterexample: [500,70,"test_step_b"]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:264:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:241:5)

  ● Property 16: Performance Degradation Detection › Property 16.6: Alerts sorted by degradation percentage (highest first)

    Property failed after 1 tests
    { seed: 1376374264, path: "0:0:0:1:0:1:0:1:0:0:1:0:0:1:0:0:1:1:1:1:1", endOnFailure: true }
    Counterexample: [[{__proto__:null,"stepName":"s1","degradationMultiplier":1.600000023841858},{"stepName":"s1","degradationMultiplier":1.600000023841858},{"stepName":"s1","degradationMultiplier":1.7138359546661377}]]
    Shrunk 20 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/performanceDegradation.property.test.ts:308:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:282:5)

FAIL tests/integration/adminCycleGeneration.test.ts (26.245 s)
  ● Console

    console.log
      [Admin] Running 3 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 41 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 41 (1/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 41 (1/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:40.012Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 41)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 41)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 41: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:599:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 41 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 41 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 91 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle41.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 42 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 42 (2/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 42 (2/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:40.112Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 42)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 42)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 42 archetype users for Cycle 42...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/42: archetype_balanced_brawler_42_1 (archetype: balanced_brawler)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:41.209Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 42)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 39933 | Total: ₡600 | Facilities: streaming_studio(L6): ₡600

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡600

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 42 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39937 | Stable: test_user_1771859560896_lzbzr | Balance: ₡9,700,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 42

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 42

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 2 cycle_end_balance events for cycle 42

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Snapshot created for cycle 42

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Cycle snapshot created for cycle 42

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === Cycle 42 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 42 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 94 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle42.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 43 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 43 (3/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 43 (3/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:41.388Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 43)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 43)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 43 archetype users for Cycle 43...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/43: archetype_balanced_brawler_43_1 (archetype: balanced_brawler)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.error
      [Admin] Error in cycle 43: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:625:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 43 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 43 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 95 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle43.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 5 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:41.518Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:460:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 16 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:41.527Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 2 archetype users for Cycle 2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/2: archetype_glass_cannon_a_2_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:42.624Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 39937 | Total: ₡600 | Facilities: streaming_studio(L6): ₡600

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡600

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 2 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39940 | Stable: test_user_1771859562305_8ccgjk | Balance: ₡8,500,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 2 cycle_end_balance events for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 2 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 93 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 3 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 3 (3/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 3 (3/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:42.775Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 3 archetype users for Cycle 3...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/3: archetype_glass_cannon_c_3_1 (archetype: glass_cannon_c)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.error
      [Admin] Error in cycle 3: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:625:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 3 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 3 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 95 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle3.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 4 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 4 (4/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 4 (4/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:42.924Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 4)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 4)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 4 archetype users for Cycle 4...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/4: archetype_speed_demon_c_4_1 (archetype: speed_demon_c)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype speed_demon_c. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype speed_demon_c. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:44.018Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 4)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 4 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 4

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 4 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 4 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 4 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 89 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle4.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 5 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 5 (5/5)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 5 (5/5) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:44.154Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 5 archetype users for Cycle 5...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/5: archetype_melee_specialist_5_1 (archetype: melee_specialist)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype melee_specialist. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype melee_specialist. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:45.268Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 5 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 5

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 5

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 cycle_end_balance events for cycle 5

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 5 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 5 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 130 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle5.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 3 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 6 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 6 (1/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 6 (1/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:45.428Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 6 archetype users for Cycle 6...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/6: archetype_glass_cannon_a_6_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:46.546Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 6 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 6

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 6 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 6 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 6 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 90 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle6.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 7 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 7 (2/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 7 (2/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:46.711Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 7 archetype users for Cycle 7...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/7: archetype_balanced_brawler_7_1 (archetype: balanced_brawler)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:47.829Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 7 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 7

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 7 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 7 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 7 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 128 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle7.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 8 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 8 (3/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 8 (3/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:47.972Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 8 archetype users for Cycle 8...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/8: archetype_tank_fortress_8_1 (archetype: tank_fortress)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:49.076Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 8 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 8

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 8 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 8 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 8 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 89 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle8.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 3 bulk cycles (includeTournaments: false, generateUsersPerCycle: false)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:49.216Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:444:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 13 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:49.222Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 2: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:475:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 2 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 14 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 3 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 3 (3/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 3 (3/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:49.232Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:50.337Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 3 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 1 cycle_end_balance events for cycle 3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 3 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 3 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 126 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle3.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 2 bulk cycles (includeTournaments: false, generateUsersPerCycle: false)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:50.500Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:51.561Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 1 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39947 | Stable: test_user_prop5_1_1771859571239 | Balance: ₡1,041,227

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39948 | Stable: test_user_prop5_2_1771859571255 | Balance: ₡785,517

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 3 cycle_end_balance events for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 1 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 129 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:51.716Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 2: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 2 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 12 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 2 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:51.735Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 42816: Error: Robot 576725 not found
          at calculateStreamingRevenue (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/streamingRevenueService.ts:90:11)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:656:25)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStepComplete (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:287:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:432:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 13 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:51.796Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771859571784_0.9170630424303614 earned ₡1,003 from Battle #63977

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771859571786_0.4078364158986275 earned ₡1,000 from Battle #63977

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 42817: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 2 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 2 archetype users for Cycle 2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/2: archetype_glass_cannon_a_2_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:52.945Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (2 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 2 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39947 | Stable: test_user_prop5_1_1771859571239 | Balance: ₡1,343,507

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39948 | Stable: test_user_prop5_2_1771859571255 | Balance: ₡917,025

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 2 battle_complete events for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Processing battle_complete for user 39947: credits=1500, streaming=1002, prestige=0

      at console.log (src/utils/cycleLogger.ts:76:12)
          at Array.forEach (<anonymous>)

    console.log
      [CycleSnapshotService] Processing battle_complete for user 39948: credits=9000, streaming=1001, prestige=5

      at console.log (src/utils/cycleLogger.ts:76:12)
          at Array.forEach (<anonymous>)

    console.log
      [CycleSnapshotService] Found 3 cycle_end_balance events for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 2 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 103 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 2 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStart (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:271:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:426:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 7 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/2)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/2) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:53.116Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771859573101_0.5198373621382322 earned ₡23,165 from Battle #64001

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771859573103_0.3805810736581018 earned ₡1,001 from Battle #64001

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 42840: PrismaClientKnownRequestError: 
      Invalid `prisma.battleParticipant.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:34
      
        669 }
        670 
        671 // Update BattleParticipant records with prestige, fame, and streaming revenue
      → 672 await prisma.battleParticipant.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:672:3)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'BattleParticipant',
          cause: 'Record to update not found.'
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 2 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 2 archetype users for Cycle 2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/2: archetype_glass_cannon_a_2_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:54.260Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (2 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 2 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39947 | Stable: test_user_prop5_1_1771859571239 | Balance: ₡1,678,654

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39948 | Stable: test_user_prop5_2_1771859571255 | Balance: ₡1,067,037

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 2 battle_complete events for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Processing battle_complete for user 39947: credits=1500, streaming=1002, prestige=0

      at console.log (src/utils/cycleLogger.ts:76:12)
          at Array.forEach (<anonymous>)

    console.log
      [CycleSnapshotService] Processing battle_complete for user 39948: credits=9000, streaming=1001, prestige=5

      at console.log (src/utils/cycleLogger.ts:76:12)
          at Array.forEach (<anonymous>)

    console.log
      [CycleSnapshotService] Found 6 cycle_end_balance events for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 2 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 103 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 1 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/1)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/1) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStart (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:271:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:426:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 7 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 10 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 1: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStart (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:271:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:426:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 1 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 7 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:54.517Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 2: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 2 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 12 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 3 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 3 (3/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 3 (3/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 3: PrismaClientKnownRequestError: 
      Invalid `prisma.auditLog.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27
      
        194 };
        195 
        196 // Insert into database
      → 197 await prisma.auditLog.create(
      Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at EventLogger.logEvent (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:5)
          at EventLogger.logCycleStart (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:271:5)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:426:9 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: {
          modelName: 'AuditLog',
          target: [ 'cycle_number', 'sequence_number' ]
        }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 3 failed {"error":"\nInvalid `prisma.auditLog.create()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27\n\n  194 };\n  195 \n  196 // Insert into database\n→ 197 await prisma.auditLog.create(\nUnique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 3 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 6 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle3.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 4 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 4 (4/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 4 (4/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:54.527Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot1_1771859574521_0.37082281472682 earned ₡30,093 from Battle #64026

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Streaming] TestRobot2_1771859574523_0.3484134434240982 earned ₡1,001 from Battle #64026

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [BattleOrchestrator] Failed to process match 42864: Error: BattleParticipant records not found for battle 64026
          at processBattle (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:709:11)
          at executeScheduledBattles (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/battleOrchestrator.ts:880:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:431:31

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at executeScheduledBattles (src/services/battleOrchestrator.ts:934:15)
      at src/routes/admin.ts:431:31

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 1 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Error in cycle 4: PrismaClientKnownRequestError: 
      Invalid `prisma.robot.update()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26
      
        132 userFinalCost += repairCost;
        133 
        134 // Update robot HP and set battle ready
      → 135 await prisma.robot.update(
      An operation failed because it depends on one or more records that were required but not found. Record to update not found.
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at repairAllRobots (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:443:32 {
        code: 'P2025',
        clientVersion: '5.22.0',
        meta: { modelName: 'Robot', cause: 'Record to update not found.' }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:942:17

    console.log
      [ERROR] Cycle 4 failed {"error":"\nInvalid `prisma.robot.update()` invocation in\n/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/repairService.ts:135:26\n\n  132 userFinalCost += repairCost;\n  133 \n  134 // Update robot HP and set battle ready\n→ 135 await prisma.robot.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found."}

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] === Cycle 4 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 15 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle4.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 5 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 5 (5/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 5 (5/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:54.584Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 2 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 5 archetype users for Cycle 5...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/5: archetype_melee_specialist_5_1 (archetype: melee_specialist)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype melee_specialist. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype melee_specialist. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:55.700Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (0 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 5)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 5 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 5

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 5 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 5 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 5 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 133 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle5.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 6 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 6 (6/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 6 (6/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:55.843Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 6 archetype users for Cycle 6...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/6: archetype_glass_cannon_a_6_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:56.944Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 6)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 6 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39954 | Stable: test_financial_report_1771859576223 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 6

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 6 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 6 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 6 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 90 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle6.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 7 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 7 (7/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 7 (7/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:57.082Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 1 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 7 archetype users for Cycle 7...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/7: archetype_balanced_brawler_7_1 (archetype: balanced_brawler)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype balanced_brawler. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:58.210Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (1 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 7)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 39954 | Total: ₡700 | Facilities: streaming_studio(L7): ₡700

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡700

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 7 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39954 | Stable: test_financial_report_1771859576223 | Balance: ₡99,300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39958 | Stable: test_other_user_1771859578329_0.04610409607584187 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 7

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 7

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 3 cycle_end_balance events for cycle 7

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 7 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 7 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 138 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle7.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 8 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 8 (8/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 8 (8/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:58.365Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 6

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 6 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 8 archetype users for Cycle 8...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/8: archetype_tank_fortress_8_1 (archetype: tank_fortress)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:12:59.461Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (10 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 8)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 39954 | Total: ₡5,000 | Facilities: roster_expansion(L0): ₡5000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡5,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 8 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39954 | Stable: test_financial_report_1771859576223 | Balance: ₡94,300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 40011 | Stable: test_other_user_1771859579590_0.49037058520915844 | Balance: ₡100,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 8

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 8

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 3 cycle_end_balance events for cycle 8

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 8 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 8 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 99 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle8.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 9 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 9 (9/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 9 (9/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:12:59.617Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 9)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 57

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 57 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 9)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 9 archetype users for Cycle 9...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/9: archetype_facility_investor_9_1 (archetype: facility_investor)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype facility_investor. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype facility_investor. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:13:00.730Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (61 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 9)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 39954 | Total: ₡30,000 | Facilities: roster_expansion(L0): ₡30000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡30,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 9 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39954 | Stable: test_financial_report_1771859576223 | Balance: ₡64,300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 9

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 9

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 2 cycle_end_balance events for cycle 9

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 9 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 9 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 137 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle9.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 10 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 10 (10/10)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 10 (10/10) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:00.901Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 1 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 10 archetype users for Cycle 10...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/10: archetype_glass_cannon_c_10_1 (archetype: glass_cannon_c)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:13:01.993Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (1 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 10 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39954 | Stable: test_financial_report_1771859576223 | Balance: ₡64,300

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 10

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 10

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 2 cycle_end_balance events for cycle 10

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 10 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 10 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 97 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle10.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [Admin] Running 3 bulk cycles (includeTournaments: false, generateUsersPerCycle: true)...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 1 (1/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 1 (1/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:02.157Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 5

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 5 total robots across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze_1: Skipping (0 eligible, need 10)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 1 archetype users for Cycle 1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/1: archetype_tank_fortress_1_1 (archetype: tank_fortress)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype tank_fortress. Expected 2 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:13:03.280Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Processing bronze_1...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Queue for bronze_1: 0 robots available (3 total, 0 ready)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] bronze_1: Not enough robots for matches (0 available)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 1 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 39954 | Total: ₡1,500 | Facilities: roster_expansion(L0): ₡1500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡1,500

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 1 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 40049 | Stable: test_user_prop18_1771859582727 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 2 cycle_end_balance events for cycle 1

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 1 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 1 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 138 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle1.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 2 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 2 (2/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 2 (2/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:03.435Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Skipping Tag Team Battles (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Skipping Tag Team Rebalancing (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 2 archetype users for Cycle 2...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/2: archetype_glass_cannon_a_2_1 (archetype: glass_cannon_a)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_a. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:13:04.540Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Skipping Tag Team Matchmaking (even cycle 2)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [OperatingCosts] User 40049 | Total: ₡600 | Facilities: merchandising_hub(L3): ₡600

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡66,245, Operating costs: ₡600

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 2 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 0 battle_complete events for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Found 1 cycle_end_balance events for cycle 2

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: PrismaClientKnownRequestError: 
      Invalid `prisma.cycleSnapshot.create()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:49
      
        111 const totalPrestigeAwarded = stableMetrics.reduce((sum, m) => sum + m.totalPrestigeEarned, 0);
        112 
        113 // Store snapshot in database
      → 114 const snapshot = await prisma.cycleSnapshot.create(
      Unique constraint failed on the fields: (`cycle_number`)
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:114:22)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11 {
        code: 'P2002',
        clientVersion: '5.22.0',
        meta: { modelName: 'CycleSnapshot', target: [ 'cycle_number' ] }
      }

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 2 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 2 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 92 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle2.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

    console.log
      [INFO] === Cycle 3 Started ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [INFO] Cycle 3 (3/3)

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      
      [Admin] === Cycle 3 (3/3) ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 1: Execute League Battles (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:04.686Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Found 0 matches to execute

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Execution complete: 0 successful, 0 failed, 0 bye-matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 2: Repair All Robots (post-league)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 3: Execute Tag Team Battles (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Found 0 scheduled tag team matches

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamBattles] Execution complete: 0 battles, 0 wins, 0 draws, 0 losses, 0 skipped due to unready robots

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 4: Repair All Robots (post-tag-team)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 5: Tournament Execution / Scheduling

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 6: Repair All Robots (post-tournament)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7: Rebalance Leagues

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Starting league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] Total robots in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: 0 total robots across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [Rebalancing] Checking instances for rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] bronze: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] silver: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] gold: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] platinum: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] diamond: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] champion: All instances at or under 100 robots, skipping rebalancing

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Rebalancing] League rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 7.5: Rebalance Tag Team Leagues (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Starting tag team league rebalancing...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Total teams in system: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] bronze: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] silver: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] gold: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] platinum: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] diamond: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      [TagTeamRebalancing] Processing CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: 0 total teams across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] champion: Promoted 0, Demoted 0 across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Tag team league rebalancing complete!

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total promoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Total demoted: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
        Errors: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      ════════════════════════════════════════════════════════════

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamRebalancing] Rebalancing instances across all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] bronze instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] silver instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] gold instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] platinum instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] diamond instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamLeagueInstance] champion instances balanced, no action needed

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 8: Auto Generate New Users

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Generating 3 archetype users for Cycle 3...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [UserGeneration] Creating user 1/3: archetype_glass_cannon_c_3_1 (archetype: glass_cannon_c)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [UserGeneration] Error creating user 1: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at generateBattleReadyUsers (src/utils/userGeneration.ts:611:15)
      at src/routes/admin.ts:616:37

    console.error
      [Admin] Error generating users: Error: Missing weapons for archetype glass_cannon_c. Expected 1 unique weapons, found 0
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:509:17
          at Proxy._transactionWithCallback (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:8000)
          at generateBattleReadyUsers (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/utils/userGeneration.ts:476:7)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:616:37

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:619:21

    console.log
      [Admin] Step 9: Matchmaking for Leagues (1v1)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Starting matchmaking run...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Matches scheduled for: 2026-02-23T15:13:05.802Z

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for BRONZE league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] BRONZE: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for SILVER league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] SILVER: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for GOLD league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] GOLD: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for PLATINUM league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] PLATINUM: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for DIAMOND league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] DIAMOND: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] Running matchmaking for CHAMPION league...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] CHAMPION: Created 0 matches across 0 instances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] COMPLETE: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Matchmaking] ========================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 9.5: Matchmaking for Tag Teams (Cycle 3)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Starting tag team matchmaking for all tiers...

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [TagTeamMatchmaking] Complete: 0 total matches created

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 10: Increment Cycle Counters

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 11: Calculate Passive Income & Operating Costs

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Passive income: ₡0, Operating costs: ₡0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 12: Wait (1.1 second delay)

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 13: Log End-of-Cycle Balances

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] === End of Cycle 3 Balances ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Balance] User 39934 | Stable: admin_test_1771859559966 | Balance: ₡1,000,000

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Step 14: Create Cycle Snapshot

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [CycleSnapshotService] Creating snapshot for cycle 3

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.error
      [Admin] Failed to create cycle snapshot: Error: Cycle 3 is incomplete - missing start or complete events
          at CycleSnapshotService.createSnapshot (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/cycleSnapshotService.ts:91:13)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/admin.ts:899:11

       95 |       }
       96 |       
    >  97 |       self.originalConsoleError(...args);
          |            ^
       98 |     };
       99 |
      100 |     console.warn = function(...args: any[]) {

      at console.error (src/utils/cycleLogger.ts:97:12)
      at src/routes/admin.ts:909:19

    console.log
      [Admin] === Cycle 3 Summary ===

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] Battles: 0

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [Admin] ===================================

      at console.log (src/utils/cycleLogger.ts:76:12)

    console.log
      [INFO] === Cycle 3 Ended ===

      at CycleLogger.log (src/utils/cycleLogger.ts:142:10)

    console.log
      [CycleLogger] Saved 128 log entries to /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/cycle_logs/cycle3.csv

      at CycleLogger.saveCycleLogs (src/utils/cycleLogger.ts:173:12)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate progressive users per cycle

    TypeError: Cannot read properties of undefined (reading 'usersCreated')

      139 |
      140 |       // Verify user generation in each cycle
    > 141 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);
          |                                                      ^
      142 |       expect(response.body.results[1].userGeneration.usersCreated).toBe(2);
      143 |       expect(response.body.results[2].userGeneration.usersCreated).toBe(3);
      144 |

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:141:54)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should persist cycle count across multiple runs

    expect(received).toBe(expected) // Object.is equality

    Expected: 6
    Received: undefined

      186 |
      187 |       // Verify user generation continues from cycle 6
    > 188 |       expect(response2.body.results[0].userGeneration.usersCreated).toBe(6);
          |                                                                     ^
      189 |       expect(response2.body.results[1].userGeneration.usersCreated).toBe(7);
      190 |       expect(response2.body.results[2].userGeneration.usersCreated).toBe(8);
      191 |

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:188:69)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should not generate users when flag is false

    expect(received).toBeNull()

    Received: undefined

      218 |       // Verify no user generation in results
      219 |       response.body.results.forEach((result: any) => {
    > 220 |         expect(result.userGeneration).toBeNull();
          |                                       ^
      221 |       });
      222 |
      223 |       // Verify no users were created

      at tests/integration/adminCycleGeneration.test.ts:220:39
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:219:29)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should return correct response structure

    expect(received).toHaveProperty(path)

    Expected path: "userGeneration"
    Received path: []

    Received value: {"cycle": 1, "duration": 2, "error": "
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27·
      194 };
      195·
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      347 |       response.body.results.forEach((result: any) => {
      348 |         expect(result).toHaveProperty('cycle');
    > 349 |         expect(result).toHaveProperty('userGeneration');
          |                        ^
      350 |         expect(result.userGeneration).toHaveProperty('usersCreated');
      351 |         expect(result.userGeneration).toHaveProperty('robotsCreated');
      352 |         expect(result.userGeneration).toHaveProperty('usernames');

      at tests/integration/adminCycleGeneration.test.ts:349:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:347:29)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should auto-create CycleMetadata if missing

    TypeError: Cannot read properties of undefined (reading 'usersCreated')

      392 |
      393 |       expect(response.status).toBe(200);
    > 394 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);
          |                                                      ^
      395 |
      396 |       // Verify CycleMetadata was created
      397 |       const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:394:54)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate correct total user count formula (N*(N+1)/2)

    expect(received).toBe(expected) // Object.is equality

    Expected: 55
    Received: 0

      419 |       });
      420 |
    > 421 |       expect(totalUsers).toBe(expectedTotal);
          |                          ^
      422 |     });
      423 |
      424 |     it('should create users eligible for matchmaking', async () => {

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:421:26)

PASS tests/streamingRevenueFormula.property.test.ts (30.428 s)
FAIL tests/facilityRecommendation.property.test.ts (7.65 s)
  ● Property 22: Investment Recommendation Ranking › Property 22.2: Only facilities with positive projected ROI are recommended

    Property failed after 1 tests
    { seed: 74835880, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [5,500000,2000]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      177 |           // Property: All recommendations should have positive ROI
      178 |           for (const recommendation of result.recommendations) {
    > 179 |             expect(recommendation.projectedROI).toBeGreaterThan(0);
          |                                                 ^
      180 |           }
      181 |         }
      182 |       ),

      at tests/facilityRecommendation.property.test.ts:179:49
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:129:5)

  ● Property 22: Investment Recommendation Ranking › Property 22.4: High activity users get more discount facility recommendations

    Property failed after 1 tests
    { seed: -1161871124, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [50000,30000,20]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      307 |           // Discount facilities should have positive ROI
      308 |           for (const facility of discountFacilities) {
    > 309 |             expect(facility.projectedROI).toBeGreaterThan(0);
          |                                           ^
      310 |           }
      311 |         }
      312 |       ),

      at tests/facilityRecommendation.property.test.ts:309:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:235:5)

  ● Property 22: Investment Recommendation Ranking › Property 22.5: Recommendations include upgrade cost and payoff cycles

    Property failed after 1 tests
    { seed: 675814012, path: "0:0", endOnFailure: true }
    Counterexample: [10,2000000]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeTruthy()

    Received: ""

      371 |             
      372 |             // Should have a reason
    > 373 |             expect(recommendation.reason).toBeTruthy();
          |                                           ^
      374 |             expect(recommendation.reason.length).toBeGreaterThan(0);
      375 |             
      376 |             // Should have a priority

      at tests/facilityRecommendation.property.test.ts:373:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:318:5)

PASS tests/terminalLogStreamingRevenue.property.test.ts (17.912 s)
  ● Console

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.241Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624230_0.7668316251654608 earned ₡16,294 from Battle #64031

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624230_0.43799468265072017 earned ₡18,702 from Battle #64031

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624230_0.7668316251654608 (User 40136) vs TestRobot2_1771859624230_0.43799468265072017 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.353Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624346_0.5618782776379686 earned ₡143,971 from Battle #64032

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624346_0.6103594188905216 earned ₡38,334 from Battle #64032

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624346_0.5618782776379686 (User 40136) vs TestRobot2_1771859624346_0.6103594188905216 (User 40137) | Winner: TestRobot2_1771859624346_0.6103594188905216 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.435Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624429_0.5464079100130337 earned ₡96,622 from Battle #64033

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624429_0.15102366953219748 earned ₡25,272 from Battle #64033

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624429_0.5464079100130337 (User 40136) vs TestRobot2_1771859624429_0.15102366953219748 (User 40137) | Winner: TestRobot1_1771859624429_0.5464079100130337 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.519Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624513_0.6670590023173172 earned ₡41,964 from Battle #64034

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624513_0.7159450599062751 earned ₡143,726 from Battle #64034

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624513_0.6670590023173172 (User 40136) vs TestRobot2_1771859624513_0.7159450599062751 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.601Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624595_0.5611671202552616 earned ₡40,793 from Battle #64035

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624595_0.49043377655664266 earned ₡76,588 from Battle #64035

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624595_0.5611671202552616 (User 40136) vs TestRobot2_1771859624595_0.49043377655664266 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.677Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624671_0.873620268879241 earned ₡22,474 from Battle #64036

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624671_0.7557874731537902 earned ₡71,865 from Battle #64036

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624671_0.873620268879241 (User 40136) vs TestRobot2_1771859624671_0.7557874731537902 (User 40137) | Winner: TestRobot1_1771859624671_0.873620268879241 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.793Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624787_0.1414754557453658 earned ₡35,904 from Battle #64037

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624787_0.007283571040926029 earned ₡2,030 from Battle #64037

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624787_0.1414754557453658 (User 40136) vs TestRobot2_1771859624787_0.007283571040926029 (User 40137) | Winner: TestRobot2_1771859624787_0.007283571040926029 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.874Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624865_0.30425006744175254 earned ₡4,051 from Battle #64038

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624865_0.4146302726575992 earned ₡5,046 from Battle #64038

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624865_0.30425006744175254 (User 40136) vs TestRobot2_1771859624865_0.4146302726575992 (User 40137) | Winner: TestRobot1_1771859624865_0.30425006744175254 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:44.946Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859624941_0.7762611962315913 earned ₡10,038 from Battle #64039

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859624941_0.038572735875400666 earned ₡20,436 from Battle #64039

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859624941_0.7762611962315913 (User 40136) vs TestRobot2_1771859624941_0.038572735875400666 (User 40137) | Winner: TestRobot2_1771859624941_0.038572735875400666 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.034Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625028_0.055489276318933634 earned ₡70,978 from Battle #64040

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625028_0.9907965137919846 earned ₡219,250 from Battle #64040

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625028_0.055489276318933634 (User 40136) vs TestRobot2_1771859625028_0.9907965137919846 (User 40137) | Winner: TestRobot1_1771859625028_0.055489276318933634 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.116Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625106_0.716471461483856 earned ₡3,763 from Battle #64041

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625106_0.2473352749219111 earned ₡69,434 from Battle #64041

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625106_0.716471461483856 (User 40136) vs TestRobot2_1771859625106_0.2473352749219111 (User 40137) | Winner: TestRobot2_1771859625106_0.2473352749219111 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.187Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625182_0.9337642970513375 earned ₡133,724 from Battle #64042

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625182_0.16840077244112328 earned ₡218,589 from Battle #64042

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625182_0.9337642970513375 (User 40136) vs TestRobot2_1771859625182_0.16840077244112328 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.272Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625265_0.5131061812157227 earned ₡35,654 from Battle #64043

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625265_0.48024132457839763 earned ₡14,350 from Battle #64043

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625265_0.5131061812157227 (User 40136) vs TestRobot2_1771859625265_0.48024132457839763 (User 40137) | Winner: TestRobot1_1771859625265_0.5131061812157227 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.346Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625340_0.8615755818872102 earned ₡37,650 from Battle #64044

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625340_0.7825433678036521 earned ₡7,690 from Battle #64044

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625340_0.8615755818872102 (User 40136) vs TestRobot2_1771859625340_0.7825433678036521 (User 40137) | Winner: TestRobot1_1771859625340_0.8615755818872102 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.418Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625413_0.8192508296217821 earned ₡9,026 from Battle #64045

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625413_0.5804884188610682 earned ₡11,041 from Battle #64045

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625413_0.8192508296217821 (User 40136) vs TestRobot2_1771859625413_0.5804884188610682 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.497Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625492_0.8442595968486831 earned ₡323,180 from Battle #64046

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625492_0.635771039458008 earned ₡97,708 from Battle #64046

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625492_0.8442595968486831 (User 40136) vs TestRobot2_1771859625492_0.635771039458008 (User 40137) | Winner: TestRobot1_1771859625492_0.8442595968486831 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.576Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625569_0.5799551409784923 earned ₡15,155 from Battle #64047

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625569_0.38728297181768445 earned ₡178,204 from Battle #64047

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625569_0.5799551409784923 (User 40136) vs TestRobot2_1771859625569_0.38728297181768445 (User 40137) | Winner: TestRobot1_1771859625569_0.5799551409784923 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.658Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625653_0.7849018604581471 earned ₡49,443 from Battle #64048

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625653_0.7232560556568987 earned ₡8,027 from Battle #64048

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625653_0.7849018604581471 (User 40136) vs TestRobot2_1771859625653_0.7232560556568987 (User 40137) | Winner: TestRobot1_1771859625653_0.7849018604581471 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.735Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625728_0.3911532300446594 earned ₡108,413 from Battle #64049

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625728_0.8526564242595757 earned ₡17,558 from Battle #64049

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625728_0.3911532300446594 (User 40136) vs TestRobot2_1771859625728_0.8526564242595757 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.815Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625809_0.3397865754428554 earned ₡113,157 from Battle #64050

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625809_0.9431123442612827 earned ₡54,471 from Battle #64050

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625809_0.3397865754428554 (User 40136) vs TestRobot2_1771859625809_0.9431123442612827 (User 40137) | Winner: TestRobot2_1771859625809_0.9431123442612827 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.893Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625887_0.5025540138652544 earned ₡23,528 from Battle #64051

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625887_0.16232559479750708 earned ₡29,016 from Battle #64051

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625887_0.5025540138652544 (User 40136) vs TestRobot2_1771859625887_0.16232559479750708 (User 40137) | Winner: TestRobot1_1771859625887_0.5025540138652544 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:45.979Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859625972_0.5675591738842749 earned ₡24,867 from Battle #64052

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859625972_0.4091900089045859 earned ₡53,042 from Battle #64052

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859625972_0.5675591738842749 (User 40136) vs TestRobot2_1771859625972_0.4091900089045859 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.060Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626057_0.4051969211283948 earned ₡146,295 from Battle #64053

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626057_0.9258367293023326 earned ₡6,122 from Battle #64053

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626057_0.4051969211283948 (User 40136) vs TestRobot2_1771859626057_0.9258367293023326 (User 40137) | Winner: TestRobot1_1771859626057_0.4051969211283948 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.155Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626151_0.45367771826661263 earned ₡30,215 from Battle #64054

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626151_0.03208307538139232 earned ₡14,160 from Battle #64054

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626151_0.45367771826661263 (User 40136) vs TestRobot2_1771859626151_0.03208307538139232 (User 40137) | Winner: TestRobot2_1771859626151_0.03208307538139232 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.241Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626235_0.33236256737966774 earned ₡12,034 from Battle #64055

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626235_0.7177731312901358 earned ₡43,753 from Battle #64055

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626235_0.33236256737966774 (User 40136) vs TestRobot2_1771859626235_0.7177731312901358 (User 40137) | Winner: TestRobot2_1771859626235_0.7177731312901358 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.316Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626311_0.1864071459794674 earned ₡58,774 from Battle #64056

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626311_0.7531370670598089 earned ₡2,016 from Battle #64056

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626311_0.1864071459794674 (User 40136) vs TestRobot2_1771859626311_0.7531370670598089 (User 40137) | Winner: TestRobot2_1771859626311_0.7531370670598089 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.387Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626382_0.1833053247192904 earned ₡6,492 from Battle #64057

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626382_0.7953482675356995 earned ₡64,409 from Battle #64057

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626382_0.1833053247192904 (User 40136) vs TestRobot2_1771859626382_0.7953482675356995 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.471Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626464_0.3076163713330008 earned ₡25,034 from Battle #64058

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626464_0.22792133350869392 earned ₡17,422 from Battle #64058

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626464_0.3076163713330008 (User 40136) vs TestRobot2_1771859626464_0.22792133350869392 (User 40137) | Winner: TestRobot2_1771859626464_0.22792133350869392 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.550Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626544_0.7960582248227791 earned ₡4,434 from Battle #64059

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626544_0.2938551134688112 earned ₡80,695 from Battle #64059

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626544_0.7960582248227791 (User 40136) vs TestRobot2_1771859626544_0.2938551134688112 (User 40137) | Winner: TestRobot2_1771859626544_0.2938551134688112 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.624Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626618_0.5916295068907149 earned ₡20,309 from Battle #64060

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626618_0.7249671514059004 earned ₡18,197 from Battle #64060

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626618_0.5916295068907149 (User 40136) vs TestRobot2_1771859626618_0.7249671514059004 (User 40137) | Winner: TestRobot1_1771859626618_0.5916295068907149 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771859626618_0.5916295068907149

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.705Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626699_0.9450935155419851 earned ₡214,898 from Battle #64061

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626699_0.06512110499382806 earned ₡9,151 from Battle #64061

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626699_0.9450935155419851 (User 40136) vs TestRobot2_1771859626699_0.06512110499382806 (User 40137) | Winner: TestRobot1_1771859626699_0.9450935155419851 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.778Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626773_0.9200621283077021 earned ₡20,688 from Battle #64062

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626773_0.6838638343213632 earned ₡16,146 from Battle #64062

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626773_0.9200621283077021 (User 40136) vs TestRobot2_1771859626773_0.6838638343213632 (User 40137) | Winner: TestRobot1_1771859626773_0.9200621283077021 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.855Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626847_0.5405991785787138 earned ₡74,635 from Battle #64063

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626847_0.25016012224784645 earned ₡18,559 from Battle #64063

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626847_0.5405991785787138 (User 40136) vs TestRobot2_1771859626847_0.25016012224784645 (User 40137) | Winner: TestRobot2_1771859626847_0.25016012224784645 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.925Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626920_0.9148680912114552 earned ₡59,092 from Battle #64064

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626920_0.9157573017671428 earned ₡39,081 from Battle #64064

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626920_0.9148680912114552 (User 40136) vs TestRobot2_1771859626920_0.9157573017671428 (User 40137) | Winner: TestRobot2_1771859626920_0.9157573017671428 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:46.998Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859626993_0.9654894425523682 earned ₡105,461 from Battle #64065

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859626993_0.9974929396958238 earned ₡6,084 from Battle #64065

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859626993_0.9654894425523682 (User 40136) vs TestRobot2_1771859626993_0.9974929396958238 (User 40137) | Winner: TestRobot2_1771859626993_0.9974929396958238 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.081Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627074_0.4278252709641702 earned ₡14,477 from Battle #64066

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627074_0.5123079497285017 earned ₡71,256 from Battle #64066

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627074_0.4278252709641702 (User 40136) vs TestRobot2_1771859627074_0.5123079497285017 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.163Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627157_0.41170621719813794 earned ₡43,269 from Battle #64067

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627157_0.02723590515126839 earned ₡34,570 from Battle #64067

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627157_0.41170621719813794 (User 40136) vs TestRobot2_1771859627157_0.02723590515126839 (User 40137) | Winner: TestRobot2_1771859627157_0.02723590515126839 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.235Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627229_0.5502274995649926 earned ₡120,583 from Battle #64068

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627229_0.02443604352950912 earned ₡24,140 from Battle #64068

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627229_0.5502274995649926 (User 40136) vs TestRobot2_1771859627229_0.02443604352950912 (User 40137) | Winner: TestRobot1_1771859627229_0.5502274995649926 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.314Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627305_0.07875594249331241 earned ₡61,114 from Battle #64069

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627305_0.998225353455215 earned ₡11,456 from Battle #64069

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627305_0.07875594249331241 (User 40136) vs TestRobot2_1771859627305_0.998225353455215 (User 40137) | Winner: TestRobot1_1771859627305_0.07875594249331241 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771859627305_0.07875594249331241

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.389Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627383_0.838030848382589 earned ₡13,639 from Battle #64070

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627383_0.6040248802835284 earned ₡183,207 from Battle #64070

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627383_0.838030848382589 (User 40136) vs TestRobot2_1771859627383_0.6040248802835284 (User 40137) | Winner: TestRobot1_1771859627383_0.838030848382589 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771859627383_0.838030848382589

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.462Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627459_0.6344486395928876 earned ₡9,964 from Battle #64071

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627459_0.07633795852358749 earned ₡148,260 from Battle #64071

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627459_0.6344486395928876 (User 40136) vs TestRobot2_1771859627459_0.07633795852358749 (User 40137) | Winner: TestRobot2_1771859627459_0.07633795852358749 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.533Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627527_0.3697882382566513 earned ₡13,369 from Battle #64072

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627527_0.2642684798967284 earned ₡29,359 from Battle #64072

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627527_0.3697882382566513 (User 40136) vs TestRobot2_1771859627527_0.2642684798967284 (User 40137) | Winner: TestRobot2_1771859627527_0.2642684798967284 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.614Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627609_0.9775095556662484 earned ₡3,012 from Battle #64073

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627609_0.8228335103200426 earned ₡107,953 from Battle #64073

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627609_0.9775095556662484 (User 40136) vs TestRobot2_1771859627609_0.8228335103200426 (User 40137) | Winner: TestRobot1_1771859627609_0.9775095556662484 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.721Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627712_0.5232165447804239 earned ₡9,950 from Battle #64074

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627712_0.8136091957640307 earned ₡13,149 from Battle #64074

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627712_0.5232165447804239 (User 40136) vs TestRobot2_1771859627712_0.8136091957640307 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.801Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627796_0.36298350042243943 earned ₡94,019 from Battle #64075

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627796_0.3776182872158559 earned ₡307,608 from Battle #64075

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627796_0.36298350042243943 (User 40136) vs TestRobot2_1771859627796_0.3776182872158559 (User 40137) | Winner: TestRobot2_1771859627796_0.3776182872158559 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.875Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627869_0.8385724203326529 earned ₡26,904 from Battle #64076

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627869_0.3951429167042425 earned ₡38,630 from Battle #64076

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627869_0.8385724203326529 (User 40136) vs TestRobot2_1771859627869_0.3951429167042425 (User 40137) | Winner: TestRobot2_1771859627869_0.3951429167042425 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:47.947Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859627943_0.5238054563692017 earned ₡27,183 from Battle #64077

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859627943_0.5887410202486986 earned ₡27,960 from Battle #64077

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859627943_0.5238054563692017 (User 40136) vs TestRobot2_1771859627943_0.5887410202486986 (User 40137) | Winner: TestRobot1_1771859627943_0.5238054563692017 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: TestRobot1_1771859627943_0.5238054563692017

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.019Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628014_0.6555666213909704 earned ₡11,260 from Battle #64078

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628014_0.2214984032274383 earned ₡20,416 from Battle #64078

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628014_0.6555666213909704 (User 40136) vs TestRobot2_1771859628014_0.2214984032274383 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.100Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628095_0.6083990572550155 earned ₡48,331 from Battle #64079

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628095_0.6541979717530751 earned ₡28,139 from Battle #64079

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628095_0.6083990572550155 (User 40136) vs TestRobot2_1771859628095_0.6541979717530751 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.175Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628169_0.6309222258634911 earned ₡255,051 from Battle #64080

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628169_0.2596441149022688 earned ₡37,909 from Battle #64080

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628169_0.6309222258634911 (User 40136) vs TestRobot2_1771859628169_0.2596441149022688 (User 40137) | Winner: TestRobot1_1771859628169_0.6309222258634911 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.252Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628246_0.1301112591627075 earned ₡5,079 from Battle #64081

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628246_0.6204493811484629 earned ₡2,433 from Battle #64081

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628246_0.1301112591627075 (User 40136) vs TestRobot2_1771859628246_0.6204493811484629 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.331Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628325_0.8627186861337695 earned ₡16,212 from Battle #64082

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628325_0.7353135305463514 earned ₡20,053 from Battle #64082

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628325_0.8627186861337695 (User 40136) vs TestRobot2_1771859628325_0.7353135305463514 (User 40137) | Winner: TestRobot2_1771859628325_0.7353135305463514 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.409Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628404_0.9047620689434838 earned ₡49,056 from Battle #64083

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628404_0.7610908471407966 earned ₡22,966 from Battle #64083

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628404_0.9047620689434838 (User 40136) vs TestRobot2_1771859628404_0.7610908471407966 (User 40137) | Winner: TestRobot1_1771859628404_0.9047620689434838 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.478Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628473_0.46086439664004164 earned ₡62,797 from Battle #64084

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628473_0.7480977472173439 earned ₡28,885 from Battle #64084

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628473_0.46086439664004164 (User 40136) vs TestRobot2_1771859628473_0.7480977472173439 (User 40137) | Winner: TestRobot1_1771859628473_0.46086439664004164 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.559Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628553_0.5724000947265259 earned ₡99,333 from Battle #64085

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628553_0.0451684118495963 earned ₡15,476 from Battle #64085

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628553_0.5724000947265259 (User 40136) vs TestRobot2_1771859628553_0.0451684118495963 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.637Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628631_0.5837853806213431 earned ₡36,079 from Battle #64086

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628631_0.41994141245199423 earned ₡127,779 from Battle #64086

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628631_0.5837853806213431 (User 40136) vs TestRobot2_1771859628631_0.41994141245199423 (User 40137) | Winner: TestRobot2_1771859628631_0.41994141245199423 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771859628631_0.41994141245199423

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.707Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628703_0.9272152084446336 earned ₡17,503 from Battle #64087

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628703_0.24301300107499768 earned ₡74,373 from Battle #64087

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628703_0.9272152084446336 (User 40136) vs TestRobot2_1771859628703_0.24301300107499768 (User 40137) | Winner: TestRobot1_1771859628703_0.9272152084446336 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.781Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628776_0.4871530957281709 earned ₡188,452 from Battle #64088

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628776_0.5092948581341659 earned ₡6,300 from Battle #64088

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628776_0.4871530957281709 (User 40136) vs TestRobot2_1771859628776_0.5092948581341659 (User 40137) | Winner: TestRobot2_1771859628776_0.5092948581341659 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.859Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628855_0.9528368611564678 earned ₡164,048 from Battle #64089

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628855_0.8475320932473148 earned ₡11,465 from Battle #64089

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628855_0.9528368611564678 (User 40136) vs TestRobot2_1771859628855_0.8475320932473148 (User 40137) | Winner: TestRobot2_1771859628855_0.8475320932473148 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:48.940Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859628934_0.3127278792309999 earned ₡37,743 from Battle #64090

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859628934_0.36925094455249197 earned ₡17,889 from Battle #64090

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859628934_0.3127278792309999 (User 40136) vs TestRobot2_1771859628934_0.36925094455249197 (User 40137) | Winner: TestRobot2_1771859628934_0.36925094455249197 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: TestRobot2_1771859628934_0.36925094455249197

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.021Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629015_0.6068609698678562 earned ₡27,066 from Battle #64091

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629015_0.21376312021070676 earned ₡71,658 from Battle #64091

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629015_0.6068609698678562 (User 40136) vs TestRobot2_1771859629015_0.21376312021070676 (User 40137) | Winner: TestRobot2_1771859629015_0.21376312021070676 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.103Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629099_0.43614318684636444 earned ₡35,962 from Battle #64092

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629099_0.6723305548304686 earned ₡93,003 from Battle #64092

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629099_0.43614318684636444 (User 40136) vs TestRobot2_1771859629099_0.6723305548304686 (User 40137) | Winner: TestRobot1_1771859629099_0.43614318684636444 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.182Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629176_0.24293322584232702 earned ₡6,225 from Battle #64093

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629176_0.8791943604790636 earned ₡196,501 from Battle #64093

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629176_0.24293322584232702 (User 40136) vs TestRobot2_1771859629176_0.8791943604790636 (User 40137) | Winner: TestRobot2_1771859629176_0.8791943604790636 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.262Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629257_0.8659584187465542 earned ₡34,241 from Battle #64094

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629257_0.20455306932780426 earned ₡45,058 from Battle #64094

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629257_0.8659584187465542 (User 40136) vs TestRobot2_1771859629257_0.20455306932780426 (User 40137) | Winner: TestRobot1_1771859629257_0.8659584187465542 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.341Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629336_0.09762425816005948 earned ₡36,911 from Battle #64095

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629336_0.8877484331057307 earned ₡23,047 from Battle #64095

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629336_0.09762425816005948 (User 40136) vs TestRobot2_1771859629336_0.8877484331057307 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.419Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629412_0.15202454900492546 earned ₡21,778 from Battle #64096

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629412_0.08688788213691556 earned ₡67,826 from Battle #64096

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629412_0.15202454900492546 (User 40136) vs TestRobot2_1771859629412_0.08688788213691556 (User 40137) | Winner: TestRobot1_1771859629412_0.15202454900492546 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.498Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629493_0.5947588459542935 earned ₡64,077 from Battle #64097

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629493_0.9110528621091099 earned ₡256,029 from Battle #64097

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629493_0.5947588459542935 (User 40136) vs TestRobot2_1771859629493_0.9110528621091099 (User 40137) | Winner: TestRobot2_1771859629493_0.9110528621091099 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.581Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629575_0.505159905135383 earned ₡50,006 from Battle #64098

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629575_0.8707613246681353 earned ₡52,538 from Battle #64098

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629575_0.505159905135383 (User 40136) vs TestRobot2_1771859629575_0.8707613246681353 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.658Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629652_0.8373375809899118 earned ₡51,326 from Battle #64099

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629652_0.6368345939192068 earned ₡9,466 from Battle #64099

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629652_0.8373375809899118 (User 40136) vs TestRobot2_1771859629652_0.6368345939192068 (User 40137) | Winner: TestRobot2_1771859629652_0.6368345939192068 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.735Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629730_0.6221402208195891 earned ₡16,246 from Battle #64100

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629730_0.15481494235702298 earned ₡46,718 from Battle #64100

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629730_0.6221402208195891 (User 40136) vs TestRobot2_1771859629730_0.15481494235702298 (User 40137) | Winner: TestRobot2_1771859629730_0.15481494235702298 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.814Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629809_0.11697669275131739 earned ₡64,641 from Battle #64101

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629809_0.08187192823807443 earned ₡50,356 from Battle #64101

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629809_0.11697669275131739 (User 40136) vs TestRobot2_1771859629809_0.08187192823807443 (User 40137) | Winner: TestRobot1_1771859629809_0.11697669275131739 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.898Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629892_0.7492366221985353 earned ₡97,211 from Battle #64102

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629892_0.15415179280943014 earned ₡50,727 from Battle #64102

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629892_0.7492366221985353 (User 40136) vs TestRobot2_1771859629892_0.15415179280943014 (User 40137) | Winner: TestRobot1_1771859629892_0.7492366221985353 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:49.972Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859629967_0.07421690804782033 earned ₡36,107 from Battle #64103

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859629967_0.8975590399626217 earned ₡62,902 from Battle #64103

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859629967_0.07421690804782033 (User 40136) vs TestRobot2_1771859629967_0.8975590399626217 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.050Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630044_0.6047311150954164 earned ₡84,523 from Battle #64104

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630044_0.05868384539595484 earned ₡23,532 from Battle #64104

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630044_0.6047311150954164 (User 40136) vs TestRobot2_1771859630044_0.05868384539595484 (User 40137) | Winner: TestRobot1_1771859630044_0.6047311150954164 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.128Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630122_0.764331122130469 earned ₡10,890 from Battle #64105

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630122_0.2887904904850981 earned ₡48,398 from Battle #64105

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630122_0.764331122130469 (User 40136) vs TestRobot2_1771859630122_0.2887904904850981 (User 40137) | Winner: TestRobot1_1771859630122_0.764331122130469 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.203Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630199_0.674756680570735 earned ₡139,231 from Battle #64106

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630199_0.8698170820442616 earned ₡5,455 from Battle #64106

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630199_0.674756680570735 (User 40136) vs TestRobot2_1771859630199_0.8698170820442616 (User 40137) | Winner: TestRobot1_1771859630199_0.674756680570735 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.286Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630280_0.3723550834174538 earned ₡17,989 from Battle #64107

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630280_0.5158396840815395 earned ₡80,251 from Battle #64107

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630280_0.3723550834174538 (User 40136) vs TestRobot2_1771859630280_0.5158396840815395 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.371Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630363_0.6487541993216017 earned ₡11,230 from Battle #64108

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630363_0.8816438442110471 earned ₡3,353 from Battle #64108

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630363_0.6487541993216017 (User 40136) vs TestRobot2_1771859630363_0.8816438442110471 (User 40137) | Winner: TestRobot2_1771859630363_0.8816438442110471 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771859630363_0.8816438442110471

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.450Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630444_0.18534293464620366 earned ₡12,561 from Battle #64109

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630444_0.4104467058921931 earned ₡18,912 from Battle #64109

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630444_0.18534293464620366 (User 40136) vs TestRobot2_1771859630444_0.4104467058921931 (User 40137) | Winner: TestRobot2_1771859630444_0.4104467058921931 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.533Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630525_0.3571300162302452 earned ₡11,154 from Battle #64110

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630525_0.28801103308691833 earned ₡125,270 from Battle #64110

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630525_0.3571300162302452 (User 40136) vs TestRobot2_1771859630525_0.28801103308691833 (User 40137) | Winner: TestRobot1_1771859630525_0.3571300162302452 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.607Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630601_0.7481265790290133 earned ₡17,580 from Battle #64111

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630601_0.5454422123885638 earned ₡184,883 from Battle #64111

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630601_0.7481265790290133 (User 40136) vs TestRobot2_1771859630601_0.5454422123885638 (User 40137) | Winner: TestRobot1_1771859630601_0.7481265790290133 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771859630601_0.7481265790290133

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.676Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630669_0.2440575752008991 earned ₡13,428 from Battle #64112

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630669_0.44157673664780883 earned ₡10,036 from Battle #64112

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630669_0.2440575752008991 (User 40136) vs TestRobot2_1771859630669_0.44157673664780883 (User 40137) | Winner: TestRobot2_1771859630669_0.44157673664780883 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.745Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630740_0.8890436895614944 earned ₡58,763 from Battle #64113

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630740_0.8218768262144168 earned ₡22,762 from Battle #64113

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630740_0.8890436895614944 (User 40136) vs TestRobot2_1771859630740_0.8218768262144168 (User 40137) | Winner: TestRobot2_1771859630740_0.8218768262144168 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.820Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630815_0.9326978261267956 earned ₡2,872 from Battle #64114

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630815_0.8656770463777741 earned ₡77,468 from Battle #64114

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630815_0.9326978261267956 (User 40136) vs TestRobot2_1771859630815_0.8656770463777741 (User 40137) | Winner: TestRobot1_1771859630815_0.9326978261267956 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.891Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630886_0.2480000023895983 earned ₡323,341 from Battle #64115

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630886_0.2771272634656732 earned ₡54,473 from Battle #64115

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630886_0.2480000023895983 (User 40136) vs TestRobot2_1771859630886_0.2771272634656732 (User 40137) | Winner: TestRobot2_1771859630886_0.2771272634656732 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:50.963Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859630958_0.789799176441582 earned ₡223,372 from Battle #64116

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859630958_0.24734510136356747 earned ₡46,665 from Battle #64116

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859630958_0.789799176441582 (User 40136) vs TestRobot2_1771859630958_0.24734510136356747 (User 40137) | Winner: TestRobot2_1771859630958_0.24734510136356747 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.030Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631026_0.36691293994316543 earned ₡46,960 from Battle #64117

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631026_0.43628277091829615 earned ₡46,962 from Battle #64117

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631026_0.36691293994316543 (User 40136) vs TestRobot2_1771859631026_0.43628277091829615 (User 40137) | Winner: TestRobot1_1771859631026_0.36691293994316543 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.098Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631093_0.6948536991013367 earned ₡36,667 from Battle #64118

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631093_0.5637666505048938 earned ₡9,721 from Battle #64118

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631093_0.6948536991013367 (User 40136) vs TestRobot2_1771859631093_0.5637666505048938 (User 40137) | Winner: TestRobot2_1771859631093_0.5637666505048938 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.173Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631168_0.010349492449933884 earned ₡18,262 from Battle #64119

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631168_0.3255820923136691 earned ₡40,282 from Battle #64119

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631168_0.010349492449933884 (User 40136) vs TestRobot2_1771859631168_0.3255820923136691 (User 40137) | Winner: TestRobot1_1771859631168_0.010349492449933884 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.249Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631243_0.601424947898663 earned ₡34,728 from Battle #64120

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631243_0.6051162961501934 earned ₡19,489 from Battle #64120

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631243_0.601424947898663 (User 40136) vs TestRobot2_1771859631243_0.6051162961501934 (User 40137) | Winner: TestRobot2_1771859631243_0.6051162961501934 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.322Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631317_0.2621182833000736 earned ₡27,186 from Battle #64121

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631317_0.6304638094345558 earned ₡14,306 from Battle #64121

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631317_0.2621182833000736 (User 40136) vs TestRobot2_1771859631317_0.6304638094345558 (User 40137) | Winner: TestRobot1_1771859631317_0.2621182833000736 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.391Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631385_0.5648934046955275 earned ₡76,838 from Battle #64122

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631385_0.9547331695376384 earned ₡9,032 from Battle #64122

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631385_0.5648934046955275 (User 40136) vs TestRobot2_1771859631385_0.9547331695376384 (User 40137) | Winner: TestRobot1_1771859631385_0.5648934046955275 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.458Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631452_0.47541359121970594 earned ₡104,753 from Battle #64123

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631452_0.6817968822826068 earned ₡46,086 from Battle #64123

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631452_0.47541359121970594 (User 40136) vs TestRobot2_1771859631452_0.6817968822826068 (User 40137) | Winner: TestRobot1_1771859631452_0.47541359121970594 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771859631452_0.47541359121970594

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.533Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631526_0.7297255707415014 earned ₡38,712 from Battle #64124

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631526_0.7177997330845513 earned ₡65,629 from Battle #64124

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631526_0.7297255707415014 (User 40136) vs TestRobot2_1771859631526_0.7177997330845513 (User 40137) | Winner: TestRobot2_1771859631526_0.7177997330845513 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.611Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631605_0.8897835876809296 earned ₡65,772 from Battle #64125

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631605_0.2967407379331608 earned ₡72,525 from Battle #64125

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631605_0.8897835876809296 (User 40136) vs TestRobot2_1771859631605_0.2967407379331608 (User 40137) | Winner: TestRobot2_1771859631605_0.2967407379331608 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.690Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631684_0.9843127082361198 earned ₡12,014 from Battle #64126

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631684_0.3109603709743449 earned ₡7,901 from Battle #64126

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631684_0.9843127082361198 (User 40136) vs TestRobot2_1771859631684_0.3109603709743449 (User 40137) | Winner: TestRobot1_1771859631684_0.9843127082361198 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.763Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631757_0.4409318074393995 earned ₡41,948 from Battle #64127

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631757_0.6174995705714456 earned ₡2,014 from Battle #64127

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631757_0.4409318074393995 (User 40136) vs TestRobot2_1771859631757_0.6174995705714456 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.835Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631830_0.7428924132046844 earned ₡208,407 from Battle #64128

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631830_0.43136865694493853 earned ₡17,371 from Battle #64128

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631830_0.7428924132046844 (User 40136) vs TestRobot2_1771859631830_0.43136865694493853 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.915Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631910_0.7148012782969747 earned ₡21,344 from Battle #64129

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631910_0.5618063791565064 earned ₡172,609 from Battle #64129

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631910_0.7148012782969747 (User 40136) vs TestRobot2_1771859631910_0.5618063791565064 (User 40137) | Winner: TestRobot2_1771859631910_0.5618063791565064 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:51.980Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot1_1771859631975_0.6924160003048192 earned ₡41,453 from Battle #64130

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] TestRobot2_1771859631975_0.4920592696448497 earned ₡60,154 from Battle #64130

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | TestRobot1_1771859631975_0.6924160003048192 (User 40136) vs TestRobot2_1771859631975_0.4920592696448497 (User 40137) | Winner: TestRobot2_1771859631975_0.4920592696448497 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771859631975_0.4920592696448497

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.069Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632062_0.5640995310234957 earned ₡11,197 from Battle #64131

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632062_0.9419815495016965 earned ₡35,992 from Battle #64131

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632062_0.5640995310234957 (User 40136) vs Robot2_1771859632062_0.9419815495016965 (User 40137) | Winner: Robot2_1771859632062_0.9419815495016965 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.142Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632136_0.14107126400214942 earned ₡9,437 from Battle #64132

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632136_0.08347501361793097 earned ₡13,327 from Battle #64132

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632136_0.14107126400214942 (User 40136) vs Robot2_1771859632136_0.08347501361793097 (User 40137) | Winner: Robot1_1771859632136_0.14107126400214942 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.209Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632204_0.6154685985131056 earned ₡16,144 from Battle #64133

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632204_0.9237932130771364 earned ₡9,082 from Battle #64133

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632204_0.6154685985131056 (User 40136) vs Robot2_1771859632204_0.9237932130771364 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.289Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632282_0.3431990111197525 earned ₡6,064 from Battle #64134

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632282_0.8411792045760588 earned ₡9,780 from Battle #64134

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632282_0.3431990111197525 (User 40136) vs Robot2_1771859632282_0.8411792045760588 (User 40137) | Winner: Robot2_1771859632282_0.8411792045760588 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.369Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632361_0.458134405058338 earned ₡25,215 from Battle #64135

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632361_0.6676811598731069 earned ₡3,674 from Battle #64135

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632361_0.458134405058338 (User 40136) vs Robot2_1771859632361_0.6676811598731069 (User 40137) | Winner: Robot1_1771859632361_0.458134405058338 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.440Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632434_0.9134567936724534 earned ₡22,122 from Battle #64136

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632434_0.1651353341920948 earned ₡14,129 from Battle #64136

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632434_0.9134567936724534 (User 40136) vs Robot2_1771859632434_0.1651353341920948 (User 40137) | Winner: Robot1_1771859632434_0.9134567936724534 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.538Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632532_0.4676998188046403 earned ₡35,420 from Battle #64137

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632532_0.011357710335922588 earned ₡5,950 from Battle #64137

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632532_0.4676998188046403 (User 40136) vs Robot2_1771859632532_0.011357710335922588 (User 40137) | Winner: Robot2_1771859632532_0.011357710335922588 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.616Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632609_0.1906934313490003 earned ₡9,523 from Battle #64138

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632609_0.24351746615516334 earned ₡13,947 from Battle #64138

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632609_0.1906934313490003 (User 40136) vs Robot2_1771859632609_0.24351746615516334 (User 40137) | Winner: Robot1_1771859632609_0.1906934313490003 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.689Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632683_0.28089296934187546 earned ₡35,904 from Battle #64139

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632683_0.5771481763277732 earned ₡6,118 from Battle #64139

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632683_0.28089296934187546 (User 40136) vs Robot2_1771859632683_0.5771481763277732 (User 40137) | Winner: Robot1_1771859632683_0.28089296934187546 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.756Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632751_0.2774981661936218 earned ₡6,618 from Battle #64140

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632751_0.8817170891764399 earned ₡12,635 from Battle #64140

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632751_0.2774981661936218 (User 40136) vs Robot2_1771859632751_0.8817170891764399 (User 40137) | Winner: Robot2_1771859632751_0.8817170891764399 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.825Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632819_0.8795588542738354 earned ₡13,708 from Battle #64141

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632819_0.4023090543735155 earned ₡21,626 from Battle #64141

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632819_0.8795588542738354 (User 40136) vs Robot2_1771859632819_0.4023090543735155 (User 40137) | Winner: Robot2_1771859632819_0.4023090543735155 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.888Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632883_0.14850859297185703 earned ₡5,924 from Battle #64142

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632883_0.669266284071379 earned ₡7,197 from Battle #64142

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632883_0.14850859297185703 (User 40136) vs Robot2_1771859632883_0.669266284071379 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:52.955Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859632949_0.9000125148615722 earned ₡17,782 from Battle #64143

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859632949_0.47341902097120225 earned ₡20,406 from Battle #64143

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859632949_0.9000125148615722 (User 40136) vs Robot2_1771859632949_0.47341902097120225 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.022Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633017_0.32693430199791895 earned ₡30,780 from Battle #64144

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633017_0.7119021435520058 earned ₡40,760 from Battle #64144

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633017_0.32693430199791895 (User 40136) vs Robot2_1771859633017_0.7119021435520058 (User 40137) | Winner: Robot1_1771859633017_0.32693430199791895 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771859633017_0.32693430199791895

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.092Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633086_0.2881752047894388 earned ₡8,681 from Battle #64145

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633086_0.0353718904927085 earned ₡18,840 from Battle #64145

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633086_0.2881752047894388 (User 40136) vs Robot2_1771859633086_0.0353718904927085 (User 40137) | Winner: Robot1_1771859633086_0.2881752047894388 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.156Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633151_0.49541904950936 earned ₡7,287 from Battle #64146

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633151_0.9059996361133094 earned ₡10,758 from Battle #64146

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633151_0.49541904950936 (User 40136) vs Robot2_1771859633151_0.9059996361133094 (User 40137) | Winner: Robot1_1771859633151_0.49541904950936 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.224Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633219_0.22563636314892932 earned ₡19,906 from Battle #64147

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633219_0.07339236052701203 earned ₡45,669 from Battle #64147

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633219_0.22563636314892932 (User 40136) vs Robot2_1771859633219_0.07339236052701203 (User 40137) | Winner: Robot1_1771859633219_0.22563636314892932 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771859633219_0.22563636314892932

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.288Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633283_0.04763016819907451 earned ₡13,938 from Battle #64148

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633283_0.4231155779160112 earned ₡17,989 from Battle #64148

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633283_0.04763016819907451 (User 40136) vs Robot2_1771859633283_0.4231155779160112 (User 40137) | Winner: Robot2_1771859633283_0.4231155779160112 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.357Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633352_0.2401040908195845 earned ₡9,807 from Battle #64149

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633352_0.30114618672004523 earned ₡5,225 from Battle #64149

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633352_0.2401040908195845 (User 40136) vs Robot2_1771859633352_0.30114618672004523 (User 40137) | Winner: Robot1_1771859633352_0.2401040908195845 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.430Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633425_0.4309896553612579 earned ₡22,309 from Battle #64150

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633425_0.1386935018433516 earned ₡29,605 from Battle #64150

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633425_0.4309896553612579 (User 40136) vs Robot2_1771859633425_0.1386935018433516 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.502Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633496_0.8733036168595618 earned ₡3,680 from Battle #64151

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633496_0.5490188096487939 earned ₡2,431 from Battle #64151

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633496_0.8733036168595618 (User 40136) vs Robot2_1771859633496_0.5490188096487939 (User 40137) | Winner: Robot2_1771859633496_0.5490188096487939 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.566Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633561_0.07363949220670796 earned ₡4,798 from Battle #64152

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633561_0.5594013539193221 earned ₡3,282 from Battle #64152

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633561_0.07363949220670796 (User 40136) vs Robot2_1771859633561_0.5594013539193221 (User 40137) | Winner: Robot2_1771859633561_0.5594013539193221 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.635Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633628_0.6722118300353653 earned ₡18,784 from Battle #64153

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633628_0.44791621871382503 earned ₡28,452 from Battle #64153

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633628_0.6722118300353653 (User 40136) vs Robot2_1771859633628_0.44791621871382503 (User 40137) | Winner: Robot2_1771859633628_0.44791621871382503 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.703Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633697_0.42299940219534304 earned ₡29,878 from Battle #64154

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633697_0.14052845333242103 earned ₡36,758 from Battle #64154

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633697_0.42299940219534304 (User 40136) vs Robot2_1771859633697_0.14052845333242103 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.781Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633775_0.5241832684702203 earned ₡9,051 from Battle #64155

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633775_0.5666959656553305 earned ₡3,965 from Battle #64155

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633775_0.5241832684702203 (User 40136) vs Robot2_1771859633775_0.5666959656553305 (User 40137) | Winner: Robot2_1771859633775_0.5666959656553305 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.859Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633853_0.9845346458164878 earned ₡14,356 from Battle #64156

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633853_0.4312536322532705 earned ₡14,868 from Battle #64156

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633853_0.9845346458164878 (User 40136) vs Robot2_1771859633853_0.4312536322532705 (User 40137) | Winner: Robot2_1771859633853_0.4312536322532705 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:53.938Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859633932_0.6948678243923657 earned ₡52,164 from Battle #64157

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859633932_0.9337520946172274 earned ₡53,834 from Battle #64157

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859633932_0.6948678243923657 (User 40136) vs Robot2_1771859633932_0.9337520946172274 (User 40137) | Winner: Robot1_1771859633932_0.6948678243923657 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771859633932_0.6948678243923657

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.013Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634008_0.8520772732768559 earned ₡6,871 from Battle #64158

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634008_0.4296636121278612 earned ₡13,141 from Battle #64158

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634008_0.8520772732768559 (User 40136) vs Robot2_1771859634008_0.4296636121278612 (User 40137) | Winner: Robot2_1771859634008_0.4296636121278612 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.086Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634080_0.036405391619174554 earned ₡19,753 from Battle #64159

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634080_0.7739894112980531 earned ₡9,379 from Battle #64159

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634080_0.036405391619174554 (User 40136) vs Robot2_1771859634080_0.7739894112980531 (User 40137) | Winner: Robot1_1771859634080_0.036405391619174554 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.161Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634155_0.2870932810359236 earned ₡6,395 from Battle #64160

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634155_0.903048051671621 earned ₡5,860 from Battle #64160

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634155_0.2870932810359236 (User 40136) vs Robot2_1771859634155_0.903048051671621 (User 40137) | Winner: Robot2_1771859634155_0.903048051671621 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.228Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634223_0.9334488942645549 earned ₡9,322 from Battle #64161

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634223_0.9199842154735824 earned ₡6,549 from Battle #64161

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634223_0.9334488942645549 (User 40136) vs Robot2_1771859634223_0.9199842154735824 (User 40137) | Winner: Robot2_1771859634223_0.9199842154735824 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.294Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634289_0.39476097461960924 earned ₡13,748 from Battle #64162

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634289_0.433005402028548 earned ₡12,099 from Battle #64162

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634289_0.39476097461960924 (User 40136) vs Robot2_1771859634289_0.433005402028548 (User 40137) | Winner: Robot1_1771859634289_0.39476097461960924 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771859634289_0.39476097461960924

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.361Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634356_0.11457533651738605 earned ₡7,181 from Battle #64163

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634356_0.1153564221856207 earned ₡2,617 from Battle #64163

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634356_0.11457533651738605 (User 40136) vs Robot2_1771859634356_0.1153564221856207 (User 40137) | Winner: Robot1_1771859634356_0.11457533651738605 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.429Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634423_0.6904805080866087 earned ₡33,757 from Battle #64164

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634423_0.3167817701273231 earned ₡11,001 from Battle #64164

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634423_0.6904805080866087 (User 40136) vs Robot2_1771859634423_0.3167817701273231 (User 40137) | Winner: Robot2_1771859634423_0.3167817701273231 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot2_1771859634423_0.3167817701273231

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.502Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634496_0.20395243645088146 earned ₡5,757 from Battle #64165

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634496_0.7090590488482397 earned ₡8,195 from Battle #64165

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634496_0.20395243645088146 (User 40136) vs Robot2_1771859634496_0.7090590488482397 (User 40137) | Winner: Robot2_1771859634496_0.7090590488482397 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.579Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634573_0.5421675925165272 earned ₡14,032 from Battle #64166

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634573_0.37415314052287163 earned ₡15,987 from Battle #64166

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634573_0.5421675925165272 (User 40136) vs Robot2_1771859634573_0.37415314052287163 (User 40137) | Winner: Robot1_1771859634573_0.5421675925165272 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.656Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634650_0.9095838854292141 earned ₡3,663 from Battle #64167

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634650_0.7468589791038921 earned ₡11,362 from Battle #64167

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634650_0.9095838854292141 (User 40136) vs Robot2_1771859634650_0.7468589791038921 (User 40137) | Winner: Robot1_1771859634650_0.9095838854292141 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.733Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634727_0.886706253282753 earned ₡13,156 from Battle #64168

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634727_0.5991581496605921 earned ₡7,373 from Battle #64168

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634727_0.886706253282753 (User 40136) vs Robot2_1771859634727_0.5991581496605921 (User 40137) | Winner: Robot2_1771859634727_0.5991581496605921 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.804Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634798_0.4697690294666398 earned ₡9,920 from Battle #64169

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634798_0.542781558240759 earned ₡27,920 from Battle #64169

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634798_0.4697690294666398 (User 40136) vs Robot2_1771859634798_0.542781558240759 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.876Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634869_0.1193239171934799 earned ₡15,780 from Battle #64170

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634869_0.04696728646990933 earned ₡11,457 from Battle #64170

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634869_0.1193239171934799 (User 40136) vs Robot2_1771859634869_0.04696728646990933 (User 40137) | Winner: Robot2_1771859634869_0.04696728646990933 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:54.942Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859634936_0.004050490454939437 earned ₡6,334 from Battle #64171

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859634936_0.09817826257205431 earned ₡3,920 from Battle #64171

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859634936_0.004050490454939437 (User 40136) vs Robot2_1771859634936_0.09817826257205431 (User 40137) | Winner: Robot1_1771859634936_0.004050490454939437 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.008Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635003_0.5931042530458843 earned ₡12,954 from Battle #64172

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635003_0.48144319830805704 earned ₡17,178 from Battle #64172

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635003_0.5931042530458843 (User 40136) vs Robot2_1771859635003_0.48144319830805704 (User 40137) | Winner: Robot2_1771859635003_0.48144319830805704 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.079Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635073_0.8994224897042902 earned ₡9,118 from Battle #64173

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635073_0.8136481206508482 earned ₡34,086 from Battle #64173

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635073_0.8994224897042902 (User 40136) vs Robot2_1771859635073_0.8136481206508482 (User 40137) | Winner: Robot2_1771859635073_0.8136481206508482 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.149Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635144_0.43363305422324216 earned ₡12,177 from Battle #64174

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635144_0.8399323858148144 earned ₡12,460 from Battle #64174

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635144_0.43363305422324216 (User 40136) vs Robot2_1771859635144_0.8399323858148144 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.225Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635219_0.5599267371151154 earned ₡18,032 from Battle #64175

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635219_0.21269540042063517 earned ₡47,360 from Battle #64175

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635219_0.5599267371151154 (User 40136) vs Robot2_1771859635219_0.21269540042063517 (User 40137) | Winner: Robot2_1771859635219_0.21269540042063517 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: Robot2_1771859635219_0.21269540042063517

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.295Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635288_0.797872632790197 earned ₡16,215 from Battle #64176

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635288_0.7338754240019014 earned ₡6,636 from Battle #64176

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635288_0.797872632790197 (User 40136) vs Robot2_1771859635288_0.7338754240019014 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.369Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635363_0.37217107611644473 earned ₡31,674 from Battle #64177

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635363_0.5033279028669343 earned ₡13,343 from Battle #64177

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635363_0.37217107611644473 (User 40136) vs Robot2_1771859635363_0.5033279028669343 (User 40137) | Winner: Robot2_1771859635363_0.5033279028669343 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.437Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635430_0.7763051110883727 earned ₡7,282 from Battle #64178

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635430_0.6801341054147956 earned ₡10,991 from Battle #64178

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635430_0.7763051110883727 (User 40136) vs Robot2_1771859635430_0.6801341054147956 (User 40137) | Winner: Robot1_1771859635430_0.7763051110883727 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.544Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635537_0.5970307417839518 earned ₡6,086 from Battle #64179

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635537_0.3602331158251656 earned ₡3,763 from Battle #64179

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635537_0.5970307417839518 (User 40136) vs Robot2_1771859635537_0.3602331158251656 (User 40137) | Winner: Robot1_1771859635537_0.5970307417839518 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.635Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859635629_0.927761391641729 earned ₡5,328 from Battle #64180

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859635629_0.7908728403694099 earned ₡9,616 from Battle #64180

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859635629_0.927761391641729 (User 40136) vs Robot2_1771859635629_0.7908728403694099 (User 40137) | Winner: Robot2_1771859635629_0.7908728403694099 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot2_1771859635629_0.7908728403694099

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.719Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859635712_0.5075178050535174 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859635712_0.5075178050535174 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859635712_0.5075178050535174

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.775Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859635768_0.9475081814490299 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859635768_0.9475081814490299 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859635768_0.9475081814490299

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.830Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859635825_0.47159370933251055 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859635825_0.47159370933251055 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859635825_0.47159370933251055

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.881Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859635875_0.20265259800840874 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859635875_0.20265259800840874 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859635875_0.20265259800840874

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:55.936Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859635929_0.972620113966089 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859635929_0.972620113966089 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859635929_0.972620113966089

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.000Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859635992_0.3238643884339397 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859635992_0.3238643884339397 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859635992_0.3238643884339397

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.046Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636040_0.44190819297175865 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636040_0.44190819297175865 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636040_0.44190819297175865

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.091Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636086_0.8698168417847774 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636086_0.8698168417847774 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636086_0.8698168417847774

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.135Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636129_0.23201619985810762 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636129_0.23201619985810762 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636129_0.23201619985810762

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.181Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636175_0.42402328322292004 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636175_0.42402328322292004 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636175_0.42402328322292004

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.227Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636222_0.24131993650686934 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636222_0.24131993650686934 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636222_0.24131993650686934

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.272Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636267_0.17436395320963238 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636267_0.17436395320963238 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636267_0.17436395320963238

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.319Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636312_0.6494977246820995 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636312_0.6494977246820995 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636312_0.6494977246820995

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.368Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636362_0.6830258553731672 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636362_0.6830258553731672 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636362_0.6830258553731672

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.418Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636412_0.7871027181868471 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636412_0.7871027181868471 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636412_0.7871027181868471

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.467Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636461_0.9070399546704079 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636461_0.9070399546704079 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636461_0.9070399546704079

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.511Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636505_0.40807959630167645 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636505_0.40807959630167645 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636505_0.40807959630167645

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.557Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636551_0.21902317740220367 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636551_0.21902317740220367 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636551_0.21902317740220367

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.599Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636594_0.6883703767780935 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636594_0.6883703767780935 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636594_0.6883703767780935

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.642Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636636_0.5270994058441788 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636636_0.5270994058441788 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636636_0.5270994058441788

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.690Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636684_0.7828556763000735 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636684_0.7828556763000735 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636684_0.7828556763000735

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.741Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636735_0.6645171159955447 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636735_0.6645171159955447 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636735_0.6645171159955447

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.789Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636783_0.9326168204677145 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636783_0.9326168204677145 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636783_0.9326168204677145

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.845Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636837_0.5904355621037872 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636837_0.5904355621037872 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636837_0.5904355621037872

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.900Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636894_0.6350619994817714 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636894_0.6350619994817714 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636894_0.6350619994817714

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:56.955Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859636949_0.022542126734193757 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859636949_0.022542126734193757 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859636949_0.022542126734193757

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.018Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637011_0.6179361780985083 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637011_0.6179361780985083 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637011_0.6179361780985083

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.071Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637064_0.8872282814233546 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637064_0.8872282814233546 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637064_0.8872282814233546

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.123Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637117_0.7009803940733468 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637117_0.7009803940733468 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637117_0.7009803940733468

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.180Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637174_0.8277704482414594 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637174_0.8277704482414594 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637174_0.8277704482414594

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.225Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637220_0.1070809925566355 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637220_0.1070809925566355 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637220_0.1070809925566355

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.270Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637263_0.5938194570842086 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637263_0.5938194570842086 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637263_0.5938194570842086

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.316Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637310_0.8120991437952555 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637310_0.8120991437952555 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637310_0.8120991437952555

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.359Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637353_0.49328331722667895 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637353_0.49328331722667895 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637353_0.49328331722667895

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.401Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637396_0.04885676248818005 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637396_0.04885676248818005 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637396_0.04885676248818005

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.442Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637436_0.28469707845422165 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637436_0.28469707845422165 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637436_0.28469707845422165

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.485Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637479_0.582508510843819 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637479_0.582508510843819 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637479_0.582508510843819

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.527Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637522_0.3352549317326854 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637522_0.3352549317326854 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637522_0.3352549317326854

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.574Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637568_0.8983931851942446 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637568_0.8983931851942446 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637568_0.8983931851942446

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.618Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637612_0.5964014723400763 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637612_0.5964014723400763 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637612_0.5964014723400763

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.658Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637652_0.13248714262848982 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637652_0.13248714262848982 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637652_0.13248714262848982

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.700Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637694_0.007429390746701459 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637694_0.007429390746701459 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637694_0.007429390746701459

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.741Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637736_0.4908039691144216 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637736_0.4908039691144216 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637736_0.4908039691144216

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.785Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637779_0.1460559543574922 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637779_0.1460559543574922 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637779_0.1460559543574922

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.829Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637822_0.15964456086223988 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637822_0.15964456086223988 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637822_0.15964456086223988

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.875Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637869_0.019063243676413877 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637869_0.019063243676413877 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637869_0.019063243676413877

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.923Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637917_0.4749421444920716 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637917_0.4749421444920716 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637917_0.4749421444920716

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:57.976Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859637970_0.26431365297703746 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859637970_0.26431365297703746 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859637970_0.26431365297703746

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.024Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859638018_0.4852741441361086 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859638018_0.4852741441361086 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859638018_0.4852741441361086

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.072Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | RealRobot_1771859638066_0.5941458783003967 (User 40136) vs Bye Robot (User 40137) | Winner: RealRobot_1771859638066_0.5941458783003967 | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0 | Kill: RealRobot_1771859638066_0.5941458783003967

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 1 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.135Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638128_0.013458055953790793 earned ₡18,922 from Battle #64231

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638128_0.44943403388875514 earned ₡24,689 from Battle #64231

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638128_0.013458055953790793 (User 40136) vs Robot2_1771859638128_0.44943403388875514 (User 40137) | Winner: Robot2_1771859638128_0.44943403388875514 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.213Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638210_0.7552916175378432 earned ₡33,030 from Battle #64232

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638210_0.9266126152574625 earned ₡40,516 from Battle #64232

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638210_0.7552916175378432 (User 40136) vs Robot2_1771859638210_0.9266126152574625 (User 40137) | Winner: Robot1_1771859638210_0.7552916175378432 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.292Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638286_0.8277126083618529 earned ₡24,507 from Battle #64233

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638286_0.9023267760299869 earned ₡31,098 from Battle #64233

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638286_0.8277126083618529 (User 40136) vs Robot2_1771859638286_0.9023267760299869 (User 40137) | Winner: Robot1_1771859638286_0.8277126083618529 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.367Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638360_0.9413972713383897 earned ₡4,166 from Battle #64234

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638360_0.8863510277970493 earned ₡8,405 from Battle #64234

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638360_0.9413972713383897 (User 40136) vs Robot2_1771859638360_0.8863510277970493 (User 40137) | Winner: Robot1_1771859638360_0.9413972713383897 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.451Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638445_0.5421901647036125 earned ₡30,177 from Battle #64235

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638445_0.00043324513333675707 earned ₡29,300 from Battle #64235

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638445_0.5421901647036125 (User 40136) vs Robot2_1771859638445_0.00043324513333675707 (User 40137) | Winner: Robot1_1771859638445_0.5421901647036125 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771859638445_0.5421901647036125

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.526Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638519_0.24387591937407227 earned ₡16,717 from Battle #64236

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638519_0.08117415257909477 earned ₡22,346 from Battle #64236

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638519_0.24387591937407227 (User 40136) vs Robot2_1771859638519_0.08117415257909477 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.607Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638602_0.35645085946934607 earned ₡12,023 from Battle #64237

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638602_0.08519902427562853 earned ₡21,173 from Battle #64237

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638602_0.35645085946934607 (User 40136) vs Robot2_1771859638602_0.08519902427562853 (User 40137) | Winner: Robot1_1771859638602_0.35645085946934607 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.695Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638689_0.9640245992522813 earned ₡3,746 from Battle #64238

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638689_0.15602756121561 earned ₡9,013 from Battle #64238

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638689_0.9640245992522813 (User 40136) vs Robot2_1771859638689_0.15602756121561 (User 40137) | Winner: Robot2_1771859638689_0.15602756121561 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.781Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638774_0.9669065113362985 earned ₡35,190 from Battle #64239

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638775_0.3403813807643581 earned ₡46,524 from Battle #64239

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638774_0.9669065113362985 (User 40136) vs Robot2_1771859638775_0.3403813807643581 (User 40137) | Winner: Robot1_1771859638774_0.9669065113362985 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.867Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638860_0.4082006901926959 earned ₡33,147 from Battle #64240

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638860_0.4301572868372342 earned ₡82,514 from Battle #64240

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638860_0.4082006901926959 (User 40136) vs Robot2_1771859638860_0.4301572868372342 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:58.959Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859638954_0.20807088182713074 earned ₡80,081 from Battle #64241

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859638954_0.6900270318361906 earned ₡11,330 from Battle #64241

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859638954_0.20807088182713074 (User 40136) vs Robot2_1771859638954_0.6900270318361906 (User 40137) | Winner: Robot1_1771859638954_0.20807088182713074 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.050Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639044_0.9386364371977868 earned ₡29,539 from Battle #64242

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639044_0.5381360624464373 earned ₡39,457 from Battle #64242

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639044_0.9386364371977868 (User 40136) vs Robot2_1771859639044_0.5381360624464373 (User 40137) | Winner: Robot1_1771859639044_0.9386364371977868 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.134Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639128_0.2679064289494968 earned ₡8,500 from Battle #64243

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639128_0.8479241210480201 earned ₡11,113 from Battle #64243

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639128_0.2679064289494968 (User 40136) vs Robot2_1771859639128_0.8479241210480201 (User 40137) | Winner: Robot2_1771859639128_0.8479241210480201 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.219Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639211_0.08821159942713919 earned ₡27,065 from Battle #64244

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639211_0.6071867107120138 earned ₡32,319 from Battle #64244

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639211_0.08821159942713919 (User 40136) vs Robot2_1771859639211_0.6071867107120138 (User 40137) | Winner: Robot2_1771859639211_0.6071867107120138 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.296Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639291_0.15751287914346312 earned ₡7,683 from Battle #64245

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639291_0.4782490176991334 earned ₡12,875 from Battle #64245

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639291_0.15751287914346312 (User 40136) vs Robot2_1771859639291_0.4782490176991334 (User 40137) | Winner: Robot2_1771859639291_0.4782490176991334 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.381Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639375_0.7316817573319384 earned ₡3,009 from Battle #64246

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639375_0.5416311569647599 earned ₡9,001 from Battle #64246

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639375_0.7316817573319384 (User 40136) vs Robot2_1771859639375_0.5416311569647599 (User 40137) | Winner: Robot2_1771859639375_0.5416311569647599 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.461Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639457_0.44532183173548556 earned ₡7,267 from Battle #64247

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639457_0.49513140145418866 earned ₡3,422 from Battle #64247

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639457_0.44532183173548556 (User 40136) vs Robot2_1771859639457_0.49513140145418866 (User 40137) | Winner: Robot2_1771859639457_0.49513140145418866 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.542Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639536_0.6262245937176119 earned ₡14,745 from Battle #64248

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639536_0.2471236698361654 earned ₡11,881 from Battle #64248

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639536_0.6262245937176119 (User 40136) vs Robot2_1771859639536_0.2471236698361654 (User 40137) | Winner: Robot1_1771859639536_0.6262245937176119 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.644Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639637_0.7606540345508969 earned ₡13,243 from Battle #64249

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639637_0.41501732436246497 earned ₡12,854 from Battle #64249

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639637_0.7606540345508969 (User 40136) vs Robot2_1771859639637_0.41501732436246497 (User 40137) | Winner: Robot1_1771859639637_0.7606540345508969 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.718Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639712_0.38415191052341 earned ₡4,469 from Battle #64250

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639712_0.9986751944251065 earned ₡10,372 from Battle #64250

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639712_0.38415191052341 (User 40136) vs Robot2_1771859639712_0.9986751944251065 (User 40137) | Winner: Robot2_1771859639712_0.9986751944251065 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.797Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639793_0.8330960439009295 earned ₡5,079 from Battle #64251

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639793_0.34274734571261567 earned ₡14,192 from Battle #64251

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639793_0.8330960439009295 (User 40136) vs Robot2_1771859639793_0.34274734571261567 (User 40137) | Winner: Robot1_1771859639793_0.8330960439009295 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.878Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639871_0.5923484581617967 earned ₡6,304 from Battle #64252

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639871_0.9700252349828903 earned ₡8,826 from Battle #64252

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639871_0.5923484581617967 (User 40136) vs Robot2_1771859639871_0.9700252349828903 (User 40137) | Winner: Robot1_1771859639871_0.5923484581617967 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:13:59.954Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859639947_0.13539783994176424 earned ₡9,685 from Battle #64253

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859639947_0.26681772906583345 earned ₡27,603 from Battle #64253

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859639947_0.13539783994176424 (User 40136) vs Robot2_1771859639947_0.26681772906583345 (User 40137) | Winner: Robot1_1771859639947_0.13539783994176424 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.045Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640035_0.18760281900168319 earned ₡14,778 from Battle #64254

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640035_0.1171565445205146 earned ₡6,569 from Battle #64254

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640035_0.18760281900168319 (User 40136) vs Robot2_1771859640035_0.1171565445205146 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.133Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640127_0.8365732159333483 earned ₡29,125 from Battle #64255

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640127_0.764129538490454 earned ₡16,747 from Battle #64255

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640127_0.8365732159333483 (User 40136) vs Robot2_1771859640127_0.764129538490454 (User 40137) | Winner: Robot2_1771859640127_0.764129538490454 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.276Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640269_0.6443143157251969 earned ₡14,397 from Battle #64256

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640269_0.006093680391790479 earned ₡34,887 from Battle #64256

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640269_0.6443143157251969 (User 40136) vs Robot2_1771859640269_0.006093680391790479 (User 40137) | Winner: Robot1_1771859640269_0.6443143157251969 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.359Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640352_0.8364897750146245 earned ₡15,019 from Battle #64257

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640352_0.21812256001393993 earned ₡21,397 from Battle #64257

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640352_0.8364897750146245 (User 40136) vs Robot2_1771859640352_0.21812256001393993 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.437Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640431_0.007723626996309019 earned ₡8,610 from Battle #64258

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640431_0.1916095941648085 earned ₡8,375 from Battle #64258

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640431_0.007723626996309019 (User 40136) vs Robot2_1771859640431_0.1916095941648085 (User 40137) | Winner: Robot2_1771859640431_0.1916095941648085 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.518Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640511_0.5196383824500944 earned ₡40,987 from Battle #64259

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640511_0.6850903070592003 earned ₡32,669 from Battle #64259

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640511_0.5196383824500944 (User 40136) vs Robot2_1771859640511_0.6850903070592003 (User 40137) | Winner: Robot2_1771859640511_0.6850903070592003 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.591Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640585_0.5892757706116453 earned ₡14,811 from Battle #64260

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640585_0.22818464040823072 earned ₡11,942 from Battle #64260

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640585_0.5892757706116453 (User 40136) vs Robot2_1771859640585_0.22818464040823072 (User 40137) | Winner: Robot2_1771859640585_0.22818464040823072 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot2_1771859640585_0.22818464040823072

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.660Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640655_0.3424813863399371 earned ₡52,029 from Battle #64261

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640655_0.3687159819507754 earned ₡33,024 from Battle #64261

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640655_0.3424813863399371 (User 40136) vs Robot2_1771859640655_0.3687159819507754 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.729Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640723_0.4680911036377675 earned ₡6,567 from Battle #64262

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640723_0.592581619716542 earned ₡13,654 from Battle #64262

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640723_0.4680911036377675 (User 40136) vs Robot2_1771859640723_0.592581619716542 (User 40137) | Winner: Robot1_1771859640723_0.4680911036377675 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.812Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640807_0.45149044172675523 earned ₡26,741 from Battle #64263

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640807_0.011071313723788778 earned ₡14,789 from Battle #64263

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640807_0.45149044172675523 (User 40136) vs Robot2_1771859640807_0.011071313723788778 (User 40137) | Winner: Robot2_1771859640807_0.011071313723788778 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.884Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640878_0.2687796584623867 earned ₡26,749 from Battle #64264

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640878_0.861656955265675 earned ₡25,494 from Battle #64264

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640878_0.2687796584623867 (User 40136) vs Robot2_1771859640878_0.861656955265675 (User 40137) | Winner: Robot1_1771859640878_0.2687796584623867 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:00.955Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859640950_0.28262301167743287 earned ₡10,198 from Battle #64265

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859640950_0.22739046938651564 earned ₡22,032 from Battle #64265

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859640950_0.28262301167743287 (User 40136) vs Robot2_1771859640950_0.22739046938651564 (User 40137) | Winner: Robot1_1771859640950_0.28262301167743287 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.024Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641019_0.7707579115341137 earned ₡2,865 from Battle #64266

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641019_0.2843838636716429 earned ₡14,138 from Battle #64266

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641019_0.7707579115341137 (User 40136) vs Robot2_1771859641019_0.2843838636716429 (User 40137) | Winner: Robot2_1771859641019_0.2843838636716429 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.097Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641091_0.4424812998559581 earned ₡2,014 from Battle #64267

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641091_0.9429874759794806 earned ₡17,761 from Battle #64267

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641091_0.4424812998559581 (User 40136) vs Robot2_1771859641091_0.9429874759794806 (User 40137) | Winner: Robot1_1771859641091_0.4424812998559581 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.171Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641166_0.38566048537364006 earned ₡64,479 from Battle #64268

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641166_0.0904566798990959 earned ₡20,123 from Battle #64268

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641166_0.38566048537364006 (User 40136) vs Robot2_1771859641166_0.0904566798990959 (User 40137) | Winner: Robot2_1771859641166_0.0904566798990959 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.244Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641240_0.8837906512691819 earned ₡57,655 from Battle #64269

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641240_0.39560255095277264 earned ₡10,106 from Battle #64269

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641240_0.8837906512691819 (User 40136) vs Robot2_1771859641240_0.39560255095277264 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.313Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641310_0.782975515765038 earned ₡39,881 from Battle #64270

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641310_0.6834479528348266 earned ₡11,889 from Battle #64270

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641310_0.782975515765038 (User 40136) vs Robot2_1771859641310_0.6834479528348266 (User 40137) | Winner: Robot2_1771859641310_0.6834479528348266 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.381Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641376_0.42835969053162537 earned ₡36,236 from Battle #64271

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641376_0.17323325077202578 earned ₡93,340 from Battle #64271

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641376_0.42835969053162537 (User 40136) vs Robot2_1771859641376_0.17323325077202578 (User 40137) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 0 prestige, 0 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.455Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641450_0.7730643719350294 earned ₡15,552 from Battle #64272

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641450_0.17794081176955545 earned ₡28,762 from Battle #64272

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641450_0.7730643719350294 (User 40136) vs Robot2_1771859641450_0.17794081176955545 (User 40137) | Winner: Robot1_1771859641450_0.7730643719350294 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.524Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641518_0.6125063706401583 earned ₡48,829 from Battle #64273

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641518_0.0800381221268257 earned ₡22,390 from Battle #64273

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641518_0.6125063706401583 (User 40136) vs Robot2_1771859641518_0.0800381221268257 (User 40137) | Winner: Robot1_1771859641518_0.6125063706401583 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.594Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641589_0.589010330780671 earned ₡11,130 from Battle #64274

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641589_0.2653960647057214 earned ₡5,658 from Battle #64274

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641589_0.589010330780671 (User 40136) vs Robot2_1771859641589_0.2653960647057214 (User 40137) | Winner: Robot1_1771859641589_0.589010330780671 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.664Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641659_0.8950922937014729 earned ₡14,831 from Battle #64275

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641659_0.6672909586136759 earned ₡10,597 from Battle #64275

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641659_0.8950922937014729 (User 40136) vs Robot2_1771859641659_0.6672909586136759 (User 40137) | Winner: Robot1_1771859641659_0.8950922937014729 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.731Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641726_0.998574427669863 earned ₡9,544 from Battle #64276

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641726_0.6357584496514468 earned ₡5,630 from Battle #64276

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641726_0.998574427669863 (User 40136) vs Robot2_1771859641726_0.6357584496514468 (User 40137) | Winner: Robot2_1771859641726_0.6357584496514468 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.806Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641801_0.1780303921324794 earned ₡27,845 from Battle #64277

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641801_0.9381136460834756 earned ₡24,190 from Battle #64277

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641801_0.1780303921324794 (User 40136) vs Robot2_1771859641801_0.9381136460834756 (User 40137) | Winner: Robot2_1771859641801_0.9381136460834756 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot2_1771859641801_0.9381136460834756

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.876Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641870_0.9952818903600688 earned ₡61,088 from Battle #64278

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641870_0.8804319102146915 earned ₡9,703 from Battle #64278

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641870_0.9952818903600688 (User 40136) vs Robot2_1771859641870_0.8804319102146915 (User 40137) | Winner: Robot1_1771859641870_0.9952818903600688 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: Robot1_1771859641870_0.9952818903600688

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:01.938Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859641933_0.40923647952584796 earned ₡29,464 from Battle #64279

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859641933_0.28960732796630784 earned ₡9,063 from Battle #64279

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859641933_0.40923647952584796 (User 40136) vs Robot2_1771859641933_0.28960732796630784 (User 40137) | Winner: Robot2_1771859641933_0.28960732796630784 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +3

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 3 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Executing battles scheduled for: 2026-02-23T15:14:02.010Z

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Found 1 matches to execute

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot1_1771859642005_0.3759677366372982 earned ₡9,066 from Battle #64280

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Streaming] Robot2_1771859642005_0.8148164077026291 earned ₡11,600 from Battle #64280

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [Battle] League: bronze | Robot1_1771859642005_0.3759677366372982 (User 40136) vs Robot2_1771859642005_0.8148164077026291 (User 40137) | Winner: Robot2_1771859642005_0.8148164077026291 | Rewards: ₡9,375 / ₡1,500 | Prestige: +5 | Fame: +2

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Execution complete: 1 successful, 0 failed, 0 bye-matches

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

    console.log
      [BattleOrchestrator] Reputation: 5 prestige, 2 fame awarded

      at console.log (tests/terminalLogStreamingRevenue.property.test.ts:94:5)

PASS tests/streamingStudioPrestigeRequirements.property.test.ts (7.373 s)
  ● Console

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 10 | Cost: ₡1,000,000 | Balance: ₡5,500,000 → ₡4,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40138 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40139 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 10 | Cost: ₡1,000,000 | Balance: ₡5,500,000 → ₡4,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 10 | Cost: ₡1,000,000 | Balance: ₡5,500,000 → ₡4,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 10 | Cost: ₡1,000,000 | Balance: ₡5,500,000 → ₡4,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 10 | Cost: ₡1,000,000 | Balance: ₡5,500,000 → ₡4,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40140 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 9 | Cost: ₡900,000 | Balance: ₡6,400,000 → ₡5,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40142 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 7 | Cost: ₡700,000 | Balance: ₡7,900,000 → ₡7,200,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 8 | Cost: ₡800,000 | Balance: ₡7,200,000 → ₡6,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 6 | Cost: ₡600,000 | Balance: ₡8,500,000 → ₡7,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Purchased: Streaming Studio | Level: 1 | Cost: ₡100,000 | Balance: ₡10,000,000 → ₡9,900,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 2 | Cost: ₡200,000 | Balance: ₡9,900,000 → ₡9,700,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 3 | Cost: ₡300,000 | Balance: ₡9,700,000 → ₡9,400,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 4 | Cost: ₡400,000 | Balance: ₡9,400,000 → ₡9,000,000

      at src/routes/facility.ts:212:15

    console.log
      [Facility] User 40143 | Upgraded: Streaming Studio | Level: 5 | Cost: ₡500,000 | Balance: ₡9,000,000 → ₡8,500,000

      at src/routes/facility.ts:212:15

PASS tests/eventQueryability.property.test.ts
PASS tests/cycleStepDuration.property.test.ts
FAIL tests/statsUpdatedBeforeStreamingRevenue.property.test.ts
  ● Console

    console.log
      [Streaming] TestRobot1_1771859655624_0.5654990082410638 earned ₡9,881 from Battle #64281

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859655628_0.8892062909234862 earned ₡4,109 from Battle #64281

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859655624_0.5654990082410638 (User 40144) vs TestRobot2_1771859655628_0.8892062909234862 (User 40145) | Winner: TestRobot1_1771859655624_0.5654990082410638 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859655716_0.3453499475659225 earned ₡8,014 from Battle #64282

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859655718_0.2673058982998603 earned ₡4,109 from Battle #64282

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859655716_0.3453499475659225 (User 40144) vs TestRobot2_1771859655718_0.2673058982998603 (User 40145) | Winner: TestRobot1_1771859655716_0.3453499475659225 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot1_1771859655716_0.3453499475659225

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859655776_0.5594316183367233 earned ₡8,007 from Battle #64283

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859655778_0.5392289321546879 earned ₡4,110 from Battle #64283

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859655776_0.5594316183367233 (User 40144) vs TestRobot2_1771859655778_0.5392289321546879 (User 40145) | Winner: TestRobot2_1771859655778_0.5392289321546879 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859655833_0.3510766382940357 earned ₡8,007 from Battle #64284

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859655834_0.8507468375567238 earned ₡2,554 from Battle #64284

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859655833_0.3510766382940357 (User 40144) vs TestRobot2_1771859655834_0.8507468375567238 (User 40145) | Winner: TestRobot2_1771859655834_0.8507468375567238 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859655894_0.3877383105946812 earned ₡8,011 from Battle #64285

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859655896_0.5795404668926427 earned ₡2,001 from Battle #64285

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859655894_0.3877383105946812 (User 40144) vs TestRobot2_1771859655896_0.5795404668926427 (User 40145) | Winner: TestRobot1_1771859655894_0.3877383105946812 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859655954_0.0741069488475351 earned ₡1,001 from Battle #64286

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859655956_0.051767836467820794 earned ₡2,001 from Battle #64286

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859655954_0.0741069488475351 (User 40144) vs TestRobot2_1771859655956_0.051767836467820794 (User 40145) | Winner: TestRobot1_1771859655954_0.0741069488475351 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656019_0.41556393520649293 earned ₡1,001 from Battle #64287

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656021_0.8961976945044893 earned ₡1,000 from Battle #64287

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656019_0.41556393520649293 (User 40144) vs TestRobot2_1771859656021_0.8961976945044893 (User 40145) | Winner: TestRobot1_1771859656019_0.41556393520649293 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656131_0.3533507189850327 earned ₡17,050 from Battle #64288

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656132_0.19537631717718873 earned ₡1,001 from Battle #64288

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656131_0.3533507189850327 (User 40144) vs TestRobot2_1771859656132_0.19537631717718873 (User 40145) | Winner: TestRobot2_1771859656132_0.19537631717718873 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771859656132_0.19537631717718873

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656195_0.07088999671312479 earned ₡31,671 from Battle #64289

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656196_0.5693122028656703 earned ₡1,000 from Battle #64289

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656195_0.07088999671312479 (User 40144) vs TestRobot2_1771859656196_0.5693122028656703 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656255_0.8034874915740357 earned ₡1,006 from Battle #64290

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656257_0.06381735973382974 earned ₡1,001 from Battle #64290

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656255_0.8034874915740357 (User 40144) vs TestRobot2_1771859656257_0.06381735973382974 (User 40145) | Winner: TestRobot2_1771859656257_0.06381735973382974 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656313_0.14218151308554206 earned ₡6,023 from Battle #64291

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656315_0.8552342926540413 earned ₡1,000 from Battle #64291

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656313_0.14218151308554206 (User 40144) vs TestRobot2_1771859656315_0.8552342926540413 (User 40145) | Winner: TestRobot1_1771859656313_0.14218151308554206 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656371_0.8755101255397675 earned ₡6,238 from Battle #64292

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656373_0.18415993743269277 earned ₡1,001 from Battle #64292

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656371_0.8755101255397675 (User 40144) vs TestRobot2_1771859656373_0.18415993743269277 (User 40145) | Winner: TestRobot2_1771859656373_0.18415993743269277 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656426_0.8834088584337896 earned ₡29,938 from Battle #64293

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656428_0.12483843679533624 earned ₡1,000 from Battle #64293

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656426_0.8834088584337896 (User 40144) vs TestRobot2_1771859656428_0.12483843679533624 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656486_0.5548870409189577 earned ₡1,820 from Battle #64294

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656488_0.22836232320380168 earned ₡1,001 from Battle #64294

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656486_0.5548870409189577 (User 40144) vs TestRobot2_1771859656488_0.22836232320380168 (User 40145) | Winner: TestRobot2_1771859656488_0.22836232320380168 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656546_0.1321178807002249 earned ₡6,392 from Battle #64295

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656547_0.6034363861274373 earned ₡1,001 from Battle #64295

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656546_0.1321178807002249 (User 40144) vs TestRobot2_1771859656547_0.6034363861274373 (User 40145) | Winner: TestRobot2_1771859656547_0.6034363861274373 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656605_0.3609679257279583 earned ₡16,655 from Battle #64296

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656606_0.47527203670773954 earned ₡1,000 from Battle #64296

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656605_0.3609679257279583 (User 40144) vs TestRobot2_1771859656606_0.47527203670773954 (User 40145) | Winner: TestRobot1_1771859656605_0.3609679257279583 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656664_0.5501630306866462 earned ₡26,538 from Battle #64297

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656666_0.31110808577901994 earned ₡1,000 from Battle #64297

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656664_0.5501630306866462 (User 40144) vs TestRobot2_1771859656666_0.31110808577901994 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656723_0.03978270857214572 earned ₡1,999 from Battle #64298

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656724_0.10215245720247479 earned ₡1,000 from Battle #64298

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656723_0.03978270857214572 (User 40144) vs TestRobot2_1771859656724_0.10215245720247479 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656782_0.06486277957715625 earned ₡11,668 from Battle #64299

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656783_0.34486337708677217 earned ₡1,000 from Battle #64299

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656782_0.06486277957715625 (User 40144) vs TestRobot2_1771859656783_0.34486337708677217 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656840_0.28667538068800724 earned ₡22,880 from Battle #64300

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656842_0.4455247928364334 earned ₡1,000 from Battle #64300

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656840_0.28667538068800724 (User 40144) vs TestRobot2_1771859656842_0.4455247928364334 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656899_0.9904555383980616 earned ₡16,536 from Battle #64301

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656900_0.41977546160869295 earned ₡1,001 from Battle #64301

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656899_0.9904555383980616 (User 40144) vs TestRobot2_1771859656900_0.41977546160869295 (User 40145) | Winner: TestRobot2_1771859656900_0.41977546160869295 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771859656900_0.41977546160869295

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859656956_0.24343763721358957 earned ₡2,606 from Battle #64302

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859656958_0.31631458533362944 earned ₡1,001 from Battle #64302

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859656956_0.24343763721358957 (User 40144) vs TestRobot2_1771859656958_0.31631458533362944 (User 40145) | Winner: TestRobot2_1771859656958_0.31631458533362944 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657013_0.04452456827923923 earned ₡4,185 from Battle #64303

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657015_0.2541487900173637 earned ₡1,000 from Battle #64303

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657013_0.04452456827923923 (User 40144) vs TestRobot2_1771859657015_0.2541487900173637 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657071_0.239000370657936 earned ₡4,086 from Battle #64304

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657073_0.7443757187329545 earned ₡1,001 from Battle #64304

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657071_0.239000370657936 (User 40144) vs TestRobot2_1771859657073_0.7443757187329545 (User 40145) | Winner: TestRobot2_1771859657073_0.7443757187329545 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657132_0.009648260126132069 earned ₡9,728 from Battle #64305

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657134_0.6158942862779186 earned ₡1,000 from Battle #64305

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657132_0.009648260126132069 (User 40144) vs TestRobot2_1771859657134_0.6158942862779186 (User 40145) | Winner: TestRobot1_1771859657132_0.009648260126132069 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657195_0.48092132069389415 earned ₡5,040 from Battle #64306

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657197_0.04019863906483079 earned ₡1,001 from Battle #64306

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657195_0.48092132069389415 (User 40144) vs TestRobot2_1771859657197_0.04019863906483079 (User 40145) | Winner: TestRobot2_1771859657197_0.04019863906483079 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657251_0.6854137467033813 earned ₡6,001 from Battle #64307

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657253_0.4178686213843774 earned ₡1,001 from Battle #64307

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657251_0.6854137467033813 (User 40144) vs TestRobot2_1771859657253_0.4178686213843774 (User 40145) | Winner: TestRobot2_1771859657253_0.4178686213843774 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657311_0.855291075603188 earned ₡3,349 from Battle #64308

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657313_0.37663776916353753 earned ₡1,001 from Battle #64308

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657311_0.855291075603188 (User 40144) vs TestRobot2_1771859657313_0.37663776916353753 (User 40145) | Winner: TestRobot2_1771859657313_0.37663776916353753 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657362_0.485387709245364 earned ₡2,910 from Battle #64309

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657363_0.5819835937345591 earned ₡1,000 from Battle #64309

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657362_0.485387709245364 (User 40144) vs TestRobot2_1771859657363_0.5819835937345591 (User 40145) | Winner: TestRobot1_1771859657362_0.485387709245364 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657419_0.36465035227178144 earned ₡1,885 from Battle #64310

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657421_0.1465207627538111 earned ₡1,001 from Battle #64310

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657419_0.36465035227178144 (User 40144) vs TestRobot2_1771859657421_0.1465207627538111 (User 40145) | Winner: TestRobot2_1771859657421_0.1465207627538111 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657477_0.700110909856196 earned ₡5,630 from Battle #64311

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657479_0.9920857861707608 earned ₡1,001 from Battle #64311

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657477_0.700110909856196 (User 40144) vs TestRobot2_1771859657479_0.9920857861707608 (User 40145) | Winner: TestRobot2_1771859657479_0.9920857861707608 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657537_0.2890891725689755 earned ₡22,941 from Battle #64312

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657539_0.6702836625055616 earned ₡1,000 from Battle #64312

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657537_0.2890891725689755 (User 40144) vs TestRobot2_1771859657539_0.6702836625055616 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657597_0.8093863808607841 earned ₡5,926 from Battle #64313

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657598_0.2914804523083565 earned ₡1,000 from Battle #64313

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657597_0.8093863808607841 (User 40144) vs TestRobot2_1771859657598_0.2914804523083565 (User 40145) | Winner: TestRobot1_1771859657597_0.8093863808607841 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657651_0.1814407983629791 earned ₡3,357 from Battle #64314

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657653_0.6904869504704683 earned ₡1,000 from Battle #64314

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657651_0.1814407983629791 (User 40144) vs TestRobot2_1771859657653_0.6904869504704683 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657713_0.867736212937127 earned ₡1,006 from Battle #64315

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657715_0.6575577193101083 earned ₡1,000 from Battle #64315

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657713_0.867736212937127 (User 40144) vs TestRobot2_1771859657715_0.6575577193101083 (User 40145) | Winner: TestRobot1_1771859657713_0.867736212937127 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657771_0.6696391880203948 earned ₡7,376 from Battle #64316

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657773_0.27370785348127846 earned ₡1,000 from Battle #64316

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657771_0.6696391880203948 (User 40144) vs TestRobot2_1771859657773_0.27370785348127846 (User 40145) | Winner: TestRobot1_1771859657771_0.6696391880203948 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657829_0.5748436911670488 earned ₡8,913 from Battle #64317

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657830_0.15810579909695244 earned ₡1,000 from Battle #64317

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657829_0.5748436911670488 (User 40144) vs TestRobot2_1771859657830_0.15810579909695244 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657887_0.7098122167630393 earned ₡12,281 from Battle #64318

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657888_0.5972019912931489 earned ₡1,001 from Battle #64318

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657887_0.7098122167630393 (User 40144) vs TestRobot2_1771859657888_0.5972019912931489 (User 40145) | Winner: TestRobot2_1771859657888_0.5972019912931489 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657945_0.6042153533328046 earned ₡23,359 from Battle #64319

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859657947_0.4755292232817139 earned ₡1,001 from Battle #64319

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657945_0.6042153533328046 (User 40144) vs TestRobot2_1771859657947_0.4755292232817139 (User 40145) | Winner: TestRobot2_1771859657947_0.4755292232817139 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771859657947_0.4755292232817139

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859657998_0.6533027669991881 earned ₡1,800 from Battle #64320

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658000_0.7525711274484541 earned ₡1,001 from Battle #64320

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859657998_0.6533027669991881 (User 40144) vs TestRobot2_1771859658000_0.7525711274484541 (User 40145) | Winner: TestRobot2_1771859658000_0.7525711274484541 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658055_0.8742190518670586 earned ₡1,008 from Battle #64321

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658057_0.3427659963436982 earned ₡1,000 from Battle #64321

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658055_0.8742190518670586 (User 40144) vs TestRobot2_1771859658057_0.3427659963436982 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658113_0.5832186117123965 earned ₡10,220 from Battle #64322

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658115_0.7497095468580033 earned ₡1,001 from Battle #64322

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658113_0.5832186117123965 (User 40144) vs TestRobot2_1771859658115_0.7497095468580033 (User 40145) | Winner: TestRobot2_1771859658115_0.7497095468580033 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658167_0.11148504846209584 earned ₡5,144 from Battle #64323

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658169_0.9302323861864343 earned ₡1,000 from Battle #64323

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658167_0.11148504846209584 (User 40144) vs TestRobot2_1771859658169_0.9302323861864343 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658225_0.34613623034258356 earned ₡14,824 from Battle #64324

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658227_0.00021774236484017884 earned ₡1,001 from Battle #64324

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658225_0.34613623034258356 (User 40144) vs TestRobot2_1771859658227_0.00021774236484017884 (User 40145) | Winner: TestRobot2_1771859658227_0.00021774236484017884 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658293_0.6139856156573614 earned ₡1,006 from Battle #64325

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658295_0.4802086874953474 earned ₡1,000 from Battle #64325

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658293_0.6139856156573614 (User 40144) vs TestRobot2_1771859658295_0.4802086874953474 (User 40145) | Winner: TestRobot1_1771859658293_0.6139856156573614 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658348_0.7747570820755277 earned ₡12,293 from Battle #64326

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658350_0.8972003700285428 earned ₡1,000 from Battle #64326

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658348_0.7747570820755277 (User 40144) vs TestRobot2_1771859658350_0.8972003700285428 (User 40145) | Winner: TestRobot1_1771859658348_0.7747570820755277 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658404_0.2697937704755783 earned ₡5,998 from Battle #64327

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658405_0.9888983303429135 earned ₡1,000 from Battle #64327

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658404_0.2697937704755783 (User 40144) vs TestRobot2_1771859658405_0.9888983303429135 (User 40145) | Winner: Draw | Rewards: ₡1,500 / ₡1,500 | Prestige: +0 | Fame: +0

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658459_0.8869210791737235 earned ₡4,973 from Battle #64328

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658461_0.38609712128649887 earned ₡1,001 from Battle #64328

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658459_0.8869210791737235 (User 40144) vs TestRobot2_1771859658461_0.38609712128649887 (User 40145) | Winner: TestRobot2_1771859658461_0.38609712128649887 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658512_0.4781958294725719 earned ₡6,007 from Battle #64329

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658513_0.026460232834817354 earned ₡1,001 from Battle #64329

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658512_0.4781958294725719 (User 40144) vs TestRobot2_1771859658513_0.026460232834817354 (User 40145) | Winner: TestRobot2_1771859658513_0.026460232834817354 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658567_0.49381867909873123 earned ₡15,193 from Battle #64330

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658569_0.6214699980172266 earned ₡1,001 from Battle #64330

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658567_0.49381867909873123 (User 40144) vs TestRobot2_1771859658569_0.6214699980172266 (User 40145) | Winner: TestRobot2_1771859658569_0.6214699980172266 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658625_0.38516878178605995 earned ₡15,333 from Battle #64331

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658627_0.3195786934403415 earned ₡1,000 from Battle #64331

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658625_0.38516878178605995 (User 40144) vs TestRobot2_1771859658627_0.3195786934403415 (User 40145) | Winner: TestRobot1_1771859658625_0.38516878178605995 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658681_0.4421685332943135 earned ₡5,866 from Battle #64332

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658683_0.9582606729171017 earned ₡1,000 from Battle #64332

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658681_0.4421685332943135 (User 40144) vs TestRobot2_1771859658683_0.9582606729171017 (User 40145) | Winner: TestRobot1_1771859658681_0.4421685332943135 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658739_0.7496781500819147 earned ₡3,340 from Battle #64333

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658740_0.8831979960629432 earned ₡1,000 from Battle #64333

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658739_0.7496781500819147 (User 40144) vs TestRobot2_1771859658740_0.8831979960629432 (User 40145) | Winner: TestRobot1_1771859658739_0.7496781500819147 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: TestRobot1_1771859658739_0.7496781500819147

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658815_0.259334456208299 earned ₡31,554 from Battle #64334

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658816_0.3658739613269487 earned ₡1,001 from Battle #64334

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658815_0.259334456208299 (User 40144) vs TestRobot2_1771859658816_0.3658739613269487 (User 40145) | Winner: TestRobot2_1771859658816_0.3658739613269487 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658868_0.030921584736228525 earned ₡13,432 from Battle #64335

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658870_0.20819932400562358 earned ₡1,001 from Battle #64335

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658868_0.030921584736228525 (User 40144) vs TestRobot2_1771859658870_0.20819932400562358 (User 40145) | Winner: TestRobot2_1771859658870_0.20819932400562358 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658919_0.22155900064765022 earned ₡14,599 from Battle #64336

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658921_0.2927116913473712 earned ₡1,001 from Battle #64336

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658919_0.22155900064765022 (User 40144) vs TestRobot2_1771859658921_0.2927116913473712 (User 40145) | Winner: TestRobot2_1771859658921_0.2927116913473712 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859658971_0.2378713849541838 earned ₡31,478 from Battle #64337

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859658973_0.779468970660697 earned ₡1,000 from Battle #64337

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859658971_0.2378713849541838 (User 40144) vs TestRobot2_1771859658973_0.779468970660697 (User 40145) | Winner: TestRobot1_1771859658971_0.2378713849541838 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859659034_0.8823174625519158 earned ₡1,059 from Battle #64338

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859659038_0.7804206482417996 earned ₡1,000 from Battle #64338

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: silver | TestRobot1_1771859659034_0.8823174625519158 (User 40144) vs TestRobot2_1771859659038_0.7804206482417996 (User 40145) | Winner: TestRobot1_1771859659034_0.8823174625519158 | Rewards: ₡18,000 / ₡3,000 | Prestige: +10 | Fame: +8

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859659082_0.30459645878275154 earned ₡1,002 from Battle #64339

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859659086_0.518216606986143 earned ₡1,000 from Battle #64339

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: silver | TestRobot1_1771859659082_0.30459645878275154 (User 40144) vs TestRobot2_1771859659086_0.518216606986143 (User 40145) | Winner: TestRobot1_1771859659082_0.30459645878275154 | Rewards: ₡18,000 / ₡3,000 | Prestige: +10 | Fame: +5 | Kill: TestRobot1_1771859659082_0.30459645878275154

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859659248_0.7792898516112128 earned ₡1,001 from Battle #64340

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859659252_0.7431023995709467 earned ₡1,000 from Battle #64340

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859659248_0.7792898516112128 (User 40144) vs TestRobot2_1771859659252_0.7431023995709467 (User 40145) | Winner: TestRobot1_1771859659248_0.7792898516112128 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859659312_0.8593259517278556 earned ₡1,900 from Battle #64341

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859659315_0.014866878296982522 earned ₡1,001 from Battle #64341

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859659312_0.8593259517278556 (User 40144) vs TestRobot2_1771859659315_0.014866878296982522 (User 40145) | Winner: TestRobot2_1771859659315_0.014866878296982522 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859659379_0.21538189371248995 earned ₡1,898 from Battle #64342

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859659381_0.6237741358221299 earned ₡1,001 from Battle #64342

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859659379_0.21538189371248995 (User 40144) vs TestRobot2_1771859659381_0.6237741358221299 (User 40145) | Winner: TestRobot2_1771859659381_0.6237741358221299 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +2 | Kill: TestRobot2_1771859659381_0.6237741358221299

      at processBattle (src/services/battleOrchestrator.ts:821:11)

    console.log
      [Streaming] TestRobot1_1771859659441_0.3288259497079016 earned ₡1,000 from Battle #64343

      at processBattle (src/services/battleOrchestrator.ts:663:15)

    console.log
      [Streaming] TestRobot2_1771859659448_0.8569664212616893 earned ₡1,001 from Battle #64343

      at processBattle (src/services/battleOrchestrator.ts:667:15)

    console.log
      [Battle] League: bronze | TestRobot1_1771859659441_0.3288259497079016 (User 40144) vs TestRobot2_1771859659448_0.8569664212616893 (User 40145) | Winner: TestRobot2_1771859659448_0.8569664212616893 | Rewards: ₡9,000 / ₡1,500 | Prestige: +5 | Fame: +3 | Kill: TestRobot2_1771859659448_0.8569664212616893

      at processBattle (src/services/battleOrchestrator.ts:821:11)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5: Stats updated before streaming revenue calculation

    Property failed after 1 tests
    { seed: -117195004, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0,0,0,0,"bronze"]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).not.toBeNull()

    Received: null

      267 |           });
      268 |
    > 269 |           expect(battleCompleteEvent).not.toBeNull();
          |                                           ^
      270 |           const payload = battleCompleteEvent!.payload as any;
      271 |
      272 |           // Get updated robot stats from database

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:269:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:189:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.2: Winner fame increases after battle

    Property failed after 1 tests
    { seed: 381692895, path: "0:0:0", endOnFailure: true }
    Counterexample: [0,"bronze"]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    TypeError: Cannot read properties of null (reading 'payload')

      485 |           });
      486 |
    > 487 |           const payload = battleCompleteEvent!.payload as any;
          |                                                ^
      488 |
      489 |           // Get updated robot stats
      490 |           const updatedRobot1 = await prisma.robot.findUnique({

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:487:48
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:438:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.3: Stats are always updated before streaming revenue calculation

    Property failed after 1 tests
    { seed: 958940801, path: "0:0:0", endOnFailure: true }
    Counterexample: [0,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    TypeError: Cannot read properties of null (reading 'payload')

      561 |           });
      562 |
    > 563 |           const payload = battleCompleteEvent!.payload as any;
          |                                                ^
      564 |
      565 |           // Property: The battle count used in streaming revenue should be 
      566 |           // the initial count + 1 (proving stats were updated first)

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:563:48
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:526:5)

PASS tests/creditChangeAuditTrail.property.test.ts
FAIL tests/financialReportStreamingRevenue.property.test.ts
  ● Property 17: Financial Report Includes Streaming Revenue › Property 17: Financial report includes streaming revenue line item

    Property failed after 86 tests
    { seed: -243839234, path: "85:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"numBattles":1,"robotBattles":0,"robotFame":0,"studioLevel":0,"streamingRevenuePerBattle":[1000]}]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:147:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:127:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.1: Zero streaming revenue when no battles

    Property failed after 1 tests
    { seed: 509859863, path: "0:0", endOnFailure: true }
    Counterexample: [0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    User not found

      306 |
      307 |   if (!user) {
    > 308 |     throw new Error('User not found');
          |           ^
      309 |   }
      310 |
      311 |   // Calculate operating costs

      at generateFinancialReport (src/utils/economyCalculations.ts:308:11)
      at tests/financialReportStreamingRevenue.property.test.ts:258:26
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:233:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.2: Only counts streaming revenue from user's robots

    Property failed after 1 tests
    { seed: 606966106, path: "0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"userBattles":1,"opponentBattles":1,"userStreamingRevenue":[1000],"opponentStreamingRevenue":[1000]}]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:298:29
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:282:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.3: Streaming revenue contributes to total revenue

    Property failed after 1 tests
    { seed: 1750961955, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [{"numBattles":1,"streamingRevenuePerBattle":1000,"battleWinnings":0}]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:417:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:408:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.4: Aggregates streaming revenue across multiple robots

    Property failed after 1 tests
    { seed: 2125092007, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"numRobots":2,"battlesPerRobot":[1,1],"revenuePerBattle":[1000,1000]}]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:496:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:473:5)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:118:29

      115 
      116 afterAll(async () => {
      117   // Final cleanup of user
    → 118   await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      116 |   afterAll(async () => {
      117 |     // Final cleanup of user
    > 118 |     await prisma.user.delete({ where: { id: testUserId } });
          |     ^
      119 |     await prisma.$disconnect();
      120 |   });
      121 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:118:5)

FAIL tests/incomeGeneratorNoStreaming.property.test.ts
  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18: Income Generator provides only merchandising, no streaming

    Property failed after 30 tests
    { seed: -874885609, path: "29", endOnFailure: true }
    Counterexample: [9,6]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      92 |
      93 |           // Property: Merchandising should be greater than 0 for level 1+
    > 94 |           expect(result.merchandising).toBeGreaterThan(0);
         |                                        ^
      95 |
      96 |           // Property: Result should NOT have a streaming field
      97 |           // (The old system had a streaming field, the new system should not)

      at tests/incomeGeneratorNoStreaming.property.test.ts:94:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:54:5)

  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.2: Passive income is independent of robot stats

    Property failed after 8 tests
    { seed: 663096411, path: "7", endOnFailure: true }
    Counterexample: [2,21711]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      217 |           // (The old streaming system required robot battles/fame, the new system doesn't)
      218 |           expect(result).not.toBeNull();
    > 219 |           expect(result.merchandising).toBeGreaterThan(0);
          |                                        ^
      220 |           expect(result.total).toBe(result.merchandising);
      221 |
      222 |           // Property: Result should NOT have a streaming field

      at tests/incomeGeneratorNoStreaming.property.test.ts:219:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:185:5)

PASS tests/cyclePerformanceMonitoring.test.ts
FAIL tests/facilityAdvisorStreamingStudioROI.property.test.ts
  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21: Facility Advisor provides Streaming Studio ROI metrics

    Property failed after 1 tests
    { seed: 1544836952, path: "0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,1,0,0,5]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeDefined()

    Received: undefined

      292 |               // The service filters out recommendations with ROI <= 0 and priority === 'low'
      293 |               if (expectedROI > 0 || netBenefitPerCycle > expectedUpgradeCost / 30) {
    > 294 |                 expect(studioRec).toBeDefined();
          |                                   ^
      295 |               }
      296 |
      297 |               if (studioRec) {

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:294:35
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:196:5)

  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.2: Revenue increase per battle is calculated correctly

    Property failed after 1 tests
    { seed: 1712906377, path: "0:0:2:1:3:1:2", endOnFailure: true }
    Counterexample: [0,100,9188,11]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 30

      487 |             if (expectedNetBenefitPerCycle > 0 && studioRec.projectedPayoffCycles !== null) {
      488 |               const expectedPaybackCycles = Math.ceil(studioRec.upgradeCost / expectedNetBenefitPerCycle);
    > 489 |               expect(studioRec.projectedPayoffCycles).toBe(expectedPaybackCycles);
          |                                                       ^
      490 |             }
      491 |
      492 |             // Property: ROI should be calculated correctly

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:489:55
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:423:5)

FAIL tests/tagTeamLeagueInstance.property.test.ts (12.604 s)
  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › no instance ever exceeds maximum capacity of 50 teams

    Property failed after 9 tests
    { seed: 1340351570, path: "8:2:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,"bronze"]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 2

      183 |             // Property: Total teams across all instances should equal numTeams
      184 |             const totalTeams = instances.reduce((sum, inst) => sum + inst.currentTeams, 0);
    > 185 |             expect(totalTeams).toBe(numTeams);
          |                                ^
      186 |           }
      187 |         ),
      188 |         { numRuns: NUM_RUNS }

      at tests/tagTeamLeagueInstance.property.test.ts:185:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:156:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › new instance is created when 51st team would be added

    Property failed after 11 tests
    { seed: 1343363096, path: "10", endOnFailure: true }
    Counterexample: ["bronze"]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 50
    Received: 3

      209 |             let instances = await getInstancesForTier(tier);
      210 |             expect(instances.length).toBe(1);
    > 211 |             expect(instances[0].currentTeams).toBe(50);
          |                                               ^
      212 |             expect(instances[0].isFull).toBe(true);
      213 |
      214 |             // Create the 51st team

      at tests/tagTeamLeagueInstance.property.test.ts:211:47
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:193:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance assignment distributes teams correctly

    Property failed after 1 tests
    { seed: 244262248, path: "0:1:0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [51,"bronze"]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
      at tests/tagTeamLeagueInstance.property.test.ts:251:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:238:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance capacity is enforced across all league tiers

    Property failed after 1 tests
    { seed: 1065788737, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [[{"tier":"bronze","numTeams":1}]]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
      at tests/tagTeamLeagueInstance.property.test.ts:299:17
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:282:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › assignTagTeamLeagueInstance never returns a full instance

    Property failed after 1 tests
    { seed: -962291052, path: "0:0:1:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: ["bronze",1]
    Shrunk 8 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
      at tests/tagTeamLeagueInstance.property.test.ts:330:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:323:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance numbers are sequential and start at 1

    Property failed after 1 tests
    { seed: -2008684314, path: "0:0:0", endOnFailure: true }
    Counterexample: ["bronze",1]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
      at tests/tagTeamLeagueInstance.property.test.ts:360:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:353:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › capacity enforcement works with concurrent team creation

    Property failed after 1 tests
    { seed: -320745649, path: "0:0:0", endOnFailure: true }
    Counterexample: ["bronze",45]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
          at async Promise.all (index 19)
      at tests/tagTeamLeagueInstance.property.test.ts:400:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:385:7)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:47:31

      44   });
      45 }
      46 if (testStableId) {
    → 47   await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      45 |     }
      46 |     if (testStableId) {
    > 47 |       await prisma.user.delete({
         |       ^
      48 |         where: { id: testStableId },
      49 |       });
      50 |     }

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:47:7)

FAIL tests/roiCalculatorService.test.ts
  ● ROICalculatorService › calculateFacilityROI › should return null for facility not purchased

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:50:29

      47 });
      48 await prisma.facility.deleteMany({ where: { userId: testUserId } });
      49 await prisma.robot.deleteMany({ where: { userId: testUserId } });
    → 50 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      48 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });
      49 |     await prisma.robot.deleteMany({ where: { userId: testUserId } });
    > 50 |     await prisma.user.delete({ where: { id: testUserId } });
         |     ^
      51 |   });
      52 |
      53 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:50:5)

  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for income generator facility

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:78:7)

  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for income generator facility

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:50:29

      47 });
      48 await prisma.facility.deleteMany({ where: { userId: testUserId } });
      49 await prisma.robot.deleteMany({ where: { userId: testUserId } });
    → 50 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      48 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });
      49 |     await prisma.robot.deleteMany({ where: { userId: testUserId } });
    > 50 |     await prisma.user.delete({ where: { id: testUserId } });
         |     ^
      51 |   });
      52 |
      53 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:50:5)

  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for repair bay facility with discounts

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:145:7)

  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for training facility with discounts

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:225:7)

FAIL tests/leagueRebalancingService.test.ts
  ● Console

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceLeagues (src/services/leagueRebalancingService.ts:333:11)

    console.log
      [Rebalancing] Starting league rebalancing...

      at rebalanceLeagues (src/services/leagueRebalancingService.ts:334:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceLeagues (src/services/leagueRebalancingService.ts:335:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceLeagues (src/services/leagueRebalancingService.ts:333:11)

    console.log
      [Rebalancing] Starting league rebalancing...

      at rebalanceLeagues (src/services/leagueRebalancingService.ts:334:11)

    console.log
      ════════════════════════════════════════════════════════════

      at rebalanceLeagues (src/services/leagueRebalancingService.ts:335:11)

  ● League Rebalancing Service › determinePromotions › should return top 10% of robots with ≥5 cycles AND ≥25 league points

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:50:50

      47 }
      48 
      49 // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    → 50 const robotsWithMinPoints = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |
      49 |   // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    > 50 |   const robotsWithMinPoints = await prisma.robot.findMany({
         |                               ^
      51 |     where: {
      52 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      53 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determinePromotions (src/services/leagueRebalancingService.ts:50:31)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:97:25)

  ● League Rebalancing Service › determinePromotions › should skip robots with <5 cycles in current league

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:50:50

      47 }
      48 
      49 // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    → 50 const robotsWithMinPoints = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |
      49 |   // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    > 50 |   const robotsWithMinPoints = await prisma.robot.findMany({
         |                               ^
      51 |     where: {
      52 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      53 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determinePromotions (src/services/leagueRebalancingService.ts:50:31)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:142:25)

  ● League Rebalancing Service › determinePromotions › should return empty array when no robots have ≥25 league points

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:50:50

      47 }
      48 
      49 // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    → 50 const robotsWithMinPoints = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |
      49 |   // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    > 50 |   const robotsWithMinPoints = await prisma.robot.findMany({
         |                               ^
      51 |     where: {
      52 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      53 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determinePromotions (src/services/leagueRebalancingService.ts:50:31)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:193:25)

  ● League Rebalancing Service › determinePromotions › should return empty array when too few robots

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:50:50

      47 }
      48 
      49 // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    → 50 const robotsWithMinPoints = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |
      49 |   // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    > 50 |   const robotsWithMinPoints = await prisma.robot.findMany({
         |                               ^
      51 |     where: {
      52 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      53 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determinePromotions (src/services/leagueRebalancingService.ts:50:31)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:232:25)

  ● League Rebalancing Service › determineDemotions › should return bottom 10% of robots with ≥5 cycles in current league

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:126:37

      123 }
      124 
      125 // Get all robots in this INSTANCE with minimum cycles in current league
    → 126 const robots = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      124 |
      125 |   // Get all robots in this INSTANCE with minimum cycles in current league
    > 126 |   const robots = await prisma.robot.findMany({
          |                  ^
      127 |     where: {
      128 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      129 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determineDemotions (src/services/leagueRebalancingService.ts:126:18)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:272:24)

  ● League Rebalancing Service › promoteRobot › should move robot to next tier and reset league points and cycles

    PrismaClientInitializationError: 
    Invalid `prisma.robot.groupBy()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueInstanceService.ts:35:40

      32  */
      33 export async function getInstancesForTier(tier: LeagueTier): Promise<LeagueInstance[]> {
      34   // Query robots grouped by leagueId for this tier
    → 35   const instances = await prisma.robot.groupBy(
    Too many database connections opened: FATAL: sorry, too many clients already

      33 | export async function getInstancesForTier(tier: LeagueTier): Promise<LeagueInstance[]> {
      34 |   // Query robots grouped by leagueId for this tier
    > 35 |   const instances = await prisma.robot.groupBy({
         |                     ^
      36 |     by: ['leagueId'],
      37 |     where: {
      38 |       currentLeague: tier,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getInstancesForTier (src/services/leagueInstanceService.ts:35:21)
      at assignLeagueInstance (src/services/leagueInstanceService.ts:96:21)
      at promoteRobot (src/services/leagueRebalancingService.ts:197:23)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:316:7)

  ● League Rebalancing Service › demoteRobot › should move robot to previous tier and reset league points

    PrismaClientInitializationError: 
    Invalid `prisma.robot.groupBy()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueInstanceService.ts:35:40

      32  */
      33 export async function getInstancesForTier(tier: LeagueTier): Promise<LeagueInstance[]> {
      34   // Query robots grouped by leagueId for this tier
    → 35   const instances = await prisma.robot.groupBy(
    Too many database connections opened: FATAL: sorry, too many clients already

      33 | export async function getInstancesForTier(tier: LeagueTier): Promise<LeagueInstance[]> {
      34 |   // Query robots grouped by leagueId for this tier
    > 35 |   const instances = await prisma.robot.groupBy({
         |                     ^
      36 |     by: ['leagueId'],
      37 |     where: {
      38 |       currentLeague: tier,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getInstancesForTier (src/services/leagueInstanceService.ts:35:21)
      at assignLeagueInstance (src/services/leagueInstanceService.ts:96:21)
      at demoteRobot (src/services/leagueRebalancingService.ts:225:23)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:383:7)

  ● League Rebalancing Service › rebalanceLeagues › should process all tiers and return summary

    PrismaClientInitializationError: 
    Invalid `prisma.robot.count()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:346:48

      343 };
      344 
      345 // Get total robot count
    → 346 fullSummary.totalRobots = await prisma.robot.count(
    Too many database connections opened: FATAL: sorry, too many clients already

      344 |
      345 |   // Get total robot count
    > 346 |   fullSummary.totalRobots = await prisma.robot.count({
          |                             ^
      347 |     where: { NOT: { name: 'Bye Robot' } },
      348 |   });
      349 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at rebalanceLeagues (src/services/leagueRebalancingService.ts:346:29)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:457:23)

  ● League Rebalancing Service › rebalanceLeagues › should not promote or demote robots multiple times in same cycle

    PrismaClientInitializationError: 
    Invalid `prisma.robot.count()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:346:48

      343 };
      344 
      345 // Get total robot count
    → 346 fullSummary.totalRobots = await prisma.robot.count(
    Too many database connections opened: FATAL: sorry, too many clients already

      344 |
      345 |   // Get total robot count
    > 346 |   fullSummary.totalRobots = await prisma.robot.count({
          |                             ^
      347 |     where: { NOT: { name: 'Bye Robot' } },
      348 |   });
      349 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at rebalanceLeagues (src/services/leagueRebalancingService.ts:346:29)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:503:23)

FAIL tests/tagTeamValidation.property.test.ts
  ● Tag Team Validation Property Tests › should only validate teams where both robots are from same stable and battle ready

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should only validate teams where both robots are from same stable and battle ready

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should reject teams with robots from different stables

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should reject teams with robots from different stables

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should reject teams with unready robots

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should reject teams with unready robots

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should preserve team configuration through create and retrieve cycle

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should preserve team configuration through create and retrieve cycle

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should place all new teams in Bronze league with initial values

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should place all new teams in Bronze league with initial values

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should remove team from database and free robots for new teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should remove team from database and free robots for new teams

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should validate team readiness based on both robots meeting all requirements

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should validate team readiness based on both robots meeting all requirements

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should calculate combined ELO as sum of both robots ELOs

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should calculate combined ELO as sum of both robots ELOs

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking only on odd cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1038:32

      1035 describe('Tag Team Matchmaking Cycle Scheduling Property Tests', () => {
      1036   beforeAll(async () => {
      1037     // Ensure cycle metadata exists
    → 1038     await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      1036 |   beforeAll(async () => {
      1037 |     // Ensure cycle metadata exists
    > 1038 |     await prisma.cycleMetadata.upsert({
           |     ^
      1039 |       where: { id: 1 },
      1040 |       update: {},
      1041 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1038:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should alternate matchmaking between consecutive cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1038:32

      1035 describe('Tag Team Matchmaking Cycle Scheduling Property Tests', () => {
      1036   beforeAll(async () => {
      1037     // Ensure cycle metadata exists
    → 1038     await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      1036 |   beforeAll(async () => {
      1037 |     // Ensure cycle metadata exists
    > 1038 |     await prisma.cycleMetadata.upsert({
           |     ^
      1039 |       where: { id: 1 },
      1040 |       update: {},
      1041 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1038:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking on known odd cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1038:32

      1035 describe('Tag Team Matchmaking Cycle Scheduling Property Tests', () => {
      1036   beforeAll(async () => {
      1037     // Ensure cycle metadata exists
    → 1038     await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      1036 |   beforeAll(async () => {
      1037 |     // Ensure cycle metadata exists
    > 1038 |     await prisma.cycleMetadata.upsert({
           |     ^
      1039 |       where: { id: 1 },
      1040 |       update: {},
      1041 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1038:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should skip matchmaking on known even cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1038:32

      1035 describe('Tag Team Matchmaking Cycle Scheduling Property Tests', () => {
      1036   beforeAll(async () => {
      1037     // Ensure cycle metadata exists
    → 1038     await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      1036 |   beforeAll(async () => {
      1037 |     // Ensure cycle metadata exists
    > 1038 |     await prisma.cycleMetadata.upsert({
           |     ^
      1039 |       where: { id: 1 },
      1040 |       update: {},
      1041 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1038:5)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams with unready robots from eligible teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1198:40

      1195 
      1196 beforeAll(async () => {
      1197   // Create test user
    → 1198   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1196 |   beforeAll(async () => {
      1197 |     // Create test user
    > 1198 |     const testUser = await prisma.user.create({
           |                      ^
      1199 |       data: {
      1200 |         username: `pbt_eligible_user_${Date.now()}`,
      1201 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1198:22)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams with unready robots from eligible teams

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1231:26

      1228 
      1229 afterEach(async () => {
      1230   // Clean up teams and robots after each test
    → 1231   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1229 |   afterEach(async () => {
      1230 |     // Clean up teams and robots after each test
    > 1231 |     await prisma.tagTeam.deleteMany({
           |     ^
      1232 |       where: { stableId: testUserId },
      1233 |     });
      1234 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1231:5)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1198:40

      1195 
      1196 beforeAll(async () => {
      1197   // Create test user
    → 1198   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1196 |   beforeAll(async () => {
      1197 |     // Create test user
    > 1198 |     const testUser = await prisma.user.create({
           |                      ^
      1199 |       data: {
      1200 |         username: `pbt_eligible_user_${Date.now()}`,
      1201 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1198:22)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1231:26

      1228 
      1229 afterEach(async () => {
      1230   // Clean up teams and robots after each test
    → 1231   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1229 |   afterEach(async () => {
      1230 |     // Clean up teams and robots after each test
    > 1231 |     await prisma.tagTeam.deleteMany({
           |     ^
      1232 |       where: { stableId: testUserId },
      1233 |     });
      1234 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1231:5)

  ● Tag Team Matchmaking ELO Matching Property Tests › should prefer matching teams with smaller ELO differences

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1489:40

      1486 
      1487 beforeAll(async () => {
      1488   // Create test user
    → 1489   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1487 |   beforeAll(async () => {
      1488 |     // Create test user
    > 1489 |     const testUser = await prisma.user.create({
           |                      ^
      1490 |       data: {
      1491 |         username: `pbt_elo_user_${Date.now()}`,
      1492 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1489:22)

  ● Tag Team Matchmaking ELO Matching Property Tests › should prefer matching teams with smaller ELO differences

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1522:26

      1519 
      1520 afterEach(async () => {
      1521   // Clean up teams and robots after each test
    → 1522   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1520 |   afterEach(async () => {
      1521 |     // Clean up teams and robots after each test
    > 1522 |     await prisma.tagTeam.deleteMany({
           |     ^
      1523 |       where: { stableId: testUserId },
      1524 |     });
      1525 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1522:5)

  ● Tag Team Matchmaking Same-Stable Exclusion Property Tests › should strongly deprioritize same-stable matches

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1666:41

      1663 
      1664 beforeAll(async () => {
      1665   // Create test users
    → 1666   const testUser1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1664 |   beforeAll(async () => {
      1665 |     // Create test users
    > 1666 |     const testUser1 = await prisma.user.create({
           |                       ^
      1667 |       data: {
      1668 |         username: `pbt_stable1_${Date.now()}`,
      1669 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1666:23)

  ● Tag Team Matchmaking Same-Stable Exclusion Property Tests › should strongly deprioritize same-stable matches

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1714:26

      1711 
      1712 afterEach(async () => {
      1713   // Clean up teams and robots after each test
    → 1714   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1712 |   afterEach(async () => {
      1713 |     // Clean up teams and robots after each test
    > 1714 |     await prisma.tagTeam.deleteMany({
           |     ^
      1715 |       where: {
      1716 |         OR: [{ stableId: testUserId1 }, { stableId: testUserId2 }],
      1717 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1714:5)

  ● Tag Team Matchmaking Recent Opponent Deprioritization Property Tests › should deprioritize recent opponents when multiple options exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1925:40

      1922 
      1923 beforeAll(async () => {
      1924   // Create test user
    → 1925   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1923 |   beforeAll(async () => {
      1924 |     // Create test user
    > 1925 |     const testUser = await prisma.user.create({
           |                      ^
      1926 |       data: {
      1927 |         username: `pbt_recent_user_${Date.now()}`,
      1928 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1925:22)

  ● Tag Team Matchmaking Recent Opponent Deprioritization Property Tests › should deprioritize recent opponents when multiple options exist

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeamMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1966:31

      1963 
      1964 afterEach(async () => {
      1965   // Clean up after each test
    → 1966   await prisma.tagTeamMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1964 |   afterEach(async () => {
      1965 |     // Clean up after each test
    > 1966 |     await prisma.tagTeamMatch.deleteMany({
           |     ^
      1967 |       where: {
      1968 |         OR: [
      1969 |           { team1: { stableId: testUserId } },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1966:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:50:26

      47 
      48 afterAll(async () => {
      49   // Clean up test data
    → 50   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |   afterAll(async () => {
      49 |     // Clean up test data
    > 50 |     await prisma.tagTeam.deleteMany({
         |     ^
      51 |       where: {
      52 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      53 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:50:5)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1214:26

      1211 
      1212 afterAll(async () => {
      1213   // Clean up test data
    → 1214   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1212 |   afterAll(async () => {
      1213 |     // Clean up test data
    > 1214 |     await prisma.tagTeam.deleteMany({
           |     ^
      1215 |       where: { stableId: testUserId },
      1216 |     });
      1217 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1214:5)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1505:26

      1502 
      1503 afterAll(async () => {
      1504   // Clean up test data
    → 1505   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1503 |   afterAll(async () => {
      1504 |     // Clean up test data
    > 1505 |     await prisma.tagTeam.deleteMany({
           |     ^
      1506 |       where: { stableId: testUserId },
      1507 |     });
      1508 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1505:5)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1691:26

      1688 
      1689 afterAll(async () => {
      1690   // Clean up test data
    → 1691   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1689 |   afterAll(async () => {
      1690 |     // Clean up test data
    > 1691 |     await prisma.tagTeam.deleteMany({
           |     ^
      1692 |       where: {
      1693 |         OR: [{ stableId: testUserId1 }, { stableId: testUserId2 }],
      1694 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1691:5)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeamMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1941:31

      1938 
      1939 afterAll(async () => {
      1940   // Clean up test data
    → 1941   await prisma.tagTeamMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1939 |   afterAll(async () => {
      1940 |     // Clean up test data
    > 1941 |     await prisma.tagTeamMatch.deleteMany({
           |     ^
      1942 |       where: {
      1943 |         OR: [
      1944 |           { team1: { stableId: testUserId } },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1941:5)

FAIL tests/leagueInstanceService.test.ts
  ● League Instance Service › getInstancesForTier › should return empty array for tier with no robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getInstancesForTier › should return empty array for tier with no robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getInstancesForTier › should return instances sorted by instance number

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getInstancesForTier › should return instances sorted by instance number

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getInstancesForTier › should exclude bye-robot from instance counts

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getInstancesForTier › should exclude bye-robot from instance counts

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getLeagueInstanceStats › should calculate correct statistics

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getLeagueInstanceStats › should calculate correct statistics

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getLeagueInstanceStats › should detect when rebalancing is needed

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getLeagueInstanceStats › should detect when rebalancing is needed

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getLeagueInstanceStats › should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getLeagueInstanceStats › should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › assignLeagueInstance › should create first instance when none exist

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › assignLeagueInstance › should create first instance when none exist

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › assignLeagueInstance › should assign to instance with most free spots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › assignLeagueInstance › should assign to instance with most free spots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › assignLeagueInstance › should create new instance when all are full

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › assignLeagueInstance › should create new instance when all are full

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › rebalanceInstances › should not rebalance when instances are balanced

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › rebalanceInstances › should not rebalance when instances are balanced

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › rebalanceInstances › should rebalance when imbalance exceeds threshold

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › rebalanceInstances › should rebalance when imbalance exceeds threshold

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getRobotsInInstance › should return robots in correct order

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getRobotsInInstance › should return robots in correct order

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › moveRobotToInstance › should move robot to appropriate instance in new tier

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › moveRobotToInstance › should move robot to appropriate instance in new tier

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

FAIL tests/trainingAcademyCaps.test.ts
  ● Console

    console.error
      Bulk robot upgrade error: PrismaClientInitializationError: 
      Invalid `prisma.robot.findFirst()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/robots.ts:1965:38
      
        1962 }
        1963 
        1964 // Get robot
      → 1965 const robot = await prisma.robot.findFirst(
      Too many database connections opened: FATAL: sorry, too many clients already
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/robots.ts:1965:19 {
        clientVersion: '5.22.0',
        errorCode: undefined
      }

      2193 |     });
      2194 |   } catch (error) {
    > 2195 |     console.error('Bulk robot upgrade error:', error);
           |             ^
      2196 |     console.error('Error details:', error instanceof Error ? error.message : error);
      2197 |     console.error('Error stack:', error instanceof Error ? error.stack : 'No stack trace');
      2198 |     res.status(500).json({ error: 'Internal server error', details: error instanceof Error ? error.message : String(error) });

      at src/routes/robots.ts:2195:13

    console.error
      Error details: 
      Invalid `prisma.robot.findFirst()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/robots.ts:1965:38
      
        1962 }
        1963 
        1964 // Get robot
      → 1965 const robot = await prisma.robot.findFirst(
      Too many database connections opened: FATAL: sorry, too many clients already

      2194 |   } catch (error) {
      2195 |     console.error('Bulk robot upgrade error:', error);
    > 2196 |     console.error('Error details:', error instanceof Error ? error.message : error);
           |             ^
      2197 |     console.error('Error stack:', error instanceof Error ? error.stack : 'No stack trace');
      2198 |     res.status(500).json({ error: 'Internal server error', details: error instanceof Error ? error.message : String(error) });
      2199 |   }

      at src/routes/robots.ts:2196:13

    console.error
      Error stack: PrismaClientInitializationError: 
      Invalid `prisma.robot.findFirst()` invocation in
      /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/robots.ts:1965:38
      
        1962 }
        1963 
        1964 // Get robot
      → 1965 const robot = await prisma.robot.findFirst(
      Too many database connections opened: FATAL: sorry, too many clients already
          at $n.handleRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:7615)
          at $n.handleAndLogRequestError (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
          at $n.request (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
          at l (/Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
          at /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/routes/robots.ts:1965:19

      2195 |     console.error('Bulk robot upgrade error:', error);
      2196 |     console.error('Error details:', error instanceof Error ? error.message : error);
    > 2197 |     console.error('Error stack:', error instanceof Error ? error.stack : 'No stack trace');
           |             ^
      2198 |     res.status(500).json({ error: 'Internal server error', details: error instanceof Error ? error.message : String(error) });
      2199 |   }
      2200 | });

      at src/routes/robots.ts:2197:13

  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should allow upgrading combatPower to level 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      83 |           });
      84 |
    > 85 |         expect(response.status).toBe(200);
         |                                 ^
      86 |       }
      87 |
      88 |       // Verify the robot is at level 10

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:85:33)

  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should block upgrading combatPower from level 10 to level 11 without academy

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      106 |         .send({ attribute: 'combatPower' });
      107 |
    > 108 |       expect(response.status).toBe(400);
          |                               ^
      109 |       expect(response.body.error).toContain('Attribute cap of 10 reached');
      110 |       expect(response.body.error).toContain('Combat Training Academy');
      111 |     });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:108:31)

  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should allow upgrading combatPower to level 15 with academy level 1

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      137 |         .send({ attribute: 'combatPower' });
      138 |
    > 139 |       expect(response.status).toBe(200);
          |                               ^
      140 |
      141 |       // Verify the robot is at level 15
      142 |       const robot = await prisma.robot.findUnique({

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:139:31)

  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should block upgrading combatPower from level 15 to level 16

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      159 |         .send({ attribute: 'combatPower' });
      160 |
    > 161 |       expect(response.status).toBe(400);
          |                               ^
      162 |       expect(response.body.error).toContain('Attribute cap of 15 reached');
      163 |       expect(response.body.error).toContain('Combat Training Academy');
      164 |     });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:161:31)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Combat Training Academy for Combat Systems attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      189 |           .send({ attribute });
      190 |
    > 191 |         expect(response.status).toBe(400);
          |                                 ^
      192 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      193 |         expect(response.body.error).toContain('Combat Training Academy');
      194 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:191:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Defense Training Academy for Defensive Systems attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      217 |           .send({ attribute });
      218 |
    > 219 |         expect(response.status).toBe(400);
          |                                 ^
      220 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      221 |         expect(response.body.error).toContain('Defense Training Academy');
      222 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:219:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Mobility Training Academy for Chassis & Mobility attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      245 |           .send({ attribute });
      246 |
    > 247 |         expect(response.status).toBe(400);
          |                                 ^
      248 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      249 |         expect(response.body.error).toContain('Mobility Training Academy');
      250 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:247:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce AI Training Academy for AI Processing + Team attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      275 |           .send({ attribute });
      276 |
    > 277 |         expect(response.status).toBe(400);
          |                                 ^
      278 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      279 |         expect(response.body.error).toContain('AI Training Academy');
      280 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:277:33)

  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should allow upgrading combatPower to level 50 with academy level 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      307 |         .send({ attribute: 'combatPower' });
      308 |
    > 309 |       expect(response.status).toBe(200);
          |                               ^
      310 |
      311 |       // Verify the robot is at level 50
      312 |       const robot = await prisma.robot.findUnique({

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:309:31)

  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should block upgrading combatPower from level 50 to level 51

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      329 |         .send({ attribute: 'combatPower' });
      330 |
    > 331 |       expect(response.status).toBe(400);
          |                               ^
      332 |       expect(response.body.error).toContain('maximum level');
      333 |     });
      334 |   });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:331:31)

FAIL tests/queryService.test.ts
  ● QueryService › queryEvents › should query events by cycle number

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by cycle range

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by user ID

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by robot ID

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by event type

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by multiple event types

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should support pagination with limit and offset

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should support sorting by timestamp

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should combine multiple filters

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByCycle › should get all events for a specific cycle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByUser › should get all events for a specific user

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByUser › should get user events within cycle range

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByRobot › should get all events for a specific robot

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByType › should get events by type

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getPaginatedEvents › should paginate events correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventStatistics › should calculate event statistics

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getRecentEvents › should get most recent events

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › countEvents › should count events matching filters

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

FAIL tests/robotNameUniqueness.test.ts
  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should successfully create a robot with a unique name

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should successfully create a robot with a unique name

    TypeError: Cannot read properties of undefined (reading 'id')

      117 |       const robots = await prisma.robot.findMany({
      118 |         where: {
    > 119 |           userId: testUser.id,
          |                            ^
      120 |           name: robotName,
      121 |         },
      122 |       });

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should reject creating a robot with a duplicate name for the same user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should reject creating a robot with a duplicate name for the same user

    TypeError: Cannot read properties of undefined (reading 'id')

      117 |       const robots = await prisma.robot.findMany({
      118 |         where: {
    > 119 |           userId: testUser.id,
          |                            ^
      120 |           name: robotName,
      121 |         },
      122 |       });

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should allow different users to create robots with the same name

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should allow different users to create robots with the same name

    TypeError: Cannot read properties of undefined (reading 'id')

      117 |       const robots = await prisma.robot.findMany({
      118 |         where: {
    > 119 |           userId: testUser.id,
          |                            ^
      120 |           name: robotName,
      121 |         },
      122 |       });

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should handle case-sensitive name validation correctly

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should handle case-sensitive name validation correctly

    TypeError: Cannot read properties of undefined (reading 'id')

      117 |       const robots = await prisma.robot.findMany({
      118 |         where: {
    > 119 |           userId: testUser.id,
          |                            ^
      120 |           name: robotName,
      121 |         },
      122 |       });

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)

  ● Robot Name Uniqueness › POST /api/robots - Name validation › should reject empty robot names

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Name validation › should reject robot names longer than 50 characters

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Name validation › should accept robot names at the 50 character boundary

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

FAIL tests/integration/bronzeLeagueRebalancing.test.ts
  ● Bronze League Rebalancing - Integration Test › should correctly rebalance 331 robots from single bronze instance into multiple instances

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      20 |
      21 |   beforeAll(async () => {
    > 22 |     await prisma.$connect();
         |     ^
      23 |   });
      24 |
      25 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:22:5)

  ● Bronze League Rebalancing - Integration Test › should handle the scenario progressively over multiple cycles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      20 |
      21 |   beforeAll(async () => {
    > 22 |     await prisma.$connect();
         |     ^
      23 |   });
      24 |
      25 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:22:5)

FAIL tests/tagTeams.test.ts
  ● Tag Teams API Endpoints › POST /api/tag-teams › should create a tag team with valid robots

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should create a tag team with valid robots

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with missing robot IDs

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with missing robot IDs

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with same robot in both positions

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with same robot in both positions

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject duplicate team creation

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject duplicate team creation

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should list all teams for the user

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should list all teams for the user

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should include robot details and readiness status

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should reject request without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should disband a team

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should disband a team

    PrismaClientValidationError: 
    Invalid `prisma.tagTeam.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41

      283 
      284 beforeAll(async () => {
      285   // Create a team to delete
    → 286   const team = await prisma.tagTeam.create({
              data: {
                stableId: undefined,
                activeRobotId: undefined,
                reserveRobotId: undefined,
                tagTeamLeague: "bronze",
                tagTeamLeagueId: "bronze_1",
                tagTeamLeaguePoints: 0,
                cyclesInTagTeamLeague: 0,
                totalTagTeamWins: 0,
                totalTagTeamLosses: 0,
                totalTagTeamDraws: 0,
            +   stable: {
            +     create: UserCreateWithoutTagTeamsInput | UserUncheckedCreateWithoutTagTeamsInput,
            +     connectOrCreate: UserCreateOrConnectWithoutTagTeamsInput,
            +     connect: UserWhereUniqueInput
            +   }
              }
            })

    Argument `stable` is missing.

      284 |     beforeAll(async () => {
      285 |       // Create a team to delete
    > 286 |       const team = await prisma.tagTeam.create({
          |                    ^
      287 |         data: {
      288 |           stableId: testUserId,
      289 |           activeRobotId: robot2Id,

      at wn (node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request for non-existent team

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request for non-existent team

    PrismaClientValidationError: 
    Invalid `prisma.tagTeam.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41

      283 
      284 beforeAll(async () => {
      285   // Create a team to delete
    → 286   const team = await prisma.tagTeam.create({
              data: {
                stableId: undefined,
                activeRobotId: undefined,
                reserveRobotId: undefined,
                tagTeamLeague: "bronze",
                tagTeamLeagueId: "bronze_1",
                tagTeamLeaguePoints: 0,
                cyclesInTagTeamLeague: 0,
                totalTagTeamWins: 0,
                totalTagTeamLosses: 0,
                totalTagTeamDraws: 0,
            +   stable: {
            +     create: UserCreateWithoutTagTeamsInput | UserUncheckedCreateWithoutTagTeamsInput,
            +     connectOrCreate: UserCreateOrConnectWithoutTagTeamsInput,
            +     connect: UserWhereUniqueInput
            +   }
              }
            })

    Argument `stable` is missing.

      284 |     beforeAll(async () => {
      285 |       // Create a team to delete
    > 286 |       const team = await prisma.tagTeam.create({
          |                    ^
      287 |         data: {
      288 |           stableId: testUserId,
      289 |           activeRobotId: robot2Id,

      at wn (node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request with invalid team ID

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request with invalid team ID

    PrismaClientValidationError: 
    Invalid `prisma.tagTeam.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41

      283 
      284 beforeAll(async () => {
      285   // Create a team to delete
    → 286   const team = await prisma.tagTeam.create({
              data: {
                stableId: undefined,
                activeRobotId: undefined,
                reserveRobotId: undefined,
                tagTeamLeague: "bronze",
                tagTeamLeagueId: "bronze_1",
                tagTeamLeaguePoints: 0,
                cyclesInTagTeamLeague: 0,
                totalTagTeamWins: 0,
                totalTagTeamLosses: 0,
                totalTagTeamDraws: 0,
            +   stable: {
            +     create: UserCreateWithoutTagTeamsInput | UserUncheckedCreateWithoutTagTeamsInput,
            +     connectOrCreate: UserCreateOrConnectWithoutTagTeamsInput,
            +     connect: UserWhereUniqueInput
            +   }
              }
            })

    Argument `stable` is missing.

      284 |     beforeAll(async () => {
      285 |       // Create a team to delete
    > 286 |       const team = await prisma.tagTeam.create({
          |                    ^
      287 |         data: {
      288 |           stableId: testUserId,
      289 |           activeRobotId: robot2Id,

      at wn (node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:132:29

      129 await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
      130 await prisma.weaponInventory.deleteMany({ where: { userId: testUserId } });
      131 await prisma.robot.deleteMany({ where: { userId: testUserId } });
    → 132 await prisma.user.delete({
            where: {
              id: undefined,
          ?   username?: String,
          ?   stableName?: String,
          ?   AND?: UserWhereInput | UserWhereInput[],
          ?   OR?: UserWhereInput[],
          ?   NOT?: UserWhereInput | UserWhereInput[],
          ?   passwordHash?: StringFilter | String,
          ?   role?: StringFilter | String,
          ?   currency?: IntFilter | Int,
          ?   prestige?: IntFilter | Int,
          ?   championshipTitles?: IntFilter | Int,
          ?   profileVisibility?: StringFilter | String,
          ?   notificationsBattle?: BoolFilter | Boolean,
          ?   notificationsLeague?: BoolFilter | Boolean,
          ?   themePreference?: StringFilter | String,
          ?   createdAt?: DateTimeFilter | DateTime,
          ?   updatedAt?: DateTimeFilter | DateTime,
          ?   robots?: RobotListRelationFilter,
          ?   facilities?: FacilityListRelationFilter,
          ?   weaponInventory?: WeaponInventoryListRelationFilter,
          ?   tagTeams?: TagTeamListRelationFilter
            }
          })

    Argument `where` of type UserWhereUniqueInput needs at least one of `id`, `username` or `stableName` arguments. Available options are marked with ?.

      130 |     await prisma.weaponInventory.deleteMany({ where: { userId: testUserId } });
      131 |     await prisma.robot.deleteMany({ where: { userId: testUserId } });
    > 132 |     await prisma.user.delete({ where: { id: testUserId } });
          |     ^
      133 |     await prisma.$disconnect();
      134 |   });
      135 |

      at wn (node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:132:5)

FAIL tests/finances.test.ts
  ● Finances Routes › GET /api/finances/daily › should get daily financial report with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/daily › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/summary › should get financial summary with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/summary › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/operating-costs › should get operating costs with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/operating-costs › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/revenue-streams › should get revenue streams with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/revenue-streams › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/projections › should get financial projections with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/projections › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/per-robot › should get per-robot financial report with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/per-robot › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › POST /api/finances/roi-calculator › should return 400 without required fields

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › POST /api/finances/roi-calculator › should calculate ROI with valid data

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › POST /api/finances/roi-calculator › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

FAIL tests/battleEventLogging.test.ts
  ● Battle Event Logging Integration › should log battle_complete event when a battle is processed

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |
      22 |     // Create cycle metadata if it doesn't exist
      23 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:20:5)

  ● Battle Event Logging Integration › should log battle_complete event when a battle is processed

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:27

       98 
       99 afterEach(async () => {
      100   // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)
    → 101   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

       99 |   afterEach(async () => {
      100 |     // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)
    > 101 |     await prisma.auditLog.deleteMany({});
          |     ^
      102 |     await prisma.battleParticipant.deleteMany({});
      103 |     await prisma.battle.deleteMany({});
      104 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:101:5)

  ● Battle Event Logging Integration › should maintain Battle table records alongside event logs

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |
      22 |     // Create cycle metadata if it doesn't exist
      23 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:20:5)

  ● Battle Event Logging Integration › should maintain Battle table records alongside event logs

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:27

       98 
       99 afterEach(async () => {
      100   // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)
    → 101   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

       99 |   afterEach(async () => {
      100 |     // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)
    > 101 |     await prisma.auditLog.deleteMany({});
          |     ^
      102 |     await prisma.battleParticipant.deleteMany({});
      103 |     await prisma.battle.deleteMany({});
      104 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:101:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:108:27

      105 
      106 afterAll(async () => {
      107   // Final cleanup
    → 108   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      106 |   afterAll(async () => {
      107 |     // Final cleanup
    > 108 |     await prisma.auditLog.deleteMany({});
          |     ^
      109 |     await prisma.battleParticipant.deleteMany({});
      110 |     await prisma.battle.deleteMany({});
      111 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:108:5)

FAIL tests/tournamentStreamingRevenue.test.ts
  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |
      16 |   beforeAll(async () => {
    > 17 |     await prisma.$connect();
         |     ^
      18 |
      19 |     // Create cycle metadata
      20 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle

    PrismaClientInitializationError: 
    Invalid `prisma.tournamentMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34

      80 
      81 afterEach(async () => {
      82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    → 83   await prisma.tournamentMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      81 |   afterEach(async () => {
      82 |     // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    > 83 |     await prisma.tournamentMatch.deleteMany({});
         |     ^
      84 |     await prisma.battleParticipant.deleteMany({});
      85 |     await prisma.battle.deleteMany({});
      86 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:83:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should not award streaming revenue for bye matches

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |
      16 |   beforeAll(async () => {
    > 17 |     await prisma.$connect();
         |     ^
      18 |
      19 |     // Create cycle metadata
      20 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should not award streaming revenue for bye matches

    PrismaClientInitializationError: 
    Invalid `prisma.tournamentMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34

      80 
      81 afterEach(async () => {
      82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    → 83   await prisma.tournamentMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      81 |   afterEach(async () => {
      82 |     // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    > 83 |     await prisma.tournamentMatch.deleteMany({});
         |     ^
      84 |     await prisma.battleParticipant.deleteMany({});
      85 |     await prisma.battle.deleteMany({});
      86 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:83:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tournamentMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:103:34

      100 
      101 afterAll(async () => {
      102   // Final cleanup
    → 103   await prisma.tournamentMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      101 |   afterAll(async () => {
      102 |     // Final cleanup
    > 103 |     await prisma.tournamentMatch.deleteMany({});
          |     ^
      104 |     await prisma.battleParticipant.deleteMany({});
      105 |     await prisma.battle.deleteMany({});
      106 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:103:5)

FAIL tests/tagTeamLeagueRebalancing.test.ts
  ● Tag Team League Rebalancing › determinePromotions › should return empty array for champion tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when fewer than 10 teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when no teams have 5+ cycles

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should promote top 10% of eligible teams with ≥25 league points

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when no teams have ≥25 league points

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should exclude teams in excludeTeamIds set

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should return empty array for bronze tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should return empty array when fewer than 10 teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should return empty array when no teams have 5+ cycles

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should demote bottom 10% of eligible teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should exclude teams in excludeTeamIds set

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › promoteTeam › should promote team from bronze to silver

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › promoteTeam › should promote team from silver to gold

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › promoteTeam › should throw error when promoting from champion tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › demoteTeam › should demote team from silver to bronze

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › demoteTeam › should demote team from gold to silver

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › demoteTeam › should throw error when demoting from bronze tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should handle empty league system

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should promote and demote teams across multiple tiers

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip tiers with insufficient teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip teams without 5+ cycles

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › Edge Cases › should handle exactly 10 teams (minimum for rebalancing)

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › Edge Cases › should handle 11 teams (10% rounds down to 1)

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › Edge Cases › should handle teams with same league points (tiebreaker)

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

FAIL tests/eventLogger.test.ts
  ● EventLogger Service › Single Event Logging › should log a single event with correct sequence number

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:38:7)

  ● EventLogger Service › Single Event Logging › should log a single event with correct sequence number

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Single Event Logging › should increment sequence numbers correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:51:7)

  ● EventLogger Service › Single Event Logging › should increment sequence numbers correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Single Event Logging › should store userId and robotId when provided

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:70:7)

  ● EventLogger Service › Single Event Logging › should store userId and robotId when provided

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Single Event Logging › should store metadata when provided

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:94:7)

  ● EventLogger Service › Single Event Logging › should store metadata when provided

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Single Event Logging › should throw error for invalid payload

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Batch Event Logging › should log multiple events in a batch

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEventBatch (src/services/eventLogger.ts:236:30)
      at Object.<anonymous> (tests/eventLogger.test.ts:127:7)

  ● EventLogger Service › Batch Event Logging › should log multiple events in a batch

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Batch Event Logging › should handle empty batch gracefully

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:145:44

      142 
      143 await eventLogger.logEventBatch(testCycleNumber, []);
      144 
    → 145 const events = await prisma.auditLog.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      143 |       await eventLogger.logEventBatch(testCycleNumber, []);
      144 |
    > 145 |       const events = await prisma.auditLog.findMany({
          |                      ^
      146 |         where: { cycleNumber: testCycleNumber },
      147 |       });
      148 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:145:22)

  ● EventLogger Service › Batch Event Logging › should handle empty batch gracefully

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Batch Event Logging › should validate all payloads before inserting

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:164:50

      161 ).rejects.toThrow('Invalid payload');
      162 
      163 // Verify no events were inserted
    → 164 const storedEvents = await prisma.auditLog.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      162 |
      163 |       // Verify no events were inserted
    > 164 |       const storedEvents = await prisma.auditLog.findMany({
          |                            ^
      165 |         where: { cycleNumber: testCycleNumber },
      166 |       });
      167 |       expect(storedEvents).toHaveLength(0);

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:164:28)

  ● EventLogger Service › Batch Event Logging › should validate all payloads before inserting

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Cycle Event Helpers › should log cycle start event

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:175:7)

  ● EventLogger Service › Cycle Event Helpers › should log cycle start event

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Cycle Event Helpers › should log cycle step complete event

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:189:7)

  ● EventLogger Service › Cycle Event Helpers › should log cycle step complete event

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Cycle Event Helpers › should log cycle complete event and clear cache

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:214:7)

  ● EventLogger Service › Cycle Event Helpers › should log cycle complete event and clear cache

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Facility Event Helpers › should log facility purchase

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:235:7)

  ● EventLogger Service › Facility Event Helpers › should log facility purchase

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Facility Event Helpers › should log facility upgrade

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:264:7)

  ● EventLogger Service › Facility Event Helpers › should log facility upgrade

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Economic Event Helpers › should log passive income

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logPassiveIncome (src/services/eventLogger.ts:354:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:295:7)

  ● EventLogger Service › Economic Event Helpers › should log passive income

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Economic Event Helpers › should log operating costs

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logOperatingCosts (src/services/eventLogger.ts:379:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:331:7)

  ● EventLogger Service › Economic Event Helpers › should log operating costs

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Economic Event Helpers › should log credit change

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logCreditChange (src/services/eventLogger.ts:401:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:349:7)

  ● EventLogger Service › Economic Event Helpers › should log credit change

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Economic Event Helpers › should log prestige change

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logPrestigeChange (src/services/eventLogger.ts:424:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:376:7)

  ● EventLogger Service › Economic Event Helpers › should log prestige change

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Weapon Event Helpers › should log weapon purchase

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logWeaponPurchase (src/services/eventLogger.ts:445:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:403:7)

  ● EventLogger Service › Weapon Event Helpers › should log weapon purchase

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Weapon Event Helpers › should log weapon sale

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logWeaponSale (src/services/eventLogger.ts:465:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:421:7)

  ● EventLogger Service › Weapon Event Helpers › should log weapon sale

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Robot Event Helpers › should log attribute upgrade

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logAttributeUpgrade (src/services/eventLogger.ts:488:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:441:7)

  ● EventLogger Service › Robot Event Helpers › should log attribute upgrade

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Sequence Number Management › should maintain separate sequence numbers per cycle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:468:7)

  ● EventLogger Service › Sequence Number Management › should maintain separate sequence numbers per cycle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Sequence Number Management › should resume sequence numbers from database on restart

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:494:29

      491 
      492 it('should resume sequence numbers from database on restart', async () => {
      493   // Simulate existing events in database
    → 494   await prisma.auditLog.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      492 |     it('should resume sequence numbers from database on restart', async () => {
      493 |       // Simulate existing events in database
    > 494 |       await prisma.auditLog.create({
          |       ^
      495 |         data: {
      496 |           cycleNumber: testCycleNumber,
      497 |           eventType: EventType.CYCLE_START,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:494:7)

  ● EventLogger Service › Sequence Number Management › should resume sequence numbers from database on restart

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

FAIL tests/battleOrchestrator.test.ts
  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for equal-rated players

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for equal-rated players

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › calculateELOChange › should give smaller ELO gain when favorite wins

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › calculateELOChange › should give smaller ELO gain when favorite wins

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › calculateELOChange › should give larger ELO gain when underdog wins

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › calculateELOChange › should give larger ELO gain when underdog wins

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for draw

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for draw

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › processBattle › should execute a battle and create records

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › processBattle › should execute a battle and create records

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › processBattle › should handle bye-robot battles correctly

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › processBattle › should handle bye-robot battles correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › processBattle › should increment kills when a robot destroys its opponent

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › processBattle › should increment kills when a robot destroys its opponent

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › executeScheduledBattles › should execute multiple scheduled battles

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › executeScheduledBattles › should execute multiple scheduled battles

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should calculate and award streaming revenue after battle

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should calculate and award streaming revenue after battle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should not award streaming revenue for bye matches

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should not award streaming revenue for bye matches

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should add streaming revenue to audit log

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should add streaming revenue to audit log

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should log streaming revenue to terminal

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should log streaming revenue to terminal

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:79:27

      76 
      77 afterAll(async () => {
      78   // Final cleanup
    → 79   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      77 |   afterAll(async () => {
      78 |     // Final cleanup
    > 79 |     await prisma.auditLog.deleteMany({});
         |     ^
      80 |     await prisma.battleParticipant.deleteMany({});
      81 |     await prisma.battle.deleteMany({});
      82 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:79:5)

FAIL tests/matchmakingService.test.ts
  ● Matchmaking Service › checkBattleReadiness › should mark robot as ready when HP >= 75% and weapon equipped

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP < 75%

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP is at or below yield threshold

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when weapon not equipped

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › checkBattleReadiness › should check dual wield loadout correctly

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmakingForTier › should create matches for available robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmakingForTier › should create bye-match for odd number of robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmakingForTier › should not create duplicate matches for already scheduled robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmakingForTier › should skip robots that are not battle-ready

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmaking (all tiers) › should run matchmaking across all tiers

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

FAIL tests/cycleSummaryStreamingRevenue.property.test.ts
  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should include totalStreamingRevenue property in battle execution summary

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:37

      91 
      92 beforeAll(async () => {
      93   // Create test users
    → 94   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      92 |   beforeAll(async () => {
      93 |     // Create test users
    > 94 |     const user1 = await prisma.user.create({
         |                   ^
      95 |       data: {
      96 |         username: `test_cycle_summary_user1_${Date.now()}`,
      97 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:94:19)

  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should include totalStreamingRevenue property in battle execution summary

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.findUnique()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:49

      114 
      115 afterEach(async () => {
      116   // Get current cycle number for clearing cache
    → 117   const metadata = await prisma.cycleMetadata.findUnique(
    Too many database connections opened: FATAL: sorry, too many clients already

      115 |   afterEach(async () => {
      116 |     // Get current cycle number for clearing cache
    > 117 |     const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });
          |                      ^
      118 |     const cycleNumber = metadata?.totalCycles || 0;
      119 |     clearSequenceCache(cycleNumber);
      120 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:117:22)

  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should show ₡0 streaming revenue when no battles occurred

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:37

      91 
      92 beforeAll(async () => {
      93   // Create test users
    → 94   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      92 |   beforeAll(async () => {
      93 |     // Create test users
    > 94 |     const user1 = await prisma.user.create({
         |                   ^
      95 |       data: {
      96 |         username: `test_cycle_summary_user1_${Date.now()}`,
      97 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:94:19)

  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should show ₡0 streaming revenue when no battles occurred

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.findUnique()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:49

      114 
      115 afterEach(async () => {
      116   // Get current cycle number for clearing cache
    → 117   const metadata = await prisma.cycleMetadata.findUnique(
    Too many database connections opened: FATAL: sorry, too many clients already

      115 |   afterEach(async () => {
      116 |     // Get current cycle number for clearing cache
    > 117 |     const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });
          |                      ^
      118 |     const cycleNumber = metadata?.totalCycles || 0;
      119 |     clearSequenceCache(cycleNumber);
      120 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:117:22)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:167:23

      164 
      165 afterAll(async () => {
      166   // Final cleanup of users
    → 167   await prisma.user.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      165 |   afterAll(async () => {
      166 |     // Final cleanup of users
    > 167 |     await prisma.user.deleteMany({
          |     ^
      168 |       where: {
      169 |         OR: [{ id: testUserId1 }, { id: testUserId2 }],
      170 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:167:5)

FAIL tests/cycleExecutionTiming.test.ts
  ● Cycle Execution Timing › logCycleStart › should log cycle start with manual trigger type

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleStart › should log cycle start with scheduled trigger type

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleStepComplete › should log cycle step completion with duration

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleStepComplete › should log multiple cycle steps in sequence

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleStepComplete › should handle empty summary object

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleComplete › should log cycle completion with total duration

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Complete cycle timing flow › should log complete cycle with start, steps, and complete events

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Complete cycle timing flow › should maintain sequence number ordering within cycle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Step duration recording › should record accurate step durations

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Step duration recording › should sum step durations approximately equal to total cycle duration

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Trigger type recording › should record manual trigger type correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Trigger type recording › should record scheduled trigger type correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

FAIL tests/tagTeamService.test.ts
  ● TagTeamService › validateTeam › should validate a team with two ready robots from same stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should validate a team with two ready robots from same stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should reject robots from different stables

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should reject robots from different stables

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should reject team with unready robot (low HP)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should reject team with unready robot (low HP)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should reject duplicate teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should reject duplicate teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should reject duplicate teams in reverse order

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should reject duplicate teams in reverse order

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should enforce roster limit (max teams = roster size / 2)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should enforce roster limit (max teams = roster size / 2)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › createTeam › should create a valid team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › createTeam › should create a valid team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › createTeam › should place new teams in Bronze league with initial values

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › createTeam › should place new teams in Bronze league with initial values

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › createTeam › should return errors for invalid team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › createTeam › should return errors for invalid team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › createTeam › should reject team creation if user does not own robots

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › createTeam › should reject team creation if user does not own robots

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamById › should retrieve a team by ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamById › should retrieve a team by ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamById › should include robot details in response

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamById › should include robot details in response

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamById › should return null for non-existent team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamById › should return null for non-existent team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamsByStable › should retrieve all teams for a stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamsByStable › should retrieve all teams for a stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamsByStable › should include robot details for all teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamsByStable › should include robot details for all teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamsByStable › should return empty array for stable with no teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamsByStable › should return empty array for stable with no teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › disbandTeam › should disband a team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › disbandTeam › should disband a team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › disbandTeam › should reject disbanding team from wrong stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › disbandTeam › should reject disbanding team from wrong stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › disbandTeam › should return false for non-existent team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › disbandTeam › should return false for non-existent team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › disbandTeam › should make robots available for new teams after disbanding

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › disbandTeam › should make robots available for new teams after disbanding

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:226:26

      223 
      224 afterAll(async () => {
      225   // Clean up test data
    → 226   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      224 |   afterAll(async () => {
      225 |     // Clean up test data
    > 226 |     await prisma.tagTeam.deleteMany({
          |     ^
      227 |       where: {
      228 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      229 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamService.test.ts:226:5)

FAIL tests/tagTeamLeagueStandings.property.test.ts
  ● Tag Team League Standings Property Tests › should maintain independent 1v1 and tag team league standings

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test user
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test user
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_standings_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)

  ● Tag Team League Standings Property Tests › should maintain independent 1v1 and tag team league standings

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26

      55 
      56 afterEach(async () => {
      57   // Clean up teams and robots after each test
    → 58   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up teams and robots after each test
    > 58 |     await prisma.tagTeam.deleteMany({
         |     ^
      59 |       where: { stableId: testUserId },
      60 |     });
      61 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)

  ● Tag Team League Standings Property Tests › should not affect robot 1v1 standings when tag team league changes

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test user
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test user
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_standings_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)

  ● Tag Team League Standings Property Tests › should not affect robot 1v1 standings when tag team league changes

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26

      55 
      56 afterEach(async () => {
      57   // Clean up teams and robots after each test
    → 58   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up teams and robots after each test
    > 58 |     await prisma.tagTeam.deleteMany({
         |     ^
      59 |       where: { stableId: testUserId },
      60 |     });
      61 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)

  ● Tag Team League Standings Property Tests › should allow robots with different 1v1 leagues to be in the same tag team

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test user
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test user
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_standings_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)

  ● Tag Team League Standings Property Tests › should allow robots with different 1v1 leagues to be in the same tag team

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26

      55 
      56 afterEach(async () => {
      57   // Clean up teams and robots after each test
    → 58   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up teams and robots after each test
    > 58 |     await prisma.tagTeam.deleteMany({
         |     ^
      59 |       where: { stableId: testUserId },
      60 |     });
      61 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:41:26

      38 
      39 afterAll(async () => {
      40   // Clean up test data
    → 41   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      39 |   afterAll(async () => {
      40 |     // Clean up test data
    > 41 |     await prisma.tagTeam.deleteMany({
         |     ^
      42 |       where: { stableId: testUserId },
      43 |     });
      44 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:41:5)

FAIL tests/tagTeamDatabaseSchema.test.ts
  ● Tag Team Database Schema Verification › TagTeam Model › should have all required fields

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      11 |     it('should have all required fields', async () => {
      12 |       // Query the information schema to verify table structure
    > 13 |       const columns = await prisma.$queryRaw<any[]>`
         |                       ^
      14 |         SELECT column_name, data_type, is_nullable, column_default
      15 |         FROM information_schema.columns
      16 |         WHERE table_name = 'tag_teams'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:13:23)

  ● Tag Team Database Schema Verification › TagTeam Model › should have all required indexes

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      37 |
      38 |     it('should have all required indexes', async () => {
    > 39 |       const indexes = await prisma.$queryRaw<any[]>`
         |                       ^
      40 |         SELECT indexname, indexdef
      41 |         FROM pg_indexes
      42 |         WHERE tablename = 'tag_teams';

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:39:23)

  ● Tag Team Database Schema Verification › TagTeam Model › should have unique constraint on robot pair

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      56 |     it('should have unique constraint on robot pair', async () => {
      57 |       // The unique constraint is implemented as a unique index
    > 58 |       const indexes = await prisma.$queryRaw<any[]>`
         |                       ^
      59 |         SELECT indexname, indexdef
      60 |         FROM pg_indexes
      61 |         WHERE tablename = 'tag_teams'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:58:23)

  ● Tag Team Database Schema Verification › TagTeam Model › should have check constraint for different robots

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      68 |
      69 |     it('should have check constraint for different robots', async () => {
    > 70 |       const constraints = await prisma.$queryRaw<any[]>`
         |                           ^
      71 |         SELECT conname, contype
      72 |         FROM pg_constraint
      73 |         WHERE conrelid = 'tag_teams'::regclass

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:70:27)

  ● Tag Team Database Schema Verification › TagTeamMatch Model › should have all required fields

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      82 |   describe('TagTeamMatch Model', () => {
      83 |     it('should have all required fields', async () => {
    > 84 |       const columns = await prisma.$queryRaw<any[]>`
         |                       ^
      85 |         SELECT column_name, data_type, is_nullable, column_default
      86 |         FROM information_schema.columns
      87 |         WHERE table_name = 'tag_team_matches'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:84:23)

  ● Tag Team Database Schema Verification › TagTeamMatch Model › should have all required indexes

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      103 |
      104 |     it('should have all required indexes', async () => {
    > 105 |       const indexes = await prisma.$queryRaw<any[]>`
          |                       ^
      106 |         SELECT indexname, indexdef
      107 |         FROM pg_indexes
      108 |         WHERE tablename = 'tag_team_matches';

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:105:23)

  ● Tag Team Database Schema Verification › Battle Model Extensions › should have tag team fields

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   describe('Battle Model Extensions', () => {
      123 |     it('should have tag team fields', async () => {
    > 124 |       const columns = await prisma.$queryRaw<any[]>`
          |                       ^
      125 |         SELECT column_name, data_type, is_nullable
      126 |         FROM information_schema.columns
      127 |         WHERE table_name = 'battles'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:124:23)

  ● Tag Team Database Schema Verification › Battle Model Extensions › should have battle_type index

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      150 |
      151 |     it('should have battle_type index', async () => {
    > 152 |       const indexes = await prisma.$queryRaw<any[]>`
          |                       ^
      153 |         SELECT indexname, indexdef
      154 |         FROM pg_indexes
      155 |         WHERE tablename = 'battles'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:152:23)

  ● Tag Team Database Schema Verification › Robot Model Extensions › should have tag team statistics fields

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      163 |   describe('Robot Model Extensions', () => {
      164 |     it('should have tag team statistics fields', async () => {
    > 165 |       const columns = await prisma.$queryRaw<any[]>`
          |                       ^
      166 |         SELECT column_name, data_type, is_nullable, column_default
      167 |         FROM information_schema.columns
      168 |         WHERE table_name = 'robots'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:165:23)

  ● Tag Team Database Schema Verification › Foreign Key Constraints › should have all TagTeam foreign keys

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      196 |   describe('Foreign Key Constraints', () => {
      197 |     it('should have all TagTeam foreign keys', async () => {
    > 198 |       const foreignKeys = await prisma.$queryRaw<any[]>`
          |                           ^
      199 |         SELECT
      200 |           tc.constraint_name,
      201 |           kcu.column_name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:198:27)

  ● Tag Team Database Schema Verification › Foreign Key Constraints › should have all TagTeamMatch foreign keys

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      219 |
      220 |     it('should have all TagTeamMatch foreign keys', async () => {
    > 221 |       const foreignKeys = await prisma.$queryRaw<any[]>`
          |                           ^
      222 |         SELECT
      223 |           tc.constraint_name,
      224 |           kcu.column_name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:221:27)

FAIL tests/tagTeamLeagueRebalancing.property.test.ts
  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › promotion resets league points and cycles to 0

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › demotion resets league points and cycles to 0

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › tier change resets work across all valid tier transitions

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › reset applies regardless of initial values magnitude

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › reset applies even when initial values are already 0

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

FAIL tests/integration/tagTeamLeagueRebalancing.test.ts
  ● Tag Team League Rebalancing Integration Test › should promote top 10% and demote bottom 10% with varying league points

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |
      27 |     // Get a weapon for robots
      28 |     const weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)

  ● Tag Team League Rebalancing Integration Test › should not promote/demote teams with < 5 cycles in tier

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |
      27 |     // Get a weapon for robots
      28 |     const weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)

  ● Tag Team League Rebalancing Integration Test › should handle demotion from silver to bronze

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |
      27 |     // Get a weapon for robots
      28 |     const weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)

  ● Tag Team League Rebalancing Integration Test › should handle minimum team count for rebalancing (< 10 teams)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |
      27 |     // Get a weapon for robots
      28 |     const weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamLeagueRebalancing.test.ts:88:26

      85 
      86 afterAll(async () => {
      87   // Clean up in correct dependency order
    → 88   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      86 |   afterAll(async () => {
      87 |     // Clean up in correct dependency order
    > 88 |     await prisma.tagTeam.deleteMany({
         |     ^
      89 |       where: {
      90 |         id: { in: testTeams.map(t => t.id) },
      91 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:88:5)

FAIL tests/twoRobotTagTeamGeneration.test.ts
  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      11 | describe('Two-Robot Specialist Tag Team Generation', () => {
      12 |   beforeAll(async () => {
    > 13 |     await prisma.$connect();
         |     ^
      14 |     
      15 |     // Ensure weapons exist
      16 |     const practiceSword = await prisma.weapon.findFirst({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)

  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)

    PrismaClientInitializationError: 
    Invalid `prisma.user.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46

      24 
      25 afterEach(async () => {
      26   // Clean up archetype users and their data after each test
    → 27   const archetypeUsers = await prisma.user.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      25 |   afterEach(async () => {
      26 |     // Clean up archetype users and their data after each test
    > 27 |     const archetypeUsers = await prisma.user.findMany({
         |                            ^
      28 |       where: { username: { startsWith: 'archetype_' } },
      29 |       select: { id: true },
      30 |     });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)

  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      11 | describe('Two-Robot Specialist Tag Team Generation', () => {
      12 |   beforeAll(async () => {
    > 13 |     await prisma.$connect();
         |     ^
      14 |     
      15 |     // Ensure weapons exist
      16 |     const practiceSword = await prisma.weapon.findFirst({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)

  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)

    PrismaClientInitializationError: 
    Invalid `prisma.user.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46

      24 
      25 afterEach(async () => {
      26   // Clean up archetype users and their data after each test
    → 27   const archetypeUsers = await prisma.user.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      25 |   afterEach(async () => {
      26 |     // Clean up archetype users and their data after each test
    > 27 |     const archetypeUsers = await prisma.user.findMany({
         |                            ^
      28 |       where: { username: { startsWith: 'archetype_' } },
      29 |       select: { id: true },
      30 |     });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)

  ● Two-Robot Specialist Tag Team Generation › should not create tag teams for single-robot archetypes

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      11 | describe('Two-Robot Specialist Tag Team Generation', () => {
      12 |   beforeAll(async () => {
    > 13 |     await prisma.$connect();
         |     ^
      14 |     
      15 |     // Ensure weapons exist
      16 |     const practiceSword = await prisma.weapon.findFirst({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)

  ● Two-Robot Specialist Tag Team Generation › should not create tag teams for single-robot archetypes

    PrismaClientInitializationError: 
    Invalid `prisma.user.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46

      24 
      25 afterEach(async () => {
      26   // Clean up archetype users and their data after each test
    → 27   const archetypeUsers = await prisma.user.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      25 |   afterEach(async () => {
      26 |     // Clean up archetype users and their data after each test
    > 27 |     const archetypeUsers = await prisma.user.findMany({
         |                            ^
      28 |       where: { username: { startsWith: 'archetype_' } },
      29 |       select: { id: true },
      30 |     });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)

  ● Two-Robot Specialist Tag Team Generation › should create tag teams with correct robot assignments

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      11 | describe('Two-Robot Specialist Tag Team Generation', () => {
      12 |   beforeAll(async () => {
    > 13 |     await prisma.$connect();
         |     ^
      14 |     
      15 |     // Ensure weapons exist
      16 |     const practiceSword = await prisma.weapon.findFirst({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)

  ● Two-Robot Specialist Tag Team Generation › should create tag teams with correct robot assignments

    PrismaClientInitializationError: 
    Invalid `prisma.user.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46

      24 
      25 afterEach(async () => {
      26   // Clean up archetype users and their data after each test
    → 27   const archetypeUsers = await prisma.user.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      25 |   afterEach(async () => {
      26 |     // Clean up archetype users and their data after each test
    > 27 |     const archetypeUsers = await prisma.user.findMany({
         |                            ^
      28 |       where: { username: { startsWith: 'archetype_' } },
      29 |       select: { id: true },
      30 |     });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)

FAIL tests/integration/tagTeamAutoRepair.test.ts
  ● Tag Team Auto-Repair Integration Test › should auto-repair damaged robots before battle and deduct costs

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Get a weapon for robots
      30 |     weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:27:5)

  ● Tag Team Auto-Repair Integration Test › should allow users to go into negative currency for repairs

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Get a weapon for robots
      30 |     weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:27:5)

FAIL tests/tagTeamStreamingRevenue.test.ts
  ● Tag Team Streaming Revenue Integration › should calculate and award streaming revenue for Tag Team battles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |
      31 |     // Get a weapon for robots
      32 |     weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamStreamingRevenue.test.ts:29:5)

  ● Tag Team Streaming Revenue Integration › should calculate and award streaming revenue for Tag Team battles

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeamMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamStreamingRevenue.test.ts:119:31

      116 
      117 afterEach(async () => {
      118   // Clean up test data between tests (keep users and weapons from beforeAll)
    → 119   await prisma.tagTeamMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      117 |   afterEach(async () => {
      118 |     // Clean up test data between tests (keep users and weapons from beforeAll)
    > 119 |     await prisma.tagTeamMatch.deleteMany({});
          |     ^
      120 |     await prisma.battleParticipant.deleteMany({});
      121 |     await prisma.battle.deleteMany({});
      122 |     await prisma.tagTeam.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamStreamingRevenue.test.ts:119:5)

FAIL tests/integration/tagTeamMultiMatchCycle.test.ts
  ● Tag Team Multi-Match Cycle Integration Test › should handle robot in both 1v1 and tag team match with cumulative damage

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)
      30 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)

  ● Tag Team Multi-Match Cycle Integration Test › should exclude unready robots from tag team match after 1v1 damage

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)
      30 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)

  ● Tag Team Multi-Match Cycle Integration Test › should process matches in correct order: 1v1 first, then tag team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)
      30 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)

FAIL tests/prestigeGates.test.ts
  ● Prestige Gates › Facility Config Prestige Requirements › Income Generator has correct prestige requirements

    expect(received).toBeDefined()

    Received: undefined

      89 |     test('Income Generator has correct prestige requirements', () => {
      90 |       const config = getFacilityConfig('income_generator');
    > 91 |       expect(config).toBeDefined();
         |                      ^
      92 |       expect(config?.prestigeRequirements).toEqual([0, 0, 0, 3000, 0, 0, 7500, 0, 15000, 0]);
      93 |     });
      94 |

      at Object.<anonymous> (tests/prestigeGates.test.ts:91:22)

PASS tests/combatMessageGenerator.test.ts
FAIL tests/cycleCsvStreamingRevenue.property.test.ts
  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming_revenue column in CSV export

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37

      92 
      93 beforeAll(async () => {
      94   // Create test users
    → 95   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      93 |   beforeAll(async () => {
      94 |     // Create test users
    > 95 |     const user1 = await prisma.user.create({
         |                   ^
      96 |       data: {
      97 |         username: `test_csv_user1_${Date.now()}`,
      98 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming_revenue column in CSV export

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27

      129 
      130 // Cleanup - delete in correct order to avoid foreign key constraints
      131 // Clean up audit log entries for this test cycle
    → 132 await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      130 |     // Cleanup - delete in correct order to avoid foreign key constraints
      131 |     // Clean up audit log entries for this test cycle
    > 132 |     await prisma.auditLog.deleteMany({
          |     ^
      133 |       where: {
      134 |         cycleNumber: {
      135 |           gte: testCycleNumber,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should show ₡0 for bye matches in CSV

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37

      92 
      93 beforeAll(async () => {
      94   // Create test users
    → 95   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      93 |   beforeAll(async () => {
      94 |     // Create test users
    > 95 |     const user1 = await prisma.user.create({
         |                   ^
      96 |       data: {
      97 |         username: `test_csv_user1_${Date.now()}`,
      98 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should show ₡0 for bye matches in CSV

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27

      129 
      130 // Cleanup - delete in correct order to avoid foreign key constraints
      131 // Clean up audit log entries for this test cycle
    → 132 await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      130 |     // Cleanup - delete in correct order to avoid foreign key constraints
      131 |     // Clean up audit log entries for this test cycle
    > 132 |     await prisma.auditLog.deleteMany({
          |     ^
      133 |       where: {
      134 |         cycleNumber: {
      135 |           gte: testCycleNumber,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming revenue for both winner and loser

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37

      92 
      93 beforeAll(async () => {
      94   // Create test users
    → 95   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      93 |   beforeAll(async () => {
      94 |     // Create test users
    > 95 |     const user1 = await prisma.user.create({
         |                   ^
      96 |       data: {
      97 |         username: `test_csv_user1_${Date.now()}`,
      98 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming revenue for both winner and loser

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27

      129 
      130 // Cleanup - delete in correct order to avoid foreign key constraints
      131 // Clean up audit log entries for this test cycle
    → 132 await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      130 |     // Cleanup - delete in correct order to avoid foreign key constraints
      131 |     // Clean up audit log entries for this test cycle
    > 132 |     await prisma.auditLog.deleteMany({
          |     ^
      133 |       where: {
      134 |         cycleNumber: {
      135 |           gte: testCycleNumber,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:185:23

      182 
      183 afterAll(async () => {
      184   // Final cleanup of users
    → 185   await prisma.user.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      183 |   afterAll(async () => {
      184 |     // Final cleanup of users
    > 185 |     await prisma.user.deleteMany({
          |     ^
      186 |       where: {
      187 |         OR: [{ id: testUserId1 }, { id: testUserId2 }],
      188 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:185:5)

FAIL tests/streamingStudioPrestigeValidation.test.ts
  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 1 with 0 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 2 with 0 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 3 with 0 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should block upgrade to Level 4 with insufficient prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should allow upgrade to Level 4 with exactly 1,000 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should allow upgrade to Level 4 with more than 1,000 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 5: Requires 2,500 prestige › should block upgrade to Level 5 with insufficient prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 5: Requires 2,500 prestige › should allow upgrade to Level 5 with sufficient prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 5,000 prestige for Level 6

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 10,000 prestige for Level 7

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 15,000 prestige for Level 8

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 25,000 prestige for Level 9

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 50,000 prestige for Level 10

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should allow upgrade to Level 10 with 50,000 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Error message format › should display error message with required prestige amount

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

FAIL tests/tagTeamLeagueInstanceService.test.ts
  ● TagTeamLeagueInstanceService › getInstancesForTier › should return empty array when no teams exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getInstancesForTier › should return instances with correct team counts

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getInstancesForTier › should sort instances by instance number

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should create first instance when none exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should assign to instance with most free spots

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should create new instance when all are full

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should not rebalance when instances are balanced

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should rebalance when deviation exceeds threshold

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getTeamsInInstance › should return teams sorted by league points

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › moveTeamToInstance › should move team to appropriate instance in new tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should return empty array when no teams exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should sort teams by league points descending

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should use combined ELO as tiebreaker when league points are equal

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should include robot details in standings

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForTier › should return empty array when no teams exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForTier › should include teams from all instances in the tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForTier › should sort by league points then ELO across all instances

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

FAIL tests/profileUpdate.test.ts
  ● Profile Update Endpoint › PUT /api/user/profile › should update stable name successfully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should update profile visibility successfully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should update notification preferences successfully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should update theme preference successfully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should update multiple fields at once

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should change password successfully with correct current password

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject password change with incorrect current password

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject password change without current password

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name that is too short

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name that is too long

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name with invalid characters

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name with profanity

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject duplicate stable name

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (too short)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no uppercase)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no lowercase)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no number)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject invalid profile visibility value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject invalid theme preference value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject request without authentication token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject request with invalid authentication token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should preserve unchanged fields when updating partial data

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should return all profile fields in response

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should have default visibility set to public for new users

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should return 400 with validation errors for multiple invalid fields

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

FAIL tests/auth.test.ts
  ● Authentication Endpoints › POST /api/auth/login › should successfully login with valid credentials

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › POST /api/auth/login › should return 401 for invalid credentials

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › POST /api/auth/login › should return 400 for missing credentials

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › GET /api/user/profile › should return user profile with correct data structure

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › GET /api/user/profile › should return 401 without authentication token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › GET /api/user/profile › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › Test User Compatibility › should verify test user can login and access profile

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

FAIL tests/facilityRecommendationService.test.ts
  ● FacilityRecommendationService › generateRecommendations › should recommend facilities with positive ROI

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should recommend repair bay for user with high repair costs

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should rank recommendations by projected ROI

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should not recommend facilities above user prestige level

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should not recommend facilities at max level

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should recommend roster expansion when user is at capacity

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should calculate total recommended investment

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

FAIL tests/facilityAdvisorStreamingStudio.test.ts
  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with positive ROI when user has battle history

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Clean up cycle snapshots from previous tests
    → 14 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Clean up cycle snapshots from previous tests
    > 14 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      15 |     
      16 |     // Ensure cycle metadata exists
      17 |     await prisma.cycleMetadata.upsert({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)

  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with positive ROI when user has battle history

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32

      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});
      35 }
      36 // Clean up cycle snapshots
    → 37 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      35 |     }
      36 |     // Clean up cycle snapshots
    > 37 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      38 |   });
      39 |
      40 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)

  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with strategic value when user has no battle history

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Clean up cycle snapshots from previous tests
    → 14 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Clean up cycle snapshots from previous tests
    > 14 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      15 |     
      16 |     // Ensure cycle metadata exists
      17 |     await prisma.cycleMetadata.upsert({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)

  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with strategic value when user has no battle history

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32

      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});
      35 }
      36 // Clean up cycle snapshots
    → 37 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      35 |     }
      36 |     // Clean up cycle snapshots
    > 37 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      38 |   });
      39 |
      40 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)

  ● Facility Advisor - Streaming Studio › should calculate correct ROI for Streaming Studio upgrade from level 1 to 2

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Clean up cycle snapshots from previous tests
    → 14 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Clean up cycle snapshots from previous tests
    > 14 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      15 |     
      16 |     // Ensure cycle metadata exists
      17 |     await prisma.cycleMetadata.upsert({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)

  ● Facility Advisor - Streaming Studio › should calculate correct ROI for Streaming Studio upgrade from level 1 to 2

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32

      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});
      35 }
      36 // Clean up cycle snapshots
    → 37 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      35 |     }
      36 |     // Clean up cycle snapshots
    > 37 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      38 |   });
      39 |
      40 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)

  ● Facility Advisor - Streaming Studio › should not recommend Streaming Studio when battle frequency is too low

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Clean up cycle snapshots from previous tests
    → 14 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Clean up cycle snapshots from previous tests
    > 14 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      15 |     
      16 |     // Ensure cycle metadata exists
      17 |     await prisma.cycleMetadata.upsert({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)

  ● Facility Advisor - Streaming Studio › should not recommend Streaming Studio when battle frequency is too low

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32

      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});
      35 }
      36 // Clean up cycle snapshots
    → 37 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      35 |     }
      36 |     // Clean up cycle snapshots
    > 37 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      38 |   });
      39 |
      40 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)

FAIL tests/adminRobotStats.test.ts
  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should require authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should require admin role

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should return comprehensive robot statistics

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include summary statistics

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should calculate attribute statistics correctly

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should detect outliers correctly

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should provide statistics by league tier

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include top and bottom performers

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include win rate analysis

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

FAIL tests/leagues.test.ts
  ● Leagues Routes › GET /api/leagues/:tier/standings › should get bronze league standings

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should get silver league standings

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should return 400 for invalid tier

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/instances › should get bronze league instances

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/instances › should return 400 for invalid tier

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

FAIL tests/records.test.ts
  ● Records Routes › GET /api/records › should get all hall of records statistics

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have combat records section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have career records section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have economic records section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have prestige records section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have upsets section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should handle empty database gracefully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should return records with proper structure

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should return up to 10 records per category

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

FAIL tests/dataIntegrityService.test.ts
  ● DataIntegrityService › validateCycleIntegrity › should pass validation for a complete, valid cycle

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › validateCycleIntegrity › should detect missing cycle_start event

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › validateCycleIntegrity › should detect missing cycle_complete event

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › validateCycleIntegrity › should detect incomplete cycle steps

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkSequenceNumbers › should detect sequence number gaps

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkSequenceNumbers › should pass with continuous sequence numbers

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkCreditConsistency › should detect credit sum mismatch

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkCreditConsistency › should pass with matching credit sums

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkCreditConsistency › should allow 1 credit tolerance for rounding

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › validateCycleRange › should validate multiple cycles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › getIntegritySummary › should provide summary of integrity issues

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

FAIL tests/facility.test.ts
  ● Facility Routes › GET /api/facility › should get user facilities with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › GET /api/facility › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › GET /api/facility › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 400 without facility type

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 400 with invalid facility type

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should handle upgrade attempt when at max level

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

FAIL tests/validation.test.ts
  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return false when stable name is already taken by another user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      135 |
      136 |     beforeAll(async () => {
    > 137 |       await prisma.$connect();
          |       ^
      138 |     });
      139 |
      140 |     afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/validation.test.ts:137:7)

  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return true when stable name is not taken

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      135 |
      136 |     beforeAll(async () => {
    > 137 |       await prisma.$connect();
          |       ^
      138 |     });
      139 |
      140 |     afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/validation.test.ts:137:7)

  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return true when stable name is owned by the current user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      135 |
      136 |     beforeAll(async () => {
    > 137 |       await prisma.$connect();
          |       ^
      138 |     });
      139 |
      140 |     afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/validation.test.ts:137:7)

  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should be case-sensitive for uniqueness

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      135 |
      136 |     beforeAll(async () => {
    > 137 |       await prisma.$connect();
          |       ^
      138 |     });
      139 |
      140 |     afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/validation.test.ts:137:7)

FAIL tests/stanceAndYieldAPI.test.ts
  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should update robot stance to offensive

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should update robot stance to defensive

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should handle case-insensitive stance input

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject invalid stance value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject missing stance value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject non-string stance value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 404 for non-existent robot

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 403 for unauthorized user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should update yield threshold to 25

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should accept 0% yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should accept 50% yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should handle decimal yield threshold by rounding

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject yield threshold above 50

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject negative yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject non-numeric yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject missing yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 404 for non-existent robot

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 403 for unauthorized user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

FAIL tests/financialReportStreamingRevenue.test.ts
  ● Financial Report - Streaming Revenue Integration › should include streaming revenue in financial report

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)

  ● Financial Report - Streaming Revenue Integration › should include streaming revenue in financial report

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27

      22 
      23 afterEach(async () => {
      24   // Clean up test data between tests
    → 25   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   afterEach(async () => {
      24 |     // Clean up test data between tests
    > 25 |     await prisma.auditLog.deleteMany({});
         |     ^
      26 |     await prisma.battleParticipant.deleteMany({});
      27 |     await prisma.battle.deleteMany({});
      28 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)

  ● Financial Report - Streaming Revenue Integration › should show zero streaming revenue when no battles occurred

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)

  ● Financial Report - Streaming Revenue Integration › should show zero streaming revenue when no battles occurred

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27

      22 
      23 afterEach(async () => {
      24   // Clean up test data between tests
    → 25   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   afterEach(async () => {
      24 |     // Clean up test data between tests
    > 25 |     await prisma.auditLog.deleteMany({});
         |     ^
      26 |     await prisma.battleParticipant.deleteMany({});
      27 |     await prisma.battle.deleteMany({});
      28 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)

  ● Financial Report - Streaming Revenue Integration › should only count streaming revenue from user's own robots

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)

  ● Financial Report - Streaming Revenue Integration › should only count streaming revenue from user's own robots

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27

      22 
      23 afterEach(async () => {
      24   // Clean up test data between tests
    → 25   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   afterEach(async () => {
      24 |     // Clean up test data between tests
    > 25 |     await prisma.auditLog.deleteMany({});
         |     ^
      26 |     await prisma.battleParticipant.deleteMany({});
      27 |     await prisma.battle.deleteMany({});
      28 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:42:27

      39 
      40 afterAll(async () => {
      41   // Final cleanup
    → 42   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      40 |   afterAll(async () => {
      41 |     // Final cleanup
    > 42 |     await prisma.auditLog.deleteMany({});
         |     ^
      43 |     await prisma.battleParticipant.deleteMany({});
      44 |     await prisma.battle.deleteMany({});
      45 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:42:5)

FAIL tests/matches.test.ts
  ● Matches Routes › GET /api/matches/upcoming › should get upcoming matches with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/upcoming › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/upcoming › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/history › should get match history with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/history › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/history › should filter by robot ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/history › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/battles/:id/log › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/battles/:id/log › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/battles/:id/log › should handle non-existent battle ID with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

FAIL tests/repairCostMultiRobot.property.test.ts


  ● Test suite failed to run

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)

FAIL tests/weaponInventory.test.ts
  ● Weapon Inventory Routes › GET /api/weapon-inventory › should get user weapon inventory with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 400 without weapon ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 400 with invalid weapon ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 404 with non-existent weapon ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/storage-status › should get storage status with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/storage-status › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/:id/available › should return 404 for non-existent inventory item

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/:id/available › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)


  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -882487908, path: "0:0", endOnFailure: true }
    Counterexample: [1]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

FAIL tests/weapons.test.ts
  ● Weapons Routes › GET /api/weapons › should get all weapons with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weapons.test.ts:26:5)

  ● Weapons Routes › GET /api/weapons › should return weapons sorted by cost

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weapons.test.ts:26:5)

  ● Weapons Routes › GET /api/weapons › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weapons.test.ts:26:5)

  ● Weapons Routes › GET /api/weapons › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weapons.test.ts:26:5)


  ● Test suite failed to run

    Property failed after 1 tests
    { seed: 2143101905, path: "0:0:0", endOnFailure: true }
    Counterexample: [[0]]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -1483965401, path: "0:0:0", endOnFailure: true }
    Counterexample: [1,1]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -1623532011, path: "0:0:0", endOnFailure: true }
    Counterexample: [1,1]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

FAIL tests/cycleSnapshotService.test.ts
  ● CycleSnapshotService › should create a cycle snapshot with cycle start and complete events

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should retrieve a snapshot by cycle number

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should return null for non-existent snapshot

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should retrieve snapshots for a range of cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should throw error if cycle is incomplete (missing start event)

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should throw error if cycle is incomplete (missing complete event)

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should aggregate step durations from cycle step events

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)


  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -1735502105, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,1,1000,50,10]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -1508093986, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,1000,50,10]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:28:32

      25 
      26 afterAll(async () => {
      27   // Clean up test data
    → 28   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      26 |   afterAll(async () => {
      27 |     // Clean up test data
    > 28 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      29 |       where: { cycleNumber: testCycleNumber },
      30 |     });
      31 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:28:5)

FAIL tests/leaderboards.test.ts
  ● Leaderboards Routes › GET /api/leaderboards/fame › should get fame leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by league

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by minimum battles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/losses › should get losses leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/losses › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/prestige › should get prestige leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/prestige › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

PASS tests/tagTeamBattleOrchestrator.property.test.ts
PASS tests/validation.property.test.ts
FAIL tests/facilityTransactionLogging.test.ts
  ● Facility Transaction Logging › should log facility_purchase event when purchasing a new facility

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should log facility_purchase event when purchasing a new facility

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

  ● Facility Transaction Logging › should log facility_upgrade event when upgrading an existing facility

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should log facility_upgrade event when upgrading an existing facility

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

  ● Facility Transaction Logging › should include all required fields in the event payload

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should include all required fields in the event payload

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

  ● Facility Transaction Logging › should log events with correct cycle number

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should log events with correct cycle number

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

  ● Facility Transaction Logging › should distinguish between purchase and upgrade events

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should distinguish between purchase and upgrade events

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

FAIL tests/eventLogger.integration.test.ts
  ● EventLogger Integration › should successfully log events to the database

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:27

      12 
      13 beforeEach(async () => {
      14   // Clean up audit logs before each test
    → 15   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      13 |   beforeEach(async () => {
      14 |     // Clean up audit logs before each test
    > 15 |     await prisma.auditLog.deleteMany({});
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.integration.test.ts:15:5)

  ● EventLogger Integration › should handle batch logging efficiently

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:27

      12 
      13 beforeEach(async () => {
      14   // Clean up audit logs before each test
    → 15   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      13 |   beforeEach(async () => {
      14 |     // Clean up audit logs before each test
    > 15 |     await prisma.auditLog.deleteMany({});
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.integration.test.ts:15:5)

PASS tests/streamingStudioUpgradeCosts.property.test.ts
PASS tests/streamingStudioOperatingCost.property.test.ts
PASS tests/economyCalculations.test.ts
PASS tests/weaponValidation.test.ts
PASS tests/storageCalculations.test.ts
PASS tests/repairCostMultiRobot.test.ts
PASS tests/damageDampeners.test.ts
FAIL tests/integration/tagTeamCompleteCycle.test.ts
  ● Test suite failed to run

    [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m300[0m:[93m25[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?

    [7m300[0m         robot1Id: { in: testRobots.map(r => r.id) },
    [7m   [0m [91m                        ~~~~~~~~~~[0m

      [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m25[0m:[93m7[0m
        [7m25[0m   let testRobotIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~~[0m
        'testRobotIds' is declared here.
    [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m300[0m:[93m40[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m300[0m         robot1Id: { in: testRobots.map(r => r.id) },
    [7m   [0m [91m                                       ~[0m

FAIL tests/integration/tagTeamByeHandling.test.ts
  ● Test suite failed to run

    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m245[0m:[93m27[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?

    [7m245[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);
    [7m   [0m [91m                          ~~~~~~~~~~[0m

      [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m24[0m:[93m7[0m
        [7m24[0m   let testRobotIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~~[0m
        'testRobotIds' is declared here.
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m245[0m:[93m43[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m245[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);
    [7m   [0m [91m                                          ~[0m
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m257[0m:[93m26[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testUsers'. Did you mean 'testUserIds'?

    [7m257[0m     const originalUser = testUsers.find(u => u.id === user!.id);
    [7m   [0m [91m                         ~~~~~~~~~[0m

      [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m23[0m:[93m7[0m
        [7m23[0m   let testUserIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~[0m
        'testUserIds' is declared here.
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m257[0m:[93m41[0m - [91merror[0m[90m TS7006: [0mParameter 'u' implicitly has an 'any' type.

    [7m257[0m     const originalUser = testUsers.find(u => u.id === user!.id);
    [7m   [0m [91m                                        ~[0m

FAIL tests/integration/repairCostConsistency.test.ts
  ● Test suite failed to run

    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m40[0m:[93m18[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'robot' does not exist in type 'WeaponInventoryWhereInput'.

    [7m40[0m         where: { robot: { id: { in: testRobotIds } } },
    [7m  [0m [91m                 ~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m148[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m148[0m           loadoutType: 'single',
    [7m   [0m [91m                       ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'mainWeaponId'.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m25[0m - [91merror[0m[90m TS2304: [0mCannot find name 'weaponInv'.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m                        ~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'currentLeague'.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m                         ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'leagueId'.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m          ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m21[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m                    ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'leaguePoints'.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m25[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'cyclesInCurrentLeague'.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m34[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m                                 ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'combatPower'.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'targetingSystems'.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'criticalSystems'.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'penetration'.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'weaponControl'.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'attackSpeed'.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'armorPlating'.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m25[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m                        ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'shieldCapacity'.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'evasionThrusters'.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'damageDampeners'.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'counterProtocols'.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'hullIntegrity'.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'servoMotors'.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'gyroStabilizers'.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'hydraulicSystems'.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'powerCore'.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m          ~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m22[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m                     ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'combatAlgorithms'.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'threatAnalysis'.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'adaptiveAI'.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m          ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m23[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m                      ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'logicCores'.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m          ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m23[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m                      ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'syncProtocols'.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'supportSystems'.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'formationTactics'.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m180[0m:[93m7[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m180[0m       testRobots.push(robot);
    [7m   [0m [91m      ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m180[0m:[93m23[0m - [91merror[0m[90m TS2448: [0mBlock-scoped variable 'robot' used before its declaration.

    [7m180[0m       testRobots.push(robot);
    [7m   [0m [91m                      ~~~~~[0m

      [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m11[0m
        [7m212[0m     const robot = testRobots[0];
        [7m   [0m [96m          ~~~~~[0m
        'robot' is declared here.
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m181[0m:[93m7[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobotIds'.

    [7m181[0m       testRobotIds.push(robot.id);
    [7m   [0m [91m      ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m181[0m:[93m25[0m - [91merror[0m[90m TS2448: [0mBlock-scoped variable 'robot' used before its declaration.

    [7m181[0m       testRobotIds.push(robot.id);
    [7m   [0m [91m                        ~~~~~[0m

      [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m11[0m
        [7m212[0m     const robot = testRobots[0];
        [7m   [0m [96m          ~~~~~[0m
        'robot' is declared here.
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m187[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m187[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m194[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m194[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m202[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m202[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m212[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m254[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m254[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m261[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m261[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m269[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m269[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m275[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m275[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m321[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m321[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m328[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m328[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m336[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m336[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m342[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m342[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m384[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m384[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m389[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m389[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m441[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m441[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m480[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m480[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m496[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m496[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m529[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m529[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m535[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m535[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m542[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m542[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m549[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m549[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m608[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m608[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m614[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m614[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m621[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m621[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m628[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m628[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m685[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m685[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m691[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m691[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m698[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m698[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m706[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m706[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m772[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m772[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m778[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m778[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m785[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m785[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m792[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m792[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m836[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m836[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m842[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m842[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m19[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m                  ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m32[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m                               ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m20[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m                   ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m21[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m                    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m21[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m                    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m178[0m:[93m9[0m - [91merror[0m[90m TS1109: [0mExpression expected.

    [7m178[0m         },
    [7m   [0m [91m        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m179[0m:[93m7[0m - [91merror[0m[90m TS1135: [0mArgument expression expected.

    [7m179[0m       });
    [7m   [0m [91m      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m182[0m:[93m5[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m182[0m     }
    [7m   [0m [91m    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m248[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m248[0m   });
    [7m   [0m [91m  ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m248[0m:[93m4[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m248[0m   });
    [7m   [0m [91m   ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m894[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m894[0m });
    [7m   [0m [91m~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m894[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m894[0m });
    [7m   [0m [91m ~[0m

FAIL tests/userGeneration.test.ts
  ● Test suite failed to run

    [96mtests/userGeneration.test.ts[0m:[93m148[0m:[93m56[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m148[0m       const result = await generateBattleReadyUsers(5, cycleNumber);
    [7m   [0m [91m                                                       ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m166[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m166[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m181[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m181[0m       await generateBattleReadyUsers(1, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m208[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m208[0m       await generateBattleReadyUsers(2, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m229[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m229[0m       await generateBattleReadyUsers(1, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m247[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m247[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m263[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m263[0m       await generateBattleReadyUsers(5, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m301[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m301[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m327[0m:[93m56[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m327[0m       const result = await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                                       ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m351[0m:[93m5[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m351[0m     });
    [7m   [0m [91m    ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m421[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m421[0m   });
    [7m   [0m [91m  ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m421[0m:[93m4[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m421[0m   });
    [7m   [0m [91m   ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m422[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m422[0m });
    [7m   [0m [91m~[0m
    [96mtests/userGeneration.test.ts[0m:[93m422[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m422[0m });
    [7m   [0m [91m ~[0m

FAIL tests/trendAnalysis.property.test.ts
  ● Test suite failed to run

    [96mtests/trendAnalysis.property.test.ts[0m:[93m12[0m:[93m38[0m - [91merror[0m[90m TS2307: [0mCannot find module '../src/services/trendAnalysisService' or its corresponding type declarations.

    [7m12[0m import { trendAnalysisService } from '../src/services/trendAnalysisService';
    [7m  [0m [91m                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                          ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m85[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m88[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                       ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m203[0m:[93m53[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m203[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);
    [7m   [0m [91m                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m260[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m260[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                          ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m85[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m88[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                       ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m329[0m:[93m53[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m329[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);
    [7m   [0m [91m                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m419[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m419[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber);
    [7m   [0m [91m                                                          ~[0m

FAIL tests/tagTeamModelIntegration.test.ts
  ● Test suite failed to run

    [96mtests/tagTeamModelIntegration.test.ts[0m:[93m307[0m:[93m14[0m - [91merror[0m[90m TS18047: [0m'match.team2' is possibly 'null'.

    [7m307[0m       expect(match?.team2.activeRobot.id).toBe(testRobot3Id);
    [7m   [0m [91m             ~~~~~~~~~~~~[0m
    [96mtests/tagTeamModelIntegration.test.ts[0m:[93m308[0m:[93m14[0m - [91merror[0m[90m TS18047: [0m'match.team2' is possibly 'null'.

    [7m308[0m       expect(match?.team2.reserveRobot.id).toBe(testRobot4Id);
    [7m   [0m [91m             ~~~~~~~~~~~~[0m

FAIL tests/tagTeamBattleLogCompleteness.property.test.ts
  ● Test suite failed to run

    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m65[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m65[0m           { userId: testUserId1 },
    [7m  [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m66[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m66[0m           { userId: testUserId2 },
    [7m  [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m125[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m125[0m           { userId: testUserId1 },
    [7m   [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m125[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m125[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m126[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m126[0m           { userId: testUserId2 },
    [7m   [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m126[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m126[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m133[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m133[0m           { team1: { stableId: testUserId1 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m134[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m134[0m           { team1: { stableId: testUserId2 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m135[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m135[0m           { team2: { stableId: testUserId1 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m136[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m136[0m           { team2: { stableId: testUserId2 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m143[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m143[0m           { stableId: testUserId1 },
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m144[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m144[0m           { stableId: testUserId2 },
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m151[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m151[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m152[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m152[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m159[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m159[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m160[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m160[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m186[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m186[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m186[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m186[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m189[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m189[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m189[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m189[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m192[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m192[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m192[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m192[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m195[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m195[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m195[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m195[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m201[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m201[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m216[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m216[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m232[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m232[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m247[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m247[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m261[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m261[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m262[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m262[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m337[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m337[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m337[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m337[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m340[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m340[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m340[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m340[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m343[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m343[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m343[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m343[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m346[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m346[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m346[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m346[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m352[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m352[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m367[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m367[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m382[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m382[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m397[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m397[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m411[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m411[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m412[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m412[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m492[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m492[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m492[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m492[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m495[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m495[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m495[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m495[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m498[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m498[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m498[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m498[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m501[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m501[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m501[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m501[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m507[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m507[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m522[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m522[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m537[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m537[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m552[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m552[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m566[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m566[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m567[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m567[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m648[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m648[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m648[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m648[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m651[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m651[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m651[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m651[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m654[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m654[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m654[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m654[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m657[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m657[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m657[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m657[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m663[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m663[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m678[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m678[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m693[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m693[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m708[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m708[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m722[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m722[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m723[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m723[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m803[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m803[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m803[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m803[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m806[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m806[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m806[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m806[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m809[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m809[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m809[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m809[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m812[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m812[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m812[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m812[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m818[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m818[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m833[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m833[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m848[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m848[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m863[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m863[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m877[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m877[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m878[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m878[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m944[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m944[0m });
    [7m   [0m [91m~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m944[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m944[0m });
    [7m   [0m [91m ~[0m

FAIL tests/stanceAndYield.test.ts
  ● Test suite failed to run

    [96mtests/stanceAndYield.test.ts[0m:[93m13[0m:[93m65[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'totalTagTeamBattles' are incompatible.
        Type 'number | undefined' is not assignable to type 'number'.
          Type 'undefined' is not assignable to type 'number'.

    [7m 13[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({
    [7m   [0m [91m                                                                ~[0m
    [7m 14[0m   id: 1,
    [7m   [0m [91m~~~~~~~~[0m
    [7m...[0m 
    [7m 71[0m   ...overrides,
    [7m   [0m [91m~~~~~~~~~~~~~~~[0m
    [7m 72[0m });
    [7m   [0m [91m~[0m

FAIL tests/robotStatsView.test.ts
  ● Test suite failed to run

    [96mtests/robotStatsView.test.ts[0m:[93m79[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m79[0m           userId: testUserId,
    [7m  [0m [91m          ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/robotStatsView.test.ts[0m:[93m113[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m113[0m         userId: testUserId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/robotCalculations.test.ts
  ● Test suite failed to run

    [96mtests/robotCalculations.test.ts[0m:[93m12[0m:[93m65[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'totalTagTeamBattles' are incompatible.
        Type 'number | undefined' is not assignable to type 'number'.
          Type 'undefined' is not assignable to type 'number'.

    [7m 12[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({
    [7m   [0m [91m                                                                ~[0m
    [7m 13[0m   id: 1,
    [7m   [0m [91m~~~~~~~~[0m
    [7m...[0m 
    [7m 70[0m   ...overrides,
    [7m   [0m [91m~~~~~~~~~~~~~~~[0m
    [7m 71[0m });
    [7m   [0m [91m~[0m

FAIL tests/profileApiResponse.property.test.ts
  ● Test suite failed to run

    [96mtests/profileApiResponse.property.test.ts[0m:[93m66[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'totalBattles' does not exist in type '(Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput)'.

    [7m66[0m                 totalBattles: userProfile.totalBattles,
    [7m  [0m [91m                ~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m3397[0m:[93m5[0m
        [7m3397[0m     data: XOR<UserCreateInput, UserUncheckedCreateInput>
        [7m    [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: UserSelect<DefaultArgs> | null | undefined; include?: UserInclude<DefaultArgs> | null | undefined; data: (Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput); }'

FAIL tests/profileUpdate.property.test.ts
  ● Test suite failed to run

    [96mtests/profileUpdate.property.test.ts[0m:[93m491[0m:[93m43[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.
      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.

    [7m491[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);
    [7m   [0m [91m                                          ~~~~~~~~[0m
    [96mtests/profileUpdate.property.test.ts[0m:[93m518[0m:[93m43[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.
      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.

    [7m518[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);
    [7m   [0m [91m                                          ~~~~~~~~[0m

FAIL tests/multiMatchScheduling.property.test.ts
  ● Test suite failed to run

    [96mtests/multiMatchScheduling.property.test.ts[0m:[93m226[0m:[93m26[0m - [91merror[0m[90m TS2322: [0mType 'number | null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.
      Type 'null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.

    [7m226[0m                 where: { id: match.team2Id },
    [7m   [0m [91m                         ~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m22658[0m:[93m5[0m
        [7m22658[0m     id?: number
        [7m     [0m [96m    ~~[0m
        The expected type comes from property 'id' which is declared here on type 'TagTeamWhereUniqueInput'

FAIL tests/migrateBattlesToEvents.test.ts
  ● Test suite failed to run

    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m8[0m:[93m57[0m - [91merror[0m[90m TS2307: [0mCannot find module '../src/scripts/migrateBattlesToEvents' or its corresponding type declarations.

    [7m8[0m import { migrateBattlesToEvents, verifyMigration } from '../src/scripts/migrateBattlesToEvents';
    [7m [0m [91m                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m111[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.

    [7m111[0m       robot1DamageDealt: battle.robot1DamageDealt,
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m
    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m112[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.

    [7m112[0m       robot2DamageDealt: battle.robot2DamageDealt,
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m

FAIL tests/metricProgression.property.test.ts
  ● Test suite failed to run

    [96mtests/metricProgression.property.test.ts[0m:[93m131[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1FameAwarded' does not exist on type '{ robot2Id: number; robot1Id: number; id: number; createdAt: Date; winnerId: number | null; battleType: string; leagueType: string; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m131[0m               const fameAwarded = battle.robot1FameAwarded;
    [7m   [0m [91m                                         ~~~~~~~~~~~~~~~~~[0m
    [96mtests/metricProgression.property.test.ts[0m:[93m343[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m343[0m                 userId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m590[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m590[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m644[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m644[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m698[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m698[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m752[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m752[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m806[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m806[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/matchListInclusion.property.test.ts
  ● Test suite failed to run

    [96mtests/matchListInclusion.property.test.ts[0m:[93m298[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m298[0m                 userId: testUserId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/matchListInclusion.property.test.ts[0m:[93m333[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m333[0m                 userId: testUserId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/integration.test.ts
  ● Test suite failed to run

    [96mtests/integration.test.ts[0m:[93m159[0m:[93m22[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'InputJsonValue | FieldRef<"Battle", "Json"> | JsonNullValueFilter | undefined'.

    [7m159[0m         battleLog: { not: null },
    [7m   [0m [91m                     ~~~[0m
    [96mtests/integration.test.ts[0m:[93m268[0m:[93m13[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'number | IntFilter<"Battle"> | undefined'.

    [7m268[0m           { robot1Id: null },
    [7m   [0m [91m            ~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m21904[0m:[93m5[0m
        [7m21904[0m     robot1Id?: IntFilter<"Battle"> | number
        [7m     [0m [96m    ~~~~~~~~[0m
        The expected type comes from property 'robot1Id' which is declared here on type 'BattleWhereInput'
    [96mtests/integration.test.ts[0m:[93m269[0m:[93m13[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'number | IntFilter<"Battle"> | undefined'.

    [7m269[0m           { robot2Id: null },
    [7m   [0m [91m            ~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m21905[0m:[93m5[0m
        [7m21905[0m     robot2Id?: IntFilter<"Battle"> | number
        [7m     [0m [96m    ~~~~~~~~[0m
        The expected type comes from property 'robot2Id' which is declared here on type 'BattleWhereInput'

FAIL tests/facilityROI.property.test.ts
  ● Test suite failed to run

    [96mtests/facilityROI.property.test.ts[0m:[93m53[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m53[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m  [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m54[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m54[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m  [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m59[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m59[0m               userId: testUserId,
    [7m  [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m73[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m73[0m               testUserId,
    [7m  [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m89[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m89[0m               testUserId,
    [7m  [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m99[0m:[93m56[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m99[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [
    [7m  [0m [91m                                                       ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m113[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m113[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m150[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m150[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m151[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m151[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m156[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m156[0m               userId: testUserId,
    [7m   [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m170[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m170[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m197[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m197[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m198[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m198[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m208[0m:[93m52[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m208[0m             await eventLogger.logOperatingCosts(i, testUserId, [
    [7m   [0m [91m                                                   ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m222[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m222[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m256[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m256[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m257[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m257[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m262[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m262[0m               userId: testUserId,
    [7m   [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m276[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m276[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m303[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m303[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m304[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m304[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m316[0m:[93m52[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m316[0m             await eventLogger.logOperatingCosts(i, testUserId, [
    [7m   [0m [91m                                                   ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m330[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m330[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m366[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m366[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m367[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m367[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m372[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m372[0m               { userId: testUserId, facilityType: 'income_generator', level: 1 },
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m373[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m373[0m               { userId: testUserId, facilityType: 'repair_bay', level: 1 },
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m380[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m380[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m389[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m389[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m407[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m407[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m428[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m428[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m429[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m429[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m439[0m:[93m56[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m439[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [
    [7m   [0m [91m                                                       ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m455[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m455[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m459[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m459[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m

FAIL tests/eventLogger.property.test.ts
  ● Test suite failed to run

    [96mtests/eventLogger.property.test.ts[0m:[93m92[0m:[93m15[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to parameter of type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }[]'.
      Type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }'.
        Types of property 'userId' are incompatible.
          Type 'number | null' is not assignable to type 'number | undefined'.
            Type 'null' is not assignable to type 'number | undefined'.

    [7m 92[0m               events.map(e => ({
    [7m   [0m [91m              ~~~~~~~~~~~~~~~~~~[0m
    [7m 93[0m                 eventType: e.eventType,
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 96[0m                 robotId: e.robotId,
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m 97[0m               }))
    [7m   [0m [91m~~~~~~~~~~~~~~~~~[0m

FAIL tests/eloProgression.property.test.ts
  ● Test suite failed to run

    [96mtests/eloProgression.property.test.ts[0m:[93m161[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m161[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m351[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m351[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m529[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m529[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m684[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m684[0m                 userId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/cycleSnapshot.property.test.ts
  ● Test suite failed to run

    [96mtests/cycleSnapshot.property.test.ts[0m:[93m282[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m282[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m359[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m359[0m               robot1Metric.damageDealt += createdBattle.robot1DamageDealt;
    [7m   [0m [91m                                                        ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m360[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m360[0m               robot1Metric.damageReceived += createdBattle.robot2DamageDealt;
    [7m   [0m [91m                                                           ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m362[0m:[93m56[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m362[0m               robot1Metric.fameChange += createdBattle.robot1FameAwarded;
    [7m   [0m [91m                                                       ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m381[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m381[0m               robot2Metric.damageDealt += createdBattle.robot2DamageDealt;
    [7m   [0m [91m                                                        ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m382[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m382[0m               robot2Metric.damageReceived += createdBattle.robot1DamageDealt;
    [7m   [0m [91m                                                           ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m384[0m:[93m56[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m384[0m               robot2Metric.fameChange += createdBattle.robot2FameAwarded;
    [7m   [0m [91m                                                       ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m528[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m528[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m592[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m592[0m               actualUserIds.add(battle.userId);
    [7m   [0m [91m                                       ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m594[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m594[0m               if (!expectedStableMetrics.has(battle.userId)) {
    [7m   [0m [91m                                                    ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m595[0m:[93m50[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m595[0m                 expectedStableMetrics.set(battle.userId, {
    [7m   [0m [91m                                                 ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m602[0m:[93m64[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m602[0m               const metrics = expectedStableMetrics.get(battle.userId)!;
    [7m   [0m [91m                                                               ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m605[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m605[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;
    [7m   [0m [91m                                                    ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m605[0m:[93m84[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m605[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;
    [7m   [0m [91m                                                                                   ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m606[0m:[93m51[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m606[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);
    [7m   [0m [91m                                                  ~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m606[0m:[93m84[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m606[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);
    [7m   [0m [91m                                                                                   ~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m659[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m659[0m                 user: { connect: { id: user.id } },
    [7m   [0m [91m                ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/byeTeamBattles.property.test.ts
  ● Test suite failed to run

    [96mtests/byeTeamBattles.property.test.ts[0m:[93m16[0m:[93m3[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'imageUrl' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'string | null'.
          Type 'undefined' is not assignable to type 'string | null'.

    [7m16[0m   return {
    [7m  [0m [91m  ~~~~~~[0m

FAIL tests/battleLogStreamingRevenue.property.test.ts
  ● Test suite failed to run

    [96mtests/battleLogStreamingRevenue.property.test.ts[0m:[93m111[0m:[93m7[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m111[0m       userId,
    [7m   [0m [91m      ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/analyticsApi.test.ts
  ● Test suite failed to run

    [96mtests/analyticsApi.test.ts[0m:[93m228[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m228[0m           stableMetrics: snapshot.stableMetrics,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24461[0m:[93m5[0m
        [7m24461[0m     stableMetrics: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~~[0m
        The expected type comes from property 'stableMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m229[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m229[0m           robotMetrics: snapshot.robotMetrics,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24462[0m:[93m5[0m
        [7m24462[0m     robotMetrics: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~[0m
        The expected type comes from property 'robotMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m230[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m230[0m           stepDurations: snapshot.stepDurations,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24463[0m:[93m5[0m
        [7m24463[0m     stepDurations: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~~[0m
        The expected type comes from property 'stepDurations' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m1220[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m1220[0m           userId: testUserId,
    [7m    [0m [91m          ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m1724[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m1724[0m             userId: testUserId,
    [7m    [0m [91m            ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m2068[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m2068[0m         userId: testUserId,
    [7m    [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m2211[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m2211[0m             userId: testUserId,
    [7m    [0m [91m            ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

Summary of all failing tests
FAIL tests/performanceDegradation.property.test.ts (20.381 s)
  ● Property 16: Performance Degradation Detection › Property 16.1: Degradation detected when recent average > 150% of baseline

    Property failed after 1 tests
    { seed: 1574437034, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [100,1.5099999904632568,"step_a"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:62:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:39:5)

  ● Property 16: Performance Degradation Detection › Property 16.2: No degradation when recent average <= 150% of baseline

    Property failed after 2 tests
    { seed: -1685842725, path: "1:0:1:0:1:0:1:0:0:2:0:1:0:1:0:2", endOnFailure: true }
    Counterexample: [100,0.6066201329231262,"step_x"]
    Shrunk 15 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:108:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:85:5)

  ● Property 16: Performance Degradation Detection › Property 16.3: Degradation severity correctly classified (warning vs critical)

    Property failed after 1 tests
    { seed: 1269604275, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [100,1.5099999904632568,"step_1"]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:149:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:125:5)

  ● Property 16: Performance Degradation Detection › Property 16.4: Multiple steps monitored independently

    Property failed after 1 tests
    { seed: -666857945, path: "0:1:0:1:0", endOnFailure: true }
    Counterexample: [[{"stepName":"step_a","baselineDuration":100,"isDegraded":true},{"stepName":"step_a","baselineDuration":100,"isDegraded":false}]]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/performanceDegradation.property.test.ts:200:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:172:5)

  ● Property 16: Performance Degradation Detection › Property 16.5: Detection consistent across different baseline sizes

    Property failed after 2 tests
    { seed: -236302493, path: "1:0:2:0:1:0", endOnFailure: true }
    Counterexample: [500,70,"test_step_b"]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleComplete (src/services/eventLogger.ts:302:5)
      at tests/performanceDegradation.property.test.ts:264:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:241:5)

  ● Property 16: Performance Degradation Detection › Property 16.6: Alerts sorted by degradation percentage (highest first)

    Property failed after 1 tests
    { seed: 1376374264, path: "0:0:0:1:0:1:0:1:0:0:1:0:0:1:0:0:1:1:1:1:1", endOnFailure: true }
    Counterexample: [[{__proto__:null,"stepName":"s1","degradationMultiplier":1.600000023841858},{"stepName":"s1","degradationMultiplier":1.600000023841858},{"stepName":"s1","degradationMultiplier":1.7138359546661377}]]
    Shrunk 20 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27

      194 };
      195 
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)

      195 |     
      196 |     // Insert into database
    > 197 |     await prisma.auditLog.create({
          |     ^
      198 |       data: {
      199 |         cycleNumber: entry.cycleNumber,
      200 |         eventType: entry.eventType,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at EventLogger.logEvent (src/services/eventLogger.ts:197:5)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at tests/performanceDegradation.property.test.ts:308:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/performanceDegradation.property.test.ts:282:5)

FAIL tests/integration/adminCycleGeneration.test.ts (26.245 s)
  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate progressive users per cycle

    TypeError: Cannot read properties of undefined (reading 'usersCreated')

      139 |
      140 |       // Verify user generation in each cycle
    > 141 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);
          |                                                      ^
      142 |       expect(response.body.results[1].userGeneration.usersCreated).toBe(2);
      143 |       expect(response.body.results[2].userGeneration.usersCreated).toBe(3);
      144 |

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:141:54)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should persist cycle count across multiple runs

    expect(received).toBe(expected) // Object.is equality

    Expected: 6
    Received: undefined

      186 |
      187 |       // Verify user generation continues from cycle 6
    > 188 |       expect(response2.body.results[0].userGeneration.usersCreated).toBe(6);
          |                                                                     ^
      189 |       expect(response2.body.results[1].userGeneration.usersCreated).toBe(7);
      190 |       expect(response2.body.results[2].userGeneration.usersCreated).toBe(8);
      191 |

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:188:69)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should not generate users when flag is false

    expect(received).toBeNull()

    Received: undefined

      218 |       // Verify no user generation in results
      219 |       response.body.results.forEach((result: any) => {
    > 220 |         expect(result.userGeneration).toBeNull();
          |                                       ^
      221 |       });
      222 |
      223 |       // Verify no users were created

      at tests/integration/adminCycleGeneration.test.ts:220:39
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:219:29)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should return correct response structure

    expect(received).toHaveProperty(path)

    Expected path: "userGeneration"
    Received path: []

    Received value: {"cycle": 1, "duration": 2, "error": "
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:197:27·
      194 };
      195·
      196 // Insert into database
    → 197 await prisma.auditLog.create(
    Unique constraint failed on the fields: (`cycle_number`,`sequence_number`)"}

      347 |       response.body.results.forEach((result: any) => {
      348 |         expect(result).toHaveProperty('cycle');
    > 349 |         expect(result).toHaveProperty('userGeneration');
          |                        ^
      350 |         expect(result.userGeneration).toHaveProperty('usersCreated');
      351 |         expect(result.userGeneration).toHaveProperty('robotsCreated');
      352 |         expect(result.userGeneration).toHaveProperty('usernames');

      at tests/integration/adminCycleGeneration.test.ts:349:24
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:347:29)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should auto-create CycleMetadata if missing

    TypeError: Cannot read properties of undefined (reading 'usersCreated')

      392 |
      393 |       expect(response.status).toBe(200);
    > 394 |       expect(response.body.results[0].userGeneration.usersCreated).toBe(1);
          |                                                      ^
      395 |
      396 |       // Verify CycleMetadata was created
      397 |       const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:394:54)

  ● Admin Cycle Generation Integration Tests › POST /api/admin/cycles/bulk with generateUsersPerCycle › should generate correct total user count formula (N*(N+1)/2)

    expect(received).toBe(expected) // Object.is equality

    Expected: 55
    Received: 0

      419 |       });
      420 |
    > 421 |       expect(totalUsers).toBe(expectedTotal);
          |                          ^
      422 |     });
      423 |
      424 |     it('should create users eligible for matchmaking', async () => {

      at Object.<anonymous> (tests/integration/adminCycleGeneration.test.ts:421:26)

FAIL tests/facilityRecommendation.property.test.ts (7.65 s)
  ● Property 22: Investment Recommendation Ranking › Property 22.2: Only facilities with positive projected ROI are recommended

    Property failed after 1 tests
    { seed: 74835880, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [5,500000,2000]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      177 |           // Property: All recommendations should have positive ROI
      178 |           for (const recommendation of result.recommendations) {
    > 179 |             expect(recommendation.projectedROI).toBeGreaterThan(0);
          |                                                 ^
      180 |           }
      181 |         }
      182 |       ),

      at tests/facilityRecommendation.property.test.ts:179:49
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:129:5)

  ● Property 22: Investment Recommendation Ranking › Property 22.4: High activity users get more discount facility recommendations

    Property failed after 1 tests
    { seed: -1161871124, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [50000,30000,20]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      307 |           // Discount facilities should have positive ROI
      308 |           for (const facility of discountFacilities) {
    > 309 |             expect(facility.projectedROI).toBeGreaterThan(0);
          |                                           ^
      310 |           }
      311 |         }
      312 |       ),

      at tests/facilityRecommendation.property.test.ts:309:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:235:5)

  ● Property 22: Investment Recommendation Ranking › Property 22.5: Recommendations include upgrade cost and payoff cycles

    Property failed after 1 tests
    { seed: 675814012, path: "0:0", endOnFailure: true }
    Counterexample: [10,2000000]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeTruthy()

    Received: ""

      371 |             
      372 |             // Should have a reason
    > 373 |             expect(recommendation.reason).toBeTruthy();
          |                                           ^
      374 |             expect(recommendation.reason.length).toBeGreaterThan(0);
      375 |             
      376 |             // Should have a priority

      at tests/facilityRecommendation.property.test.ts:373:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityRecommendation.property.test.ts:318:5)

FAIL tests/statsUpdatedBeforeStreamingRevenue.property.test.ts
  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5: Stats updated before streaming revenue calculation

    Property failed after 1 tests
    { seed: -117195004, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,0,0,0,0,0,"bronze"]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).not.toBeNull()

    Received: null

      267 |           });
      268 |
    > 269 |           expect(battleCompleteEvent).not.toBeNull();
          |                                           ^
      270 |           const payload = battleCompleteEvent!.payload as any;
      271 |
      272 |           // Get updated robot stats from database

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:269:43
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:189:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.2: Winner fame increases after battle

    Property failed after 1 tests
    { seed: 381692895, path: "0:0:0", endOnFailure: true }
    Counterexample: [0,"bronze"]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    TypeError: Cannot read properties of null (reading 'payload')

      485 |           });
      486 |
    > 487 |           const payload = battleCompleteEvent!.payload as any;
          |                                                ^
      488 |
      489 |           // Get updated robot stats
      490 |           const updatedRobot1 = await prisma.robot.findUnique({

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:487:48
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:438:5)

  ● Property 5: Stats Updated Before Streaming Revenue Calculation › Property 5.3: Stats are always updated before streaming revenue calculation

    Property failed after 1 tests
    { seed: 958940801, path: "0:0:0", endOnFailure: true }
    Counterexample: [0,0]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    TypeError: Cannot read properties of null (reading 'payload')

      561 |           });
      562 |
    > 563 |           const payload = battleCompleteEvent!.payload as any;
          |                                                ^
      564 |
      565 |           // Property: The battle count used in streaming revenue should be 
      566 |           // the initial count + 1 (proving stats were updated first)

      at tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:563:48
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/statsUpdatedBeforeStreamingRevenue.property.test.ts:526:5)

FAIL tests/financialReportStreamingRevenue.property.test.ts
  ● Property 17: Financial Report Includes Streaming Revenue › Property 17: Financial report includes streaming revenue line item

    Property failed after 86 tests
    { seed: -243839234, path: "85:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"numBattles":1,"robotBattles":0,"robotFame":0,"studioLevel":0,"streamingRevenuePerBattle":[1000]}]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:147:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:127:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.1: Zero streaming revenue when no battles

    Property failed after 1 tests
    { seed: 509859863, path: "0:0", endOnFailure: true }
    Counterexample: [0]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    User not found

      306 |
      307 |   if (!user) {
    > 308 |     throw new Error('User not found');
          |           ^
      309 |   }
      310 |
      311 |   // Calculate operating costs

      at generateFinancialReport (src/utils/economyCalculations.ts:308:11)
      at tests/financialReportStreamingRevenue.property.test.ts:258:26
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:233:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.2: Only counts streaming revenue from user's robots

    Property failed after 1 tests
    { seed: 606966106, path: "0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"userBattles":1,"opponentBattles":1,"userStreamingRevenue":[1000],"opponentStreamingRevenue":[1000]}]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:298:29
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:282:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.3: Streaming revenue contributes to total revenue

    Property failed after 1 tests
    { seed: 1750961955, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [{"numBattles":1,"streamingRevenuePerBattle":1000,"battleWinnings":0}]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:417:25
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:408:5)

  ● Property 17: Financial Report Includes Streaming Revenue › Property 17.4: Aggregates streaming revenue across multiple robots

    Property failed after 1 tests
    { seed: 2125092007, path: "0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [{"numRobots":2,"battlesPerRobot":[1,1],"revenuePerBattle":[1000,1000]}]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.robot.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:21:29

      18 
      19 // Helper function to create a minimal test robot
      20 async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    → 21   return await prisma.robot.create(
    Foreign key constraint violated: `robots_user_id_fkey (index)`

      19 | // Helper function to create a minimal test robot
      20 | async function createTestRobot(userId: number, battles: number, fame: number, name: string) {
    > 21 |   return await prisma.robot.create({
         |          ^
      22 |     data: {
      23 |       userId,
      24 |       name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/financialReportStreamingRevenue.property.test.ts:21:10)
      at tests/financialReportStreamingRevenue.property.test.ts:496:27
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:473:5)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.property.test.ts:118:29

      115 
      116 afterAll(async () => {
      117   // Final cleanup of user
    → 118   await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      116 |   afterAll(async () => {
      117 |     // Final cleanup of user
    > 118 |     await prisma.user.delete({ where: { id: testUserId } });
          |     ^
      119 |     await prisma.$disconnect();
      120 |   });
      121 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.property.test.ts:118:5)

FAIL tests/incomeGeneratorNoStreaming.property.test.ts
  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18: Income Generator provides only merchandising, no streaming

    Property failed after 30 tests
    { seed: -874885609, path: "29", endOnFailure: true }
    Counterexample: [9,6]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      92 |
      93 |           // Property: Merchandising should be greater than 0 for level 1+
    > 94 |           expect(result.merchandising).toBeGreaterThan(0);
         |                                        ^
      95 |
      96 |           // Property: Result should NOT have a streaming field
      97 |           // (The old system had a streaming field, the new system should not)

      at tests/incomeGeneratorNoStreaming.property.test.ts:94:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:54:5)

  ● Property 18: Income Generator No Longer Provides Streaming Revenue › Property 18.2: Passive income is independent of robot stats

    Property failed after 8 tests
    { seed: 663096411, path: "7", endOnFailure: true }
    Counterexample: [2,21711]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      217 |           // (The old streaming system required robot battles/fame, the new system doesn't)
      218 |           expect(result).not.toBeNull();
    > 219 |           expect(result.merchandising).toBeGreaterThan(0);
          |                                        ^
      220 |           expect(result.total).toBe(result.merchandising);
      221 |
      222 |           // Property: Result should NOT have a streaming field

      at tests/incomeGeneratorNoStreaming.property.test.ts:219:40
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/incomeGeneratorNoStreaming.property.test.ts:185:5)

FAIL tests/facilityAdvisorStreamingStudioROI.property.test.ts
  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21: Facility Advisor provides Streaming Studio ROI metrics

    Property failed after 1 tests
    { seed: 1544836952, path: "0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [0,1,0,0,5]
    Shrunk 5 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBeDefined()

    Received: undefined

      292 |               // The service filters out recommendations with ROI <= 0 and priority === 'low'
      293 |               if (expectedROI > 0 || netBenefitPerCycle > expectedUpgradeCost / 30) {
    > 294 |                 expect(studioRec).toBeDefined();
          |                                   ^
      295 |               }
      296 |
      297 |               if (studioRec) {

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:294:35
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:196:5)

  ● Property 21: Facility Advisor Provides Streaming Studio ROI › Property 21.2: Revenue increase per battle is calculated correctly

    Property failed after 1 tests
    { seed: 1712906377, path: "0:0:2:1:3:1:2", endOnFailure: true }
    Counterexample: [0,100,9188,11]
    Shrunk 6 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 3
    Received: 30

      487 |             if (expectedNetBenefitPerCycle > 0 && studioRec.projectedPayoffCycles !== null) {
      488 |               const expectedPaybackCycles = Math.ceil(studioRec.upgradeCost / expectedNetBenefitPerCycle);
    > 489 |               expect(studioRec.projectedPayoffCycles).toBe(expectedPaybackCycles);
          |                                                       ^
      490 |             }
      491 |
      492 |             // Property: ROI should be calculated correctly

      at tests/facilityAdvisorStreamingStudioROI.property.test.ts:489:55
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudioROI.property.test.ts:423:5)

FAIL tests/tagTeamLeagueInstance.property.test.ts (12.604 s)
  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › no instance ever exceeds maximum capacity of 50 teams

    Property failed after 9 tests
    { seed: 1340351570, path: "8:2:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,"bronze"]
    Shrunk 7 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 2

      183 |             // Property: Total teams across all instances should equal numTeams
      184 |             const totalTeams = instances.reduce((sum, inst) => sum + inst.currentTeams, 0);
    > 185 |             expect(totalTeams).toBe(numTeams);
          |                                ^
      186 |           }
      187 |         ),
      188 |         { numRuns: NUM_RUNS }

      at tests/tagTeamLeagueInstance.property.test.ts:185:32
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:156:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › new instance is created when 51st team would be added

    Property failed after 11 tests
    { seed: 1343363096, path: "10", endOnFailure: true }
    Counterexample: ["bronze"]
    Shrunk 0 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    expect(received).toBe(expected) // Object.is equality

    Expected: 50
    Received: 3

      209 |             let instances = await getInstancesForTier(tier);
      210 |             expect(instances.length).toBe(1);
    > 211 |             expect(instances[0].currentTeams).toBe(50);
          |                                               ^
      212 |             expect(instances[0].isFull).toBe(true);
      213 |
      214 |             // Create the 51st team

      at tests/tagTeamLeagueInstance.property.test.ts:211:47
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:193:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance assignment distributes teams correctly

    Property failed after 1 tests
    { seed: 244262248, path: "0:1:0:0:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: [51,"bronze"]
    Shrunk 9 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
      at tests/tagTeamLeagueInstance.property.test.ts:251:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:238:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance capacity is enforced across all league tiers

    Property failed after 1 tests
    { seed: 1065788737, path: "0:0:0:0", endOnFailure: true }
    Counterexample: [[{"tier":"bronze","numTeams":1}]]
    Shrunk 3 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
      at tests/tagTeamLeagueInstance.property.test.ts:299:17
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:282:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › assignTagTeamLeagueInstance never returns a full instance

    Property failed after 1 tests
    { seed: -962291052, path: "0:0:1:0:0:0:0:0:0", endOnFailure: true }
    Counterexample: ["bronze",1]
    Shrunk 8 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
      at tests/tagTeamLeagueInstance.property.test.ts:330:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:323:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › instance numbers are sequential and start at 1

    Property failed after 1 tests
    { seed: -2008684314, path: "0:0:0", endOnFailure: true }
    Counterexample: ["bronze",1]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
      at tests/tagTeamLeagueInstance.property.test.ts:360:15
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:353:7)

  ● Tag Team League Instance - Property Tests › Property 21: League Instance Capacity › capacity enforcement works with concurrent team creation

    Property failed after 1 tests
    { seed: -320745649, path: "0:0:0", endOnFailure: true }
    Counterexample: ["bronze",45]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

    Cause:
    PrismaClientKnownRequestError: 
    Invalid `prisma.weaponInventory.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:83:52

      80 async function createTestRobot(elo: number = 1000) {
      81   // Get a weapon for the robot
      82   const weapon = await prisma.weapon.findFirst();
    → 83   const weaponInv = await prisma.weaponInventory.create(
    Foreign key constraint violated: `weapon_inventory_user_id_fkey (index)`

      81 |     // Get a weapon for the robot
      82 |     const weapon = await prisma.weapon.findFirst();
    > 83 |     const weaponInv = await prisma.weaponInventory.create({
         |                       ^
      84 |       data: { userId: testStableId, weaponId: weapon!.id },
      85 |     });
      86 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at createTestRobot (tests/tagTeamLeagueInstance.property.test.ts:83:23)
      at createTestTeam (tests/tagTeamLeagueInstance.property.test.ts:113:20)
          at async Promise.all (index 19)
      at tests/tagTeamLeagueInstance.property.test.ts:400:13
      at AsyncProperty.run (node_modules/fast-check/lib/cjs/check/property/AsyncProperty.generic.js:46:28)
      at asyncRunIt (node_modules/fast-check/lib/cjs/check/runner/Runner.js:28:21)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:385:7)


  ● Test suite failed to run

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstance.property.test.ts:47:31

      44   });
      45 }
      46 if (testStableId) {
    → 47   await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      45 |     }
      46 |     if (testStableId) {
    > 47 |       await prisma.user.delete({
         |       ^
      48 |         where: { id: testStableId },
      49 |       });
      50 |     }

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstance.property.test.ts:47:7)

FAIL tests/roiCalculatorService.test.ts
  ● ROICalculatorService › calculateFacilityROI › should return null for facility not purchased

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:50:29

      47 });
      48 await prisma.facility.deleteMany({ where: { userId: testUserId } });
      49 await prisma.robot.deleteMany({ where: { userId: testUserId } });
    → 50 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      48 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });
      49 |     await prisma.robot.deleteMany({ where: { userId: testUserId } });
    > 50 |     await prisma.user.delete({ where: { id: testUserId } });
         |     ^
      51 |   });
      52 |
      53 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:50:5)

  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for income generator facility

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:78:7)

  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for income generator facility

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/roiCalculatorService.test.ts:50:29

      47 });
      48 await prisma.facility.deleteMany({ where: { userId: testUserId } });
      49 await prisma.robot.deleteMany({ where: { userId: testUserId } });
    → 50 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. Record to delete does not exist.

      48 |     await prisma.facility.deleteMany({ where: { userId: testUserId } });
      49 |     await prisma.robot.deleteMany({ where: { userId: testUserId } });
    > 50 |     await prisma.user.delete({ where: { id: testUserId } });
         |     ^
      51 |   });
      52 |
      53 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7315)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:50:5)

  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for repair bay facility with discounts

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:145:7)

  ● ROICalculatorService › calculateFacilityROI › should calculate ROI for training facility with discounts

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/roiCalculatorService.test.ts:225:7)

FAIL tests/leagueRebalancingService.test.ts
  ● League Rebalancing Service › determinePromotions › should return top 10% of robots with ≥5 cycles AND ≥25 league points

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:50:50

      47 }
      48 
      49 // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    → 50 const robotsWithMinPoints = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |
      49 |   // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    > 50 |   const robotsWithMinPoints = await prisma.robot.findMany({
         |                               ^
      51 |     where: {
      52 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      53 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determinePromotions (src/services/leagueRebalancingService.ts:50:31)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:97:25)

  ● League Rebalancing Service › determinePromotions › should skip robots with <5 cycles in current league

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:50:50

      47 }
      48 
      49 // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    → 50 const robotsWithMinPoints = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |
      49 |   // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    > 50 |   const robotsWithMinPoints = await prisma.robot.findMany({
         |                               ^
      51 |     where: {
      52 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      53 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determinePromotions (src/services/leagueRebalancingService.ts:50:31)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:142:25)

  ● League Rebalancing Service › determinePromotions › should return empty array when no robots have ≥25 league points

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:50:50

      47 }
      48 
      49 // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    → 50 const robotsWithMinPoints = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |
      49 |   // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    > 50 |   const robotsWithMinPoints = await prisma.robot.findMany({
         |                               ^
      51 |     where: {
      52 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      53 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determinePromotions (src/services/leagueRebalancingService.ts:50:31)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:193:25)

  ● League Rebalancing Service › determinePromotions › should return empty array when too few robots

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:50:50

      47 }
      48 
      49 // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    → 50 const robotsWithMinPoints = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |
      49 |   // Get all robots in this INSTANCE with minimum cycles AND minimum league points
    > 50 |   const robotsWithMinPoints = await prisma.robot.findMany({
         |                               ^
      51 |     where: {
      52 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      53 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determinePromotions (src/services/leagueRebalancingService.ts:50:31)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:232:25)

  ● League Rebalancing Service › determineDemotions › should return bottom 10% of robots with ≥5 cycles in current league

    PrismaClientInitializationError: 
    Invalid `prisma.robot.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:126:37

      123 }
      124 
      125 // Get all robots in this INSTANCE with minimum cycles in current league
    → 126 const robots = await prisma.robot.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      124 |
      125 |   // Get all robots in this INSTANCE with minimum cycles in current league
    > 126 |   const robots = await prisma.robot.findMany({
          |                  ^
      127 |     where: {
      128 |       leagueId: instanceId, // CHANGED: Query by instance, not tier
      129 |       cyclesInCurrentLeague: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at determineDemotions (src/services/leagueRebalancingService.ts:126:18)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:272:24)

  ● League Rebalancing Service › promoteRobot › should move robot to next tier and reset league points and cycles

    PrismaClientInitializationError: 
    Invalid `prisma.robot.groupBy()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueInstanceService.ts:35:40

      32  */
      33 export async function getInstancesForTier(tier: LeagueTier): Promise<LeagueInstance[]> {
      34   // Query robots grouped by leagueId for this tier
    → 35   const instances = await prisma.robot.groupBy(
    Too many database connections opened: FATAL: sorry, too many clients already

      33 | export async function getInstancesForTier(tier: LeagueTier): Promise<LeagueInstance[]> {
      34 |   // Query robots grouped by leagueId for this tier
    > 35 |   const instances = await prisma.robot.groupBy({
         |                     ^
      36 |     by: ['leagueId'],
      37 |     where: {
      38 |       currentLeague: tier,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getInstancesForTier (src/services/leagueInstanceService.ts:35:21)
      at assignLeagueInstance (src/services/leagueInstanceService.ts:96:21)
      at promoteRobot (src/services/leagueRebalancingService.ts:197:23)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:316:7)

  ● League Rebalancing Service › demoteRobot › should move robot to previous tier and reset league points

    PrismaClientInitializationError: 
    Invalid `prisma.robot.groupBy()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueInstanceService.ts:35:40

      32  */
      33 export async function getInstancesForTier(tier: LeagueTier): Promise<LeagueInstance[]> {
      34   // Query robots grouped by leagueId for this tier
    → 35   const instances = await prisma.robot.groupBy(
    Too many database connections opened: FATAL: sorry, too many clients already

      33 | export async function getInstancesForTier(tier: LeagueTier): Promise<LeagueInstance[]> {
      34 |   // Query robots grouped by leagueId for this tier
    > 35 |   const instances = await prisma.robot.groupBy({
         |                     ^
      36 |     by: ['leagueId'],
      37 |     where: {
      38 |       currentLeague: tier,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getInstancesForTier (src/services/leagueInstanceService.ts:35:21)
      at assignLeagueInstance (src/services/leagueInstanceService.ts:96:21)
      at demoteRobot (src/services/leagueRebalancingService.ts:225:23)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:383:7)

  ● League Rebalancing Service › rebalanceLeagues › should process all tiers and return summary

    PrismaClientInitializationError: 
    Invalid `prisma.robot.count()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:346:48

      343 };
      344 
      345 // Get total robot count
    → 346 fullSummary.totalRobots = await prisma.robot.count(
    Too many database connections opened: FATAL: sorry, too many clients already

      344 |
      345 |   // Get total robot count
    > 346 |   fullSummary.totalRobots = await prisma.robot.count({
          |                             ^
      347 |     where: { NOT: { name: 'Bye Robot' } },
      348 |   });
      349 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at rebalanceLeagues (src/services/leagueRebalancingService.ts:346:29)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:457:23)

  ● League Rebalancing Service › rebalanceLeagues › should not promote or demote robots multiple times in same cycle

    PrismaClientInitializationError: 
    Invalid `prisma.robot.count()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/leagueRebalancingService.ts:346:48

      343 };
      344 
      345 // Get total robot count
    → 346 fullSummary.totalRobots = await prisma.robot.count(
    Too many database connections opened: FATAL: sorry, too many clients already

      344 |
      345 |   // Get total robot count
    > 346 |   fullSummary.totalRobots = await prisma.robot.count({
          |                             ^
      347 |     where: { NOT: { name: 'Bye Robot' } },
      348 |   });
      349 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at rebalanceLeagues (src/services/leagueRebalancingService.ts:346:29)
      at Object.<anonymous> (tests/leagueRebalancingService.test.ts:503:23)

FAIL tests/tagTeamValidation.property.test.ts
  ● Tag Team Validation Property Tests › should only validate teams where both robots are from same stable and battle ready

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should only validate teams where both robots are from same stable and battle ready

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should reject teams with robots from different stables

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should reject teams with robots from different stables

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should reject teams with unready robots

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should reject teams with unready robots

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should preserve team configuration through create and retrieve cycle

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should preserve team configuration through create and retrieve cycle

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should place all new teams in Bronze league with initial values

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should place all new teams in Bronze league with initial values

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should enforce team creation limit based on roster size

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should remove team from database and free robots for new teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should remove team from database and free robots for new teams

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should validate team readiness based on both robots meeting all requirements

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should validate team readiness based on both robots meeting all requirements

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Validation Property Tests › should calculate combined ELO as sum of both robots ELOs

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test users
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test users
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_tagteam_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:25:22)

  ● Tag Team Validation Property Tests › should calculate combined ELO as sum of both robots ELOs

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:75:26

      72 
      73 afterEach(async () => {
      74   // Clean up teams and robots after each test
    → 75   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      73 |   afterEach(async () => {
      74 |     // Clean up teams and robots after each test
    > 75 |     await prisma.tagTeam.deleteMany({
         |     ^
      76 |       where: {
      77 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      78 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:75:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking only on odd cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1038:32

      1035 describe('Tag Team Matchmaking Cycle Scheduling Property Tests', () => {
      1036   beforeAll(async () => {
      1037     // Ensure cycle metadata exists
    → 1038     await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      1036 |   beforeAll(async () => {
      1037 |     // Ensure cycle metadata exists
    > 1038 |     await prisma.cycleMetadata.upsert({
           |     ^
      1039 |       where: { id: 1 },
      1040 |       update: {},
      1041 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1038:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should alternate matchmaking between consecutive cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1038:32

      1035 describe('Tag Team Matchmaking Cycle Scheduling Property Tests', () => {
      1036   beforeAll(async () => {
      1037     // Ensure cycle metadata exists
    → 1038     await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      1036 |   beforeAll(async () => {
      1037 |     // Ensure cycle metadata exists
    > 1038 |     await prisma.cycleMetadata.upsert({
           |     ^
      1039 |       where: { id: 1 },
      1040 |       update: {},
      1041 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1038:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should run matchmaking on known odd cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1038:32

      1035 describe('Tag Team Matchmaking Cycle Scheduling Property Tests', () => {
      1036   beforeAll(async () => {
      1037     // Ensure cycle metadata exists
    → 1038     await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      1036 |   beforeAll(async () => {
      1037 |     // Ensure cycle metadata exists
    > 1038 |     await prisma.cycleMetadata.upsert({
           |     ^
      1039 |       where: { id: 1 },
      1040 |       update: {},
      1041 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1038:5)

  ● Tag Team Matchmaking Cycle Scheduling Property Tests › should skip matchmaking on known even cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1038:32

      1035 describe('Tag Team Matchmaking Cycle Scheduling Property Tests', () => {
      1036   beforeAll(async () => {
      1037     // Ensure cycle metadata exists
    → 1038     await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      1036 |   beforeAll(async () => {
      1037 |     // Ensure cycle metadata exists
    > 1038 |     await prisma.cycleMetadata.upsert({
           |     ^
      1039 |       where: { id: 1 },
      1040 |       update: {},
      1041 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1038:5)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams with unready robots from eligible teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1198:40

      1195 
      1196 beforeAll(async () => {
      1197   // Create test user
    → 1198   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1196 |   beforeAll(async () => {
      1197 |     // Create test user
    > 1198 |     const testUser = await prisma.user.create({
           |                      ^
      1199 |       data: {
      1200 |         username: `pbt_eligible_user_${Date.now()}`,
      1201 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1198:22)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams with unready robots from eligible teams

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1231:26

      1228 
      1229 afterEach(async () => {
      1230   // Clean up teams and robots after each test
    → 1231   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1229 |   afterEach(async () => {
      1230 |     // Clean up teams and robots after each test
    > 1231 |     await prisma.tagTeam.deleteMany({
           |     ^
      1232 |       where: { stableId: testUserId },
      1233 |     });
      1234 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1231:5)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1198:40

      1195 
      1196 beforeAll(async () => {
      1197   // Create test user
    → 1198   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1196 |   beforeAll(async () => {
      1197 |     // Create test user
    > 1198 |     const testUser = await prisma.user.create({
           |                      ^
      1199 |       data: {
      1200 |         username: `pbt_eligible_user_${Date.now()}`,
      1201 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1198:22)

  ● Tag Team Matchmaking Eligible Teams Property Tests › should exclude teams where any robot has HP below 75%

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1231:26

      1228 
      1229 afterEach(async () => {
      1230   // Clean up teams and robots after each test
    → 1231   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1229 |   afterEach(async () => {
      1230 |     // Clean up teams and robots after each test
    > 1231 |     await prisma.tagTeam.deleteMany({
           |     ^
      1232 |       where: { stableId: testUserId },
      1233 |     });
      1234 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1231:5)

  ● Tag Team Matchmaking ELO Matching Property Tests › should prefer matching teams with smaller ELO differences

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1489:40

      1486 
      1487 beforeAll(async () => {
      1488   // Create test user
    → 1489   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1487 |   beforeAll(async () => {
      1488 |     // Create test user
    > 1489 |     const testUser = await prisma.user.create({
           |                      ^
      1490 |       data: {
      1491 |         username: `pbt_elo_user_${Date.now()}`,
      1492 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1489:22)

  ● Tag Team Matchmaking ELO Matching Property Tests › should prefer matching teams with smaller ELO differences

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1522:26

      1519 
      1520 afterEach(async () => {
      1521   // Clean up teams and robots after each test
    → 1522   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1520 |   afterEach(async () => {
      1521 |     // Clean up teams and robots after each test
    > 1522 |     await prisma.tagTeam.deleteMany({
           |     ^
      1523 |       where: { stableId: testUserId },
      1524 |     });
      1525 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1522:5)

  ● Tag Team Matchmaking Same-Stable Exclusion Property Tests › should strongly deprioritize same-stable matches

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1666:41

      1663 
      1664 beforeAll(async () => {
      1665   // Create test users
    → 1666   const testUser1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1664 |   beforeAll(async () => {
      1665 |     // Create test users
    > 1666 |     const testUser1 = await prisma.user.create({
           |                       ^
      1667 |       data: {
      1668 |         username: `pbt_stable1_${Date.now()}`,
      1669 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1666:23)

  ● Tag Team Matchmaking Same-Stable Exclusion Property Tests › should strongly deprioritize same-stable matches

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1714:26

      1711 
      1712 afterEach(async () => {
      1713   // Clean up teams and robots after each test
    → 1714   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1712 |   afterEach(async () => {
      1713 |     // Clean up teams and robots after each test
    > 1714 |     await prisma.tagTeam.deleteMany({
           |     ^
      1715 |       where: {
      1716 |         OR: [{ stableId: testUserId1 }, { stableId: testUserId2 }],
      1717 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1714:5)

  ● Tag Team Matchmaking Recent Opponent Deprioritization Property Tests › should deprioritize recent opponents when multiple options exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1925:40

      1922 
      1923 beforeAll(async () => {
      1924   // Create test user
    → 1925   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      1923 |   beforeAll(async () => {
      1924 |     // Create test user
    > 1925 |     const testUser = await prisma.user.create({
           |                      ^
      1926 |       data: {
      1927 |         username: `pbt_recent_user_${Date.now()}`,
      1928 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1925:22)

  ● Tag Team Matchmaking Recent Opponent Deprioritization Property Tests › should deprioritize recent opponents when multiple options exist

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeamMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1966:31

      1963 
      1964 afterEach(async () => {
      1965   // Clean up after each test
    → 1966   await prisma.tagTeamMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1964 |   afterEach(async () => {
      1965 |     // Clean up after each test
    > 1966 |     await prisma.tagTeamMatch.deleteMany({
           |     ^
      1967 |       where: {
      1968 |         OR: [
      1969 |           { team1: { stableId: testUserId } },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1966:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:50:26

      47 
      48 afterAll(async () => {
      49   // Clean up test data
    → 50   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      48 |   afterAll(async () => {
      49 |     // Clean up test data
    > 50 |     await prisma.tagTeam.deleteMany({
         |     ^
      51 |       where: {
      52 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      53 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:50:5)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1214:26

      1211 
      1212 afterAll(async () => {
      1213   // Clean up test data
    → 1214   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1212 |   afterAll(async () => {
      1213 |     // Clean up test data
    > 1214 |     await prisma.tagTeam.deleteMany({
           |     ^
      1215 |       where: { stableId: testUserId },
      1216 |     });
      1217 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1214:5)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1505:26

      1502 
      1503 afterAll(async () => {
      1504   // Clean up test data
    → 1505   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1503 |   afterAll(async () => {
      1504 |     // Clean up test data
    > 1505 |     await prisma.tagTeam.deleteMany({
           |     ^
      1506 |       where: { stableId: testUserId },
      1507 |     });
      1508 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1505:5)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1691:26

      1688 
      1689 afterAll(async () => {
      1690   // Clean up test data
    → 1691   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1689 |   afterAll(async () => {
      1690 |     // Clean up test data
    > 1691 |     await prisma.tagTeam.deleteMany({
           |     ^
      1692 |       where: {
      1693 |         OR: [{ stableId: testUserId1 }, { stableId: testUserId2 }],
      1694 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1691:5)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeamMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamValidation.property.test.ts:1941:31

      1938 
      1939 afterAll(async () => {
      1940   // Clean up test data
    → 1941   await prisma.tagTeamMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      1939 |   afterAll(async () => {
      1940 |     // Clean up test data
    > 1941 |     await prisma.tagTeamMatch.deleteMany({
           |     ^
      1942 |       where: {
      1943 |         OR: [
      1944 |           { team1: { stableId: testUserId } },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamValidation.property.test.ts:1941:5)

FAIL tests/leagueInstanceService.test.ts
  ● League Instance Service › getInstancesForTier › should return empty array for tier with no robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getInstancesForTier › should return empty array for tier with no robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getInstancesForTier › should return instances sorted by instance number

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getInstancesForTier › should return instances sorted by instance number

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getInstancesForTier › should exclude bye-robot from instance counts

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getInstancesForTier › should exclude bye-robot from instance counts

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getLeagueInstanceStats › should calculate correct statistics

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getLeagueInstanceStats › should calculate correct statistics

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getLeagueInstanceStats › should detect when rebalancing is needed

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getLeagueInstanceStats › should detect when rebalancing is needed

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getLeagueInstanceStats › should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getLeagueInstanceStats › should detect rebalancing needed when single instance exceeds MAX_ROBOTS_PER_INSTANCE

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › assignLeagueInstance › should create first instance when none exist

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › assignLeagueInstance › should create first instance when none exist

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › assignLeagueInstance › should assign to instance with most free spots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › assignLeagueInstance › should assign to instance with most free spots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › assignLeagueInstance › should create new instance when all are full

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › assignLeagueInstance › should create new instance when all are full

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › rebalanceInstances › should not rebalance when instances are balanced

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › rebalanceInstances › should not rebalance when instances are balanced

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › rebalanceInstances › should rebalance when imbalance exceeds threshold

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › rebalanceInstances › should rebalance when imbalance exceeds threshold

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › getRobotsInInstance › should return robots in correct order

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › getRobotsInInstance › should return robots in correct order

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

  ● League Instance Service › moveRobotToInstance › should move robot to appropriate instance in new tier

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up test data
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up test data
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battle.deleteMany({});
      23 |     await prisma.robot.deleteMany({});
      24 |     await prisma.weaponInventory.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:21:5)

  ● League Instance Service › moveRobotToInstance › should move robot to appropriate instance in new tier

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/leagueInstanceService.test.ts:32:33

      29 
      30 afterEach(async () => {
      31   // Clean up after each test - delete all test data
    → 32   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      30 |   afterEach(async () => {
      31 |     // Clean up after each test - delete all test data
    > 32 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      33 |     await prisma.battleParticipant.deleteMany({});
      34 |     await prisma.battle.deleteMany({});
      35 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/leagueInstanceService.test.ts:32:5)

FAIL tests/trainingAcademyCaps.test.ts
  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should allow upgrading combatPower to level 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      83 |           });
      84 |
    > 85 |         expect(response.status).toBe(200);
         |                                 ^
      86 |       }
      87 |
      88 |       // Verify the robot is at level 10

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:85:33)

  ● Training Academy Cap Enforcement › Test 1: Base cap of 10 without any academy › should block upgrading combatPower from level 10 to level 11 without academy

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      106 |         .send({ attribute: 'combatPower' });
      107 |
    > 108 |       expect(response.status).toBe(400);
          |                               ^
      109 |       expect(response.body.error).toContain('Attribute cap of 10 reached');
      110 |       expect(response.body.error).toContain('Combat Training Academy');
      111 |     });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:108:31)

  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should allow upgrading combatPower to level 15 with academy level 1

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      137 |         .send({ attribute: 'combatPower' });
      138 |
    > 139 |       expect(response.status).toBe(200);
          |                               ^
      140 |
      141 |       // Verify the robot is at level 15
      142 |       const robot = await prisma.robot.findUnique({

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:139:31)

  ● Training Academy Cap Enforcement › Test 2: Academy Level 1 cap (15) › should block upgrading combatPower from level 15 to level 16

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      159 |         .send({ attribute: 'combatPower' });
      160 |
    > 161 |       expect(response.status).toBe(400);
          |                               ^
      162 |       expect(response.body.error).toContain('Attribute cap of 15 reached');
      163 |       expect(response.body.error).toContain('Combat Training Academy');
      164 |     });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:161:31)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Combat Training Academy for Combat Systems attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      189 |           .send({ attribute });
      190 |
    > 191 |         expect(response.status).toBe(400);
          |                                 ^
      192 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      193 |         expect(response.body.error).toContain('Combat Training Academy');
      194 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:191:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Defense Training Academy for Defensive Systems attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      217 |           .send({ attribute });
      218 |
    > 219 |         expect(response.status).toBe(400);
          |                                 ^
      220 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      221 |         expect(response.body.error).toContain('Defense Training Academy');
      222 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:219:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce Mobility Training Academy for Chassis & Mobility attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      245 |           .send({ attribute });
      246 |
    > 247 |         expect(response.status).toBe(400);
          |                                 ^
      248 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      249 |         expect(response.body.error).toContain('Mobility Training Academy');
      250 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:247:33)

  ● Training Academy Cap Enforcement › Test 3: All 4 academies control their respective attributes › should enforce AI Training Academy for AI Processing + Team attributes

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      275 |           .send({ attribute });
      276 |
    > 277 |         expect(response.status).toBe(400);
          |                                 ^
      278 |         expect(response.body.error).toContain('Attribute cap of 10 reached');
      279 |         expect(response.body.error).toContain('AI Training Academy');
      280 |       }

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:277:33)

  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should allow upgrading combatPower to level 50 with academy level 10

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

      307 |         .send({ attribute: 'combatPower' });
      308 |
    > 309 |       expect(response.status).toBe(200);
          |                               ^
      310 |
      311 |       // Verify the robot is at level 50
      312 |       const robot = await prisma.robot.findUnique({

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:309:31)

  ● Training Academy Cap Enforcement › Test 4: Maximum cap of 50 at academy level 10 › should block upgrading combatPower from level 50 to level 51

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

      329 |         .send({ attribute: 'combatPower' });
      330 |
    > 331 |       expect(response.status).toBe(400);
          |                               ^
      332 |       expect(response.body.error).toContain('maximum level');
      333 |     });
      334 |   });

      at Object.<anonymous> (tests/trainingAcademyCaps.test.ts:331:31)

FAIL tests/queryService.test.ts
  ● QueryService › queryEvents › should query events by cycle number

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by cycle range

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by user ID

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by robot ID

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by event type

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should query events by multiple event types

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should support pagination with limit and offset

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should support sorting by timestamp

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › queryEvents › should combine multiple filters

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByCycle › should get all events for a specific cycle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByUser › should get all events for a specific user

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByUser › should get user events within cycle range

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByRobot › should get all events for a specific robot

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventsByType › should get events by type

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getPaginatedEvents › should paginate events correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getEventStatistics › should calculate event statistics

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › getRecentEvents › should get most recent events

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

  ● QueryService › countEvents › should count events matching filters

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/queryService.test.ts:14:27

      11 
      12 beforeEach(async () => {
      13   // Clean up test data
    → 14   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |   beforeEach(async () => {
      13 |     // Clean up test data
    > 14 |     await prisma.auditLog.deleteMany({});
         |     ^
      15 |     testCycleNumbers = [];
      16 |   });
      17 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/queryService.test.ts:14:5)

FAIL tests/robotNameUniqueness.test.ts
  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should successfully create a robot with a unique name

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should successfully create a robot with a unique name

    TypeError: Cannot read properties of undefined (reading 'id')

      117 |       const robots = await prisma.robot.findMany({
      118 |         where: {
    > 119 |           userId: testUser.id,
          |                            ^
      120 |           name: robotName,
      121 |         },
      122 |       });

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should reject creating a robot with a duplicate name for the same user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should reject creating a robot with a duplicate name for the same user

    TypeError: Cannot read properties of undefined (reading 'id')

      117 |       const robots = await prisma.robot.findMany({
      118 |         where: {
    > 119 |           userId: testUser.id,
          |                            ^
      120 |           name: robotName,
      121 |         },
      122 |       });

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should allow different users to create robots with the same name

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should allow different users to create robots with the same name

    TypeError: Cannot read properties of undefined (reading 'id')

      117 |       const robots = await prisma.robot.findMany({
      118 |         where: {
    > 119 |           userId: testUser.id,
          |                            ^
      120 |           name: robotName,
      121 |         },
      122 |       });

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should handle case-sensitive name validation correctly

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Duplicate name validation › should handle case-sensitive name validation correctly

    TypeError: Cannot read properties of undefined (reading 'id')

      117 |       const robots = await prisma.robot.findMany({
      118 |         where: {
    > 119 |           userId: testUser.id,
          |                            ^
      120 |           name: robotName,
      121 |         },
      122 |       });

      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:119:28)

  ● Robot Name Uniqueness › POST /api/robots - Name validation › should reject empty robot names

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Name validation › should reject robot names longer than 50 characters

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

  ● Robot Name Uniqueness › POST /api/robots - Name validation › should accept robot names at the 50 character boundary

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      29 |
      30 |   beforeAll(async () => {
    > 31 |     await prisma.$connect();
         |     ^
      32 |     
      33 |     // Create a test user with sufficient currency for robot creation
      34 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/robotNameUniqueness.test.ts:31:5)

FAIL tests/integration/bronzeLeagueRebalancing.test.ts
  ● Bronze League Rebalancing - Integration Test › should correctly rebalance 331 robots from single bronze instance into multiple instances

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      20 |
      21 |   beforeAll(async () => {
    > 22 |     await prisma.$connect();
         |     ^
      23 |   });
      24 |
      25 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:22:5)

  ● Bronze League Rebalancing - Integration Test › should handle the scenario progressively over multiple cycles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      20 |
      21 |   beforeAll(async () => {
    > 22 |     await prisma.$connect();
         |     ^
      23 |   });
      24 |
      25 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/bronzeLeagueRebalancing.test.ts:22:5)

FAIL tests/tagTeams.test.ts
  ● Tag Teams API Endpoints › POST /api/tag-teams › should create a tag team with valid robots

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should create a tag team with valid robots

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with missing robot IDs

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with missing robot IDs

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with same robot in both positions

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject team creation with same robot in both positions

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject duplicate team creation

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › POST /api/tag-teams › should reject duplicate team creation

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should list all teams for the user

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should list all teams for the user

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:124:26

      121 
      122 afterEach(async () => {
      123   // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    → 124   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   afterEach(async () => {
      123 |     // Clean up test data between tests (keep user, robots, and weapons from beforeAll)
    > 124 |     await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
          |     ^
      125 |   });
      126 |
      127 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:124:5)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should include robot details and readiness status

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams › should reject request without authentication

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should get team details by ID

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request for non-existent team

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › GET /api/tag-teams/:id › should reject request with invalid team ID

    TypeError: Cannot read properties of undefined (reading 'id')

      246 |         where: { stableId: testUserId },
      247 |       });
    > 248 |       teamId = teams[0].id;
          |                         ^
      249 |     });
      250 |
      251 |     it('should get team details by ID', async () => {

      at Object.<anonymous> (tests/tagTeams.test.ts:248:25)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should disband a team

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should disband a team

    PrismaClientValidationError: 
    Invalid `prisma.tagTeam.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41

      283 
      284 beforeAll(async () => {
      285   // Create a team to delete
    → 286   const team = await prisma.tagTeam.create({
              data: {
                stableId: undefined,
                activeRobotId: undefined,
                reserveRobotId: undefined,
                tagTeamLeague: "bronze",
                tagTeamLeagueId: "bronze_1",
                tagTeamLeaguePoints: 0,
                cyclesInTagTeamLeague: 0,
                totalTagTeamWins: 0,
                totalTagTeamLosses: 0,
                totalTagTeamDraws: 0,
            +   stable: {
            +     create: UserCreateWithoutTagTeamsInput | UserUncheckedCreateWithoutTagTeamsInput,
            +     connectOrCreate: UserCreateOrConnectWithoutTagTeamsInput,
            +     connect: UserWhereUniqueInput
            +   }
              }
            })

    Argument `stable` is missing.

      284 |     beforeAll(async () => {
      285 |       // Create a team to delete
    > 286 |       const team = await prisma.tagTeam.create({
          |                    ^
      287 |         data: {
      288 |           stableId: testUserId,
      289 |           activeRobotId: robot2Id,

      at wn (node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request for non-existent team

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request for non-existent team

    PrismaClientValidationError: 
    Invalid `prisma.tagTeam.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41

      283 
      284 beforeAll(async () => {
      285   // Create a team to delete
    → 286   const team = await prisma.tagTeam.create({
              data: {
                stableId: undefined,
                activeRobotId: undefined,
                reserveRobotId: undefined,
                tagTeamLeague: "bronze",
                tagTeamLeagueId: "bronze_1",
                tagTeamLeaguePoints: 0,
                cyclesInTagTeamLeague: 0,
                totalTagTeamWins: 0,
                totalTagTeamLosses: 0,
                totalTagTeamDraws: 0,
            +   stable: {
            +     create: UserCreateWithoutTagTeamsInput | UserUncheckedCreateWithoutTagTeamsInput,
            +     connectOrCreate: UserCreateOrConnectWithoutTagTeamsInput,
            +     connect: UserWhereUniqueInput
            +   }
              }
            })

    Argument `stable` is missing.

      284 |     beforeAll(async () => {
      285 |       // Create a team to delete
    > 286 |       const team = await prisma.tagTeam.create({
          |                    ^
      287 |         data: {
      288 |           stableId: testUserId,
      289 |           activeRobotId: robot2Id,

      at wn (node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request with invalid team ID

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:24:36

      21 
      22 beforeAll(async () => {
      23   // Create test user
    → 24   const user = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      22 |   beforeAll(async () => {
      23 |     // Create test user
    > 24 |     const user = await prisma.user.create({
         |                  ^
      25 |       data: {
      26 |         username: `tagteam_test_${Date.now()}`,
      27 |         passwordHash: 'hashedpassword',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:24:18)

  ● Tag Teams API Endpoints › DELETE /api/tag-teams/:id › should reject request with invalid team ID

    PrismaClientValidationError: 
    Invalid `prisma.tagTeam.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:286:41

      283 
      284 beforeAll(async () => {
      285   // Create a team to delete
    → 286   const team = await prisma.tagTeam.create({
              data: {
                stableId: undefined,
                activeRobotId: undefined,
                reserveRobotId: undefined,
                tagTeamLeague: "bronze",
                tagTeamLeagueId: "bronze_1",
                tagTeamLeaguePoints: 0,
                cyclesInTagTeamLeague: 0,
                totalTagTeamWins: 0,
                totalTagTeamLosses: 0,
                totalTagTeamDraws: 0,
            +   stable: {
            +     create: UserCreateWithoutTagTeamsInput | UserUncheckedCreateWithoutTagTeamsInput,
            +     connectOrCreate: UserCreateOrConnectWithoutTagTeamsInput,
            +     connect: UserWhereUniqueInput
            +   }
              }
            })

    Argument `stable` is missing.

      284 |     beforeAll(async () => {
      285 |       // Create a team to delete
    > 286 |       const team = await prisma.tagTeam.create({
          |                    ^
      287 |         data: {
      288 |           stableId: testUserId,
      289 |           activeRobotId: robot2Id,

      at wn (node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:286:20)


  ● Test suite failed to run

    PrismaClientValidationError: 
    Invalid `prisma.user.delete()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeams.test.ts:132:29

      129 await prisma.tagTeam.deleteMany({ where: { stableId: testUserId } });
      130 await prisma.weaponInventory.deleteMany({ where: { userId: testUserId } });
      131 await prisma.robot.deleteMany({ where: { userId: testUserId } });
    → 132 await prisma.user.delete({
            where: {
              id: undefined,
          ?   username?: String,
          ?   stableName?: String,
          ?   AND?: UserWhereInput | UserWhereInput[],
          ?   OR?: UserWhereInput[],
          ?   NOT?: UserWhereInput | UserWhereInput[],
          ?   passwordHash?: StringFilter | String,
          ?   role?: StringFilter | String,
          ?   currency?: IntFilter | Int,
          ?   prestige?: IntFilter | Int,
          ?   championshipTitles?: IntFilter | Int,
          ?   profileVisibility?: StringFilter | String,
          ?   notificationsBattle?: BoolFilter | Boolean,
          ?   notificationsLeague?: BoolFilter | Boolean,
          ?   themePreference?: StringFilter | String,
          ?   createdAt?: DateTimeFilter | DateTime,
          ?   updatedAt?: DateTimeFilter | DateTime,
          ?   robots?: RobotListRelationFilter,
          ?   facilities?: FacilityListRelationFilter,
          ?   weaponInventory?: WeaponInventoryListRelationFilter,
          ?   tagTeams?: TagTeamListRelationFilter
            }
          })

    Argument `where` of type UserWhereUniqueInput needs at least one of `id`, `username` or `stableName` arguments. Available options are marked with ?.

      130 |     await prisma.weaponInventory.deleteMany({ where: { userId: testUserId } });
      131 |     await prisma.robot.deleteMany({ where: { userId: testUserId } });
    > 132 |     await prisma.user.delete({ where: { id: testUserId } });
          |     ^
      133 |     await prisma.$disconnect();
      134 |   });
      135 |

      at wn (node_modules/@prisma/client/runtime/library.js:29:1363)
      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:6958)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeams.test.ts:132:5)

FAIL tests/finances.test.ts
  ● Finances Routes › GET /api/finances/daily › should get daily financial report with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/daily › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/summary › should get financial summary with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/summary › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/operating-costs › should get operating costs with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/operating-costs › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/revenue-streams › should get revenue streams with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/revenue-streams › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/projections › should get financial projections with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/projections › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/per-robot › should get per-robot financial report with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › GET /api/finances/per-robot › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › POST /api/finances/roi-calculator › should return 400 without required fields

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › POST /api/finances/roi-calculator › should calculate ROI with valid data

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

  ● Finances Routes › POST /api/finances/roi-calculator › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |     
      27 |     // Create test user for this test suite
      28 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/finances.test.ts:25:5)

FAIL tests/battleEventLogging.test.ts
  ● Battle Event Logging Integration › should log battle_complete event when a battle is processed

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |
      22 |     // Create cycle metadata if it doesn't exist
      23 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:20:5)

  ● Battle Event Logging Integration › should log battle_complete event when a battle is processed

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:27

       98 
       99 afterEach(async () => {
      100   // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)
    → 101   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

       99 |   afterEach(async () => {
      100 |     // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)
    > 101 |     await prisma.auditLog.deleteMany({});
          |     ^
      102 |     await prisma.battleParticipant.deleteMany({});
      103 |     await prisma.battle.deleteMany({});
      104 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:101:5)

  ● Battle Event Logging Integration › should maintain Battle table records alongside event logs

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |
      22 |     // Create cycle metadata if it doesn't exist
      23 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:20:5)

  ● Battle Event Logging Integration › should maintain Battle table records alongside event logs

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:101:27

       98 
       99 afterEach(async () => {
      100   // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)
    → 101   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

       99 |   afterEach(async () => {
      100 |     // Clean up test data between tests (keep users, robots, and scheduled match from beforeAll)
    > 101 |     await prisma.auditLog.deleteMany({});
          |     ^
      102 |     await prisma.battleParticipant.deleteMany({});
      103 |     await prisma.battle.deleteMany({});
      104 |   });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:101:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleEventLogging.test.ts:108:27

      105 
      106 afterAll(async () => {
      107   // Final cleanup
    → 108   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      106 |   afterAll(async () => {
      107 |     // Final cleanup
    > 108 |     await prisma.auditLog.deleteMany({});
          |     ^
      109 |     await prisma.battleParticipant.deleteMany({});
      110 |     await prisma.battle.deleteMany({});
      111 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleEventLogging.test.ts:108:5)

FAIL tests/tournamentStreamingRevenue.test.ts
  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |
      16 |   beforeAll(async () => {
    > 17 |     await prisma.$connect();
         |     ^
      18 |
      19 |     // Create cycle metadata
      20 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should award streaming revenue to both participants in a tournament battle

    PrismaClientInitializationError: 
    Invalid `prisma.tournamentMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34

      80 
      81 afterEach(async () => {
      82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    → 83   await prisma.tournamentMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      81 |   afterEach(async () => {
      82 |     // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    > 83 |     await prisma.tournamentMatch.deleteMany({});
         |     ^
      84 |     await prisma.battleParticipant.deleteMany({});
      85 |     await prisma.battle.deleteMany({});
      86 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:83:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should not award streaming revenue for bye matches

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |
      16 |   beforeAll(async () => {
    > 17 |     await prisma.$connect();
         |     ^
      18 |
      19 |     // Create cycle metadata
      20 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:17:5)

  ● Tournament Streaming Revenue › Tournament Battle Streaming Revenue › should not award streaming revenue for bye matches

    PrismaClientInitializationError: 
    Invalid `prisma.tournamentMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:83:34

      80 
      81 afterEach(async () => {
      82   // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    → 83   await prisma.tournamentMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      81 |   afterEach(async () => {
      82 |     // Clean up test data between tests (but keep users, weapons, facilities, and tournament from beforeAll/first test)
    > 83 |     await prisma.tournamentMatch.deleteMany({});
         |     ^
      84 |     await prisma.battleParticipant.deleteMany({});
      85 |     await prisma.battle.deleteMany({});
      86 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:83:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tournamentMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tournamentStreamingRevenue.test.ts:103:34

      100 
      101 afterAll(async () => {
      102   // Final cleanup
    → 103   await prisma.tournamentMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      101 |   afterAll(async () => {
      102 |     // Final cleanup
    > 103 |     await prisma.tournamentMatch.deleteMany({});
          |     ^
      104 |     await prisma.battleParticipant.deleteMany({});
      105 |     await prisma.battle.deleteMany({});
      106 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tournamentStreamingRevenue.test.ts:103:5)

FAIL tests/tagTeamLeagueRebalancing.test.ts
  ● Tag Team League Rebalancing › determinePromotions › should return empty array for champion tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when fewer than 10 teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when no teams have 5+ cycles

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should promote top 10% of eligible teams with ≥25 league points

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should return empty array when no teams have ≥25 league points

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determinePromotions › should exclude teams in excludeTeamIds set

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should return empty array for bronze tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should return empty array when fewer than 10 teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should return empty array when no teams have 5+ cycles

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should demote bottom 10% of eligible teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › determineDemotions › should exclude teams in excludeTeamIds set

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › promoteTeam › should promote team from bronze to silver

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › promoteTeam › should promote team from silver to gold

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › promoteTeam › should throw error when promoting from champion tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › demoteTeam › should demote team from silver to bronze

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › demoteTeam › should demote team from gold to silver

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › demoteTeam › should throw error when demoting from bronze tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should handle empty league system

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should promote and demote teams across multiple tiers

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip tiers with insufficient teams

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › rebalanceTagTeamLeagues › should skip teams without 5+ cycles

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › Edge Cases › should handle exactly 10 teams (minimum for rebalancing)

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › Edge Cases › should handle 11 teams (10% rounds down to 1)

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

  ● Tag Team League Rebalancing › Edge Cases › should handle teams with same league points (tiebreaker)

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.test.ts:23:38

      20 testTeamIds = [];
      21 testRobotIds = [];
      22 
    → 23 const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |     testRobotIds = [];
      22 |     
    > 23 |     const stable = await prisma.user.create({
         |                    ^
      24 |       data: {
      25 |         username: `test_stable_${Date.now()}`,
      26 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.test.ts:23:20)

FAIL tests/eventLogger.test.ts
  ● EventLogger Service › Single Event Logging › should log a single event with correct sequence number

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:38:7)

  ● EventLogger Service › Single Event Logging › should log a single event with correct sequence number

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Single Event Logging › should increment sequence numbers correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:51:7)

  ● EventLogger Service › Single Event Logging › should increment sequence numbers correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Single Event Logging › should store userId and robotId when provided

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:70:7)

  ● EventLogger Service › Single Event Logging › should store userId and robotId when provided

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Single Event Logging › should store metadata when provided

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:94:7)

  ● EventLogger Service › Single Event Logging › should store metadata when provided

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Single Event Logging › should throw error for invalid payload

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Batch Event Logging › should log multiple events in a batch

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEventBatch (src/services/eventLogger.ts:236:30)
      at Object.<anonymous> (tests/eventLogger.test.ts:127:7)

  ● EventLogger Service › Batch Event Logging › should log multiple events in a batch

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Batch Event Logging › should handle empty batch gracefully

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:145:44

      142 
      143 await eventLogger.logEventBatch(testCycleNumber, []);
      144 
    → 145 const events = await prisma.auditLog.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      143 |       await eventLogger.logEventBatch(testCycleNumber, []);
      144 |
    > 145 |       const events = await prisma.auditLog.findMany({
          |                      ^
      146 |         where: { cycleNumber: testCycleNumber },
      147 |       });
      148 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:145:22)

  ● EventLogger Service › Batch Event Logging › should handle empty batch gracefully

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Batch Event Logging › should validate all payloads before inserting

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:164:50

      161 ).rejects.toThrow('Invalid payload');
      162 
      163 // Verify no events were inserted
    → 164 const storedEvents = await prisma.auditLog.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      162 |
      163 |       // Verify no events were inserted
    > 164 |       const storedEvents = await prisma.auditLog.findMany({
          |                            ^
      165 |         where: { cycleNumber: testCycleNumber },
      166 |       });
      167 |       expect(storedEvents).toHaveLength(0);

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:164:28)

  ● EventLogger Service › Batch Event Logging › should validate all payloads before inserting

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Cycle Event Helpers › should log cycle start event

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:175:7)

  ● EventLogger Service › Cycle Event Helpers › should log cycle start event

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Cycle Event Helpers › should log cycle step complete event

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logCycleStepComplete (src/services/eventLogger.ts:287:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:189:7)

  ● EventLogger Service › Cycle Event Helpers › should log cycle step complete event

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Cycle Event Helpers › should log cycle complete event and clear cache

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logCycleStart (src/services/eventLogger.ts:271:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:214:7)

  ● EventLogger Service › Cycle Event Helpers › should log cycle complete event and clear cache

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Facility Event Helpers › should log facility purchase

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:235:7)

  ● EventLogger Service › Facility Event Helpers › should log facility purchase

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Facility Event Helpers › should log facility upgrade

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logFacilityTransaction (src/services/eventLogger.ts:325:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:264:7)

  ● EventLogger Service › Facility Event Helpers › should log facility upgrade

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Economic Event Helpers › should log passive income

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logPassiveIncome (src/services/eventLogger.ts:354:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:295:7)

  ● EventLogger Service › Economic Event Helpers › should log passive income

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Economic Event Helpers › should log operating costs

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logOperatingCosts (src/services/eventLogger.ts:379:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:331:7)

  ● EventLogger Service › Economic Event Helpers › should log operating costs

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Economic Event Helpers › should log credit change

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logCreditChange (src/services/eventLogger.ts:401:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:349:7)

  ● EventLogger Service › Economic Event Helpers › should log credit change

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Economic Event Helpers › should log prestige change

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logPrestigeChange (src/services/eventLogger.ts:424:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:376:7)

  ● EventLogger Service › Economic Event Helpers › should log prestige change

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Weapon Event Helpers › should log weapon purchase

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logWeaponPurchase (src/services/eventLogger.ts:445:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:403:7)

  ● EventLogger Service › Weapon Event Helpers › should log weapon purchase

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Weapon Event Helpers › should log weapon sale

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logWeaponSale (src/services/eventLogger.ts:465:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:421:7)

  ● EventLogger Service › Weapon Event Helpers › should log weapon sale

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Robot Event Helpers › should log attribute upgrade

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at EventLogger.logAttributeUpgrade (src/services/eventLogger.ts:488:5)
      at Object.<anonymous> (tests/eventLogger.test.ts:441:7)

  ● EventLogger Service › Robot Event Helpers › should log attribute upgrade

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Sequence Number Management › should maintain separate sequence numbers per cycle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.findFirst()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/src/services/eventLogger.ts:122:45

      119 }
      120 
      121 // Query database for the highest sequence number in this cycle
    → 122 const lastEvent = await prisma.auditLog.findFirst(
    Too many database connections opened: FATAL: sorry, too many clients already

      120 |     
      121 |     // Query database for the highest sequence number in this cycle
    > 122 |     const lastEvent = await prisma.auditLog.findFirst({
          |                       ^
      123 |       where: { cycleNumber },
      124 |       orderBy: { sequenceNumber: 'desc' },
      125 |       select: { sequenceNumber: true },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at getNextSequenceNumber (src/services/eventLogger.ts:122:23)
      at EventLogger.logEvent (src/services/eventLogger.ts:181:28)
      at Object.<anonymous> (tests/eventLogger.test.ts:468:7)

  ● EventLogger Service › Sequence Number Management › should maintain separate sequence numbers per cycle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

  ● EventLogger Service › Sequence Number Management › should resume sequence numbers from database on restart

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:494:29

      491 
      492 it('should resume sequence numbers from database on restart', async () => {
      493   // Simulate existing events in database
    → 494   await prisma.auditLog.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      492 |     it('should resume sequence numbers from database on restart', async () => {
      493 |       // Simulate existing events in database
    > 494 |       await prisma.auditLog.create({
          |       ^
      495 |         data: {
      496 |           cycleNumber: testCycleNumber,
      497 |           eventType: EventType.CYCLE_START,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:494:7)

  ● EventLogger Service › Sequence Number Management › should resume sequence numbers from database on restart

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up audit logs for this test's cycle number
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up audit logs for this test's cycle number
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: { cycleNumber: testCycleNumber },
      25 |     });
      26 |     // Clear sequence cache

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.test.ts:23:5)

FAIL tests/battleOrchestrator.test.ts
  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for equal-rated players

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for equal-rated players

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › calculateELOChange › should give smaller ELO gain when favorite wins

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › calculateELOChange › should give smaller ELO gain when favorite wins

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › calculateELOChange › should give larger ELO gain when underdog wins

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › calculateELOChange › should give larger ELO gain when underdog wins

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for draw

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › calculateELOChange › should calculate ELO changes for draw

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › processBattle › should execute a battle and create records

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › processBattle › should execute a battle and create records

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › processBattle › should handle bye-robot battles correctly

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › processBattle › should handle bye-robot battles correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › processBattle › should increment kills when a robot destroys its opponent

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › processBattle › should increment kills when a robot destroys its opponent

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › executeScheduledBattles › should execute multiple scheduled battles

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › executeScheduledBattles › should execute multiple scheduled battles

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should calculate and award streaming revenue after battle

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should calculate and award streaming revenue after battle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should not award streaming revenue for bye matches

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should not award streaming revenue for bye matches

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should add streaming revenue to audit log

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should add streaming revenue to audit log

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should log streaming revenue to terminal

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order to respect foreign key constraints
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order to respect foreign key constraints
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.tagTeamMatch.deleteMany({}); // Delete tag team matches before tag teams
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeam.deleteMany({}); // Delete tag teams before robots

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:21:5)

  ● Battle Orchestrator › Streaming Revenue Integration › should log streaming revenue to terminal

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:58:27

      55 
      56 afterEach(async () => {
      57   // Clean up test data between tests
    → 58   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up test data between tests
    > 58 |     await prisma.auditLog.deleteMany({});
         |     ^
      59 |     await prisma.battleParticipant.deleteMany({});
      60 |     await prisma.battle.deleteMany({});
      61 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:58:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/battleOrchestrator.test.ts:79:27

      76 
      77 afterAll(async () => {
      78   // Final cleanup
    → 79   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      77 |   afterAll(async () => {
      78 |     // Final cleanup
    > 79 |     await prisma.auditLog.deleteMany({});
         |     ^
      80 |     await prisma.battleParticipant.deleteMany({});
      81 |     await prisma.battle.deleteMany({});
      82 |     await prisma.scheduledMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/battleOrchestrator.test.ts:79:5)

FAIL tests/matchmakingService.test.ts
  ● Matchmaking Service › checkBattleReadiness › should mark robot as ready when HP >= 75% and weapon equipped

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP < 75%

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when HP is at or below yield threshold

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › checkBattleReadiness › should mark robot as not ready when weapon not equipped

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › checkBattleReadiness › should check dual wield loadout correctly

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmakingForTier › should create matches for available robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmakingForTier › should create bye-match for odd number of robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmakingForTier › should not create duplicate matches for already scheduled robots

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmakingForTier › should skip robots that are not battle-ready

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

  ● Matchmaking Service › runMatchmaking (all tiers) › should run matchmaking across all tiers

    PrismaClientInitializationError: 
    Invalid `prisma.scheduledMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/matchmakingService.test.ts:21:33

      18 
      19 beforeAll(async () => {
      20   // Clean up in correct order
    → 21   await prisma.scheduledMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      19 |   beforeAll(async () => {
      20 |     // Clean up in correct order
    > 21 |     await prisma.scheduledMatch.deleteMany({});
         |     ^
      22 |     await prisma.battleParticipant.deleteMany({});
      23 |     await prisma.battle.deleteMany({});
      24 |     await prisma.tagTeamMatch.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/matchmakingService.test.ts:21:5)

FAIL tests/cycleSummaryStreamingRevenue.property.test.ts
  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should include totalStreamingRevenue property in battle execution summary

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:37

      91 
      92 beforeAll(async () => {
      93   // Create test users
    → 94   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      92 |   beforeAll(async () => {
      93 |     // Create test users
    > 94 |     const user1 = await prisma.user.create({
         |                   ^
      95 |       data: {
      96 |         username: `test_cycle_summary_user1_${Date.now()}`,
      97 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:94:19)

  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should include totalStreamingRevenue property in battle execution summary

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.findUnique()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:49

      114 
      115 afterEach(async () => {
      116   // Get current cycle number for clearing cache
    → 117   const metadata = await prisma.cycleMetadata.findUnique(
    Too many database connections opened: FATAL: sorry, too many clients already

      115 |   afterEach(async () => {
      116 |     // Get current cycle number for clearing cache
    > 117 |     const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });
          |                      ^
      118 |     const cycleNumber = metadata?.totalCycles || 0;
      119 |     clearSequenceCache(cycleNumber);
      120 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:117:22)

  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should show ₡0 streaming revenue when no battles occurred

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:94:37

      91 
      92 beforeAll(async () => {
      93   // Create test users
    → 94   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      92 |   beforeAll(async () => {
      93 |     // Create test users
    > 94 |     const user1 = await prisma.user.create({
         |                   ^
      95 |       data: {
      96 |         username: `test_cycle_summary_user1_${Date.now()}`,
      97 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:94:19)

  ● Property 16: Cycle Summary Includes Total Streaming Revenue › should show ₡0 streaming revenue when no battles occurred

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.findUnique()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:117:49

      114 
      115 afterEach(async () => {
      116   // Get current cycle number for clearing cache
    → 117   const metadata = await prisma.cycleMetadata.findUnique(
    Too many database connections opened: FATAL: sorry, too many clients already

      115 |   afterEach(async () => {
      116 |     // Get current cycle number for clearing cache
    > 117 |     const metadata = await prisma.cycleMetadata.findUnique({ where: { id: 1 } });
          |                      ^
      118 |     const cycleNumber = metadata?.totalCycles || 0;
      119 |     clearSequenceCache(cycleNumber);
      120 |

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:117:22)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSummaryStreamingRevenue.property.test.ts:167:23

      164 
      165 afterAll(async () => {
      166   // Final cleanup of users
    → 167   await prisma.user.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      165 |   afterAll(async () => {
      166 |     // Final cleanup of users
    > 167 |     await prisma.user.deleteMany({
          |     ^
      168 |       where: {
      169 |         OR: [{ id: testUserId1 }, { id: testUserId2 }],
      170 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSummaryStreamingRevenue.property.test.ts:167:5)

FAIL tests/cycleExecutionTiming.test.ts
  ● Cycle Execution Timing › logCycleStart › should log cycle start with manual trigger type

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleStart › should log cycle start with scheduled trigger type

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleStepComplete › should log cycle step completion with duration

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleStepComplete › should log multiple cycle steps in sequence

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleStepComplete › should handle empty summary object

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › logCycleComplete › should log cycle completion with total duration

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Complete cycle timing flow › should log complete cycle with start, steps, and complete events

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Complete cycle timing flow › should maintain sequence number ordering within cycle

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Step duration recording › should record accurate step durations

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Step duration recording › should sum step durations approximately equal to total cycle duration

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Trigger type recording › should record manual trigger type correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

  ● Cycle Execution Timing › Trigger type recording › should record scheduled trigger type correctly

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleExecutionTiming.test.ts:20:27

      17 
      18 beforeEach(async () => {
      19   // Clean up audit logs
    → 20   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      18 |   beforeEach(async () => {
      19 |     // Clean up audit logs
    > 20 |     await prisma.auditLog.deleteMany({});
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleExecutionTiming.test.ts:20:5)

FAIL tests/tagTeamService.test.ts
  ● TagTeamService › validateTeam › should validate a team with two ready robots from same stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should validate a team with two ready robots from same stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should reject robots from different stables

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should reject robots from different stables

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should reject team with unready robot (low HP)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should reject team with unready robot (low HP)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should reject duplicate teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should reject duplicate teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should reject duplicate teams in reverse order

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should reject duplicate teams in reverse order

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › validateTeam › should enforce roster limit (max teams = roster size / 2)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › validateTeam › should enforce roster limit (max teams = roster size / 2)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › createTeam › should create a valid team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › createTeam › should create a valid team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › createTeam › should place new teams in Bronze league with initial values

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › createTeam › should place new teams in Bronze league with initial values

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › createTeam › should return errors for invalid team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › createTeam › should return errors for invalid team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › createTeam › should reject team creation if user does not own robots

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › createTeam › should reject team creation if user does not own robots

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamById › should retrieve a team by ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamById › should retrieve a team by ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamById › should include robot details in response

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamById › should include robot details in response

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamById › should return null for non-existent team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamById › should return null for non-existent team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamsByStable › should retrieve all teams for a stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamsByStable › should retrieve all teams for a stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamsByStable › should include robot details for all teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamsByStable › should include robot details for all teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › getTeamsByStable › should return empty array for stable with no teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › getTeamsByStable › should return empty array for stable with no teams

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › disbandTeam › should disband a team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › disbandTeam › should disband a team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › disbandTeam › should reject disbanding team from wrong stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › disbandTeam › should reject disbanding team from wrong stable

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › disbandTeam › should return false for non-existent team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › disbandTeam › should return false for non-existent team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)

  ● TagTeamService › disbandTeam › should make robots available for new teams after disbanding

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |   });
      27 |
      28 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:25:5)

  ● TagTeamService › disbandTeam › should make robots available for new teams after disbanding

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      89 |
      90 |   beforeAll(async () => {
    > 91 |     await prisma.$connect();
         |     ^
      92 |     
      93 |     // Create test user
      94 |     const testUser = await prisma.user.create({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamService.test.ts:91:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamService.test.ts:226:26

      223 
      224 afterAll(async () => {
      225   // Clean up test data
    → 226   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      224 |   afterAll(async () => {
      225 |     // Clean up test data
    > 226 |     await prisma.tagTeam.deleteMany({
          |     ^
      227 |       where: {
      228 |         OR: [{ stableId: testUserId }, { stableId: otherUserId }],
      229 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamService.test.ts:226:5)

FAIL tests/tagTeamLeagueStandings.property.test.ts
  ● Tag Team League Standings Property Tests › should maintain independent 1v1 and tag team league standings

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test user
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test user
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_standings_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)

  ● Tag Team League Standings Property Tests › should maintain independent 1v1 and tag team league standings

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26

      55 
      56 afterEach(async () => {
      57   // Clean up teams and robots after each test
    → 58   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up teams and robots after each test
    > 58 |     await prisma.tagTeam.deleteMany({
         |     ^
      59 |       where: { stableId: testUserId },
      60 |     });
      61 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)

  ● Tag Team League Standings Property Tests › should not affect robot 1v1 standings when tag team league changes

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test user
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test user
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_standings_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)

  ● Tag Team League Standings Property Tests › should not affect robot 1v1 standings when tag team league changes

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26

      55 
      56 afterEach(async () => {
      57   // Clean up teams and robots after each test
    → 58   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up teams and robots after each test
    > 58 |     await prisma.tagTeam.deleteMany({
         |     ^
      59 |       where: { stableId: testUserId },
      60 |     });
      61 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)

  ● Tag Team League Standings Property Tests › should allow robots with different 1v1 leagues to be in the same tag team

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:25:40

      22 
      23 beforeAll(async () => {
      24   // Create test user
    → 25   const testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   beforeAll(async () => {
      24 |     // Create test user
    > 25 |     const testUser = await prisma.user.create({
         |                      ^
      26 |       data: {
      27 |         username: `pbt_standings_user_${Date.now()}`,
      28 |         passwordHash: 'test_hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:25:22)

  ● Tag Team League Standings Property Tests › should allow robots with different 1v1 leagues to be in the same tag team

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:58:26

      55 
      56 afterEach(async () => {
      57   // Clean up teams and robots after each test
    → 58   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      56 |   afterEach(async () => {
      57 |     // Clean up teams and robots after each test
    > 58 |     await prisma.tagTeam.deleteMany({
         |     ^
      59 |       where: { stableId: testUserId },
      60 |     });
      61 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:58:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueStandings.property.test.ts:41:26

      38 
      39 afterAll(async () => {
      40   // Clean up test data
    → 41   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      39 |   afterAll(async () => {
      40 |     // Clean up test data
    > 41 |     await prisma.tagTeam.deleteMany({
         |     ^
      42 |       where: { stableId: testUserId },
      43 |     });
      44 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueStandings.property.test.ts:41:5)

FAIL tests/tagTeamDatabaseSchema.test.ts
  ● Tag Team Database Schema Verification › TagTeam Model › should have all required fields

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      11 |     it('should have all required fields', async () => {
      12 |       // Query the information schema to verify table structure
    > 13 |       const columns = await prisma.$queryRaw<any[]>`
         |                       ^
      14 |         SELECT column_name, data_type, is_nullable, column_default
      15 |         FROM information_schema.columns
      16 |         WHERE table_name = 'tag_teams'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:13:23)

  ● Tag Team Database Schema Verification › TagTeam Model › should have all required indexes

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      37 |
      38 |     it('should have all required indexes', async () => {
    > 39 |       const indexes = await prisma.$queryRaw<any[]>`
         |                       ^
      40 |         SELECT indexname, indexdef
      41 |         FROM pg_indexes
      42 |         WHERE tablename = 'tag_teams';

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:39:23)

  ● Tag Team Database Schema Verification › TagTeam Model › should have unique constraint on robot pair

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      56 |     it('should have unique constraint on robot pair', async () => {
      57 |       // The unique constraint is implemented as a unique index
    > 58 |       const indexes = await prisma.$queryRaw<any[]>`
         |                       ^
      59 |         SELECT indexname, indexdef
      60 |         FROM pg_indexes
      61 |         WHERE tablename = 'tag_teams'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:58:23)

  ● Tag Team Database Schema Verification › TagTeam Model › should have check constraint for different robots

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      68 |
      69 |     it('should have check constraint for different robots', async () => {
    > 70 |       const constraints = await prisma.$queryRaw<any[]>`
         |                           ^
      71 |         SELECT conname, contype
      72 |         FROM pg_constraint
      73 |         WHERE conrelid = 'tag_teams'::regclass

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:70:27)

  ● Tag Team Database Schema Verification › TagTeamMatch Model › should have all required fields

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      82 |   describe('TagTeamMatch Model', () => {
      83 |     it('should have all required fields', async () => {
    > 84 |       const columns = await prisma.$queryRaw<any[]>`
         |                       ^
      85 |         SELECT column_name, data_type, is_nullable, column_default
      86 |         FROM information_schema.columns
      87 |         WHERE table_name = 'tag_team_matches'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:84:23)

  ● Tag Team Database Schema Verification › TagTeamMatch Model › should have all required indexes

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      103 |
      104 |     it('should have all required indexes', async () => {
    > 105 |       const indexes = await prisma.$queryRaw<any[]>`
          |                       ^
      106 |         SELECT indexname, indexdef
      107 |         FROM pg_indexes
      108 |         WHERE tablename = 'tag_team_matches';

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:105:23)

  ● Tag Team Database Schema Verification › Battle Model Extensions › should have tag team fields

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      122 |   describe('Battle Model Extensions', () => {
      123 |     it('should have tag team fields', async () => {
    > 124 |       const columns = await prisma.$queryRaw<any[]>`
          |                       ^
      125 |         SELECT column_name, data_type, is_nullable
      126 |         FROM information_schema.columns
      127 |         WHERE table_name = 'battles'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:124:23)

  ● Tag Team Database Schema Verification › Battle Model Extensions › should have battle_type index

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      150 |
      151 |     it('should have battle_type index', async () => {
    > 152 |       const indexes = await prisma.$queryRaw<any[]>`
          |                       ^
      153 |         SELECT indexname, indexdef
      154 |         FROM pg_indexes
      155 |         WHERE tablename = 'battles'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:152:23)

  ● Tag Team Database Schema Verification › Robot Model Extensions › should have tag team statistics fields

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      163 |   describe('Robot Model Extensions', () => {
      164 |     it('should have tag team statistics fields', async () => {
    > 165 |       const columns = await prisma.$queryRaw<any[]>`
          |                       ^
      166 |         SELECT column_name, data_type, is_nullable, column_default
      167 |         FROM information_schema.columns
      168 |         WHERE table_name = 'robots'

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:165:23)

  ● Tag Team Database Schema Verification › Foreign Key Constraints › should have all TagTeam foreign keys

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      196 |   describe('Foreign Key Constraints', () => {
      197 |     it('should have all TagTeam foreign keys', async () => {
    > 198 |       const foreignKeys = await prisma.$queryRaw<any[]>`
          |                           ^
      199 |         SELECT
      200 |           tc.constraint_name,
      201 |           kcu.column_name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:198:27)

  ● Tag Team Database Schema Verification › Foreign Key Constraints › should have all TagTeamMatch foreign keys

    PrismaClientInitializationError: 
    Invalid `prisma.$queryRaw()` invocation:


    Too many database connections opened: FATAL: sorry, too many clients already

      219 |
      220 |     it('should have all TagTeamMatch foreign keys', async () => {
    > 221 |       const foreignKeys = await prisma.$queryRaw<any[]>`
          |                           ^
      222 |         SELECT
      223 |           tc.constraint_name,
      224 |           kcu.column_name,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamDatabaseSchema.test.ts:221:27)

FAIL tests/tagTeamLeagueRebalancing.property.test.ts
  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › promotion resets league points and cycles to 0

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › demotion resets league points and cycles to 0

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › tier change resets work across all valid tier transitions

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › reset applies regardless of initial values magnitude

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

  ● Tag Team League Rebalancing - Property Tests › Property 20: Tier Change Resets › reset applies even when initial values are already 0

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueRebalancing.property.test.ts:22:38

      19 
      20 beforeAll(async () => {
      21   // Create a test stable
    → 22   const stable = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      20 |   beforeAll(async () => {
      21 |     // Create a test stable
    > 22 |     const stable = await prisma.user.create({
         |                    ^
      23 |       data: {
      24 |         username: `pbt_rebalance_${Date.now()}`,
      25 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueRebalancing.property.test.ts:22:20)

FAIL tests/integration/tagTeamLeagueRebalancing.test.ts
  ● Tag Team League Rebalancing Integration Test › should promote top 10% and demote bottom 10% with varying league points

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |
      27 |     // Get a weapon for robots
      28 |     const weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)

  ● Tag Team League Rebalancing Integration Test › should not promote/demote teams with < 5 cycles in tier

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |
      27 |     // Get a weapon for robots
      28 |     const weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)

  ● Tag Team League Rebalancing Integration Test › should handle demotion from silver to bronze

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |
      27 |     // Get a weapon for robots
      28 |     const weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)

  ● Tag Team League Rebalancing Integration Test › should handle minimum team count for rebalancing (< 10 teams)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      23 |
      24 |   beforeAll(async () => {
    > 25 |     await prisma.$connect();
         |     ^
      26 |
      27 |     // Get a weapon for robots
      28 |     const weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:25:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeam.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/integration/tagTeamLeagueRebalancing.test.ts:88:26

      85 
      86 afterAll(async () => {
      87   // Clean up in correct dependency order
    → 88   await prisma.tagTeam.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      86 |   afterAll(async () => {
      87 |     // Clean up in correct dependency order
    > 88 |     await prisma.tagTeam.deleteMany({
         |     ^
      89 |       where: {
      90 |         id: { in: testTeams.map(t => t.id) },
      91 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/integration/tagTeamLeagueRebalancing.test.ts:88:5)

FAIL tests/twoRobotTagTeamGeneration.test.ts
  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      11 | describe('Two-Robot Specialist Tag Team Generation', () => {
      12 |   beforeAll(async () => {
    > 13 |     await prisma.$connect();
         |     ^
      14 |     
      15 |     // Ensure weapons exist
      16 |     const practiceSword = await prisma.weapon.findFirst({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)

  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist archetype (cycle 4, position 9)

    PrismaClientInitializationError: 
    Invalid `prisma.user.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46

      24 
      25 afterEach(async () => {
      26   // Clean up archetype users and their data after each test
    → 27   const archetypeUsers = await prisma.user.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      25 |   afterEach(async () => {
      26 |     // Clean up archetype users and their data after each test
    > 27 |     const archetypeUsers = await prisma.user.findMany({
         |                            ^
      28 |       where: { username: { startsWith: 'archetype_' } },
      29 |       select: { id: true },
      30 |     });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)

  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      11 | describe('Two-Robot Specialist Tag Team Generation', () => {
      12 |   beforeAll(async () => {
    > 13 |     await prisma.$connect();
         |     ^
      14 |     
      15 |     // Ensure weapons exist
      16 |     const practiceSword = await prisma.weapon.findFirst({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)

  ● Two-Robot Specialist Tag Team Generation › should create tag team for Two-Robot Specialist in cycle 1 (position 9 wraps to cycle 10)

    PrismaClientInitializationError: 
    Invalid `prisma.user.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46

      24 
      25 afterEach(async () => {
      26   // Clean up archetype users and their data after each test
    → 27   const archetypeUsers = await prisma.user.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      25 |   afterEach(async () => {
      26 |     // Clean up archetype users and their data after each test
    > 27 |     const archetypeUsers = await prisma.user.findMany({
         |                            ^
      28 |       where: { username: { startsWith: 'archetype_' } },
      29 |       select: { id: true },
      30 |     });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)

  ● Two-Robot Specialist Tag Team Generation › should not create tag teams for single-robot archetypes

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      11 | describe('Two-Robot Specialist Tag Team Generation', () => {
      12 |   beforeAll(async () => {
    > 13 |     await prisma.$connect();
         |     ^
      14 |     
      15 |     // Ensure weapons exist
      16 |     const practiceSword = await prisma.weapon.findFirst({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)

  ● Two-Robot Specialist Tag Team Generation › should not create tag teams for single-robot archetypes

    PrismaClientInitializationError: 
    Invalid `prisma.user.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46

      24 
      25 afterEach(async () => {
      26   // Clean up archetype users and their data after each test
    → 27   const archetypeUsers = await prisma.user.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      25 |   afterEach(async () => {
      26 |     // Clean up archetype users and their data after each test
    > 27 |     const archetypeUsers = await prisma.user.findMany({
         |                            ^
      28 |       where: { username: { startsWith: 'archetype_' } },
      29 |       select: { id: true },
      30 |     });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)

  ● Two-Robot Specialist Tag Team Generation › should create tag teams with correct robot assignments

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      11 | describe('Two-Robot Specialist Tag Team Generation', () => {
      12 |   beforeAll(async () => {
    > 13 |     await prisma.$connect();
         |     ^
      14 |     
      15 |     // Ensure weapons exist
      16 |     const practiceSword = await prisma.weapon.findFirst({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:13:5)

  ● Two-Robot Specialist Tag Team Generation › should create tag teams with correct robot assignments

    PrismaClientInitializationError: 
    Invalid `prisma.user.findMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/twoRobotTagTeamGeneration.test.ts:27:46

      24 
      25 afterEach(async () => {
      26   // Clean up archetype users and their data after each test
    → 27   const archetypeUsers = await prisma.user.findMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      25 |   afterEach(async () => {
      26 |     // Clean up archetype users and their data after each test
    > 27 |     const archetypeUsers = await prisma.user.findMany({
         |                            ^
      28 |       where: { username: { startsWith: 'archetype_' } },
      29 |       select: { id: true },
      30 |     });

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/twoRobotTagTeamGeneration.test.ts:27:28)

FAIL tests/integration/tagTeamAutoRepair.test.ts
  ● Tag Team Auto-Repair Integration Test › should auto-repair damaged robots before battle and deduct costs

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Get a weapon for robots
      30 |     weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:27:5)

  ● Tag Team Auto-Repair Integration Test › should allow users to go into negative currency for repairs

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Get a weapon for robots
      30 |     weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamAutoRepair.test.ts:27:5)

FAIL tests/tagTeamStreamingRevenue.test.ts
  ● Tag Team Streaming Revenue Integration › should calculate and award streaming revenue for Tag Team battles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |
      31 |     // Get a weapon for robots
      32 |     weapon = await prisma.weapon.findFirst();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/tagTeamStreamingRevenue.test.ts:29:5)

  ● Tag Team Streaming Revenue Integration › should calculate and award streaming revenue for Tag Team battles

    PrismaClientInitializationError: 
    Invalid `prisma.tagTeamMatch.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamStreamingRevenue.test.ts:119:31

      116 
      117 afterEach(async () => {
      118   // Clean up test data between tests (keep users and weapons from beforeAll)
    → 119   await prisma.tagTeamMatch.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      117 |   afterEach(async () => {
      118 |     // Clean up test data between tests (keep users and weapons from beforeAll)
    > 119 |     await prisma.tagTeamMatch.deleteMany({});
          |     ^
      120 |     await prisma.battleParticipant.deleteMany({});
      121 |     await prisma.battle.deleteMany({});
      122 |     await prisma.tagTeam.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamStreamingRevenue.test.ts:119:5)

FAIL tests/integration/tagTeamMultiMatchCycle.test.ts
  ● Tag Team Multi-Match Cycle Integration Test › should handle robot in both 1v1 and tag team match with cumulative damage

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)
      30 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)

  ● Tag Team Multi-Match Cycle Integration Test › should exclude unready robots from tag team match after 1v1 damage

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)
      30 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)

  ● Tag Team Multi-Match Cycle Integration Test › should process matches in correct order: 1v1 first, then tag team

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Initialize cycle metadata to odd cycle (so tag team matchmaking runs)
      30 |     await prisma.cycleMetadata.upsert({

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/integration/tagTeamMultiMatchCycle.test.ts:27:5)

FAIL tests/prestigeGates.test.ts
  ● Prestige Gates › Facility Config Prestige Requirements › Income Generator has correct prestige requirements

    expect(received).toBeDefined()

    Received: undefined

      89 |     test('Income Generator has correct prestige requirements', () => {
      90 |       const config = getFacilityConfig('income_generator');
    > 91 |       expect(config).toBeDefined();
         |                      ^
      92 |       expect(config?.prestigeRequirements).toEqual([0, 0, 0, 3000, 0, 0, 7500, 0, 15000, 0]);
      93 |     });
      94 |

      at Object.<anonymous> (tests/prestigeGates.test.ts:91:22)

FAIL tests/cycleCsvStreamingRevenue.property.test.ts
  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming_revenue column in CSV export

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37

      92 
      93 beforeAll(async () => {
      94   // Create test users
    → 95   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      93 |   beforeAll(async () => {
      94 |     // Create test users
    > 95 |     const user1 = await prisma.user.create({
         |                   ^
      96 |       data: {
      97 |         username: `test_csv_user1_${Date.now()}`,
      98 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming_revenue column in CSV export

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27

      129 
      130 // Cleanup - delete in correct order to avoid foreign key constraints
      131 // Clean up audit log entries for this test cycle
    → 132 await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      130 |     // Cleanup - delete in correct order to avoid foreign key constraints
      131 |     // Clean up audit log entries for this test cycle
    > 132 |     await prisma.auditLog.deleteMany({
          |     ^
      133 |       where: {
      134 |         cycleNumber: {
      135 |           gte: testCycleNumber,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should show ₡0 for bye matches in CSV

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37

      92 
      93 beforeAll(async () => {
      94   // Create test users
    → 95   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      93 |   beforeAll(async () => {
      94 |     // Create test users
    > 95 |     const user1 = await prisma.user.create({
         |                   ^
      96 |       data: {
      97 |         username: `test_csv_user1_${Date.now()}`,
      98 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should show ₡0 for bye matches in CSV

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27

      129 
      130 // Cleanup - delete in correct order to avoid foreign key constraints
      131 // Clean up audit log entries for this test cycle
    → 132 await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      130 |     // Cleanup - delete in correct order to avoid foreign key constraints
      131 |     // Clean up audit log entries for this test cycle
    > 132 |     await prisma.auditLog.deleteMany({
          |     ^
      133 |       where: {
      134 |         cycleNumber: {
      135 |           gte: testCycleNumber,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming revenue for both winner and loser

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:95:37

      92 
      93 beforeAll(async () => {
      94   // Create test users
    → 95   const user1 = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      93 |   beforeAll(async () => {
      94 |     // Create test users
    > 95 |     const user1 = await prisma.user.create({
         |                   ^
      96 |       data: {
      97 |         username: `test_csv_user1_${Date.now()}`,
      98 |         passwordHash: 'test',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:95:19)

  ● Property 15: Cycle CSV Contains Streaming Revenue Column › should include streaming revenue for both winner and loser

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:132:27

      129 
      130 // Cleanup - delete in correct order to avoid foreign key constraints
      131 // Clean up audit log entries for this test cycle
    → 132 await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      130 |     // Cleanup - delete in correct order to avoid foreign key constraints
      131 |     // Clean up audit log entries for this test cycle
    > 132 |     await prisma.auditLog.deleteMany({
          |     ^
      133 |       where: {
      134 |         cycleNumber: {
      135 |           gte: testCycleNumber,

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:132:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleCsvStreamingRevenue.property.test.ts:185:23

      182 
      183 afterAll(async () => {
      184   // Final cleanup of users
    → 185   await prisma.user.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      183 |   afterAll(async () => {
      184 |     // Final cleanup of users
    > 185 |     await prisma.user.deleteMany({
          |     ^
      186 |       where: {
      187 |         OR: [{ id: testUserId1 }, { id: testUserId2 }],
      188 |       },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleCsvStreamingRevenue.property.test.ts:185:5)

FAIL tests/streamingStudioPrestigeValidation.test.ts
  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 1 with 0 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 2 with 0 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Levels 1-3: No prestige required › should allow upgrade to Level 3 with 0 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should block upgrade to Level 4 with insufficient prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should allow upgrade to Level 4 with exactly 1,000 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 4: Requires 1,000 prestige › should allow upgrade to Level 4 with more than 1,000 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 5: Requires 2,500 prestige › should block upgrade to Level 5 with insufficient prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Level 5: Requires 2,500 prestige › should allow upgrade to Level 5 with sufficient prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 5,000 prestige for Level 6

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 10,000 prestige for Level 7

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 15,000 prestige for Level 8

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 25,000 prestige for Level 9

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should enforce 50,000 prestige for Level 10

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Higher levels: Progressive prestige requirements › should allow upgrade to Level 10 with 50,000 prestige

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

  ● Streaming Studio Prestige Validation › Error message format › should display error message with required prestige amount

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      30 |
      31 |   beforeAll(async () => {
    > 32 |     await prisma.$connect();
         |     ^
      33 |   });
      34 |
      35 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/streamingStudioPrestigeValidation.test.ts:32:5)

FAIL tests/tagTeamLeagueInstanceService.test.ts
  ● TagTeamLeagueInstanceService › getInstancesForTier › should return empty array when no teams exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getInstancesForTier › should return instances with correct team counts

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getInstancesForTier › should sort instances by instance number

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should create first instance when none exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should assign to instance with most free spots

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › assignTagTeamLeagueInstance › should create new instance when all are full

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should not rebalance when instances are balanced

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › rebalanceTagTeamInstances › should rebalance when deviation exceeds threshold

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getTeamsInInstance › should return teams sorted by league points

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › moveTeamToInstance › should move team to appropriate instance in new tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should return empty array when no teams exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should sort teams by league points descending

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should use combined ELO as tiebreaker when league points are equal

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForInstance › should include robot details in standings

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForTier › should return empty array when no teams exist

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForTier › should include teams from all instances in the tier

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

  ● TagTeamLeagueInstanceService › getStandingsForTier › should sort by league points then ELO across all instances

    PrismaClientInitializationError: 
    Invalid `prisma.user.create()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/tagTeamLeagueInstanceService.test.ts:62:34

      59 testTagTeamIds = [];
      60 
      61 // Create test user
    → 62 testUser = await prisma.user.create(
    Too many database connections opened: FATAL: sorry, too many clients already

      60 |
      61 |     // Create test user
    > 62 |     testUser = await prisma.user.create({
         |                ^
      63 |       data: {
      64 |         username: `testuser_${Date.now()}`,
      65 |         passwordHash: 'hash',

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/tagTeamLeagueInstanceService.test.ts:62:16)

FAIL tests/profileUpdate.test.ts
  ● Profile Update Endpoint › PUT /api/user/profile › should update stable name successfully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should update profile visibility successfully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should update notification preferences successfully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should update theme preference successfully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should update multiple fields at once

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should change password successfully with correct current password

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject password change with incorrect current password

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject password change without current password

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name that is too short

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name that is too long

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name with invalid characters

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject stable name with profanity

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject duplicate stable name

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (too short)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no uppercase)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no lowercase)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject weak password (no number)

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject invalid profile visibility value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject invalid theme preference value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject request without authentication token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should reject request with invalid authentication token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should preserve unchanged fields when updating partial data

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should return all profile fields in response

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should have default visibility set to public for new users

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

  ● Profile Update Endpoint › PUT /api/user/profile › should return 400 with validation errors for multiple invalid fields

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      27 |
      28 |   beforeAll(async () => {
    > 29 |     await prisma.$connect();
         |     ^
      30 |     
      31 |     // Create a test user
      32 |     const passwordHash = await bcrypt.hash(testPassword, 10);

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/profileUpdate.test.ts:29:5)

FAIL tests/auth.test.ts
  ● Authentication Endpoints › POST /api/auth/login › should successfully login with valid credentials

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › POST /api/auth/login › should return 401 for invalid credentials

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › POST /api/auth/login › should return 400 for missing credentials

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › GET /api/user/profile › should return user profile with correct data structure

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › GET /api/user/profile › should return 401 without authentication token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › GET /api/user/profile › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

  ● Authentication Endpoints › Test User Compatibility › should verify test user can login and access profile

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |   });
      29 |
      30 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/auth.test.ts:27:5)

FAIL tests/facilityRecommendationService.test.ts
  ● FacilityRecommendationService › generateRecommendations › should recommend facilities with positive ROI

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should recommend repair bay for user with high repair costs

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should rank recommendations by projected ROI

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should not recommend facilities above user prestige level

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should not recommend facilities at max level

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should recommend roster expansion when user is at capacity

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

  ● FacilityRecommendationService › generateRecommendations › should calculate total recommended investment

    PrismaClientInitializationError: 
    Invalid `prisma.cycleMetadata.upsert()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityRecommendationService.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Ensure cycle metadata exists
    → 14 await prisma.cycleMetadata.upsert(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Ensure cycle metadata exists
    > 14 |     await prisma.cycleMetadata.upsert({
         |     ^
      15 |       where: { id: 1 },
      16 |       update: {},
      17 |       create: {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityRecommendationService.test.ts:14:5)

FAIL tests/facilityAdvisorStreamingStudio.test.ts
  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with positive ROI when user has battle history

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Clean up cycle snapshots from previous tests
    → 14 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Clean up cycle snapshots from previous tests
    > 14 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      15 |     
      16 |     // Ensure cycle metadata exists
      17 |     await prisma.cycleMetadata.upsert({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)

  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with positive ROI when user has battle history

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32

      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});
      35 }
      36 // Clean up cycle snapshots
    → 37 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      35 |     }
      36 |     // Clean up cycle snapshots
    > 37 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      38 |   });
      39 |
      40 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)

  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with strategic value when user has no battle history

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Clean up cycle snapshots from previous tests
    → 14 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Clean up cycle snapshots from previous tests
    > 14 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      15 |     
      16 |     // Ensure cycle metadata exists
      17 |     await prisma.cycleMetadata.upsert({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)

  ● Facility Advisor - Streaming Studio › should recommend Streaming Studio with strategic value when user has no battle history

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32

      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});
      35 }
      36 // Clean up cycle snapshots
    → 37 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      35 |     }
      36 |     // Clean up cycle snapshots
    > 37 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      38 |   });
      39 |
      40 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)

  ● Facility Advisor - Streaming Studio › should calculate correct ROI for Streaming Studio upgrade from level 1 to 2

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Clean up cycle snapshots from previous tests
    → 14 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Clean up cycle snapshots from previous tests
    > 14 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      15 |     
      16 |     // Ensure cycle metadata exists
      17 |     await prisma.cycleMetadata.upsert({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)

  ● Facility Advisor - Streaming Studio › should calculate correct ROI for Streaming Studio upgrade from level 1 to 2

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32

      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});
      35 }
      36 // Clean up cycle snapshots
    → 37 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      35 |     }
      36 |     // Clean up cycle snapshots
    > 37 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      38 |   });
      39 |
      40 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)

  ● Facility Advisor - Streaming Studio › should not recommend Streaming Studio when battle frequency is too low

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:14:32

      11 testUserIds = [];
      12 
      13 // Clean up cycle snapshots from previous tests
    → 14 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      12 |     
      13 |     // Clean up cycle snapshots from previous tests
    > 14 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      15 |     
      16 |     // Ensure cycle metadata exists
      17 |     await prisma.cycleMetadata.upsert({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:14:5)

  ● Facility Advisor - Streaming Studio › should not recommend Streaming Studio when battle frequency is too low

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityAdvisorStreamingStudio.test.ts:37:32

      34   await prisma.user.delete({ where: { id: userId } }).catch(() => {});
      35 }
      36 // Clean up cycle snapshots
    → 37 await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      35 |     }
      36 |     // Clean up cycle snapshots
    > 37 |     await prisma.cycleSnapshot.deleteMany({});
         |     ^
      38 |   });
      39 |
      40 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityAdvisorStreamingStudio.test.ts:37:5)

FAIL tests/adminRobotStats.test.ts
  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should require authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should require admin role

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should return comprehensive robot statistics

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include summary statistics

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should calculate attribute statistics correctly

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should detect outliers correctly

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should provide statistics by league tier

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include top and bottom performers

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

  ● Admin Robot Statistics Endpoint › GET /api/admin/stats/robots › should include win rate analysis

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |
      29 |     // Create admin user
      30 |     const adminUsername = `admin_${Date.now()}_${Math.random().toString(36).substring(7)}`;

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/adminRobotStats.test.ts:27:5)

FAIL tests/leagues.test.ts
  ● Leagues Routes › GET /api/leagues/:tier/standings › should get bronze league standings

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should get silver league standings

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should return 400 for invalid tier

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/standings › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/instances › should get bronze league instances

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

  ● Leagues Routes › GET /api/leagues/:tier/instances › should return 400 for invalid tier

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leagues.test.ts:26:5)

FAIL tests/records.test.ts
  ● Records Routes › GET /api/records › should get all hall of records statistics

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have combat records section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have career records section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have economic records section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have prestige records section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should have upsets section

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should handle empty database gracefully

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should return records with proper structure

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

  ● Records Routes › GET /api/records › should return up to 10 records per category

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Records Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/records.test.ts:20:5)

FAIL tests/dataIntegrityService.test.ts
  ● DataIntegrityService › validateCycleIntegrity › should pass validation for a complete, valid cycle

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › validateCycleIntegrity › should detect missing cycle_start event

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › validateCycleIntegrity › should detect missing cycle_complete event

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › validateCycleIntegrity › should detect incomplete cycle steps

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkSequenceNumbers › should detect sequence number gaps

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkSequenceNumbers › should pass with continuous sequence numbers

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkCreditConsistency › should detect credit sum mismatch

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkCreditConsistency › should pass with matching credit sums

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › checkCreditConsistency › should allow 1 credit tolerance for rounding

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › validateCycleRange › should validate multiple cycles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

  ● DataIntegrityService › getIntegritySummary › should provide summary of integrity issues

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      13 |
      14 |   beforeAll(async () => {
    > 15 |     await prisma.$connect();
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/dataIntegrityService.test.ts:15:5)

FAIL tests/facility.test.ts
  ● Facility Routes › GET /api/facility › should get user facilities with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › GET /api/facility › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › GET /api/facility › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 400 without facility type

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 400 with invalid facility type

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should handle upgrade attempt when at max level

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

  ● Facility Routes › POST /api/facility/upgrade › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facility.test.ts:26:5)

FAIL tests/validation.test.ts
  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return false when stable name is already taken by another user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      135 |
      136 |     beforeAll(async () => {
    > 137 |       await prisma.$connect();
          |       ^
      138 |     });
      139 |
      140 |     afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/validation.test.ts:137:7)

  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return true when stable name is not taken

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      135 |
      136 |     beforeAll(async () => {
    > 137 |       await prisma.$connect();
          |       ^
      138 |     });
      139 |
      140 |     afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/validation.test.ts:137:7)

  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should return true when stable name is owned by the current user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      135 |
      136 |     beforeAll(async () => {
    > 137 |       await prisma.$connect();
          |       ^
      138 |     });
      139 |
      140 |     afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/validation.test.ts:137:7)

  ● Validation Service - Unit Tests › Stable Name Uniqueness Check › should be case-sensitive for uniqueness

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      135 |
      136 |     beforeAll(async () => {
    > 137 |       await prisma.$connect();
          |       ^
      138 |     });
      139 |
      140 |     afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/validation.test.ts:137:7)

FAIL tests/stanceAndYieldAPI.test.ts
  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should update robot stance to offensive

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should update robot stance to defensive

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should handle case-insensitive stance input

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject invalid stance value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject missing stance value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should reject non-string stance value

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 404 for non-existent robot

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 403 for unauthorized user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/stance › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should update yield threshold to 25

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should accept 0% yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should accept 50% yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should handle decimal yield threshold by rounding

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject yield threshold above 50

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject negative yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject non-numeric yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should reject missing yield threshold

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 404 for non-existent robot

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 403 for unauthorized user

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

  ● Stance and Yield Threshold API Endpoints › PATCH /api/robots/:id/yield-threshold › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      15 |   beforeAll(async () => {
      16 |     // Ensure database connection
    > 17 |     await prisma.$connect();
         |     ^
      18 |   });
      19 |
      20 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/stanceAndYieldAPI.test.ts:17:5)

FAIL tests/financialReportStreamingRevenue.test.ts
  ● Financial Report - Streaming Revenue Integration › should include streaming revenue in financial report

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)

  ● Financial Report - Streaming Revenue Integration › should include streaming revenue in financial report

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27

      22 
      23 afterEach(async () => {
      24   // Clean up test data between tests
    → 25   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   afterEach(async () => {
      24 |     // Clean up test data between tests
    > 25 |     await prisma.auditLog.deleteMany({});
         |     ^
      26 |     await prisma.battleParticipant.deleteMany({});
      27 |     await prisma.battle.deleteMany({});
      28 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)

  ● Financial Report - Streaming Revenue Integration › should show zero streaming revenue when no battles occurred

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)

  ● Financial Report - Streaming Revenue Integration › should show zero streaming revenue when no battles occurred

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27

      22 
      23 afterEach(async () => {
      24   // Clean up test data between tests
    → 25   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   afterEach(async () => {
      24 |     // Clean up test data between tests
    > 25 |     await prisma.auditLog.deleteMany({});
         |     ^
      26 |     await prisma.battleParticipant.deleteMany({});
      27 |     await prisma.battle.deleteMany({});
      28 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)

  ● Financial Report - Streaming Revenue Integration › should only count streaming revenue from user's own robots

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 |
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:20:5)

  ● Financial Report - Streaming Revenue Integration › should only count streaming revenue from user's own robots

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:25:27

      22 
      23 afterEach(async () => {
      24   // Clean up test data between tests
    → 25   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      23 |   afterEach(async () => {
      24 |     // Clean up test data between tests
    > 25 |     await prisma.auditLog.deleteMany({});
         |     ^
      26 |     await prisma.battleParticipant.deleteMany({});
      27 |     await prisma.battle.deleteMany({});
      28 |     await prisma.robot.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:25:5)


  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/financialReportStreamingRevenue.test.ts:42:27

      39 
      40 afterAll(async () => {
      41   // Final cleanup
    → 42   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      40 |   afterAll(async () => {
      41 |     // Final cleanup
    > 42 |     await prisma.auditLog.deleteMany({});
         |     ^
      43 |     await prisma.battleParticipant.deleteMany({});
      44 |     await prisma.battle.deleteMany({});
      45 |     await prisma.robot.deleteMany({});

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/financialReportStreamingRevenue.test.ts:42:5)

FAIL tests/matches.test.ts
  ● Matches Routes › GET /api/matches/upcoming › should get upcoming matches with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/upcoming › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/upcoming › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/history › should get match history with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/history › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/history › should filter by robot ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/history › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/battles/:id/log › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/battles/:id/log › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

  ● Matches Routes › GET /api/matches/battles/:id/log › should handle non-existent battle ID with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/matches.test.ts:27:5)

FAIL tests/repairCostMultiRobot.property.test.ts


  ● Test suite failed to run

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)

FAIL tests/weaponInventory.test.ts
  ● Weapon Inventory Routes › GET /api/weapon-inventory › should get user weapon inventory with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 400 without weapon ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 400 with invalid weapon ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 404 with non-existent weapon ID

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › POST /api/weapon-inventory/purchase › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/storage-status › should get storage status with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/storage-status › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/:id/available › should return 404 for non-existent inventory item

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)

  ● Weapon Inventory Routes › GET /api/weapon-inventory/:id/available › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      25 |
      26 |   beforeAll(async () => {
    > 27 |     await prisma.$connect();
         |     ^
      28 |     
      29 |     // Create test user
      30 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weaponInventory.test.ts:27:5)


  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -882487908, path: "0:0", endOnFailure: true }
    Counterexample: [1]
    Shrunk 1 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

FAIL tests/weapons.test.ts
  ● Weapons Routes › GET /api/weapons › should get all weapons with auth

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weapons.test.ts:26:5)

  ● Weapons Routes › GET /api/weapons › should return weapons sorted by cost

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weapons.test.ts:26:5)

  ● Weapons Routes › GET /api/weapons › should return 401 without authentication

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weapons.test.ts:26:5)

  ● Weapons Routes › GET /api/weapons › should return 403 with invalid token

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      24 |
      25 |   beforeAll(async () => {
    > 26 |     await prisma.$connect();
         |     ^
      27 |     
      28 |     // Create test user
      29 |     testUser = await createTestUser();

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/weapons.test.ts:26:5)


  ● Test suite failed to run

    Property failed after 1 tests
    { seed: 2143101905, path: "0:0:0", endOnFailure: true }
    Counterexample: [[0]]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -1483965401, path: "0:0:0", endOnFailure: true }
    Counterexample: [1,1]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -1623532011, path: "0:0:0", endOnFailure: true }
    Counterexample: [1,1]
    Shrunk 2 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

FAIL tests/cycleSnapshotService.test.ts
  ● CycleSnapshotService › should create a cycle snapshot with cycle start and complete events

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should retrieve a snapshot by cycle number

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should return null for non-existent snapshot

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should retrieve snapshots for a range of cycles

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should throw error if cycle is incomplete (missing start event)

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should throw error if cycle is incomplete (missing complete event)

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)

  ● CycleSnapshotService › should aggregate step durations from cycle step events

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:18:32

      15 
      16 beforeAll(async () => {
      17   // Clean up any existing test data
    → 18   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      16 |   beforeAll(async () => {
      17 |     // Clean up any existing test data
    > 18 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      19 |       where: { cycleNumber: testCycleNumber },
      20 |     });
      21 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:18:5)


  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -1735502105, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,1,1000,50,10]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

  ● Test suite failed to run

    Property failed after 1 tests
    { seed: -1508093986, path: "0:0:0:0:0", endOnFailure: true }
    Counterexample: [1,1000,50,10]
    Shrunk 4 time(s)

    Hint: Enable verbose mode in order to have the list of all failing values encountered during the run

      at buildError (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:162:19)
      at asyncThrowIfFailed (node_modules/fast-check/lib/cjs/check/runner/utils/RunDetailsFormatter.js:176:11)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.cycleSnapshot.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/cycleSnapshotService.test.ts:28:32

      25 
      26 afterAll(async () => {
      27   // Clean up test data
    → 28   await prisma.cycleSnapshot.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      26 |   afterAll(async () => {
      27 |     // Clean up test data
    > 28 |     await prisma.cycleSnapshot.deleteMany({
         |     ^
      29 |       where: { cycleNumber: testCycleNumber },
      30 |     });
      31 |     await prisma.auditLog.deleteMany({

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/cycleSnapshotService.test.ts:28:5)

FAIL tests/leaderboards.test.ts
  ● Leaderboards Routes › GET /api/leaderboards/fame › should get fame leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by league

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/fame › should filter by minimum battles

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/losses › should get losses leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/losses › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/prestige › should get prestige leaderboard

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

  ● Leaderboards Routes › GET /api/leaderboards/prestige › should support pagination

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      18 | describe('Leaderboards Routes', () => {
      19 |   beforeAll(async () => {
    > 20 |     await prisma.$connect();
         |     ^
      21 |   });
      22 |
      23 |   afterAll(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/leaderboards.test.ts:20:5)

FAIL tests/facilityTransactionLogging.test.ts
  ● Facility Transaction Logging › should log facility_purchase event when purchasing a new facility

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should log facility_purchase event when purchasing a new facility

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

  ● Facility Transaction Logging › should log facility_upgrade event when upgrading an existing facility

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should log facility_upgrade event when upgrading an existing facility

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

  ● Facility Transaction Logging › should include all required fields in the event payload

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should include all required fields in the event payload

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

  ● Facility Transaction Logging › should log events with correct cycle number

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should log events with correct cycle number

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

  ● Facility Transaction Logging › should distinguish between purchase and upgrade events

    PrismaClientInitializationError: Too many database connections opened: FATAL: sorry, too many clients already

      16 |
      17 |   beforeAll(async () => {
    > 18 |     await prisma.$connect();
         |     ^
      19 |   });
      20 |
      21 |   afterEach(async () => {

      at t (node_modules/@prisma/client/runtime/library.js:112:2488)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:18:5)

  ● Facility Transaction Logging › should distinguish between purchase and upgrade events

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/facilityTransactionLogging.test.ts:23:27

      20 
      21 afterEach(async () => {
      22   // Clean up test data after each test
    → 23   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      21 |   afterEach(async () => {
      22 |     // Clean up test data after each test
    > 23 |     await prisma.auditLog.deleteMany({
         |     ^
      24 |       where: {
      25 |         userId: testUserId,
      26 |         eventType: { in: ['facility_purchase', 'facility_upgrade'] },

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/facilityTransactionLogging.test.ts:23:5)

FAIL tests/eventLogger.integration.test.ts
  ● EventLogger Integration › should successfully log events to the database

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:27

      12 
      13 beforeEach(async () => {
      14   // Clean up audit logs before each test
    → 15   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      13 |   beforeEach(async () => {
      14 |     // Clean up audit logs before each test
    > 15 |     await prisma.auditLog.deleteMany({});
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.integration.test.ts:15:5)

  ● EventLogger Integration › should handle batch logging efficiently

    PrismaClientInitializationError: 
    Invalid `prisma.auditLog.deleteMany()` invocation in
    /Users/robertteunissen/Downloads/ArmouredSouls/prototype/backend/tests/eventLogger.integration.test.ts:15:27

      12 
      13 beforeEach(async () => {
      14   // Clean up audit logs before each test
    → 15   await prisma.auditLog.deleteMany(
    Too many database connections opened: FATAL: sorry, too many clients already

      13 |   beforeEach(async () => {
      14 |     // Clean up audit logs before each test
    > 15 |     await prisma.auditLog.deleteMany({});
         |     ^
      16 |   });
      17 |
      18 |   afterAll(async () => {

      at $n.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7615)
      at $n.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6623)
      at $n.request (node_modules/@prisma/client/runtime/library.js:121:6307)
      at l (node_modules/@prisma/client/runtime/library.js:130:9633)
      at Object.<anonymous> (tests/eventLogger.integration.test.ts:15:5)

FAIL tests/integration/tagTeamCompleteCycle.test.ts
  ● Test suite failed to run

    [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m300[0m:[93m25[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?

    [7m300[0m         robot1Id: { in: testRobots.map(r => r.id) },
    [7m   [0m [91m                        ~~~~~~~~~~[0m

      [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m25[0m:[93m7[0m
        [7m25[0m   let testRobotIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~~[0m
        'testRobotIds' is declared here.
    [96mtests/integration/tagTeamCompleteCycle.test.ts[0m:[93m300[0m:[93m40[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m300[0m         robot1Id: { in: testRobots.map(r => r.id) },
    [7m   [0m [91m                                       ~[0m

FAIL tests/integration/tagTeamByeHandling.test.ts
  ● Test suite failed to run

    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m245[0m:[93m27[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testRobots'. Did you mean 'testRobotIds'?

    [7m245[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);
    [7m   [0m [91m                          ~~~~~~~~~~[0m

      [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m24[0m:[93m7[0m
        [7m24[0m   let testRobotIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~~[0m
        'testRobotIds' is declared here.
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m245[0m:[93m43[0m - [91merror[0m[90m TS7006: [0mParameter 'r' implicitly has an 'any' type.

    [7m245[0m     const originalRobot = testRobots.find(r => r.id === realTeamId);
    [7m   [0m [91m                                          ~[0m
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m257[0m:[93m26[0m - [91merror[0m[90m TS2552: [0mCannot find name 'testUsers'. Did you mean 'testUserIds'?

    [7m257[0m     const originalUser = testUsers.find(u => u.id === user!.id);
    [7m   [0m [91m                         ~~~~~~~~~[0m

      [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m23[0m:[93m7[0m
        [7m23[0m   let testUserIds: number[] = [];
        [7m  [0m [96m      ~~~~~~~~~~~[0m
        'testUserIds' is declared here.
    [96mtests/integration/tagTeamByeHandling.test.ts[0m:[93m257[0m:[93m41[0m - [91merror[0m[90m TS7006: [0mParameter 'u' implicitly has an 'any' type.

    [7m257[0m     const originalUser = testUsers.find(u => u.id === user!.id);
    [7m   [0m [91m                                        ~[0m

FAIL tests/integration/repairCostConsistency.test.ts
  ● Test suite failed to run

    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m40[0m:[93m18[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'robot' does not exist in type 'WeaponInventoryWhereInput'.

    [7m40[0m         where: { robot: { id: { in: testRobotIds } } },
    [7m  [0m [91m                 ~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m148[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m148[0m           loadoutType: 'single',
    [7m   [0m [91m                       ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'mainWeaponId'.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m25[0m - [91merror[0m[90m TS2304: [0mCannot find name 'weaponInv'.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m                        ~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'currentLeague'.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m                         ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'leagueId'.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m          ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m21[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m                    ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'leaguePoints'.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m25[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'cyclesInCurrentLeague'.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m34[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m                                 ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'combatPower'.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'targetingSystems'.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'criticalSystems'.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'penetration'.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'weaponControl'.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'attackSpeed'.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'armorPlating'.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m25[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m                        ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'shieldCapacity'.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'evasionThrusters'.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'damageDampeners'.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'counterProtocols'.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'hullIntegrity'.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'servoMotors'.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m          ~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m24[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m                       ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'gyroStabilizers'.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m28[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m                           ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'hydraulicSystems'.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'powerCore'.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m          ~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m22[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m                     ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'combatAlgorithms'.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'threatAnalysis'.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'adaptiveAI'.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m          ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m23[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m                      ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'logicCores'.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m          ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m23[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m                      ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'syncProtocols'.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m26[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m                         ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'supportSystems'.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m27[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m                          ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m11[0m - [91merror[0m[90m TS2304: [0mCannot find name 'formationTactics'.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m          ~~~~~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m29[0m - [91merror[0m[90m TS2695: [0mLeft side of comma operator is unused and has no side effects.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m                            ~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m180[0m:[93m7[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m180[0m       testRobots.push(robot);
    [7m   [0m [91m      ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m180[0m:[93m23[0m - [91merror[0m[90m TS2448: [0mBlock-scoped variable 'robot' used before its declaration.

    [7m180[0m       testRobots.push(robot);
    [7m   [0m [91m                      ~~~~~[0m

      [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m11[0m
        [7m212[0m     const robot = testRobots[0];
        [7m   [0m [96m          ~~~~~[0m
        'robot' is declared here.
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m181[0m:[93m7[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobotIds'.

    [7m181[0m       testRobotIds.push(robot.id);
    [7m   [0m [91m      ~~~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m181[0m:[93m25[0m - [91merror[0m[90m TS2448: [0mBlock-scoped variable 'robot' used before its declaration.

    [7m181[0m       testRobotIds.push(robot.id);
    [7m   [0m [91m                        ~~~~~[0m

      [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m11[0m
        [7m212[0m     const robot = testRobots[0];
        [7m   [0m [96m          ~~~~~[0m
        'robot' is declared here.
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m187[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m187[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m194[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m194[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m202[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m202[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m212[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m212[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m254[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m254[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m261[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m261[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m269[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m269[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m275[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m275[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m321[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m321[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m328[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m328[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m336[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m336[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m342[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m342[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m384[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m384[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m389[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m389[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m441[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m441[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m480[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m480[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m496[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m496[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m529[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m529[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m535[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m535[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m542[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m542[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m549[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m549[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m608[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m608[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m614[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m614[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m621[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m621[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m628[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m628[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m685[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m685[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m691[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m691[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m698[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m698[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m706[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m706[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m772[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m772[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m778[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m778[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m785[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m785[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m792[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m792[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m836[0m:[93m19[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testRobots'.

    [7m836[0m     const robot = testRobots[0];
    [7m   [0m [91m                  ~~~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m842[0m:[93m17[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUser'.

    [7m842[0m         userId: testUser.id,
    [7m   [0m [91m                ~~~~~~~~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m149[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m149[0m           mainWeaponId: weaponInv.id,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m150[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m150[0m           currentLeague: 'bronze',
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m151[0m:[93m19[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m151[0m           leagueId: 'bronze_1',
    [7m   [0m [91m                  ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m152[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m152[0m           leaguePoints: 0,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m153[0m:[93m32[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m153[0m           cyclesInCurrentLeague: 0,
    [7m   [0m [91m                               ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m155[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m155[0m           combatPower: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m156[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m156[0m           targetingSystems: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m157[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m157[0m           criticalSystems: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m158[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m158[0m           penetration: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m159[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m159[0m           weaponControl: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m160[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m160[0m           attackSpeed: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m161[0m:[93m23[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m161[0m           armorPlating: 10,
    [7m   [0m [91m                      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m162[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m162[0m           shieldCapacity: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m163[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m163[0m           evasionThrusters: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m164[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m164[0m           damageDampeners: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m165[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m165[0m           counterProtocols: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m166[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m166[0m           hullIntegrity: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m167[0m:[93m22[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m167[0m           servoMotors: 10,
    [7m   [0m [91m                     ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m168[0m:[93m26[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m168[0m           gyroStabilizers: 10,
    [7m   [0m [91m                         ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m169[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m169[0m           hydraulicSystems: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m170[0m:[93m20[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m170[0m           powerCore: 10,
    [7m   [0m [91m                   ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m171[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m171[0m           combatAlgorithms: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m172[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m172[0m           threatAnalysis: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m173[0m:[93m21[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m173[0m           adaptiveAI: 10,
    [7m   [0m [91m                    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m174[0m:[93m21[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m174[0m           logicCores: 10,
    [7m   [0m [91m                    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m175[0m:[93m24[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m175[0m           syncProtocols: 10,
    [7m   [0m [91m                       ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m176[0m:[93m25[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m176[0m           supportSystems: 10,
    [7m   [0m [91m                        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m177[0m:[93m27[0m - [91merror[0m[90m TS1005: [0m';' expected.

    [7m177[0m           formationTactics: 10,
    [7m   [0m [91m                          ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m178[0m:[93m9[0m - [91merror[0m[90m TS1109: [0mExpression expected.

    [7m178[0m         },
    [7m   [0m [91m        ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m179[0m:[93m7[0m - [91merror[0m[90m TS1135: [0mArgument expression expected.

    [7m179[0m       });
    [7m   [0m [91m      ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m182[0m:[93m5[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m182[0m     }
    [7m   [0m [91m    ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m248[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m248[0m   });
    [7m   [0m [91m  ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m248[0m:[93m4[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m248[0m   });
    [7m   [0m [91m   ~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m894[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m894[0m });
    [7m   [0m [91m~[0m
    [96mtests/integration/repairCostConsistency.test.ts[0m:[93m894[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m894[0m });
    [7m   [0m [91m ~[0m

FAIL tests/userGeneration.test.ts
  ● Test suite failed to run

    [96mtests/userGeneration.test.ts[0m:[93m148[0m:[93m56[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m148[0m       const result = await generateBattleReadyUsers(5, cycleNumber);
    [7m   [0m [91m                                                       ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m166[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m166[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m181[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m181[0m       await generateBattleReadyUsers(1, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m208[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m208[0m       await generateBattleReadyUsers(2, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m229[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m229[0m       await generateBattleReadyUsers(1, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m247[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m247[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m263[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m263[0m       await generateBattleReadyUsers(5, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m301[0m:[93m41[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m301[0m       await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                        ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m327[0m:[93m56[0m - [91merror[0m[90m TS2554: [0mExpected 1 arguments, but got 2.

    [7m327[0m       const result = await generateBattleReadyUsers(3, cycleNumber);
    [7m   [0m [91m                                                       ~~~~~~~~~~~[0m
    [96mtests/userGeneration.test.ts[0m:[93m351[0m:[93m5[0m - [91merror[0m[90m TS1005: [0m',' expected.

    [7m351[0m     });
    [7m   [0m [91m    ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m421[0m:[93m3[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m421[0m   });
    [7m   [0m [91m  ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m421[0m:[93m4[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m421[0m   });
    [7m   [0m [91m   ~[0m
    [96mtests/userGeneration.test.ts[0m:[93m422[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m422[0m });
    [7m   [0m [91m~[0m
    [96mtests/userGeneration.test.ts[0m:[93m422[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m422[0m });
    [7m   [0m [91m ~[0m

FAIL tests/trendAnalysis.property.test.ts
  ● Test suite failed to run

    [96mtests/trendAnalysis.property.test.ts[0m:[93m12[0m:[93m38[0m - [91merror[0m[90m TS2307: [0mCannot find module '../src/services/trendAnalysisService' or its corresponding type declarations.

    [7m12[0m import { trendAnalysisService } from '../src/services/trendAnalysisService';
    [7m  [0m [91m                                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                          ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m85[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m192[0m:[93m88[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

    [7m192[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                       ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m203[0m:[93m53[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m203[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);
    [7m   [0m [91m                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m260[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m260[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                          ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m85[0m - [91merror[0m[90m TS7006: [0mParameter 'a' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m318[0m:[93m88[0m - [91merror[0m[90m TS7006: [0mParameter 'b' implicitly has an 'any' type.

    [7m318[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber).sort((a, b) => a - b);
    [7m   [0m [91m                                                                                       ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m329[0m:[93m53[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m329[0m               const dataPoint = trendData.data.find(d => d.cycleNumber === startCycle + i);
    [7m   [0m [91m                                                    ~[0m
    [96mtests/trendAnalysis.property.test.ts[0m:[93m419[0m:[93m59[0m - [91merror[0m[90m TS7006: [0mParameter 'd' implicitly has an 'any' type.

    [7m419[0m             const cycleNumbersInData = trendData.data.map(d => d.cycleNumber);
    [7m   [0m [91m                                                          ~[0m

FAIL tests/tagTeamModelIntegration.test.ts
  ● Test suite failed to run

    [96mtests/tagTeamModelIntegration.test.ts[0m:[93m307[0m:[93m14[0m - [91merror[0m[90m TS18047: [0m'match.team2' is possibly 'null'.

    [7m307[0m       expect(match?.team2.activeRobot.id).toBe(testRobot3Id);
    [7m   [0m [91m             ~~~~~~~~~~~~[0m
    [96mtests/tagTeamModelIntegration.test.ts[0m:[93m308[0m:[93m14[0m - [91merror[0m[90m TS18047: [0m'match.team2' is possibly 'null'.

    [7m308[0m       expect(match?.team2.reserveRobot.id).toBe(testRobot4Id);
    [7m   [0m [91m             ~~~~~~~~~~~~[0m

FAIL tests/tagTeamBattleLogCompleteness.property.test.ts
  ● Test suite failed to run

    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m65[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m65[0m           { userId: testUserId1 },
    [7m  [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m66[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m66[0m           { userId: testUserId2 },
    [7m  [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m125[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m125[0m           { userId: testUserId1 },
    [7m   [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m125[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m125[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m126[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'BattleWhereInput'.

    [7m126[0m           { userId: testUserId2 },
    [7m   [0m [91m            ~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m126[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m126[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m133[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m133[0m           { team1: { stableId: testUserId1 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m134[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m134[0m           { team1: { stableId: testUserId2 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m135[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m135[0m           { team2: { stableId: testUserId1 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m136[0m:[93m32[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m136[0m           { team2: { stableId: testUserId2 } },
    [7m   [0m [91m                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m143[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m143[0m           { stableId: testUserId1 },
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m144[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m144[0m           { stableId: testUserId2 },
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m151[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m151[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m152[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m152[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m159[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m159[0m           { userId: testUserId1 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m160[0m:[93m21[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m160[0m           { userId: testUserId2 },
    [7m   [0m [91m                    ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m186[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m186[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m186[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m186[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m189[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m189[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m189[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m189[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m192[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m192[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m192[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m192[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m195[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m195[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m195[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m195[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m201[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m201[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m216[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m216[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m232[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m232[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m247[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m247[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m261[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m261[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m262[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m262[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m337[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m337[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m337[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m337[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m340[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m340[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m340[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m340[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m343[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m343[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m343[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m343[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m346[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m346[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m346[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m346[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m352[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m352[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m367[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m367[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m382[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m382[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m397[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m397[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m411[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m411[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m412[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m412[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m492[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m492[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m492[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m492[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m495[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m495[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m495[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m495[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m498[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m498[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m498[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m498[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m501[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m501[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m501[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m501[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m507[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m507[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m522[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m522[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m537[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m537[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m552[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m552[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m566[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m566[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m567[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m567[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m648[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m648[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m648[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m648[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m651[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m651[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m651[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m651[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m654[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m654[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m654[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m654[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m657[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m657[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m657[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m657[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m663[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m663[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m678[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m678[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m693[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m693[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m708[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m708[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m722[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m722[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m723[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m723[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m803[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m803[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m803[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m803[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m806[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m806[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m806[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m806[0m             data: { userId: testUserId1, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m809[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m809[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m809[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m809[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m812[0m:[93m29[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m812[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                            ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m812[0m:[93m42[0m - [91merror[0m[90m TS18004: [0mNo value exists in scope for the shorthand property 'weaponId'. Either declare one or provide an initializer.

    [7m812[0m             data: { userId: testUserId2, weaponId },
    [7m   [0m [91m                                         ~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m818[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m818[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m833[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m833[0m               userId: testUserId1,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m848[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m848[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m863[0m:[93m23[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m863[0m               userId: testUserId2,
    [7m   [0m [91m                      ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m877[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId1'.

    [7m877[0m           const team1Result = await createTeam(testUserId1, robot1.id, robot2.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m878[0m:[93m48[0m - [91merror[0m[90m TS2304: [0mCannot find name 'testUserId2'.

    [7m878[0m           const team2Result = await createTeam(testUserId2, robot3.id, robot4.id);
    [7m   [0m [91m                                               ~~~~~~~~~~~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m944[0m:[93m1[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m944[0m });
    [7m   [0m [91m~[0m
    [96mtests/tagTeamBattleLogCompleteness.property.test.ts[0m:[93m944[0m:[93m2[0m - [91merror[0m[90m TS1128: [0mDeclaration or statement expected.

    [7m944[0m });
    [7m   [0m [91m ~[0m

FAIL tests/stanceAndYield.test.ts
  ● Test suite failed to run

    [96mtests/stanceAndYield.test.ts[0m:[93m13[0m:[93m65[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'totalTagTeamBattles' are incompatible.
        Type 'number | undefined' is not assignable to type 'number'.
          Type 'undefined' is not assignable to type 'number'.

    [7m 13[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({
    [7m   [0m [91m                                                                ~[0m
    [7m 14[0m   id: 1,
    [7m   [0m [91m~~~~~~~~[0m
    [7m...[0m 
    [7m 71[0m   ...overrides,
    [7m   [0m [91m~~~~~~~~~~~~~~~[0m
    [7m 72[0m });
    [7m   [0m [91m~[0m

FAIL tests/robotStatsView.test.ts
  ● Test suite failed to run

    [96mtests/robotStatsView.test.ts[0m:[93m79[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m79[0m           userId: testUserId,
    [7m  [0m [91m          ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/robotStatsView.test.ts[0m:[93m113[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m113[0m         userId: testUserId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/robotCalculations.test.ts
  ● Test suite failed to run

    [96mtests/robotCalculations.test.ts[0m:[93m12[0m:[93m65[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'totalTagTeamBattles' are incompatible.
        Type 'number | undefined' is not assignable to type 'number'.
          Type 'undefined' is not assignable to type 'number'.

    [7m 12[0m const createMockRobot = (overrides?: Partial<Robot>): Robot => ({
    [7m   [0m [91m                                                                ~[0m
    [7m 13[0m   id: 1,
    [7m   [0m [91m~~~~~~~~[0m
    [7m...[0m 
    [7m 70[0m   ...overrides,
    [7m   [0m [91m~~~~~~~~~~~~~~~[0m
    [7m 71[0m });
    [7m   [0m [91m~[0m

FAIL tests/profileApiResponse.property.test.ts
  ● Test suite failed to run

    [96mtests/profileApiResponse.property.test.ts[0m:[93m66[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'totalBattles' does not exist in type '(Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput)'.

    [7m66[0m                 totalBattles: userProfile.totalBattles,
    [7m  [0m [91m                ~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m3397[0m:[93m5[0m
        [7m3397[0m     data: XOR<UserCreateInput, UserUncheckedCreateInput>
        [7m    [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: UserSelect<DefaultArgs> | null | undefined; include?: UserInclude<DefaultArgs> | null | undefined; data: (Without<UserCreateInput, UserUncheckedCreateInput> & UserUncheckedCreateInput) | (Without<...> & UserCreateInput); }'

FAIL tests/profileUpdate.property.test.ts
  ● Test suite failed to run

    [96mtests/profileUpdate.property.test.ts[0m:[93m491[0m:[93m43[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.
      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.

    [7m491[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);
    [7m   [0m [91m                                          ~~~~~~~~[0m
    [96mtests/profileUpdate.property.test.ts[0m:[93m518[0m:[93m43[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'string' can't be used to index type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.
      No index signature with a parameter of type 'string' was found on type '{ stableName?: string | undefined; profileVisibility?: "public" | "private" | undefined; notificationsBattle?: boolean | undefined; notificationsLeague?: boolean | undefined; themePreference?: "dark" | ... 2 more ... | undefined; }'.

    [7m518[0m     return Object.keys(obj).some((key) => obj[key] !== undefined);
    [7m   [0m [91m                                          ~~~~~~~~[0m

FAIL tests/multiMatchScheduling.property.test.ts
  ● Test suite failed to run

    [96mtests/multiMatchScheduling.property.test.ts[0m:[93m226[0m:[93m26[0m - [91merror[0m[90m TS2322: [0mType 'number | null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.
      Type 'null' is not assignable to type 'number | (TagTeamActiveRobotIdReserveRobotIdCompoundUniqueInput & number) | undefined'.

    [7m226[0m                 where: { id: match.team2Id },
    [7m   [0m [91m                         ~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m22658[0m:[93m5[0m
        [7m22658[0m     id?: number
        [7m     [0m [96m    ~~[0m
        The expected type comes from property 'id' which is declared here on type 'TagTeamWhereUniqueInput'

FAIL tests/migrateBattlesToEvents.test.ts
  ● Test suite failed to run

    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m8[0m:[93m57[0m - [91merror[0m[90m TS2307: [0mCannot find module '../src/scripts/migrateBattlesToEvents' or its corresponding type declarations.

    [7m8[0m import { migrateBattlesToEvents, verifyMigration } from '../src/scripts/migrateBattlesToEvents';
    [7m [0m [91m                                                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m111[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.

    [7m111[0m       robot1DamageDealt: battle.robot1DamageDealt,
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m
    [96mtests/migrateBattlesToEvents.test.ts[0m:[93m112[0m:[93m33[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ id: number; robot1Id: number; robot2Id: number; winnerId: number | null; battleType: string; leagueType: string; tournamentId: number | null; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; createdAt: Date; }'.

    [7m112[0m       robot2DamageDealt: battle.robot2DamageDealt,
    [7m   [0m [91m                                ~~~~~~~~~~~~~~~~~[0m

FAIL tests/metricProgression.property.test.ts
  ● Test suite failed to run

    [96mtests/metricProgression.property.test.ts[0m:[93m131[0m:[93m42[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1FameAwarded' does not exist on type '{ robot2Id: number; robot1Id: number; id: number; createdAt: Date; winnerId: number | null; battleType: string; leagueType: string; tournamentRound: number | null; team1ActiveRobotId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m131[0m               const fameAwarded = battle.robot1FameAwarded;
    [7m   [0m [91m                                         ~~~~~~~~~~~~~~~~~[0m
    [96mtests/metricProgression.property.test.ts[0m:[93m343[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m343[0m                 userId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m590[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m590[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m644[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m644[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m698[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m698[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m752[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m752[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/metricProgression.property.test.ts[0m:[93m806[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m806[0m         userId,
    [7m   [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/matchListInclusion.property.test.ts
  ● Test suite failed to run

    [96mtests/matchListInclusion.property.test.ts[0m:[93m298[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m298[0m                 userId: testUserId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/matchListInclusion.property.test.ts[0m:[93m333[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m333[0m                 userId: testUserId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/integration.test.ts
  ● Test suite failed to run

    [96mtests/integration.test.ts[0m:[93m159[0m:[93m22[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'InputJsonValue | FieldRef<"Battle", "Json"> | JsonNullValueFilter | undefined'.

    [7m159[0m         battleLog: { not: null },
    [7m   [0m [91m                     ~~~[0m
    [96mtests/integration.test.ts[0m:[93m268[0m:[93m13[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'number | IntFilter<"Battle"> | undefined'.

    [7m268[0m           { robot1Id: null },
    [7m   [0m [91m            ~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m21904[0m:[93m5[0m
        [7m21904[0m     robot1Id?: IntFilter<"Battle"> | number
        [7m     [0m [96m    ~~~~~~~~[0m
        The expected type comes from property 'robot1Id' which is declared here on type 'BattleWhereInput'
    [96mtests/integration.test.ts[0m:[93m269[0m:[93m13[0m - [91merror[0m[90m TS2322: [0mType 'null' is not assignable to type 'number | IntFilter<"Battle"> | undefined'.

    [7m269[0m           { robot2Id: null },
    [7m   [0m [91m            ~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m21905[0m:[93m5[0m
        [7m21905[0m     robot2Id?: IntFilter<"Battle"> | number
        [7m     [0m [96m    ~~~~~~~~[0m
        The expected type comes from property 'robot2Id' which is declared here on type 'BattleWhereInput'

FAIL tests/facilityROI.property.test.ts
  ● Test suite failed to run

    [96mtests/facilityROI.property.test.ts[0m:[93m53[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m53[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m  [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m54[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m54[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m  [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m59[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m59[0m               userId: testUserId,
    [7m  [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m73[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m73[0m               testUserId,
    [7m  [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m89[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m89[0m               testUserId,
    [7m  [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m99[0m:[93m56[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m99[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [
    [7m  [0m [91m                                                       ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m113[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m113[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m150[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m150[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m151[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m151[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m156[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m156[0m               userId: testUserId,
    [7m   [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m170[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m170[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m197[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m197[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m198[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m198[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m208[0m:[93m52[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m208[0m             await eventLogger.logOperatingCosts(i, testUserId, [
    [7m   [0m [91m                                                   ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m222[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m222[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m256[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m256[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m257[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m257[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m262[0m:[93m23[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m262[0m               userId: testUserId,
    [7m   [0m [91m                      ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m276[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m276[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m303[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m303[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m304[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m304[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m316[0m:[93m52[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m316[0m             await eventLogger.logOperatingCosts(i, testUserId, [
    [7m   [0m [91m                                                   ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m330[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m330[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m366[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m366[0m           await prisma.auditLog.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m367[0m:[93m63[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m367[0m           await prisma.facility.deleteMany({ where: { userId: testUserId } });
    [7m   [0m [91m                                                              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m372[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m372[0m               { userId: testUserId, facilityType: 'income_generator', level: 1 },
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m373[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m373[0m               { userId: testUserId, facilityType: 'repair_bay', level: 1 },
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m380[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m380[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m389[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m389[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m407[0m:[93m15[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m407[0m               testUserId,
    [7m   [0m [91m              ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m428[0m:[93m25[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m428[0m                 userId: testUserId,
    [7m   [0m [91m                        ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m429[0m:[93m26[0m - [91merror[0m[90m TS2454: [0mVariable 'testRobotId' is used before being assigned.

    [7m429[0m                 robotId: testRobotId,
    [7m   [0m [91m                         ~~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m439[0m:[93m56[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m439[0m             await eventLogger.logOperatingCosts(cycle, testUserId, [
    [7m   [0m [91m                                                       ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m455[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m455[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m
    [96mtests/facilityROI.property.test.ts[0m:[93m459[0m:[93m13[0m - [91merror[0m[90m TS2454: [0mVariable 'testUserId' is used before being assigned.

    [7m459[0m             testUserId,
    [7m   [0m [91m            ~~~~~~~~~~[0m

FAIL tests/eventLogger.property.test.ts
  ● Test suite failed to run

    [96mtests/eventLogger.property.test.ts[0m:[93m92[0m:[93m15[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to parameter of type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }[]'.
      Type '{ eventType: EventType.BATTLE_COMPLETE | EventType.ROBOT_REPAIR | EventType.ROBOT_ATTRIBUTE_UPGRADE | EventType.ROBOT_LEAGUE_CHANGE | EventType.CREDIT_CHANGE | EventType.PRESTIGE_CHANGE | EventType.PASSIVE_INCOME | ... 10 more ... | EventType.CYCLE_COMPLETE; payload: { ...; }; userId: number | null; robotId: number ...' is not assignable to type '{ eventType: EventType; payload: BaseEventPayload; userId?: number | undefined; robotId?: number | undefined; metadata?: EventMetadata | undefined; timestamp?: Date | undefined; }'.
        Types of property 'userId' are incompatible.
          Type 'number | null' is not assignable to type 'number | undefined'.
            Type 'null' is not assignable to type 'number | undefined'.

    [7m 92[0m               events.map(e => ({
    [7m   [0m [91m              ~~~~~~~~~~~~~~~~~~[0m
    [7m 93[0m                 eventType: e.eventType,
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m...[0m 
    [7m 96[0m                 robotId: e.robotId,
    [7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
    [7m 97[0m               }))
    [7m   [0m [91m~~~~~~~~~~~~~~~~~[0m

FAIL tests/eloProgression.property.test.ts
  ● Test suite failed to run

    [96mtests/eloProgression.property.test.ts[0m:[93m161[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m161[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m351[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m351[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m529[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m529[0m                   userId,
    [7m   [0m [91m                  ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/eloProgression.property.test.ts[0m:[93m684[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m684[0m                 userId,
    [7m   [0m [91m                ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/cycleSnapshot.property.test.ts
  ● Test suite failed to run

    [96mtests/cycleSnapshot.property.test.ts[0m:[93m282[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m282[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m359[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m359[0m               robot1Metric.damageDealt += createdBattle.robot1DamageDealt;
    [7m   [0m [91m                                                        ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m360[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m360[0m               robot1Metric.damageReceived += createdBattle.robot2DamageDealt;
    [7m   [0m [91m                                                           ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m362[0m:[93m56[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m362[0m               robot1Metric.fameChange += createdBattle.robot1FameAwarded;
    [7m   [0m [91m                                                       ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m381[0m:[93m57[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m381[0m               robot2Metric.damageDealt += createdBattle.robot2DamageDealt;
    [7m   [0m [91m                                                        ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m382[0m:[93m60[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1DamageDealt' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m382[0m               robot2Metric.damageReceived += createdBattle.robot1DamageDealt;
    [7m   [0m [91m                                                           ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m384[0m:[93m56[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2FameAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m384[0m               robot2Metric.fameChange += createdBattle.robot2FameAwarded;
    [7m   [0m [91m                                                       ~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m528[0m:[93m19[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m528[0m                   user: { connect: { id: user.id } },
    [7m   [0m [91m                  ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m592[0m:[93m40[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m592[0m               actualUserIds.add(battle.userId);
    [7m   [0m [91m                                       ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m594[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m594[0m               if (!expectedStableMetrics.has(battle.userId)) {
    [7m   [0m [91m                                                    ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m595[0m:[93m50[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m595[0m                 expectedStableMetrics.set(battle.userId, {
    [7m   [0m [91m                                                 ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m602[0m:[93m64[0m - [91merror[0m[90m TS2339: [0mProperty 'userId' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m602[0m               const metrics = expectedStableMetrics.get(battle.userId)!;
    [7m   [0m [91m                                                               ~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m605[0m:[93m53[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m605[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;
    [7m   [0m [91m                                                    ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m605[0m:[93m84[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2PrestigeAwarded' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m605[0m               metrics.totalPrestigeEarned += battle.robot1PrestigeAwarded + battle.robot2PrestigeAwarded;
    [7m   [0m [91m                                                                                   ~~~~~~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m606[0m:[93m51[0m - [91merror[0m[90m TS2339: [0mProperty 'robot1RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m606[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);
    [7m   [0m [91m                                                  ~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m606[0m:[93m84[0m - [91merror[0m[90m TS2339: [0mProperty 'robot2RepairCost' does not exist on type '{ createdAt: Date; id: number; robot1Id: number; robot2Id: number; robot1ELOBefore: number; robot2ELOBefore: number; winnerReward: number | null; loserReward: number | null; winnerId: number | null; ... 22 more ...; tournamentId: number | null; }'.

    [7m606[0m               metrics.totalRepairCosts += (battle.robot1RepairCost || 0) + (battle.robot2RepairCost || 0);
    [7m   [0m [91m                                                                                   ~~~~~~~~~~~~~~~~[0m
    [96mtests/cycleSnapshot.property.test.ts[0m:[93m659[0m:[93m17[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'user' does not exist in type 'Without<BattleUncheckedCreateInput, BattleCreateInput> & BattleCreateInput'.

    [7m659[0m                 user: { connect: { id: user.id } },
    [7m   [0m [91m                ~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/byeTeamBattles.property.test.ts
  ● Test suite failed to run

    [96mtests/byeTeamBattles.property.test.ts[0m:[93m16[0m:[93m3[0m - [91merror[0m[90m TS2322: [0mType '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Prisma.Decimal; targetingSystems: Prisma.Decimal; criticalSystems: Prisma.Decimal; ... 55 more ...; updatedAt: Date; }' is not assignable to type '{ name: string; id: number; userId: number; frameId: number; paintJob: string | null; combatPower: Decimal; targetingSystems: Decimal; criticalSystems: Decimal; ... 55 more ...; updatedAt: Date; }'.
      Types of property 'imageUrl' are incompatible.
        Type 'string | null | undefined' is not assignable to type 'string | null'.
          Type 'undefined' is not assignable to type 'string | null'.

    [7m16[0m   return {
    [7m  [0m [91m  ~~~~~~[0m

FAIL tests/battleLogStreamingRevenue.property.test.ts
  ● Test suite failed to run

    [96mtests/battleLogStreamingRevenue.property.test.ts[0m:[93m111[0m:[93m7[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m111[0m       userId,
    [7m   [0m [91m      ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'

FAIL tests/analyticsApi.test.ts
  ● Test suite failed to run

    [96mtests/analyticsApi.test.ts[0m:[93m228[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m228[0m           stableMetrics: snapshot.stableMetrics,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24461[0m:[93m5[0m
        [7m24461[0m     stableMetrics: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~~[0m
        The expected type comes from property 'stableMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m229[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m229[0m           robotMetrics: snapshot.robotMetrics,
    [7m   [0m [91m          ~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24462[0m:[93m5[0m
        [7m24462[0m     robotMetrics: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~[0m
        The expected type comes from property 'robotMetrics' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m230[0m:[93m11[0m - [91merror[0m[90m TS2322: [0mType 'JsonValue' is not assignable to type 'JsonNull | InputJsonValue'.
      Type 'null' is not assignable to type 'JsonNull | InputJsonValue'.

    [7m230[0m           stepDurations: snapshot.stepDurations,
    [7m   [0m [91m          ~~~~~~~~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m24463[0m:[93m5[0m
        [7m24463[0m     stepDurations: JsonNullValueInput | InputJsonValue
        [7m     [0m [96m    ~~~~~~~~~~~~~[0m
        The expected type comes from property 'stepDurations' which is declared here on type '(Without<CycleSnapshotCreateInput, CycleSnapshotUncheckedCreateInput> & CycleSnapshotUncheckedCreateInput) | (Without<...> & CycleSnapshotCreateInput)'
    [96mtests/analyticsApi.test.ts[0m:[93m1220[0m:[93m11[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m1220[0m           userId: testUserId,
    [7m    [0m [91m          ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m1724[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m1724[0m             userId: testUserId,
    [7m    [0m [91m            ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m2068[0m:[93m9[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m2068[0m         userId: testUserId,
    [7m    [0m [91m        ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'
    [96mtests/analyticsApi.test.ts[0m:[93m2211[0m:[93m13[0m - [91merror[0m[90m TS2353: [0mObject literal may only specify known properties, and 'userId' does not exist in type 'Without<BattleCreateInput, BattleUncheckedCreateInput> & BattleUncheckedCreateInput'.

    [7m2211[0m             userId: testUserId,
    [7m    [0m [91m            ~~~~~~[0m

      [96mnode_modules/.prisma/client/index.d.ts[0m:[93m11734[0m:[93m5[0m
        [7m11734[0m     data: XOR<BattleCreateInput, BattleUncheckedCreateInput>
        [7m     [0m [96m    ~~~~[0m
        The expected type comes from property 'data' which is declared here on type '{ select?: BattleSelect<DefaultArgs> | null | undefined; include?: BattleInclude<DefaultArgs> | null | undefined; data: (Without<...> & BattleUncheckedCreateInput) | (Without<...> & BattleCreateInput); }'


Test Suites: 83 failed, 17 passed, 100 total
Tests:       477 failed, 352 passed, 829 total
Snapshots:   0 total
Time:        152.612 s, estimated 158 s
Ran all test suites.
